[{"/Users/jmeng/Documents/code/montavistamun/.eslintrc.js":"1","/Users/jmeng/Documents/code/montavistamun/firebase-config.ts":"2","/Users/jmeng/Documents/code/montavistamun/gatsby-browser.js":"3","/Users/jmeng/Documents/code/montavistamun/gatsby-node.js":"4","/Users/jmeng/Documents/code/montavistamun/gatsby-ssr.js":"5","/Users/jmeng/Documents/code/montavistamun/jest.config.js":"6","/Users/jmeng/Documents/code/montavistamun/postcss.config.js":"7","/Users/jmeng/Documents/code/montavistamun/src/__generated__/gatsby-types.d.ts":"8","/Users/jmeng/Documents/code/montavistamun/src/components/CTA.tsx":"9","/Users/jmeng/Documents/code/montavistamun/src/components/ConfirmModal.tsx":"10","/Users/jmeng/Documents/code/montavistamun/src/components/FluidImage.ts":"11","/Users/jmeng/Documents/code/montavistamun/src/components/Header.tsx":"12","/Users/jmeng/Documents/code/montavistamun/src/components/HorizontalCard.tsx":"13","/Users/jmeng/Documents/code/montavistamun/src/components/Spinner.tsx":"14","/Users/jmeng/Documents/code/montavistamun/src/components/Transition.tsx":"15","/Users/jmeng/Documents/code/montavistamun/src/components/accounts/useRequireLogin.ts":"16","/Users/jmeng/Documents/code/montavistamun/src/components/admin/SelectAllCheckbox.tsx":"17","/Users/jmeng/Documents/code/montavistamun/src/components/admin/UserData.ts":"18","/Users/jmeng/Documents/code/montavistamun/src/components/admin/awards/SaveModal.tsx":"19","/Users/jmeng/Documents/code/montavistamun/src/components/admin/logs/LogDetailModal.tsx":"20","/Users/jmeng/Documents/code/montavistamun/src/components/admin/logs/LogItem.tsx":"21","/Users/jmeng/Documents/code/montavistamun/src/components/awards/dummyData.ts":"22","/Users/jmeng/Documents/code/montavistamun/src/components/calendar/LoadableCalendar.tsx":"23","/Users/jmeng/Documents/code/montavistamun/src/components/conferences/ConferencesData.tsx":"24","/Users/jmeng/Documents/code/montavistamun/src/components/conferences/PreferenceList.tsx":"25","/Users/jmeng/Documents/code/montavistamun/src/components/conferences/registration/PersonalInformationSection.tsx":"26","/Users/jmeng/Documents/code/montavistamun/src/components/conferences/registration/RegisterFormSection.tsx":"27","/Users/jmeng/Documents/code/montavistamun/src/components/conferences/registration/RegistrationForm.tsx":"28","/Users/jmeng/Documents/code/montavistamun/src/components/conferences/registration/index.tsx":"29","/Users/jmeng/Documents/code/montavistamun/src/components/conferences/registration/stateOptions.ts":"30","/Users/jmeng/Documents/code/montavistamun/src/components/index/About.tsx":"31","/Users/jmeng/Documents/code/montavistamun/src/components/index/Hero.tsx":"32","/Users/jmeng/Documents/code/montavistamun/src/components/index/Hero2.tsx":"33","/Users/jmeng/Documents/code/montavistamun/src/components/index/Stats.tsx":"34","/Users/jmeng/Documents/code/montavistamun/src/components/index/hero/Video.tsx":"35","/Users/jmeng/Documents/code/montavistamun/src/components/kennedy/secretariatData.tsx":"36","/Users/jmeng/Documents/code/montavistamun/src/components/layout/AdminLayout.tsx":"37","/Users/jmeng/Documents/code/montavistamun/src/components/layout/AuthLayout.tsx":"38","/Users/jmeng/Documents/code/montavistamun/src/components/layout/Footer.tsx":"39","/Users/jmeng/Documents/code/montavistamun/src/components/layout/Layout.tsx":"40","/Users/jmeng/Documents/code/montavistamun/src/components/layout/Main.tsx":"41","/Users/jmeng/Documents/code/montavistamun/src/components/layout/Navbar.tsx":"42","/Users/jmeng/Documents/code/montavistamun/src/components/layout/SEO.tsx":"43","/Users/jmeng/Documents/code/montavistamun/src/components/layout/index.ts":"44","/Users/jmeng/Documents/code/montavistamun/src/components/layout/navLinks.ts":"45","/Users/jmeng/Documents/code/montavistamun/src/components/registration/BMUNRegistrationSection.tsx":"46","/Users/jmeng/Documents/code/montavistamun/src/components/registration/FormUpload.tsx":"47","/Users/jmeng/Documents/code/montavistamun/src/components/registration/PDFForm.ts":"48","/Users/jmeng/Documents/code/montavistamun/src/components/registration/RegisterFormSection.tsx":"49","/Users/jmeng/Documents/code/montavistamun/src/components/registration/RegistrationSection.tsx":"50","/Users/jmeng/Documents/code/montavistamun/src/components/registration/SBMUNRegistrationSection.tsx":"51","/Users/jmeng/Documents/code/montavistamun/src/components/registration/bmunsections/ConfirmationSection.tsx":"52","/Users/jmeng/Documents/code/montavistamun/src/components/registration/bmunsections/DonationsSection.tsx":"53","/Users/jmeng/Documents/code/montavistamun/src/components/registration/bmunsections/WaiverFormsSection.tsx":"54","/Users/jmeng/Documents/code/montavistamun/src/components/registration/sbmunsections/ConfirmationSection.tsx":"55","/Users/jmeng/Documents/code/montavistamun/src/components/registration/sbmunsections/DonationsSection.tsx":"56","/Users/jmeng/Documents/code/montavistamun/src/components/registration/sbmunsections/WaiverFormsSection.tsx":"57","/Users/jmeng/Documents/code/montavistamun/src/components/registration/sections/ConfirmationSection.tsx":"58","/Users/jmeng/Documents/code/montavistamun/src/components/registration/sections/DonationsSection.tsx":"59","/Users/jmeng/Documents/code/montavistamun/src/components/registration/sections/EmergencyInformationSection.tsx":"60","/Users/jmeng/Documents/code/montavistamun/src/components/registration/sections/PersonalInformationSection.tsx":"61","/Users/jmeng/Documents/code/montavistamun/src/components/registration/sections/PreferencesSection.tsx":"62","/Users/jmeng/Documents/code/montavistamun/src/components/registration/sections/WaiverFormsSection.tsx":"63","/Users/jmeng/Documents/code/montavistamun/src/components/registration/smunc/ConfirmationSection.tsx":"64","/Users/jmeng/Documents/code/montavistamun/src/components/registration/smunc/DonationsSection.tsx":"65","/Users/jmeng/Documents/code/montavistamun/src/components/registration/smunc/WaiverFormsSection.tsx":"66","/Users/jmeng/Documents/code/montavistamun/src/components/registration/stateOptions.ts":"67","/Users/jmeng/Documents/code/montavistamun/src/components/secretariat/secretariatData.tsx":"68","/Users/jmeng/Documents/code/montavistamun/src/components/shared/InputGroup.tsx":"69","/Users/jmeng/Documents/code/montavistamun/src/components/shared/VerticalSteps.tsx":"70","/Users/jmeng/Documents/code/montavistamun/src/context/AuthContext.tsx":"71","/Users/jmeng/Documents/code/montavistamun/src/firebase/FirebaseStoredUserData.ts":"72","/Users/jmeng/Documents/code/montavistamun/src/firebase/useFirebase.tsx":"73","/Users/jmeng/Documents/code/montavistamun/src/pages/404.tsx":"74","/Users/jmeng/Documents/code/montavistamun/src/pages/account/create.tsx":"75","/Users/jmeng/Documents/code/montavistamun/src/pages/account/email-action/confirm-email-change.tsx":"76","/Users/jmeng/Documents/code/montavistamun/src/pages/account/email-action/handle.tsx":"77","/Users/jmeng/Documents/code/montavistamun/src/pages/account/email-action/recover-email.tsx":"78","/Users/jmeng/Documents/code/montavistamun/src/pages/account/email-action/reset-password.tsx":"79","/Users/jmeng/Documents/code/montavistamun/src/pages/account/email-action/verify-email.tsx":"80","/Users/jmeng/Documents/code/montavistamun/src/pages/account/index.tsx":"81","/Users/jmeng/Documents/code/montavistamun/src/pages/account/login.tsx":"82","/Users/jmeng/Documents/code/montavistamun/src/pages/account/logout.tsx":"83","/Users/jmeng/Documents/code/montavistamun/src/pages/account/recover.tsx":"84","/Users/jmeng/Documents/code/montavistamun/src/pages/account/send-email-verification.tsx":"85","/Users/jmeng/Documents/code/montavistamun/src/pages/account/settings.tsx":"86","/Users/jmeng/Documents/code/montavistamun/src/pages/admin/awards.tsx":"87","/Users/jmeng/Documents/code/montavistamun/src/pages/admin/conference-registration.tsx":"88","/Users/jmeng/Documents/code/montavistamun/src/pages/admin/index.tsx":"89","/Users/jmeng/Documents/code/montavistamun/src/pages/admin/logs.tsx":"90","/Users/jmeng/Documents/code/montavistamun/src/pages/admin/member-statistics.tsx":"91","/Users/jmeng/Documents/code/montavistamun/src/pages/admin/members.tsx":"92","/Users/jmeng/Documents/code/montavistamun/src/pages/admin/synchronize-claims.tsx":"93","/Users/jmeng/Documents/code/montavistamun/src/pages/awards.tsx":"94","/Users/jmeng/Documents/code/montavistamun/src/pages/calendar.tsx":"95","/Users/jmeng/Documents/code/montavistamun/src/pages/conferences/bmun/register.tsx":"96","/Users/jmeng/Documents/code/montavistamun/src/pages/conferences/registration2.tsx":"97","/Users/jmeng/Documents/code/montavistamun/src/pages/conferences/sbmun/register.tsx":"98","/Users/jmeng/Documents/code/montavistamun/src/pages/conferences/scvmun/register.tsx":"99","/Users/jmeng/Documents/code/montavistamun/src/pages/conferences/sfmun/index.tsx":"100","/Users/jmeng/Documents/code/montavistamun/src/pages/conferences/sfmun/register.tsx":"101","/Users/jmeng/Documents/code/montavistamun/src/pages/conferences/smunc/register.tsx":"102","/Users/jmeng/Documents/code/montavistamun/src/pages/conferences.tsx":"103","/Users/jmeng/Documents/code/montavistamun/src/pages/dashboard.tsx":"104","/Users/jmeng/Documents/code/montavistamun/src/pages/home-old.tsx":"105","/Users/jmeng/Documents/code/montavistamun/src/pages/index.tsx":"106","/Users/jmeng/Documents/code/montavistamun/src/pages/kennedy.tsx":"107","/Users/jmeng/Documents/code/montavistamun/src/pages/resources.tsx":"108","/Users/jmeng/Documents/code/montavistamun/src/pages/secretariat.tsx":"109","/Users/jmeng/Documents/code/montavistamun/src/typings/heap.d.ts":"110","/Users/jmeng/Documents/code/montavistamun/src/typings/sysend.d.ts":"111","/Users/jmeng/Documents/code/montavistamun/src/utils/schoolYearUtils.test.tsx":"112","/Users/jmeng/Documents/code/montavistamun/src/utils/schoolYearUtils.tsx":"113","/Users/jmeng/Documents/code/montavistamun/tests/firestore-rules/admin-log.test.ts":"114","/Users/jmeng/Documents/code/montavistamun/tests/firestore-rules/awards.test.ts":"115","/Users/jmeng/Documents/code/montavistamun/tests/firestore-rules/helpers.ts":"116","/Users/jmeng/Documents/code/montavistamun/tests/firestore-rules/keys.test.ts":"117","/Users/jmeng/Documents/code/montavistamun/tests/firestore-rules/registration.test.ts":"118","/Users/jmeng/Documents/code/montavistamun/tests/firestore-rules/users.test.ts":"119"},{"size":1545,"mtime":1614015545046,"results":"120","hashOfConfig":"121"},{"size":383,"mtime":1614015545047,"results":"122","hashOfConfig":"121"},{"size":318,"mtime":1614015545048,"results":"123","hashOfConfig":"121"},{"size":4710,"mtime":1614018383939,"results":"124","hashOfConfig":"121"},{"size":335,"mtime":1614015545049,"results":"125","hashOfConfig":"121"},{"size":68,"mtime":1614015545049,"results":"126","hashOfConfig":"121"},{"size":539,"mtime":1614015545065,"results":"127","hashOfConfig":"121"},{"size":106827,"mtime":1614138787787,"results":"128","hashOfConfig":"121"},{"size":1350,"mtime":1614138787788,"results":"129","hashOfConfig":"121"},{"size":4078,"mtime":1614138937617,"results":"130","hashOfConfig":"121"},{"size":131,"mtime":1614015545067,"results":"131","hashOfConfig":"121"},{"size":1153,"mtime":1614015545068,"results":"132","hashOfConfig":"121"},{"size":4078,"mtime":1614138787789,"results":"133","hashOfConfig":"121"},{"size":644,"mtime":1614015545068,"results":"134","hashOfConfig":"121"},{"size":3364,"mtime":1614015545068,"results":"135","hashOfConfig":"121"},{"size":908,"mtime":1614015545068,"results":"136","hashOfConfig":"121"},{"size":11833,"mtime":1614138787790,"results":"137","hashOfConfig":"121"},{"size":381,"mtime":1614015545069,"results":"138","hashOfConfig":"121"},{"size":9893,"mtime":1614138787790,"results":"139","hashOfConfig":"121"},{"size":8961,"mtime":1614138787791,"results":"140","hashOfConfig":"121"},{"size":3794,"mtime":1614063935506,"results":"141","hashOfConfig":"121"},{"size":2320,"mtime":1614015545069,"results":"142","hashOfConfig":"121"},{"size":1539,"mtime":1614015545070,"results":"143","hashOfConfig":"121"},{"size":4354,"mtime":1614138787792,"results":"144","hashOfConfig":"121"},{"size":1091,"mtime":1614015545070,"results":"145","hashOfConfig":"121"},{"size":6709,"mtime":1614015545070,"results":"146","hashOfConfig":"121"},{"size":8107,"mtime":1614138787792,"results":"147","hashOfConfig":"121"},{"size":130,"mtime":1614015545071,"results":"148","hashOfConfig":"121"},{"size":81,"mtime":1614015545071,"results":"149","hashOfConfig":"121"},{"size":1941,"mtime":1614015545071,"results":"150","hashOfConfig":"121"},{"size":11101,"mtime":1614015545071,"results":"151","hashOfConfig":"121"},{"size":3402,"mtime":1614138787793,"results":"152","hashOfConfig":"121"},{"size":4508,"mtime":1614138787794,"results":"153","hashOfConfig":"121"},{"size":1439,"mtime":1614015545072,"results":"154","hashOfConfig":"121"},{"size":1921,"mtime":1614138787794,"results":"155","hashOfConfig":"121"},{"size":2262,"mtime":1614015545073,"results":"156","hashOfConfig":"121"},{"size":11403,"mtime":1614064199771,"results":"157","hashOfConfig":"121"},{"size":1192,"mtime":1614015545073,"results":"158","hashOfConfig":"121"},{"size":3849,"mtime":1614015545073,"results":"159","hashOfConfig":"121"},{"size":2660,"mtime":1614015545073,"results":"160","hashOfConfig":"121"},{"size":509,"mtime":1614015545074,"results":"161","hashOfConfig":"121"},{"size":13116,"mtime":1614138787795,"results":"162","hashOfConfig":"121"},{"size":2738,"mtime":1614015545074,"results":"163","hashOfConfig":"121"},{"size":341,"mtime":1614015545074,"results":"164","hashOfConfig":"121"},{"size":80,"mtime":1614015545074,"results":"165","hashOfConfig":"121"},{"size":11648,"mtime":1614138787796,"results":"166","hashOfConfig":"121"},{"size":7849,"mtime":1614015545075,"results":"167","hashOfConfig":"121"},{"size":34104,"mtime":1614015545075,"results":"168","hashOfConfig":"121"},{"size":8179,"mtime":1614138787796,"results":"169","hashOfConfig":"121"},{"size":13133,"mtime":1614138787797,"results":"170","hashOfConfig":"121"},{"size":11661,"mtime":1614138787798,"results":"171","hashOfConfig":"121"},{"size":2469,"mtime":1614138787799,"results":"172","hashOfConfig":"121"},{"size":8602,"mtime":1614138787799,"results":"173","hashOfConfig":"121"},{"size":8226,"mtime":1614138787800,"results":"174","hashOfConfig":"121"},{"size":2469,"mtime":1614138787801,"results":"175","hashOfConfig":"121"},{"size":8595,"mtime":1614138787801,"results":"176","hashOfConfig":"121"},{"size":13366,"mtime":1614138787802,"results":"177","hashOfConfig":"121"},{"size":2470,"mtime":1614138787803,"results":"178","hashOfConfig":"121"},{"size":8665,"mtime":1614138787803,"results":"179","hashOfConfig":"121"},{"size":12148,"mtime":1614015545077,"results":"180","hashOfConfig":"121"},{"size":6712,"mtime":1614015545077,"results":"181","hashOfConfig":"121"},{"size":6179,"mtime":1614138787804,"results":"182","hashOfConfig":"121"},{"size":8238,"mtime":1614138787805,"results":"183","hashOfConfig":"121"},{"size":2196,"mtime":1614138787805,"results":"184","hashOfConfig":"121"},{"size":8068,"mtime":1614138787806,"results":"185","hashOfConfig":"121"},{"size":7824,"mtime":1614138787806,"results":"186","hashOfConfig":"121"},{"size":1941,"mtime":1614015545079,"results":"187","hashOfConfig":"121"},{"size":19407,"mtime":1614015545079,"results":"188","hashOfConfig":"121"},{"size":4620,"mtime":1614138787807,"results":"189","hashOfConfig":"121"},{"size":4095,"mtime":1614015545079,"results":"190","hashOfConfig":"121"},{"size":2222,"mtime":1614015545080,"results":"191","hashOfConfig":"121"},{"size":241,"mtime":1614015545080,"results":"192","hashOfConfig":"121"},{"size":1210,"mtime":1614050274792,"results":"193","hashOfConfig":"121"},{"size":556,"mtime":1614015545225,"results":"194","hashOfConfig":"121"},{"size":20721,"mtime":1614138787808,"results":"195","hashOfConfig":"121"},{"size":8065,"mtime":1614138787809,"results":"196","hashOfConfig":"121"},{"size":1572,"mtime":1614015545226,"results":"197","hashOfConfig":"121"},{"size":6125,"mtime":1614138787809,"results":"198","hashOfConfig":"121"},{"size":10566,"mtime":1614138787810,"results":"199","hashOfConfig":"121"},{"size":3683,"mtime":1614015545227,"results":"200","hashOfConfig":"121"},{"size":494,"mtime":1614015545227,"results":"201","hashOfConfig":"121"},{"size":10784,"mtime":1614138787811,"results":"202","hashOfConfig":"121"},{"size":1194,"mtime":1614015545228,"results":"203","hashOfConfig":"121"},{"size":6726,"mtime":1614138787811,"results":"204","hashOfConfig":"121"},{"size":4572,"mtime":1614138787812,"results":"205","hashOfConfig":"121"},{"size":39991,"mtime":1614138787813,"results":"206","hashOfConfig":"121"},{"size":15497,"mtime":1614138787813,"results":"207","hashOfConfig":"121"},{"size":23984,"mtime":1614138787814,"results":"208","hashOfConfig":"121"},{"size":944,"mtime":1614138885862,"results":"209","hashOfConfig":"121"},{"size":6518,"mtime":1614064249187,"results":"210","hashOfConfig":"121"},{"size":7609,"mtime":1614138880429,"results":"211","hashOfConfig":"121"},{"size":24860,"mtime":1614138787815,"results":"212","hashOfConfig":"121"},{"size":3495,"mtime":1614138787815,"results":"213","hashOfConfig":"121"},{"size":6221,"mtime":1614015545230,"results":"214","hashOfConfig":"121"},{"size":1224,"mtime":1614015545230,"results":"215","hashOfConfig":"121"},{"size":1057,"mtime":1614020014121,"results":"216","hashOfConfig":"121"},{"size":984,"mtime":1614015545231,"results":"217","hashOfConfig":"121"},{"size":990,"mtime":1614138787816,"results":"218","hashOfConfig":"121"},{"size":2087,"mtime":1614015545231,"results":"219","hashOfConfig":"121"},{"size":1077,"mtime":1614015545232,"results":"220","hashOfConfig":"121"},{"size":14739,"mtime":1614138787817,"results":"221","hashOfConfig":"121"},{"size":13925,"mtime":1614138787818,"results":"222","hashOfConfig":"121"},{"size":3474,"mtime":1614015545230,"results":"223","hashOfConfig":"121"},{"size":22673,"mtime":1614138870273,"results":"224","hashOfConfig":"121"},{"size":585,"mtime":1614015545232,"results":"225","hashOfConfig":"121"},{"size":608,"mtime":1614015545233,"results":"226","hashOfConfig":"121"},{"size":9869,"mtime":1614138787819,"results":"227","hashOfConfig":"121"},{"size":3399,"mtime":1614015545233,"results":"228","hashOfConfig":"121"},{"size":4891,"mtime":1614138787820,"results":"229","hashOfConfig":"121"},{"size":173,"mtime":1614015545233,"results":"230","hashOfConfig":"121"},{"size":299,"mtime":1614015545234,"results":"231","hashOfConfig":"121"},{"size":3656,"mtime":1614015545234,"results":"232","hashOfConfig":"121"},{"size":2731,"mtime":1614015545234,"results":"233","hashOfConfig":"121"},{"size":1633,"mtime":1614015545258,"results":"234","hashOfConfig":"121"},{"size":1177,"mtime":1614015545258,"results":"235","hashOfConfig":"121"},{"size":3180,"mtime":1614015545258,"results":"236","hashOfConfig":"121"},{"size":1614,"mtime":1614015545258,"results":"237","hashOfConfig":"121"},{"size":2713,"mtime":1614015545259,"results":"238","hashOfConfig":"121"},{"size":3408,"mtime":1614015545259,"results":"239","hashOfConfig":"121"},{"filePath":"240","messages":"241","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"175xt4o",{"filePath":"242","messages":"243","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"244","messages":"245","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"246"},{"filePath":"247","messages":"248","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"249","messages":"250","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"251"},{"filePath":"252","messages":"253","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"254","messages":"255","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"256"},{"filePath":"257","messages":"258","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"259","messages":"260","errorCount":0,"warningCount":14,"fixableErrorCount":0,"fixableWarningCount":0,"source":"261"},{"filePath":"262","messages":"263","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"264","messages":"265","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"266","messages":"267","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"268","messages":"269","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"270","messages":"271","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"272"},{"filePath":"273","messages":"274","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"275"},{"filePath":"276","messages":"277","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"278","messages":"279","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"280"},{"filePath":"281","messages":"282","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"283","messages":"284","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"285"},{"filePath":"286","messages":"287","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"288"},{"filePath":"289","messages":"290","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"291"},{"filePath":"292","messages":"293","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"294","messages":"295","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"296"},{"filePath":"297","messages":"298","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"299","messages":"300","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"301"},{"filePath":"302","messages":"303","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"304"},{"filePath":"305","messages":"306","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"307"},{"filePath":"308","messages":"309","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"310"},{"filePath":"311","messages":"312","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"313","messages":"314","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"315","messages":"316","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"317","messages":"318","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"319","messages":"320","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"321","messages":"322","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"323","messages":"324","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"325"},{"filePath":"326","messages":"327","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"328","messages":"329","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"330"},{"filePath":"331","messages":"332","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"333","messages":"334","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"335","messages":"336","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"337"},{"filePath":"338","messages":"339","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"340","messages":"341","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"342"},{"filePath":"343","messages":"344","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"345","messages":"346","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"347","messages":"348","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"349","messages":"350","errorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":"351"},{"filePath":"352","messages":"353","errorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"354"},{"filePath":"355","messages":"356","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"357","messages":"358","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"359"},{"filePath":"360","messages":"361","errorCount":0,"warningCount":13,"fixableErrorCount":0,"fixableWarningCount":0,"source":"362"},{"filePath":"363","messages":"364","errorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":"365"},{"filePath":"366","messages":"367","errorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"368"},{"filePath":"369","messages":"370","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"371"},{"filePath":"372","messages":"373","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"374"},{"filePath":"375","messages":"376","errorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"368"},{"filePath":"377","messages":"378","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"379"},{"filePath":"380","messages":"381","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"382"},{"filePath":"383","messages":"384","errorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"385"},{"filePath":"386","messages":"387","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"388"},{"filePath":"389","messages":"390","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"391"},{"filePath":"392","messages":"393","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"394"},{"filePath":"395","messages":"396","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"397"},{"filePath":"398","messages":"399","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"400"},{"filePath":"401","messages":"402","errorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"403"},{"filePath":"404","messages":"405","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"406"},{"filePath":"407","messages":"408","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"409"},{"filePath":"410","messages":"411","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"412","messages":"413","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"414","messages":"415","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"416","messages":"417","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"418"},{"filePath":"419","messages":"420","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"421"},{"filePath":"422","messages":"423","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"424","messages":"425","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"426"},{"filePath":"427","messages":"428","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"429","messages":"430","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"431"},{"filePath":"432","messages":"433","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"434","messages":"435","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"436"},{"filePath":"437","messages":"438","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"439","messages":"440","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"441","messages":"442","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"443","messages":"444","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"445","messages":"446","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"447","messages":"448","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"449","messages":"450","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"451","messages":"452","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"453"},{"filePath":"454","messages":"455","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"456"},{"filePath":"457","messages":"458","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"459","messages":"460","errorCount":0,"warningCount":14,"fixableErrorCount":0,"fixableWarningCount":0,"source":"461"},{"filePath":"462","messages":"463","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"464","messages":"465","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"466"},{"filePath":"467","messages":"468","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"469"},{"filePath":"470","messages":"471","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"472"},{"filePath":"473","messages":"474","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"475"},{"filePath":"476","messages":"477","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"478","messages":"479","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"480","messages":"481","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"482","messages":"483","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"484","messages":"485","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"486","messages":"487","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"488","messages":"489","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"490","messages":"491","errorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"492"},{"filePath":"493","messages":"494","errorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"495"},{"filePath":"496","messages":"497","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"498","messages":"499","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"500","messages":"501","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"502","messages":"503","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"504","messages":"505","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"506","messages":"507","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"508","messages":"509","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"510","messages":"511","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"512"},{"filePath":"513","messages":"514","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"515"},{"filePath":"516","messages":"517","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"518","messages":"519","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"520","messages":"521","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"522","messages":"523","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"524","messages":"525","errorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"526"},{"filePath":"527","messages":"528","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"529","messages":"530","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"531","messages":"532","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/jmeng/Documents/code/montavistamun/.eslintrc.js",[],"/Users/jmeng/Documents/code/montavistamun/firebase-config.ts",[],"/Users/jmeng/Documents/code/montavistamun/gatsby-browser.js",["533","534"],"import \"./src/css/style.css\";\nimport { AuthProvider } from \"./src/context/AuthContext\";\nimport React from \"react\";\n\n/**\n *\n * @param element ReactElement\n * @returns ReactElement\n */\n// eslint-disable-next-line\n// @ts-ignore\nexport const wrapRootElement = ({ element }) => (\n\t<AuthProvider>{element}</AuthProvider>\n);\n","/Users/jmeng/Documents/code/montavistamun/gatsby-node.js",[],"/Users/jmeng/Documents/code/montavistamun/gatsby-ssr.js",["535","536","537"],"import \"./src/css/style.css\";\nimport { AuthProvider } from \"./src/context/AuthContext\";\nimport React, { useState } from \"react\";\n\n/**\n *\n * @param element ReactElement\n * @returns ReactElement\n */\n// eslint-disable-next-line react/prop-types\nexport const wrapRootElement = ({ element }) => (\n\t<AuthProvider>{element}</AuthProvider>\n);\n","/Users/jmeng/Documents/code/montavistamun/jest.config.js",[],"/Users/jmeng/Documents/code/montavistamun/postcss.config.js",["538"],"const precss = require(\"precss\");\nconst postcssImport = require(\"postcss-import\");\nconst tailwindcss = require(\"tailwindcss\");\nconst autoprefixer = require(\"autoprefixer\");\nconst cssnano = require(\"cssnano\");\nconst tailwindConfig = require(\"./tailwind.config.js\");\nconst stripComments = require(\"postcss-strip-inline-comments\");\n\nmodule.exports = () => ({\n\tparser: \"postcss-scss\",\n\n\tplugins: [\n\t\tpostcssImport,\n\t\tprecss,\n\t\tautoprefixer,\n\t\ttailwindcss(tailwindConfig),\n\t\t...(process.env.NODE_ENV === `production` ? [cssnano] : []),\n\t],\n});\n","/Users/jmeng/Documents/code/montavistamun/src/__generated__/gatsby-types.d.ts",[],"/Users/jmeng/Documents/code/montavistamun/src/components/CTA.tsx",["539","540","541","542","543","544","545","546","547","548","549","550","551","552"],"import { Link } from \"gatsby\";\nimport React, { useState } from \"react\";\nexport default function CTA(): React.ReactElement {\n\tconst [error, setError] = useState(\"\");\n\tconst [submitting, setSubmitting] = useState(false);\n\tconst [success, setSuccess] = useState(false);\n\tconst [firstName, setFirstName] = useState(\"\");\n\tconst [lastName, setLastName] = useState(\"\");\n\tconst [email, setEmail] = useState(\"\");\n\tconst [grade, setGrade] = useState(\"\");\n\n\treturn (\n\t\t<div className=\"bg-gray-50\">\n\t\t\t<div className=\"max-w-screen-xl mx-auto py-12 px-4 sm:px-6 lg:py-16 lg:px-8 lg:flex lg:items-center lg:justify-between\">\n\t\t\t\t<h2 className=\"text-3xl leading-9 font-extrabold tracking-tight text-gray-900 sm:text-4xl sm:leading-10\">\n\t\t\t\t\tReady to start your MUN journey?\n\t\t\t\t\t<br />\n\t\t\t\t\t<span className=\"text-indigo-600\">\n\t\t\t\t\t\tJoin MV Model UN Today\n\t\t\t\t\t</span>\n\t\t\t\t</h2>\n\t\t\t\t<div className=\"mt-8 flex lg:flex-shrink-0 lg:mt-0\">\n\t\t\t\t\t<div className=\"inline-flex rounded-md shadow\">\n\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\tto=\"/account/create\"\n\t\t\t\t\t\t\tclassName=\"inline-flex items-center justify-center px-5 py-3 border border-transparent text-base leading-6 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:ring transition duration-150 ease-in-out\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tJoin Today\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","/Users/jmeng/Documents/code/montavistamun/src/components/ConfirmModal.tsx",["553"],"/Users/jmeng/Documents/code/montavistamun/src/components/FluidImage.ts",[],"/Users/jmeng/Documents/code/montavistamun/src/components/Header.tsx",[],"/Users/jmeng/Documents/code/montavistamun/src/components/HorizontalCard.tsx",[],"/Users/jmeng/Documents/code/montavistamun/src/components/Spinner.tsx",["554"],"import React from \"react\";\nexport default function Spinner({ className }: { className?: string }) {\n\treturn (\n\t\t<svg\n\t\t\tclassName={\n\t\t\t\t\"animate-spin -ml-1 mr-3 text-white mx-auto\" +\n\t\t\t\t(className || \"h-10 w-10\")\n\t\t\t}\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\tfill=\"none\"\n\t\t\tviewBox=\"0 0 24 24\"\n\t\t>\n\t\t\t<circle\n\t\t\t\tclassName=\"opacity-25\"\n\t\t\t\tcx=\"12\"\n\t\t\t\tcy=\"12\"\n\t\t\t\tr=\"10\"\n\t\t\t\tstroke=\"currentColor\"\n\t\t\t\tstrokeWidth=\"4\"\n\t\t\t></circle>{\" \"}\n\t\t\t<path\n\t\t\t\tclassName=\"opacity-75\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t\td=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n\t\t\t></path>\n\t\t</svg>\n\t);\n}\n","/Users/jmeng/Documents/code/montavistamun/src/components/Transition.tsx",["555"],"// Based on https://gist.github.com/adamwathan/3b9f3ad1a285a2d1b482769aeb862467\n\nimport React, { useContext, useEffect, useRef } from \"react\";\nimport { CSSTransition as ReactCSSTransition } from \"react-transition-group\";\n\ntype TransitionContextProps = {\n\tparent: {\n\t\tshow: boolean;\n\t\tisInitialRender: boolean;\n\t\tappear?: boolean;\n\t};\n};\n\nconst TransitionContext = React.createContext<Partial<TransitionContextProps>>({\n\tparent: {\n\t\tshow: false,\n\t\tisInitialRender: true,\n\t},\n});\n\nfunction useIsInitialRender() {\n\tconst isInitialRender = useRef(true);\n\tuseEffect(() => {\n\t\tisInitialRender.current = false;\n\t}, []);\n\treturn isInitialRender.current;\n}\n\ninterface TransitionProps {\n\tshow?: boolean;\n\tenter?: string;\n\tenterFrom?: string;\n\tenterTo?: string;\n\tleave?: string;\n\tleaveFrom?: string;\n\tleaveTo?: string;\n\tappear?: boolean;\n\tchildren: React.ReactNode;\n}\n\nfunction CSSTransition({\n\tshow,\n\tenter = \"\",\n\tenterFrom = \"\",\n\tenterTo = \"\",\n\tleave = \"\",\n\tleaveFrom = \"\",\n\tleaveTo = \"\",\n\tappear,\n\tchildren,\n}: TransitionProps) {\n\tconst enterClasses = enter.split(\" \").filter((s) => s.length);\n\tconst enterFromClasses = enterFrom.split(\" \").filter((s) => s.length);\n\tconst enterToClasses = enterTo.split(\" \").filter((s) => s.length);\n\tconst leaveClasses = leave.split(\" \").filter((s) => s.length);\n\tconst leaveFromClasses = leaveFrom.split(\" \").filter((s) => s.length);\n\tconst leaveToClasses = leaveTo.split(\" \").filter((s) => s.length);\n\n\tfunction addClasses(node: HTMLElement, classes: string[]): void {\n\t\tif (classes.length) {\n\t\t\tnode.classList.add(...classes);\n\t\t}\n\t}\n\n\tfunction removeClasses(node: HTMLElement, classes: string[]): void {\n\t\tif (classes.length) {\n\t\t\tnode.classList.remove(...classes);\n\t\t}\n\t}\n\n\treturn (\n\t\t<ReactCSSTransition\n\t\t\tappear={appear}\n\t\t\tunmountOnExit\n\t\t\tin={show}\n\t\t\ttimeout={(undefined as unknown) as any}\n\t\t\taddEndListener={(node: HTMLElement, done) => {\n\t\t\t\tnode.addEventListener(\"transitionend\", done, false);\n\t\t\t}}\n\t\t\tonEnter={(node: HTMLElement) => {\n\t\t\t\taddClasses(node, [...enterClasses, ...enterFromClasses]);\n\t\t\t}}\n\t\t\tonEntering={(node: HTMLElement) => {\n\t\t\t\tremoveClasses(node, enterFromClasses);\n\t\t\t\taddClasses(node, enterToClasses);\n\t\t\t}}\n\t\t\tonEntered={(node: HTMLElement) => {\n\t\t\t\tremoveClasses(node, [...enterToClasses, ...enterClasses]);\n\t\t\t}}\n\t\t\tonExit={(node: HTMLElement) => {\n\t\t\t\taddClasses(node, [...leaveClasses, ...leaveFromClasses]);\n\t\t\t}}\n\t\t\tonExiting={(node: HTMLElement) => {\n\t\t\t\tremoveClasses(node, leaveFromClasses);\n\t\t\t\taddClasses(node, leaveToClasses);\n\t\t\t}}\n\t\t\tonExited={(node: HTMLElement) => {\n\t\t\t\tremoveClasses(node, [...leaveToClasses, ...leaveClasses]);\n\t\t\t}}\n\t\t>\n\t\t\t{children}\n\t\t</ReactCSSTransition>\n\t);\n}\n\nfunction Transition({\n\tshow,\n\tappear,\n\t...rest\n}: TransitionProps): React.ReactElement {\n\tconst { parent } = useContext(TransitionContext);\n\tconst isInitialRender = useIsInitialRender();\n\tconst isChild = show === undefined;\n\n\tif (isChild) {\n\t\treturn (\n\t\t\t<CSSTransition\n\t\t\t\tappear={\n\t\t\t\t\tparent ? parent.appear || !parent.isInitialRender : false\n\t\t\t\t}\n\t\t\t\tshow={parent?.show ? parent.show : false}\n\t\t\t\t{...rest}\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn (\n\t\t<TransitionContext.Provider\n\t\t\tvalue={{\n\t\t\t\tparent: {\n\t\t\t\t\tshow: Boolean(show),\n\t\t\t\t\tisInitialRender,\n\t\t\t\t\tappear,\n\t\t\t\t},\n\t\t\t}}\n\t\t>\n\t\t\t<CSSTransition appear={appear} show={show} {...rest} />\n\t\t</TransitionContext.Provider>\n\t);\n}\n\nexport default Transition;\n","/Users/jmeng/Documents/code/montavistamun/src/components/accounts/useRequireLogin.ts",[],"/Users/jmeng/Documents/code/montavistamun/src/components/admin/SelectAllCheckbox.tsx",["556","557"],"import * as Icons from \"heroicons-react\";\nimport React, { useState } from \"react\";\nimport Transition from \"../Transition\";\nimport UserData from \"./UserData\";\n\nexport default function SelectAllCheckbox({\n\tselectedUsers,\n\tsetSelectedUsers,\n\tsetLastActionID,\n\tusers,\n\tsetUsers,\n}: {\n\tselectedUsers: Set<string>;\n\tsetSelectedUsers: React.Dispatch<Set<string>>;\n\tsetLastActionID: React.Dispatch<string>;\n\tusers: {\n\t\tid: string;\n\t\tdata: UserData;\n\t}[];\n\tsetUsers: React.Dispatch<\n\t\t{\n\t\t\tid: string;\n\t\t\tdata: UserData;\n\t\t}[]\n\t>;\n}) {\n\tconst [selectAllDropdownOpen, setSelectAllDropdownOpen] = useState(false);\n\tconst [emails, setEmails] = useState(\"\");\n\tconst [errors, setErrors] = React.useState<[string, string][]>([]);\n\tconst parsedEmails = emails\n\t\t.split(\",\")\n\t\t.flatMap((e) => e.split(\"\\n\"))\n\t\t.map((e) => e.trim())\n\t\t.filter((e) => e);\n\tconst [listModalOpen, setListModalOpen] = useState(false);\n\tconst selectDropdownRef = React.useRef(null);\n\n\tReact.useEffect(() => {\n\t\t// https://stackoverflow.com/a/42234988, https://stackoverflow.com/a/43851475\n\t\tconst handleClickOutside = (e: Event) => {\n\t\t\tif (\n\t\t\t\tselectDropdownRef.current &&\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t\t\t// @ts-ignore\n\t\t\t\t!selectDropdownRef.current?.contains(e.target as Node)\n\t\t\t) {\n\t\t\t\tsetSelectAllDropdownOpen(false);\n\t\t\t}\n\t\t};\n\t\tdocument.addEventListener(\"mousedown\", handleClickOutside);\n\t\treturn () =>\n\t\t\tdocument.removeEventListener(\"mousedown\", handleClickOutside);\n\t}, [selectDropdownRef]);\n\n\tconst allUsers = users.map((u) => u.id);\n\n\treturn (\n\t\t<span className=\"z-0 inline-flex shadow-sm rounded-md\">\n\t\t\t<button\n\t\t\t\ttype=\"button\"\n\t\t\t\tclassName=\"inline-flex items-center px-2 py-1 rounded-l-md border border-gray-300 bg-white text-sm leading-5 font-medium text-gray-700 hover:text-gray-500 focus:z-10 focus:outline-none focus:border-blue-300 focus:ring-blue-500 active:bg-gray-100 active:text-gray-700 transition ease-in-out duration-150\"\n\t\t\t\tonClick={() =>\n\t\t\t\t\tselectedUsers.size > 0\n\t\t\t\t\t\t? setSelectedUsers(new Set())\n\t\t\t\t\t\t: setSelectedUsers(new Set(allUsers))\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tclassName={\n\t\t\t\t\t\t\"form-checkbox h-6 w-6 \" +\n\t\t\t\t\t\t(selectedUsers.size > 0 &&\n\t\t\t\t\t\tselectedUsers.size < users.length\n\t\t\t\t\t\t\t? \"indeterminate\"\n\t\t\t\t\t\t\t: \"\")\n\t\t\t\t\t}\n\t\t\t\t\tchecked={selectedUsers.size > 0}\n\t\t\t\t\tonChange={() => {\n\t\t\t\t\t\tif (selectedUsers.size > 0) {\n\t\t\t\t\t\t\tsetSelectedUsers(new Set());\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsetSelectedUsers(new Set(allUsers));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsetLastActionID(\"\");\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</button>\n\t\t\t<span className=\"-ml-px block\" ref={selectDropdownRef}>\n\t\t\t\t<button\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tclassName=\"inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm leading-5 font-medium text-gray-500 hover:text-gray-400 focus:z-10 focus:outline-none focus:border-blue-300 focus:ring-blue-500 active:bg-gray-100 active:text-gray-500 transition ease-in-out duration-150 h-full\"\n\t\t\t\t\taria-label=\"Expand\"\n\t\t\t\t\tonClick={() => setSelectAllDropdownOpen((old) => !old)}\n\t\t\t\t>\n\t\t\t\t\t<Icons.ChevronDown className=\"h-5 w-5\" />\n\t\t\t\t</button>\n\t\t\t\t<Transition\n\t\t\t\t\tshow={selectAllDropdownOpen}\n\t\t\t\t\tenter=\"transition ease-out duration-100\"\n\t\t\t\t\tenterFrom=\"transform opacity-0 scale-95\"\n\t\t\t\t\tenterTo=\"transform opacity-100 scale-100\"\n\t\t\t\t\tleave=\"transition ease-in duration-75\"\n\t\t\t\t\tleaveFrom=\"transform opacity-100 scale-100\"\n\t\t\t\t\tleaveTo=\"transform opacity-0 scale-95\"\n\t\t\t\t>\n\t\t\t\t\t<div className=\"origin-top-right absolute left-0 mt-2 -mr-1 w-56 rounded-md shadow-lg normal-case tracking-normal\">\n\t\t\t\t\t\t<div className=\"rounded-md bg-white shadow-xs\">\n\t\t\t\t\t\t\t<div className=\"px-4 pt-3 pb-1\">\n\t\t\t\t\t\t\t\t<p className=\"text-xs leading-5\">\n\t\t\t\t\t\t\t\t\tSelect users that are\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"py-1\">\n\t\t\t\t\t\t\t\t{[\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tname: \"Admin\",\n\t\t\t\t\t\t\t\t\t\tonClick: () =>\n\t\t\t\t\t\t\t\t\t\t\tsetSelectedUsers(\n\t\t\t\t\t\t\t\t\t\t\t\tnew Set(\n\t\t\t\t\t\t\t\t\t\t\t\t\tusers\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.map((user) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuser.data.admin\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? user.id\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.filter((user) => user)\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tname: \"Verified\",\n\t\t\t\t\t\t\t\t\t\tonClick: () =>\n\t\t\t\t\t\t\t\t\t\t\tsetSelectedUsers(\n\t\t\t\t\t\t\t\t\t\t\t\tnew Set(\n\t\t\t\t\t\t\t\t\t\t\t\t\tusers\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.map((user) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuser.data.verified\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? user.id\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.filter((user) => user)\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tname: \"In a List\",\n\t\t\t\t\t\t\t\t\t\tonClick: () => setListModalOpen(true),\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t].map((btn) => (\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tkey={btn.name}\n\t\t\t\t\t\t\t\t\t\tclassName=\"block px-4 py-2 text-sm leading-5 text-gray-700 hover:bg-gray-100 hover:text-gray-900 focus:outline-none focus:bg-gray-100 focus:text-gray-900 w-full text-left\"\n\t\t\t\t\t\t\t\t\t\tonClick={btn.onClick}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{btn.name}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</Transition>\n\t\t\t</span>\n\t\t\t<Transition show={listModalOpen}>\n\t\t\t\t<div className=\"fixed bottom-0 inset-x-0 px-4 pb-6 sm:inset-0 sm:p-0 sm:flex sm:items-center sm:justify-center normal-case tracking-normal\">\n\t\t\t\t\t<Transition\n\t\t\t\t\t\tenter=\"ease-out duration-300\"\n\t\t\t\t\t\tenterFrom=\"opacity-0\"\n\t\t\t\t\t\tenterTo=\"opacity-100\"\n\t\t\t\t\t\tleave=\"ease-in duration-200\"\n\t\t\t\t\t\tleaveFrom=\"opacity-100\"\n\t\t\t\t\t\tleaveTo=\"opacity-0\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"fixed inset-0 transition-opacity\">\n\t\t\t\t\t\t\t<div className=\"absolute inset-0 bg-gray-500 opacity-75\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Transition>\n\n\t\t\t\t\t<Transition\n\t\t\t\t\t\tenter=\"ease-out duration-300\"\n\t\t\t\t\t\tenterFrom=\"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95\"\n\t\t\t\t\t\tenterTo=\"opacity-100 translate-y-0 sm:scale-100\"\n\t\t\t\t\t\tleave=\"ease-in duration-200\"\n\t\t\t\t\t\tleaveFrom=\"opacity-100 translate-y-0 sm:scale-100\"\n\t\t\t\t\t\tleaveTo=\"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"bg-white rounded-lg px-4 pt-5 pb-4 overflow-hidden shadow-xl transform transition-all sm:max-w-lg sm:w-full sm:p-6\"\n\t\t\t\t\t\t\trole=\"dialog\"\n\t\t\t\t\t\t\taria-modal=\"true\"\n\t\t\t\t\t\t\taria-labelledby=\"modal-headline\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<div className=\"mt-3 text-center sm:mt-5\">\n\t\t\t\t\t\t\t\t\t<h3\n\t\t\t\t\t\t\t\t\t\tclassName=\"text-lg leading-6 font-medium text-gray-900\"\n\t\t\t\t\t\t\t\t\t\tid=\"modal-headline\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tSelect All In a List\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t<div className=\"mt-2\">\n\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm leading-5 text-gray-500\">\n\t\t\t\t\t\t\t\t\t\t\tEnter a list of emails delimited by\n\t\t\t\t\t\t\t\t\t\t\tcommas and/or line breaks.\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"mt-2\">\n\t\t\t\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\t\t\t\tvalue={emails}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\tsetEmails(e.target.value)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tplaceholder={\n\t\t\t\t\t\t\t\t\t\t\t\t\"Type or paste some emails here...\"\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\"form-textarea w-full resize-none h-64\"\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{errors.length > 0 && (\n\t\t\t\t\t\t\t\t\t\t<div className=\"mt-4\">\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm leading-5 text-red-500 font-bold\">\n\t\t\t\t\t\t\t\t\t\t\t\tNo users were selected because\n\t\t\t\t\t\t\t\t\t\t\t\tof the following error\n\t\t\t\t\t\t\t\t\t\t\t\t{errors.length != 1 && \"s\"}\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t<ul\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"list-disc mx-9 text-base text-left my-2\"\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{errors.map(\n\t\t\t\t\t\t\t\t\t\t\t\t\t([email, reason]) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li key={email}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<b>{email}</b>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{reason == \"invalid\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \" is not a valid email address.\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \" is not the email address of a user.\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t\tEither fix their emails or{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"link\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetEmails((current) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst parsed = current\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.split(\",\")\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.flatMap((e) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.split(\"\\n\")\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.map((e) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.trim()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.filter((e) => e);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetErrors([]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn parsed\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(email) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t!errors.some(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te[0] ==\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\temail\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.join(\"\\n\");\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{errors.length == 1\n\t\t\t\t\t\t\t\t\t\t\t\t\t? `remove the ${\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\terrors[0][1] ==\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"invalid\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"invalid email\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"email of the nonexistent user\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t  }`\n\t\t\t\t\t\t\t\t\t\t\t\t\t: `remove all ${\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\terrors.length\n\t\t\t\t\t\t\t\t\t\t\t\t\t  }${\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\terrors.some(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te[1] ==\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"invalid\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \" invalid emails\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t  }${\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\terrors.some(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te[1] ==\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"not_a_user\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? `${\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\terrors.some(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te[1] ==\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"invalid\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \" and\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  } emails of nonexistent users`\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t  }`}\n\t\t\t\t\t\t\t\t\t\t\t\t.\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3 sm:grid-flow-row-dense\">\n\t\t\t\t\t\t\t\t<span className=\"flex w-full rounded-md shadow-sm sm:col-start-2\">\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\tconst newErrors: [\n\t\t\t\t\t\t\t\t\t\t\t\tstring,\n\t\t\t\t\t\t\t\t\t\t\t\tstring\n\t\t\t\t\t\t\t\t\t\t\t][] = [];\n\n\t\t\t\t\t\t\t\t\t\t\tfor (\n\t\t\t\t\t\t\t\t\t\t\t\tlet i = 0;\n\t\t\t\t\t\t\t\t\t\t\t\ti < parsedEmails.length;\n\t\t\t\t\t\t\t\t\t\t\t\ti++\n\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\tconst email = parsedEmails[i];\n\t\t\t\t\t\t\t\t\t\t\t\tif (email.indexOf(\"@\") == -1) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tnewErrors.push([\n\t\t\t\t\t\t\t\t\t\t\t\t\t\temail,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"invalid\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t]);\n\t\t\t\t\t\t\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t\t\t\t\t\t\t!users.find(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(u) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tu.data.email ==\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\temail\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tnewErrors.push([\n\t\t\t\t\t\t\t\t\t\t\t\t\t\temail,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"not_a_user\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t]);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tsetErrors(newErrors);\n\t\t\t\t\t\t\t\t\t\t\tif (newErrors.length == 0) {\n\t\t\t\t\t\t\t\t\t\t\t\tsetSelectedUsers(\n\t\t\t\t\t\t\t\t\t\t\t\t\tnew Set(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tparsedEmails.map(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(email) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tusers.find(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(u) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tu.data\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.email ==\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\temail\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)?.id || \"\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\tsetListModalOpen(false);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tclassName=\"inline-flex justify-center w-full rounded-md border border-transparent px-4 py-2 bg-indigo-600 text-base leading-6 font-medium text-white shadow-sm hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:ring-indigo-500 transition ease-in-out duration-150 sm:text-sm sm:leading-5\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tSelect {parsedEmails.length} User\n\t\t\t\t\t\t\t\t\t\t{parsedEmails.length !== 1 && \"s\"}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span className=\"mt-3 flex w-full rounded-md shadow-sm sm:mt-0 sm:col-start-1\">\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tonClick={() => setListModalOpen(false)}\n\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"inline-flex justify-center w-full rounded-md border border-gray-300 px-4 py-2 bg-white text-base leading-6 font-medium text-gray-700 shadow-sm hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:ring-blue-500 transition ease-in-out duration-150 sm:text-sm sm:leading-5\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Transition>\n\t\t\t\t</div>\n\t\t\t</Transition>\n\t\t</span>\n\t);\n}\n","/Users/jmeng/Documents/code/montavistamun/src/components/admin/UserData.ts",[],"/Users/jmeng/Documents/code/montavistamun/src/components/admin/awards/SaveModal.tsx",["558","559","560"],"import axios from \"axios\";\nimport * as Icons from \"heroicons-react\";\nimport React, { useContext, useState } from \"react\";\nimport AuthContext from \"../../../context/AuthContext\";\nimport useFirebase from \"../../../firebase/useFirebase\";\nimport { ConferenceAwardsData } from \"../../../pages/awards\";\nimport Transition from \"../../Transition\";\nexport default function SaveModal({\n\tshow,\n\tsetShow,\n\tedits,\n\tselectedConference,\n\tconferenceData,\n\tsetData,\n\tsetSelectedConference,\n}: {\n\tshow: boolean;\n\tsetShow: (show: boolean) => void;\n\tsetData: (data: (data: any) => any) => void;\n\tedits: string[];\n\tselectedConference: string;\n\tsetSelectedConference: (newConference: string) => void;\n\tconferenceData: ConferenceAwardsData | null;\n}) {\n\tconst { user, loading } = useContext(AuthContext);\n\tconst firebase = useFirebase();\n\tconst [submitting, setSubmitting] = useState(false);\n\tconst [success, setSuccess] = useState(false);\n\treturn (\n\t\t<Transition show={show}>\n\t\t\t<div className=\"fixed z-10 inset-0 overflow-y-auto\">\n\t\t\t\t<div className=\"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0\">\n\t\t\t\t\t<Transition\n\t\t\t\t\t\tenter=\"ease-out duration-300\"\n\t\t\t\t\t\tenterFrom=\"opacity-0\"\n\t\t\t\t\t\tenterTo=\"opacity-100\"\n\t\t\t\t\t\tleave=\"ease-in duration-200\"\n\t\t\t\t\t\tleaveFrom=\"opacity-100\"\n\t\t\t\t\t\tleaveTo=\"opacity-0\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"fixed inset-0 transition-opacity\">\n\t\t\t\t\t\t\t<div className=\"absolute inset-0 bg-gray-500 opacity-75\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Transition>\n\t\t\t\t\t{/* This element is to trick the browser into centering the modal contents. */}\n\t\t\t\t\t<span className=\"hidden sm:inline-block sm:align-middle sm:h-screen\"></span>\n\t\t\t\t\t&#8203;\n\t\t\t\t\t<Transition\n\t\t\t\t\t\tenter=\"ease-out duration-300\"\n\t\t\t\t\t\tenterFrom=\"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95\"\n\t\t\t\t\t\tenterTo=\"opacity-100 translate-y-0 sm:scale-100\"\n\t\t\t\t\t\tleave=\"ease-in duration-200\"\n\t\t\t\t\t\tleaveFrom=\"opacity-100 translate-y-0 sm:scale-100\"\n\t\t\t\t\t\tleaveTo=\"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6\"\n\t\t\t\t\t\t\trole=\"dialog\"\n\t\t\t\t\t\t\taria-modal=\"true\"\n\t\t\t\t\t\t\taria-labelledby=\"modal-headline\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className=\"sm:flex sm:items-start\">\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={`mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full ${\n\t\t\t\t\t\t\t\t\t\tsuccess ? \"bg-green-100\" : \"bg-red-100\"\n\t\t\t\t\t\t\t\t\t} sm:mx-0 sm:h-10 sm:w-10`}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{success ? (\n\t\t\t\t\t\t\t\t\t\t<Icons.Check className=\"h-6 w-6 text-green-600\" />\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<Icons.Save className=\"h-6 w-6 text-purple-600\" />\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left\">\n\t\t\t\t\t\t\t\t\t<h3\n\t\t\t\t\t\t\t\t\t\tclassName=\"text-lg leading-6 font-medium text-gray-900\"\n\t\t\t\t\t\t\t\t\t\tid=\"modal-headline\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{success ? \"Success!\" : \"Save Changes?\"}\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t<div className=\"mt-2\">\n\t\t\t\t\t\t\t\t\t\t{success ? (\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm leading-5 text-gray-500\">\n\t\t\t\t\t\t\t\t\t\t\t\t<b>\n\t\t\t\t\t\t\t\t\t\t\t\t\tYour changes have been\n\t\t\t\t\t\t\t\t\t\t\t\t\tsaved.\n\t\t\t\t\t\t\t\t\t\t\t\t</b>{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t\tYou may now close this page.\n\t\t\t\t\t\t\t\t\t\t\t\tYour changes are now being\n\t\t\t\t\t\t\t\t\t\t\t\tbuilt, and will be live in about\n\t\t\t\t\t\t\t\t\t\t\t\tfive minutes. You can check the\n\t\t\t\t\t\t\t\t\t\t\t\tbuild status{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t\thref=\"https://app.netlify.com/sites/montavistamun/deploys\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ttarget={\"_blank\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\trel={\"noopener noreferrer\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"link\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\there\n\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t.\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm leading-5 text-gray-500\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{selectedConference !==\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"(NEW)\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"You will be publishing your modifications to the following fields:\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"You will be creating a new conference on the awards page with the following fields:\"}\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t\t<ul\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"list-disc text-sm leading-5 text-gray-500 ml-6 mt-3\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/* For new conferences, the end date is always automatically included. */}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{(selectedConference ===\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"(NEW)\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? edits.filter(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te !==\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"Conference End Date\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: edits\n\t\t\t\t\t\t\t\t\t\t\t\t\t).map((c) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tc ===\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"Conference Name\" &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tselectedConference ===\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"(NEW)\" ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<React.Fragment\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={c}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li>{c}</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tConference\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tEnd Date\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li key={c}>{c}</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse\">\n\t\t\t\t\t\t\t\t{!success && (\n\t\t\t\t\t\t\t\t\t<span className=\"flex w-full rounded-md shadow-sm sm:ml-3 sm:w-auto\">\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tonClick={async () => {\n\t\t\t\t\t\t\t\t\t\t\t\tif (!conferenceData?.name) {\n\t\t\t\t\t\t\t\t\t\t\t\t\talert(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"You must include the conference name.\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tif (!firebase || loading) {\n\t\t\t\t\t\t\t\t\t\t\t\t\talert(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"This page has not yet been initialized. Please try again in a few seconds.\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tsetSubmitting(true);\n\t\t\t\t\t\t\t\t\t\t\t\tlet backupData = null;\n\t\t\t\t\t\t\t\t\t\t\t\tlet newConferenceID = \"\";\n\t\t\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\t\t\tselectedConference ===\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"(NEW)\"\n\t\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst ref = await firebase\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.firestore()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.collection(\"awards\")\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.add(conferenceData);\n\t\t\t\t\t\t\t\t\t\t\t\t\tnewConferenceID = ref.id;\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\tbackupData = (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tawait firebase\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.firestore()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.collection(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"awards\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.doc(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tselectedConference\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.get()\n\t\t\t\t\t\t\t\t\t\t\t\t\t).data();\n\t\t\t\t\t\t\t\t\t\t\t\t\tawait firebase\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.firestore()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.collection(\"awards\")\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.doc(selectedConference)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.set(conferenceData);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tawait axios.post(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"https://api.netlify.com/build_hooks/5f52b7d45b528d5715e85eb7\"\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\tawait firebase\n\t\t\t\t\t\t\t\t\t\t\t\t\t.firestore()\n\t\t\t\t\t\t\t\t\t\t\t\t\t.collection(\"admin-log\")\n\t\t\t\t\t\t\t\t\t\t\t\t\t.add({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttimestamp: firebase.firestore.FieldValue.serverTimestamp(),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuser: user?.uid,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\taction:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tselectedConference ===\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"(NEW)\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"create-award\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"update-award\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t...(selectedConference ===\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"(NEW)\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconferenceId: newConferenceID,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconferenceId: selectedConference,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpreviousData: backupData,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmodifiedFields: edits,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  }),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewData: conferenceData,\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\t\t\tselectedConference ===\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"(NEW)\"\n\t\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetData((data) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst [\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfirst,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...rest\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t] = data;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn [\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfirst,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid: newConferenceID,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taward: conferenceData,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...rest,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetData((data) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.map((c) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tc.id !==\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tselectedConference\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? c\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tc.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taward: conferenceData,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tsetSubmitting(false);\n\t\t\t\t\t\t\t\t\t\t\t\tsetSuccess(true);\n\t\t\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\t\t\tselectedConference ===\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"(NEW)\"\n\t\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetSelectedConference(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewConferenceID\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\tdisabled={submitting}\n\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t(submitting\n\t\t\t\t\t\t\t\t\t\t\t\t\t? \"bg-purple-300\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t: \"bg-purple-600 hover:bg-purple-500 focus:outline-none focus:border-purple-700 focus:ring-purple-500\") +\n\t\t\t\t\t\t\t\t\t\t\t\t\" inline-flex justify-center w-full rounded-md border border-transparent px-4 py-2 text-base leading-6 font-medium text-white shadow-sm transition ease-in-out duration-150 sm:text-sm sm:leading-5\"\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{submitting\n\t\t\t\t\t\t\t\t\t\t\t\t? \"Saving Changes...\"\n\t\t\t\t\t\t\t\t\t\t\t\t: \"Save Changes\"}\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t<span className=\"mt-3 flex w-full rounded-md shadow-sm sm:mt-0 sm:w-auto\">\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\tsetShow(false);\n\t\t\t\t\t\t\t\t\t\t\tsetTimeout(\n\t\t\t\t\t\t\t\t\t\t\t\t() => setSuccess(false),\n\t\t\t\t\t\t\t\t\t\t\t\t500\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\tdisabled={submitting}\n\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t(submitting\n\t\t\t\t\t\t\t\t\t\t\t\t? \"bg-gray-200\"\n\t\t\t\t\t\t\t\t\t\t\t\t: \"bg-white hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:ring-blue-500\") +\n\t\t\t\t\t\t\t\t\t\t\t\" inline-flex justify-center w-full rounded-md border border-gray-300 px-4 py-2 bg-white text-base leading-6 font-medium text-gray-700 shadow-sm transition ease-in-out duration-150 sm:text-sm sm:leading-5\"\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{success ? \"Close\" : \"Cancel\"}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Transition>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Transition>\n\t);\n}\n","/Users/jmeng/Documents/code/montavistamun/src/components/admin/logs/LogDetailModal.tsx",["561","562","563"],"import firebaseType from \"firebase\";\nimport moment from \"moment\";\nimport React from \"react\";\nimport Transition from \"../../Transition\";\nimport { AdminLogItem, getLogItemText } from \"./LogItem\";\n\nexport default function LogDetailModal({\n\tshow,\n\tdata: { id, data, loading },\n\tusersData,\n}: {\n\tshow: boolean;\n\tdata: {\n\t\tid: string;\n\t\tdata?: AdminLogItem;\n\t\tloading: boolean;\n\t};\n\tusersData: {\n\t\t[uid: string]: {\n\t\t\temail: string;\n\t\t\tname: string;\n\t\t};\n\t};\n}) {\n\tlet updates = <p>Loading...</p>;\n\tif (data?.action) {\n\t\tswitch (data.action) {\n\t\t\tcase \"update-user-permissions\": {\n\t\t\t\tif (\n\t\t\t\t\tdata.newData?.verified === data.oldData?.verified &&\n\t\t\t\t\tdata.newData?.admin === data.oldData?.admin\n\t\t\t\t) {\n\t\t\t\t\t// No actual updates were made\n\t\t\t\t\tupdates = (\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\tNo effective changes were made during this log item.\n\t\t\t\t\t\t\tThis can happen when, for example, an admin verifies\n\t\t\t\t\t\t\ta user that was already verified.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tconst permissionUpdates = [];\n\t\t\t\tif (data.newData?.verified !== data.oldData?.verified) {\n\t\t\t\t\tpermissionUpdates.push(\n\t\t\t\t\t\t<li key={\"verified\"}>\n\t\t\t\t\t\t\t{!data.newData?.verified\n\t\t\t\t\t\t\t\t? \"Unverified\"\n\t\t\t\t\t\t\t\t: \"Verified\"}{\" \"}\n\t\t\t\t\t\t\t{usersData[data.target]?.name} (\n\t\t\t\t\t\t\t{usersData[data.target]?.email})\n\t\t\t\t\t\t</li>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tif (data.newData?.admin !== data.oldData?.admin) {\n\t\t\t\t\tpermissionUpdates.push(\n\t\t\t\t\t\t<li key={\"admin\"}>\n\t\t\t\t\t\t\t{!data.newData?.admin ? \"Demoted\" : \"Promoted\"}{\" \"}\n\t\t\t\t\t\t\t{usersData[data.target]?.name} (\n\t\t\t\t\t\t\t{usersData[data.target]?.email}){\" \"}\n\t\t\t\t\t\t\t{!data.newData?.verified ? \"from\" : \"to\"}{\" \"}\n\t\t\t\t\t\t\tadministrator.\n\t\t\t\t\t\t</li>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tupdates = <ul>{permissionUpdates}</ul>;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"update-award\": {\n\t\t\t\tupdates = (\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t{(data.previousData.name || \"\") !==\n\t\t\t\t\t\t\t(data.newData.name || \"\") && (\n\t\t\t\t\t\t\t<li className={\"mt-1\"}>\n\t\t\t\t\t\t\t\t<b>Name:</b> {data.previousData.name}{\" \"}\n\t\t\t\t\t\t\t\t<b>changed to</b> {data.newData.name}\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{(data.previousData.delegationAward || \"\") !=\n\t\t\t\t\t\t\t(data.newData.delegationAward || \"\") && (\n\t\t\t\t\t\t\t<li className={\"mt-1\"}>\n\t\t\t\t\t\t\t\t<b>Delegation Award:</b>{\" \"}\n\t\t\t\t\t\t\t\t{data.previousData.delegationAward || \"<empty>\"}{\" \"}\n\t\t\t\t\t\t\t\t<b>changed to</b>{\" \"}\n\t\t\t\t\t\t\t\t{data.newData.delegationAward || \"<empty>\"}\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{(data.previousData.imageURL || \"\") !=\n\t\t\t\t\t\t\t(data.newData.imageURL || \"\") && (\n\t\t\t\t\t\t\t<li className={\"mt-1\"}>\n\t\t\t\t\t\t\t\t<b>Image URL:</b>{\" \"}\n\t\t\t\t\t\t\t\t{(\n\t\t\t\t\t\t\t\t\t<a href={data.previousData.imageURL}>\n\t\t\t\t\t\t\t\t\t\t{data.previousData.imageURL}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t) || \"<empty>\"}{\" \"}\n\t\t\t\t\t\t\t\t<b>changed to</b>{\" \"}\n\t\t\t\t\t\t\t\t{(\n\t\t\t\t\t\t\t\t\t<a href={data.newData.imageURL}>\n\t\t\t\t\t\t\t\t\t\t{data.newData.imageURL}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t) || \"<empty>\"}\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{((data.previousData.month || \"\") !==\n\t\t\t\t\t\t\t(data.newData.month || \"\") ||\n\t\t\t\t\t\t\t(data.previousData.year || \"\") !==\n\t\t\t\t\t\t\t\t(data.newData.year || \"\")) && (\n\t\t\t\t\t\t\t<li className={\"mt-1\"}>\n\t\t\t\t\t\t\t\t<b>Time:</b> {data.previousData.month}{\" \"}\n\t\t\t\t\t\t\t\t{data.previousData.year} <b>changed to</b>{\" \"}\n\t\t\t\t\t\t\t\t{data.newData.month} {data.newData.year}\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{data.newData.delegateAwards\n\t\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t\t(award, i) =>\n\t\t\t\t\t\t\t\t\tdata.previousData.delegateAwards[\n\t\t\t\t\t\t\t\t\t\ti\n\t\t\t\t\t\t\t\t\t].awards.some(\n\t\t\t\t\t\t\t\t\t\t(a, j) =>\n\t\t\t\t\t\t\t\t\t\t\t!data.newData.delegateAwards[\n\t\t\t\t\t\t\t\t\t\t\t\ti\n\t\t\t\t\t\t\t\t\t\t\t].awards[j].includes(a)\n\t\t\t\t\t\t\t\t\t) ||\n\t\t\t\t\t\t\t\t\taward.awards.some(\n\t\t\t\t\t\t\t\t\t\t(a, j) =>\n\t\t\t\t\t\t\t\t\t\t\t!data.previousData.delegateAwards[\n\t\t\t\t\t\t\t\t\t\t\t\ti\n\t\t\t\t\t\t\t\t\t\t\t].awards[j].includes(a)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.map((award, i) => (\n\t\t\t\t\t\t\t\t<li key={i} className={\"mt-1\"}>\n\t\t\t\t\t\t\t\t\t<b>\n\t\t\t\t\t\t\t\t\t\t{[\n\t\t\t\t\t\t\t\t\t\t\t\"Best Delegate\",\n\t\t\t\t\t\t\t\t\t\t\t\"Outstanding\",\n\t\t\t\t\t\t\t\t\t\t\t\"Honorable\",\n\t\t\t\t\t\t\t\t\t\t\t\"Verbal\",\n\t\t\t\t\t\t\t\t\t\t\t\"Research\",\n\t\t\t\t\t\t\t\t\t\t].find(\n\t\t\t\t\t\t\t\t\t\t\t(a) => a.indexOf(award.type) > -1\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t</b>\n\t\t\t\t\t\t\t\t\t<ul\n\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\"list-disc ml-5 text-red-600\"\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{data.previousData.delegateAwards[\n\t\t\t\t\t\t\t\t\t\t\ti\n\t\t\t\t\t\t\t\t\t\t].awards.map((a, j) => (\n\t\t\t\t\t\t\t\t\t\t\t<li key={j}>{a}</li>\n\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t<ul\n\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\"list-disc ml-5 text-green-600\"\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{award.awards.map((a, j) => (\n\t\t\t\t\t\t\t\t\t\t\t<li key={j}>{a}</li>\n\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t</ul>\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"create-award\": {\n\t\t\t\tupdates = (\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li className={\"mt-1\"}>\n\t\t\t\t\t\t\t<b>Name:</b> {data.newData.name}\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li className={\"mt-1\"}>\n\t\t\t\t\t\t\t<b>Delegation Award:</b>{\" \"}\n\t\t\t\t\t\t\t{data.newData.delegationAward}\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li className={\"mt-1\"}>\n\t\t\t\t\t\t\t<b>Image URL:</b>{\" \"}\n\t\t\t\t\t\t\t<a href={data.newData.imageURL}>\n\t\t\t\t\t\t\t\t{data.newData.imageURL}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li className={\"mt-1\"}>\n\t\t\t\t\t\t\t<b>Time:</b> {data.newData.month}{\" \"}\n\t\t\t\t\t\t\t{data.newData.year}\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t{data.newData.delegateAwards.map((award, i) => (\n\t\t\t\t\t\t\t<li key={i} className={\"mt-1\"}>\n\t\t\t\t\t\t\t\t<b>\n\t\t\t\t\t\t\t\t\t{[\n\t\t\t\t\t\t\t\t\t\t\"Best Delegate\",\n\t\t\t\t\t\t\t\t\t\t\"Outstanding\",\n\t\t\t\t\t\t\t\t\t\t\"Honorable\",\n\t\t\t\t\t\t\t\t\t\t\"Verbal\",\n\t\t\t\t\t\t\t\t\t\t\"Research\",\n\t\t\t\t\t\t\t\t\t].find((a) => a.indexOf(award.type) > -1)}\n\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t</b>\n\t\t\t\t\t\t\t\t<ul className={\"list-disc ml-5\"}>\n\t\t\t\t\t\t\t\t\t{award.awards.map((a, j) => (\n\t\t\t\t\t\t\t\t\t\t<li key={j}>{a}</li>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</ul>\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdefault: {\n\t\t\t\tupdates = (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\tUnknown action {(data as any).action} by user{\" \"}\n\t\t\t\t\t\t\t{(data as any).user}.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\treturn (\n\t\t<Transition show={show}>\n\t\t\t<div className=\"fixed z-10 inset-0 overflow-y-auto mt-16\">\n\t\t\t\t<div className=\"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0\">\n\t\t\t\t\t<Transition\n\t\t\t\t\t\tenter=\"ease-out duration-300\"\n\t\t\t\t\t\tenterFrom=\"opacity-0\"\n\t\t\t\t\t\tenterTo=\"opacity-100\"\n\t\t\t\t\t\tleave=\"ease-in duration-200\"\n\t\t\t\t\t\tleaveFrom=\"opacity-100\"\n\t\t\t\t\t\tleaveTo=\"opacity-0\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"fixed inset-0 transition-opacity\">\n\t\t\t\t\t\t\t<div className=\"absolute inset-0 bg-gray-500 opacity-75\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Transition>\n\t\t\t\t\t{/* This element is to trick the browser into centering the modal contents. */}\n\t\t\t\t\t<span className=\"hidden sm:inline-block sm:align-middle sm:h-screen\"></span>\n\t\t\t\t\t&#8203;\n\t\t\t\t\t<Transition\n\t\t\t\t\t\tenter=\"ease-out duration-300\"\n\t\t\t\t\t\tenterFrom=\"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95\"\n\t\t\t\t\t\tenterTo=\"opacity-100 translate-y-0 sm:scale-100\"\n\t\t\t\t\t\tleave=\"ease-in duration-200\"\n\t\t\t\t\t\tleaveFrom=\"opacity-100 translate-y-0 sm:scale-100\"\n\t\t\t\t\t\tleaveTo=\"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6\"\n\t\t\t\t\t\t\trole=\"dialog\"\n\t\t\t\t\t\t\taria-modal=\"true\"\n\t\t\t\t\t\t\taria-labelledby=\"modal-headline\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className=\"sm:flex sm:items-start\">\n\t\t\t\t\t\t\t\t<div className=\"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left\">\n\t\t\t\t\t\t\t\t\t<h3\n\t\t\t\t\t\t\t\t\t\tclassName=\"text-lg leading-6 font-medium text-gray-900\"\n\t\t\t\t\t\t\t\t\t\tid=\"modal-headline\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{loading || !data\n\t\t\t\t\t\t\t\t\t\t\t? `Loading log item ${id}...`\n\t\t\t\t\t\t\t\t\t\t\t: getLogItemText(data, usersData)}\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t<div className={\"mt-2\"}>\n\t\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t\t<b>Log Item ID: </b> {id}\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t\t<b>Author: </b>{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t{usersData[data?.user || \"\"]\n\t\t\t\t\t\t\t\t\t\t\t\t?.name || \"Loading...\"}{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t\t\t{usersData[data?.user || \"\"]\n\t\t\t\t\t\t\t\t\t\t\t\t?.email || \"Loading...\"}\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t\t<b>Time: </b>{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t{!data?.timestamp\n\t\t\t\t\t\t\t\t\t\t\t\t? \"Loading...\"\n\t\t\t\t\t\t\t\t\t\t\t\t: moment(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(data.timestamp as firebaseType.firestore.Timestamp).toDate()\n\t\t\t\t\t\t\t\t\t\t\t\t  ).format(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"M/D/YY h:mm:ss A\"\n\t\t\t\t\t\t\t\t\t\t\t\t  )}{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t(converted to your local time zone).\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"mt-2\">{updates}</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse\">\n\t\t\t\t\t\t\t\t<span className=\"mt-3 flex w-full rounded-md shadow-sm sm:mt-0 sm:w-auto\">\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\twindow.location.hash = \"#\";\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\"bg-white hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:ring-blue-500\" +\n\t\t\t\t\t\t\t\t\t\t\t\" inline-flex justify-center w-full rounded-md border border-gray-300 px-4 py-2 bg-white text-base leading-6 font-medium text-gray-700 shadow-sm transition ease-in-out duration-150 sm:text-sm sm:leading-5\"\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tClose\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Transition>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Transition>\n\t);\n}\n","/Users/jmeng/Documents/code/montavistamun/src/components/admin/logs/LogItem.tsx",["564","565"],"import firebaseType from \"firebase\";\nimport * as Icons from \"heroicons-react\";\nimport moment from \"moment\";\nimport React, { useEffect } from \"react\";\nimport { ConferenceAwardsData } from \"../../../pages/awards\";\nexport type AdminLogItem =\n\t| {\n\t\t\taction: \"create-award\";\n\t\t\tnewData: ConferenceAwardsData;\n\t\t\ttimestamp: firebaseType.firestore.Timestamp;\n\t\t\tuser: string;\n\t  }\n\t| {\n\t\t\taction: \"update-award\";\n\t\t\tnewData: ConferenceAwardsData;\n\t\t\tpreviousData: ConferenceAwardsData;\n\t\t\ttimestamp: firebaseType.firestore.Timestamp;\n\t\t\tuser: string;\n\t  }\n\t| {\n\t\t\taction: \"update-user-permissions\";\n\t\t\tmodifiedFields: {\n\t\t\t\tverified?: boolean;\n\t\t\t\tadmin?: boolean;\n\t\t\t};\n\t\t\tnewData: {\n\t\t\t\tverified?: boolean;\n\t\t\t\tadmin?: boolean;\n\t\t\t};\n\t\t\toldData: {\n\t\t\t\tverified?: boolean;\n\t\t\t\tadmin?: boolean;\n\t\t\t};\n\t\t\ttimestamp: firebaseType.firestore.Timestamp;\n\t\t\tuser: string;\n\t\t\ttarget: string;\n\t  };\nexport function getLogItemText(\n\tdata: AdminLogItem,\n\tusersData: {\n\t\t[uid: string]: {\n\t\t\tname: string;\n\t\t\temail: string;\n\t\t};\n\t}\n) {\n\tswitch (data.action) {\n\t\tcase \"update-user-permissions\": {\n\t\t\tif (\n\t\t\t\tdata.newData?.verified === data.oldData?.verified &&\n\t\t\t\tdata.newData?.admin === data.oldData?.admin\n\t\t\t) {\n\t\t\t\t// No actual updates were made\n\t\t\t\treturn \"\";\n\t\t\t}\n\t\t\tconst updateUserActionText = `${\n\t\t\t\tdata.newData?.verified == data.oldData?.verified\n\t\t\t\t\t? \"\"\n\t\t\t\t\t: data.newData.verified\n\t\t\t\t\t? \"verified\"\n\t\t\t\t\t: \"unverified\"\n\t\t\t}${\n\t\t\t\tdata.newData?.verified !== data.oldData?.verified &&\n\t\t\t\tdata.newData?.admin !== data.oldData?.admin\n\t\t\t\t\t? \" and \"\n\t\t\t\t\t: \"\"\n\t\t\t}${\n\t\t\t\tdata.newData?.admin == data.oldData?.admin\n\t\t\t\t\t? \"\"\n\t\t\t\t\t: data.newData.admin\n\t\t\t\t\t? \"promoted\"\n\t\t\t\t\t: \"demoted\"\n\t\t\t}`;\n\n\t\t\treturn `${\n\t\t\t\tusersData[data.user]?.name || \"Loading...\"\n\t\t\t} ${updateUserActionText} ${\n\t\t\t\tusersData[data.target]?.name || \"Loading...\"\n\t\t\t}`;\n\t\t}\n\t\tcase \"update-award\": {\n\t\t\treturn `${\n\t\t\t\tusersData[data.user]?.name || \"Loading...\"\n\t\t\t} updated an award: ${data.newData.name}`;\n\t\t}\n\t\tcase \"create-award\": {\n\t\t\treturn `${\n\t\t\t\tusersData[data.user]?.name || \"Loading...\"\n\t\t\t} created an award: ${data.newData.name}`;\n\t\t}\n\t\tdefault: {\n\t\t\treturn (\n\t\t\t\t\"Unknown Action \" + (data as { action: string | null })?.action\n\t\t\t);\n\t\t}\n\t}\n}\nexport default function LogItem({\n\tid,\n\tdata,\n\trequestUserData,\n\tusersData,\n}: {\n\tusersData: {\n\t\t[uid: string]: {\n\t\t\tname: string;\n\t\t\temail: string;\n\t\t};\n\t};\n\trequestUserData: (uid: string) => void;\n\tid: string;\n\tdata: AdminLogItem;\n}) {\n\tuseEffect(() => {\n\t\tif (!data) return;\n\t\trequestUserData(data.user);\n\t\tif (data.action == \"update-user-permissions\") {\n\t\t\trequestUserData(data.target);\n\t\t}\n\t}, [requestUserData, data?.user]);\n\tconst actionText = getLogItemText(data, usersData);\n\tif (actionText == \"\") {\n\t\t// no updates made\n\t\treturn <></>;\n\t}\n\treturn (\n\t\t<li>\n\t\t\t<a\n\t\t\t\thref={\"#\" + id}\n\t\t\t\tclassName=\"block hover:bg-gray-50 focus:outline-none focus:bg-gray-50 transition duration-150 ease-in-out\"\n\t\t\t>\n\t\t\t\t<div className=\"px-4 py-4 flex items-center sm:px-6\">\n\t\t\t\t\t<div className=\"min-w-0 flex-1 sm:flex sm:items-center sm:justify-between\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div className=\"text-sm leading-5 font-medium truncate\">\n\t\t\t\t\t\t\t\t{actionText}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"mt-4 flex-shrink-0 sm:mt-0\">\n\t\t\t\t\t\t\t<div className=\"mt-2 flex\">\n\t\t\t\t\t\t\t\t<div className=\"flex items-center text-sm leading-5 text-gray-500\">\n\t\t\t\t\t\t\t\t\t<Icons.Calendar\n\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400\"\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t<time dateTime=\"2020-01-07\">\n\t\t\t\t\t\t\t\t\t\t\t{moment(\n\t\t\t\t\t\t\t\t\t\t\t\t(data.timestamp as firebaseType.firestore.Timestamp).toDate()\n\t\t\t\t\t\t\t\t\t\t\t).format(\"M/D/YY h:mm:ss A\")}\n\t\t\t\t\t\t\t\t\t\t</time>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</a>\n\t\t</li>\n\t);\n}\n","/Users/jmeng/Documents/code/montavistamun/src/components/awards/dummyData.ts",[],"/Users/jmeng/Documents/code/montavistamun/src/components/calendar/LoadableCalendar.tsx",["566"],"// organize-imports-ignore\nimport React, { useState } from \"react\";\nimport FullCalendar from \"@fullcalendar/react\";\n\nimport dayGridPlugin from \"@fullcalendar/daygrid\";\nimport googleCalendarPlugin from \"@fullcalendar/google-calendar\";\nimport listPlugin from \"@fullcalendar/list\";\nimport timeGridPlugin from \"@fullcalendar/timegrid\";\n\nexport default function LoadableCalendar(): React.ReactElement {\n\tconst sharedCalendarProps = {\n\t\tplugins: [\n\t\t\tdayGridPlugin,\n\t\t\tlistPlugin,\n\t\t\tgoogleCalendarPlugin,\n\t\t\ttimeGridPlugin,\n\t\t],\n\t\tgoogleCalendarApiKey: \"AIzaSyAWBRPsh5fXjotQ0IT9DZQhygkpzu-SL4w\",\n\t\tevents: {\n\t\t\tgoogleCalendarId:\n\t\t\t\t\"g9h6cqiso966e96uqj1cv2ohgc@group.calendar.google.com\",\n\t\t\tclassName: \"gcal-event\",\n\t\t},\n\t\tnoEventsContent: \"There are no MVMUN events this month\",\n\t\tfixedWeekCount: false,\n\t};\n\treturn (\n\t\t<>\n\t\t\t{/* Desktop Version */}\n\t\t\t<div className={\"hidden sm:block\"}>\n\t\t\t\t<FullCalendar\n\t\t\t\t\theaderToolbar={{\n\t\t\t\t\t\tleft: \"prev,next today\",\n\t\t\t\t\t\tcenter: \"title\",\n\t\t\t\t\t\tright:\n\t\t\t\t\t\t\t\"dayGridMonth,timeGridWeek,timeGridDay,listMonth\",\n\t\t\t\t\t}}\n\t\t\t\t\tinitialView=\"dayGridMonth\"\n\t\t\t\t\teventClick={(info) => {\n\t\t\t\t\t\t// open events in a new tab\n\t\t\t\t\t\tinfo.jsEvent.preventDefault();\n\t\t\t\t\t\twindow.open(info.event.url, \"_blank\");\n\t\t\t\t\t}}\n\t\t\t\t\t{...sharedCalendarProps}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t{/* Mobile Version */}\n\t\t\t<div className={\"block sm:hidden\"}>\n\t\t\t\t<FullCalendar\n\t\t\t\t\theaderToolbar={{\n\t\t\t\t\t\tleft: \"title\",\n\t\t\t\t\t\tright: \"prev,next\",\n\t\t\t\t\t}}\n\t\t\t\t\tinitialView=\"listMonth\"\n\t\t\t\t\t{...sharedCalendarProps}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</>\n\t);\n}\n","/Users/jmeng/Documents/code/montavistamun/src/components/conferences/ConferencesData.tsx",[],"/Users/jmeng/Documents/code/montavistamun/src/components/conferences/PreferenceList.tsx",["567","568"],"import arrayMove from \"array-move\";\nimport React from \"react\";\nimport {\n\tSortableContainer as RSHSortableContainer,\n\tSortableElement as RSHSortableElement,\n} from \"react-sortable-hoc\";\nimport \"./sortableList.css\";\n\nconst SortableItem = RSHSortableElement(\n\t({ index, value }: { value: React.ReactNode; index: number }) => (\n\t\t<li className={\"flex py-2 px-4 bg-white hover:bg-gray-50\"}>{value}</li>\n\t)\n);\n\nconst SortableContainer = RSHSortableContainer(\n\t({ children }: { children: React.ReactNode }) => {\n\t\treturn (\n\t\t\t<ul className={\"border border-gray-300 divide-y divide-gray-200\"}>\n\t\t\t\t{children}\n\t\t\t</ul>\n\t\t);\n\t}\n);\n\nexport default function PreferenceList({\n\titems,\n\tsetItems,\n}: {\n\titems: string[];\n\tsetItems: (items: string[]) => void;\n}) {\n\treturn (\n\t\t<SortableContainer\n\t\t\tonSortEnd={({ oldIndex, newIndex }) =>\n\t\t\t\tsetItems(arrayMove(items, oldIndex, newIndex))\n\t\t\t}\n\t\t\thelperClass={\"SortableHelper cursor-resize-y\"}\n\t\t>\n\t\t\t{items.map((value, index) => (\n\t\t\t\t<SortableItem\n\t\t\t\t\tkey={`item-${value}`}\n\t\t\t\t\tindex={index}\n\t\t\t\t\tvalue={value}\n\t\t\t\t/>\n\t\t\t))}\n\t\t</SortableContainer>\n\t);\n}\n","/Users/jmeng/Documents/code/montavistamun/src/components/conferences/registration/PersonalInformationSection.tsx",["569"],"import { User } from \"firebase\";\nimport { Field } from \"formik\";\nimport { Link } from \"gatsby\";\nimport React from \"react\";\nimport Select from \"react-select\";\nimport * as Yup from \"yup\";\nimport InputGroup from \"../../shared/InputGroup\";\nimport RegisterFormSection from \"./RegisterFormSection\";\nimport stateOptions from \"./stateOptions\";\n\ninterface PersonalInformation {\n\tphone: string;\n\taddressOne: string;\n\taddressTwo: string;\n\tcity: string;\n\tstate: string;\n\tzip: string;\n}\nconst formatPhoneNumber = (phoneNumber: string) => {\n\tlet stripped = phoneNumber.replace(/\\D/g, \"\");\n\tif (stripped.length === 11) {\n\t\tstripped = stripped.substring(1);\n\t}\n\treturn `(${stripped.substring(0, 3)}) ${stripped.substring(\n\t\t3,\n\t\t6\n\t)}-${stripped.substring(6, 10)}`;\n};\nexport default function PersonalInformationSection({\n\tdata,\n\tsetStepHasChanges,\n\thandleUpdateData,\n\tsetStep,\n\tsetMaxStep,\n\tuser,\n}: {\n\tuser: User;\n\tdata?: PersonalInformation;\n\thandleUpdateData: (\n\t\tname: string,\n\t\tdata: PersonalInformation\n\t) => Promise<void>;\n\tsetStepHasChanges: (hasChanges: boolean) => void;\n\tsetStep: (step: number) => void;\n\tsetMaxStep: (fn: (oldMaxStep: number) => number) => void;\n}) {\n\tconst userLoading = !user;\n\treturn (\n\t\t<RegisterFormSection<PersonalInformation>\n\t\t\tuser={user}\n\t\t\ttitle={\"Personal Information\"}\n\t\t\tdata={data}\n\t\t\tonSubmit={(data: PersonalInformation) =>\n\t\t\t\thandleUpdateData(\"personalInformation\", {\n\t\t\t\t\t...data,\n\t\t\t\t\tphone: formatPhoneNumber(data.phone),\n\t\t\t\t\tzip:\n\t\t\t\t\t\tdata.zip.length === 9\n\t\t\t\t\t\t\t? `${data.zip.substring(0, 5)}-${data.zip.substring(\n\t\t\t\t\t\t\t\t\t5,\n\t\t\t\t\t\t\t\t\t9\n\t\t\t\t\t\t\t  )}`\n\t\t\t\t\t\t\t: data.zip,\n\t\t\t\t})\n\t\t\t}\n\t\t\tonHasChangesChange={(hasChanges: boolean) =>\n\t\t\t\tsetStepHasChanges(hasChanges)\n\t\t\t}\n\t\t\tonContinue={() => {\n\t\t\t\tsetStep(1);\n\t\t\t\tsetMaxStep((old: number) => Math.max(old, 1));\n\t\t\t}}\n\t\t\tschema={Yup.object().shape({\n\t\t\t\tphone: Yup.string()\n\t\t\t\t\t.test(\n\t\t\t\t\t\t\"is a phone number\",\n\t\t\t\t\t\t\"This phone number doesn't look valid! Try using the format (xxx) xxx-xxxx.\",\n\t\t\t\t\t\t(v) =>\n\t\t\t\t\t\t\t!!v && /^1?\\d{10}$/.test(v.replace(/[^\\d\\w]/g, \"\"))\n\t\t\t\t\t)\n\t\t\t\t\t.required(\n\t\t\t\t\t\t\"Please enter the emergency contact's phone number.\"\n\t\t\t\t\t),\n\t\t\t\taddressOne: Yup.string()\n\t\t\t\t\t.min(5, \"That doesn't look like a real address\")\n\t\t\t\t\t.max(128, \"Your address is too long\")\n\t\t\t\t\t.required(\n\t\t\t\t\t\t\"Please enter a valid address, including your house number and street\"\n\t\t\t\t\t),\n\t\t\t\tcity: Yup.string()\n\t\t\t\t\t.min(3, \"That doesn't look like a real city\")\n\t\t\t\t\t.max(128, \"Your city is too long\")\n\t\t\t\t\t.required(\"Please enter a city\"),\n\t\t\t\tstate: Yup.string().required(\"Please enter a state\"),\n\t\t\t\tzip: Yup.string()\n\t\t\t\t\t.matches(\n\t\t\t\t\t\t/(^\\d{5}$)|(^\\d{9}$)|(^\\d{5}-\\d{4}$)/,\n\t\t\t\t\t\t\"Please enter a valid 5 or 9 digit zip code\"\n\t\t\t\t\t)\n\t\t\t\t\t.required(\"Please enter a valid 5 or 9 digit zip code\"),\n\t\t\t})}\n\t\t\tloadingValues={{\n\t\t\t\tphone: \"Loading...\",\n\t\t\t\taddressOne: \"Loading...\",\n\t\t\t\taddressTwo: \"Loading...\",\n\t\t\t\tcity: \"Loading...\",\n\t\t\t\tstate: \"Loading...\",\n\t\t\t\tzip: \"Loading...\",\n\t\t\t}}\n\t\t>\n\t\t\t{({\n\t\t\t\terrors,\n\t\t\t\tcanEdit,\n\t\t\t\ttouched,\n\t\t\t\tvalues,\n\t\t\t\tsetFieldValue,\n\t\t\t\tsetFieldTouched,\n\t\t\t}) => (\n\t\t\t\t<>\n\t\t\t\t\t<Field\n\t\t\t\t\t\tas={InputGroup}\n\t\t\t\t\t\tclassName=\"col-span-6 sm:col-span-3\"\n\t\t\t\t\t\tlabel={\"First Name\"}\n\t\t\t\t\t\thideHelpTextIfError\n\t\t\t\t\t\tvalue={\n\t\t\t\t\t\t\tuserLoading\n\t\t\t\t\t\t\t\t? \"Loading...\"\n\t\t\t\t\t\t\t\t: user?.displayName?.split(\" \")[0] || \"Not Set\"\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdisabled\n\t\t\t\t\t/>\n\t\t\t\t\t<Field\n\t\t\t\t\t\tas={InputGroup}\n\t\t\t\t\t\tclassName=\"col-span-6 sm:col-span-3\"\n\t\t\t\t\t\tlabel={\"Last Name\"}\n\t\t\t\t\t\tdisabled\n\t\t\t\t\t\tvalue={\n\t\t\t\t\t\t\tuserLoading\n\t\t\t\t\t\t\t\t? \"Loading...\"\n\t\t\t\t\t\t\t\t: user?.displayName\n\t\t\t\t\t\t\t\t\t\t?.split(\" \")\n\t\t\t\t\t\t\t\t\t\t.slice(1)\n\t\t\t\t\t\t\t\t\t\t.join(\" \") || \"Not Set\"\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t<Field\n\t\t\t\t\t\tas={InputGroup}\n\t\t\t\t\t\tclassName=\"col-span-6 sm:col-span-4\"\n\t\t\t\t\t\tlabel={\"Email\"}\n\t\t\t\t\t\tname={\"email\"}\n\t\t\t\t\t\tdisabled\n\t\t\t\t\t\tvalue={\n\t\t\t\t\t\t\tuserLoading\n\t\t\t\t\t\t\t\t? \"Loading...\"\n\t\t\t\t\t\t\t\t: user?.email || \"Not Set\"\n\t\t\t\t\t\t}\n\t\t\t\t\t\thelpText={\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\tTo edit your name or email, go to{\" \"}\n\t\t\t\t\t\t\t\t<Link to={\"/account/settings\"} className=\"link\">\n\t\t\t\t\t\t\t\t\tAccount Settings\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t.\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t<Field\n\t\t\t\t\t\tas={InputGroup}\n\t\t\t\t\t\tclassName=\"col-span-6\"\n\t\t\t\t\t\tlabel={\"Your Phone Number\"}\n\t\t\t\t\t\thint={\"Any 10 or 11 digit format\"}\n\t\t\t\t\t\tname={\"phone\"}\n\t\t\t\t\t\tdisabled={!canEdit}\n\t\t\t\t\t\tinvalid={errors.phone && !!touched.phone}\n\t\t\t\t\t\terror={errors.phone}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"col-span-6\">\n\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\tas={InputGroup}\n\t\t\t\t\t\t\tlabel={\"Street Address\"}\n\t\t\t\t\t\t\tname={\"addressOne\"}\n\t\t\t\t\t\t\tplaceholder={\"Street and Number\"}\n\t\t\t\t\t\t\tdisabled={!canEdit}\n\t\t\t\t\t\t\tinvalid={errors.addressOne && !!touched.addressOne}\n\t\t\t\t\t\t\terror={errors.addressOne}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\tclassName={\"mt-2\"}\n\t\t\t\t\t\t\tas={InputGroup}\n\t\t\t\t\t\t\tid={\"address-two\"}\n\t\t\t\t\t\t\tname={\"addressTwo\"}\n\t\t\t\t\t\t\tplaceholder={\n\t\t\t\t\t\t\t\t\"Apartment, suite, unit, building, etc. (Optional)\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdisabled={!canEdit}\n\t\t\t\t\t\t\tinvalid={errors.addressTwo && !!touched.addressTwo}\n\t\t\t\t\t\t\terror={errors.addressTwo}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Field\n\t\t\t\t\t\tas={InputGroup}\n\t\t\t\t\t\tclassName=\"col-span-6 sm:col-span-3 lg:col-span-2\"\n\t\t\t\t\t\tlabel={\"City\"}\n\t\t\t\t\t\tname={\"city\"}\n\t\t\t\t\t\tdisabled={!canEdit}\n\t\t\t\t\t\tinvalid={errors.city && !!touched.city}\n\t\t\t\t\t\terror={errors.city}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className={\"col-span-6 sm:col-span-3 lg:col-span-2\"}>\n\t\t\t\t\t\t<label\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\"block text-sm font-medium leading-5 text-gray-700 \"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tState\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\tisDisabled={!canEdit}\n\t\t\t\t\t\t\toptions={stateOptions}\n\t\t\t\t\t\t\tclassName=\"mt-1\"\n\t\t\t\t\t\t\t{...(typeof window === \"undefined\"\n\t\t\t\t\t\t\t\t? {}\n\t\t\t\t\t\t\t\t: { menuPortalTarget: document.body })}\n\t\t\t\t\t\t\tstyles={{\n\t\t\t\t\t\t\t\tmenuPortal: (base) => ({\n\t\t\t\t\t\t\t\t\t...base,\n\t\t\t\t\t\t\t\t\tzIndex: 9999,\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tvalue={stateOptions.find(\n\t\t\t\t\t\t\t\t(o) =>\n\t\t\t\t\t\t\t\t\to.value === values.state ||\n\t\t\t\t\t\t\t\t\t// before adding this select, we encouraged full state names.\n\t\t\t\t\t\t\t\t\to.label.toLowerCase() ===\n\t\t\t\t\t\t\t\t\t\tvalues.state.toLowerCase()\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\tonChange={(v) =>\n\t\t\t\t\t\t\t\tsetFieldValue(\n\t\t\t\t\t\t\t\t\t\"state\",\n\t\t\t\t\t\t\t\t\tArray.isArray(v) ? v[0].value : v.value\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tonBlur={() => setFieldTouched(\"state\")}\n\t\t\t\t\t\t\tinvalid={errors.state && !!touched.state}\n\t\t\t\t\t\t\terror={errors.state}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{errors.state && !!touched.state && (\n\t\t\t\t\t\t\t<p className={\"mt-2 text-sm text-red-600\"}>\n\t\t\t\t\t\t\t\t{errors.state}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t\t<Field\n\t\t\t\t\t\tas={InputGroup}\n\t\t\t\t\t\tclassName=\"col-span-6 sm:col-span-3 lg:col-span-2\"\n\t\t\t\t\t\tlabel={\"Zip Code\"}\n\t\t\t\t\t\tname={\"zip\"}\n\t\t\t\t\t\tdisabled={!canEdit}\n\t\t\t\t\t\tinvalid={errors.zip && !!touched.zip}\n\t\t\t\t\t\terror={errors.zip}\n\t\t\t\t\t/>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</RegisterFormSection>\n\t);\n}\n","/Users/jmeng/Documents/code/montavistamun/src/components/conferences/registration/RegisterFormSection.tsx",["570","571","572"],"import cx from \"classnames\";\nimport { User } from \"firebase\";\nimport { Form, Formik, FormikProps } from \"formik\";\nimport * as Icons from \"heroicons-react\";\nimport React, { ReactElement, useState } from \"react\";\nimport * as Yup from \"yup\";\nimport ConfirmModal from \"../../ConfirmModal\";\nexport default function RegisterFormSection<Fields>({\n\tdata,\n\tonSubmit,\n\tonHasChangesChange,\n\tonContinue,\n\tschema,\n\tloadingValues,\n\ttitle,\n\tsubtitle,\n\tchildren,\n\tshowBack,\n\tonBack,\n\tconfirmContinue,\n\tuser,\n}: {\n\tuser: User;\n\tdata?: Fields;\n\tonSubmit: (data: Fields) => Promise<void>;\n\tonHasChangesChange: (hasChanges: boolean) => void;\n\tonContinue: () => void;\n\tschema: Yup.ObjectSchema;\n\tloadingValues: Fields;\n\ttitle?: string;\n\tsubtitle?: string;\n\tonBack?: () => void;\n\tshowBack?: boolean;\n\t/**\n\t * If provided, the function will be executed to check if a confirm save modal should be shown.\n\t * The modal will be shown if a string is returned, and the help text will be that string.\n\t * @param values\n\t */\n\tconfirmContinue?: (values: Fields) => false | string;\n\tchildren: (\n\t\tprops: FormikProps<Fields> & { canEdit: boolean }\n\t) => ReactElement;\n}): ReactElement {\n\treturn (\n\t\t<div className=\"shadow overflow-hidden sm:rounded-md\">\n\t\t\t<Formik\n\t\t\t\tinitialValues={data || loadingValues}\n\t\t\t\tenableReinitialize\n\t\t\t\tvalidationSchema={schema}\n\t\t\t\tonSubmit={async (values) => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tawait onSubmit(values);\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tconsole.log(error);\n\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{(props) => (\n\t\t\t\t\t<RegisterFormSectionInner<Fields>\n\t\t\t\t\t\tform={props}\n\t\t\t\t\t\tinitialValues={data}\n\t\t\t\t\t\tloading={!data}\n\t\t\t\t\t\tonContinue={onContinue}\n\t\t\t\t\t\tonHasChangesChange={onHasChangesChange}\n\t\t\t\t\t\ttitle={title}\n\t\t\t\t\t\tshowBack={showBack}\n\t\t\t\t\t\tonBack={onBack}\n\t\t\t\t\t\tsubtitle={subtitle}\n\t\t\t\t\t\tfields={children}\n\t\t\t\t\t\tconfirmContinue={confirmContinue}\n\t\t\t\t\t\tuser={user}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</Formik>\n\t\t</div>\n\t);\n}\n\n/**\n * Given that a and b have the same keys, checks if a and b are equal shallow objects.\n * If an array is a child, then that array will be compared to other arrays based on shallow value, not reference.\n */\nfunction compareObjectValues<T>(a: T, b: T) {\n\treturn Object.keys(a).every((key) =>\n\t\tArray.isArray(a[key as keyof T])\n\t\t\t? (a[key as keyof T] as any[]).every(\n\t\t\t\t\t(el, i) => el === (b[key as keyof T] as any[])[i]\n\t\t\t  )\n\t\t\t: a[key as keyof T] === b[key as keyof T]\n\t);\n}\nfunction RegisterFormSectionInner<Fields>({\n\tloading,\n\tonContinue,\n\tinitialValues,\n\tonHasChangesChange,\n\tform,\n\ttitle,\n\tsubtitle,\n\tconfirmContinue,\n\tfields,\n\tonBack,\n\tshowBack,\n\tuser,\n}: {\n\tuser: User;\n\tloading: boolean;\n\tconfirmContinue?: (values: Fields) => false | string;\n\tonBack?: () => void;\n\tshowBack?: boolean;\n\tform: FormikProps<Fields>;\n\tinitialValues?: Fields;\n\tonContinue: () => void;\n\tonHasChangesChange: (hasChanges: boolean) => void;\n\ttitle?: string;\n\tsubtitle?: string;\n\tfields: (props: FormikProps<Fields> & { canEdit: boolean }) => ReactElement;\n}) {\n\tconst { isSubmitting, submitForm, values, validateForm } = form;\n\tconst [hasChanges, setHasChanges] = useState(false);\n\tconst [showConfirm, setShowConfirm] = useState(false);\n\tconst [confirmText, setConfirmText] = useState(\"\");\n\tReact.useEffect(() => {\n\t\tconst newHasChanges =\n\t\t\t!!initialValues && !compareObjectValues(values, initialValues);\n\t\tif (newHasChanges !== hasChanges) {\n\t\t\tsetHasChanges(newHasChanges);\n\t\t\tonHasChangesChange(newHasChanges);\n\t\t}\n\t}, [values, initialValues]);\n\tconst canSubmit = !isSubmitting && !loading;\n\tconst canEdit = !isSubmitting && !loading;\n\n\tconst initialValuesUnchanged =\n\t\tinitialValues &&\n\t\tObject.keys(initialValues).some((el) => {\n\t\t\tconst value = initialValues[el as keyof typeof initialValues];\n\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t\t// @ts-ignore\n\t\t\treturn value !== null && value !== undefined && value !== \"\";\n\t\t});\n\tconst onSave = React.useCallback(async () => {\n\t\t// there are no changes and at least some of the initial values (data) is not empty\n\t\tconst formIsValid = await validateForm()\n\t\t\t.then((errors) => {\n\t\t\t\tconst isValid = Object.keys(errors).length === 0;\n\t\t\t\tif (isValid) {\n\t\t\t\t\treturn Promise.resolve();\n\t\t\t\t} else {\n\t\t\t\t\treturn Promise.reject(\"invalid form\");\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then(() => true)\n\t\t\t.catch(() => false);\n\t\tif (!hasChanges && formIsValid) {\n\t\t\tonContinue();\n\t\t} else {\n\t\t\tsubmitForm()\n\t\t\t\t.then(validateForm)\n\t\t\t\t.then((errors) => {\n\t\t\t\t\tconst isValid = Object.keys(errors).length === 0;\n\t\t\t\t\tif (isValid) {\n\t\t\t\t\t\treturn Promise.resolve();\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn Promise.reject(\"invalid form\");\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.then(() => {\n\t\t\t\t\tonContinue();\n\t\t\t\t})\n\t\t\t\t.catch((e) => console.log(e));\n\t\t}\n\t}, [hasChanges, submitForm, validateForm, onContinue]);\n\treturn (\n\t\t<Form>\n\t\t\t<div className=\"px-4 bg-white py-5 sm:p-6\">\n\t\t\t\t<div>\n\t\t\t\t\t{title && (\n\t\t\t\t\t\t<h3 className=\"text-xl leading-6 font-bold text-gray-900\">\n\t\t\t\t\t\t\t{title}\n\t\t\t\t\t\t</h3>\n\t\t\t\t\t)}\n\t\t\t\t\t{subtitle && (\n\t\t\t\t\t\t<p className=\"mt-1 max-w-2xl text-sm leading-5 text-gray-500\">\n\t\t\t\t\t\t\t{subtitle}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tclassName={cx(\n\t\t\t\t\t\t\"grid grid-cols-6 gap-6\",\n\t\t\t\t\t\ttitle || subtitle ? \" mt-4\" : \"\"\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t{fields({\n\t\t\t\t\t\t...form,\n\t\t\t\t\t\tcanEdit,\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div className=\"px-4 py-3 bg-gray-50 text-right sm:px-6 flex justify-between\">\n\t\t\t\t<div>\n\t\t\t\t\t{showBack && (\n\t\t\t\t\t\t<span className=\"inline-flex rounded-md shadow-sm\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\tonClick={() => onBack()}\n\t\t\t\t\t\t\t\tdisabled={!canSubmit}\n\t\t\t\t\t\t\t\tclassName={cx(\n\t\t\t\t\t\t\t\t\t\"py-2 px-4 border border-gray-300 rounded-md text-sm leading-5 font-medium text-gray-700\",\n\t\t\t\t\t\t\t\t\t!canSubmit\n\t\t\t\t\t\t\t\t\t\t? \"bg-gray-300\"\n\t\t\t\t\t\t\t\t\t\t: \"bg-white hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:ring-blue-500 active:bg-gray-50 active:text-gray-800 transition duration-150 ease-in-out\"\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tBack\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t{/* If initial values exists and has at least one set value, then the user already has saved data. */}\n\t\t\t\t\t{!hasChanges && initialValuesUnchanged && (\n\t\t\t\t\t\t<span className=\"text-green-600 py-2 px-4 text-sm leading-5 font-medium\">\n\t\t\t\t\t\t\t<Icons.Check className={\"inline-flex mr-1\"} /> Saved\n\t\t\t\t\t\t</span>\n\t\t\t\t\t)}\n\t\t\t\t\t{hasChanges && initialValuesUnchanged && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<span className=\"inline-flex rounded-md shadow-sm\">\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\ttype=\"reset\"\n\t\t\t\t\t\t\t\t\tdisabled={!canSubmit}\n\t\t\t\t\t\t\t\t\tclassName={cx(\n\t\t\t\t\t\t\t\t\t\t\"py-2 px-4 border border-gray-300 rounded-md text-sm leading-5 font-medium text-gray-700\",\n\t\t\t\t\t\t\t\t\t\t!canSubmit\n\t\t\t\t\t\t\t\t\t\t\t? \"bg-gray-300\"\n\t\t\t\t\t\t\t\t\t\t\t: \"bg-white hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:ring-blue-500 active:bg-gray-50 active:text-gray-800 transition duration-150 ease-in-out\"\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tDiscard Changes\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype={\"button\"}\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tconst confirmModalText =\n\t\t\t\t\t\t\t\tconfirmContinue && confirmContinue(values);\n\t\t\t\t\t\t\tif (confirmModalText) {\n\t\t\t\t\t\t\t\tsetShowConfirm(true);\n\t\t\t\t\t\t\t\tsetConfirmText(confirmModalText);\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn onSave();\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tdisabled={!canSubmit}\n\t\t\t\t\t\tclassName={cx(\n\t\t\t\t\t\t\t\"ml-4 py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white shadow-sm\",\n\t\t\t\t\t\t\t!canSubmit\n\t\t\t\t\t\t\t\t? \"bg-indigo-300\"\n\t\t\t\t\t\t\t\t: \"bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:ring-blue-500 active:bg-indigo-600 transition duration-150 ease-in-out\"\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{isSubmitting\n\t\t\t\t\t\t\t? \"Saving and Continuing...\"\n\t\t\t\t\t\t\t: hasChanges\n\t\t\t\t\t\t\t? \"Save and Continue\"\n\t\t\t\t\t\t\t: \"Continue\"}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<ConfirmModal\n\t\t\t\tonConfirm={onSave}\n\t\t\t\tconfirmButtonText={\n\t\t\t\t\tisSubmitting\n\t\t\t\t\t\t? \"Saving and Continuing...\"\n\t\t\t\t\t\t: hasChanges\n\t\t\t\t\t\t? \"Save and Continue\"\n\t\t\t\t\t\t: \"Continue\"\n\t\t\t\t}\n\t\t\t\tdisabled={!canSubmit}\n\t\t\t\tshow={showConfirm}\n\t\t\t\tsetShow={setShowConfirm}\n\t\t\t\ttitle={\"Are you sure you want to continue?\"}\n\t\t\t>\n\t\t\t\t{confirmText}\n\t\t\t</ConfirmModal>\n\t\t</Form>\n\t);\n}\n","/Users/jmeng/Documents/code/montavistamun/src/components/conferences/registration/RegistrationForm.tsx",["573"],"import React from \"react\";\n\nexport default function RegistrationForm() {\n\treturn (\n\t\t<div>\n\t\t\t<p>Hello, World!</p>\n\t\t</div>\n\t);\n}\n","/Users/jmeng/Documents/code/montavistamun/src/components/conferences/registration/index.tsx",[],"/Users/jmeng/Documents/code/montavistamun/src/components/conferences/registration/stateOptions.ts",[],"/Users/jmeng/Documents/code/montavistamun/src/components/index/About.tsx",[],"/Users/jmeng/Documents/code/montavistamun/src/components/index/Hero.tsx",[],"/Users/jmeng/Documents/code/montavistamun/src/components/index/Hero2.tsx",[],"/Users/jmeng/Documents/code/montavistamun/src/components/index/Stats.tsx",[],"/Users/jmeng/Documents/code/montavistamun/src/components/index/hero/Video.tsx",["574"],"import { graphql, useStaticQuery } from \"gatsby\";\nimport Img from \"gatsby-image\";\nimport React from \"react\";\nimport YouTube from \"react-youtube\";\nexport default function Video() {\n\tconst [showVideo, setShowVideo] = React.useState(false);\n\tconst data = useStaticQuery(graphql`\n\t\tquery {\n\t\t\tthumbnail: file(relativePath: { eq: \"thumbnail.png\" }) {\n\t\t\t\tchildImageSharp {\n\t\t\t\t\t# Specify a fixed image and fragment.\n\t\t\t\t\t# The default width is 400 pixels\n\t\t\t\t\tfluid(maxWidth: 1200) {\n\t\t\t\t\t\t...GatsbyImageSharpFluid_withWebp\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t`);\n\treturn (\n\t\t<div className=\"relative mx-auto w-full rounded-lg shadow-lg lg:mx-4 xl:mx-8\">\n\t\t\t{showVideo && (\n\t\t\t\t<div className=\"relative block w-full min-h-32 lg:min-h-64 xl:min-h-80 rounded-lg overflow-hidden focus:outline-none focus:ring bg-gray-300\">\n\t\t\t\t\t<YouTube\n\t\t\t\t\t\tclassName={\"\"}\n\t\t\t\t\t\topts={{\n\t\t\t\t\t\t\twidth: \"100%\",\n\t\t\t\t\t\t\tplayerVars: {\n\t\t\t\t\t\t\t\tstart: 2,\n\t\t\t\t\t\t\t\tautoplay: 1,\n\t\t\t\t\t\t\t\trel: 0,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tvideoId={\"xc1dnpIKIcY\"}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t{!showVideo && (\n\t\t\t\t<button\n\t\t\t\t\tonClick={() => setShowVideo(true)}\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tclassName=\"relative block w-full rounded-lg overflow-hidden focus:outline-none focus:ring\"\n\t\t\t\t>\n\t\t\t\t\t<Img\n\t\t\t\t\t\tclassName=\"w-full\"\n\t\t\t\t\t\tfluid={data.thumbnail.childImageSharp.fluid}\n\t\t\t\t\t\talt=\"We Are MVMUN\"\n\t\t\t\t\t/>\n\n\t\t\t\t\t<div className=\"absolute inset-0 w-full h-full flex items-center justify-center\">\n\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\tclassName=\"h-20 w-20 text-indigo-500\"\n\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\tviewBox=\"0 0 84 84\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<circle\n\t\t\t\t\t\t\t\topacity=\"0.9\"\n\t\t\t\t\t\t\t\tcx=\"42\"\n\t\t\t\t\t\t\t\tcy=\"42\"\n\t\t\t\t\t\t\t\tr=\"42\"\n\t\t\t\t\t\t\t\tfill=\"white\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<path d=\"M55.5039 40.3359L37.1094 28.0729C35.7803 27.1869 34 28.1396 34 29.737V54.263C34 55.8604 35.7803 56.8131 37.1094 55.9271L55.5038 43.6641C56.6913 42.8725 56.6913 41.1275 55.5039 40.3359Z\" />\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</div>\n\t\t\t\t</button>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","/Users/jmeng/Documents/code/montavistamun/src/components/kennedy/secretariatData.tsx",[],"/Users/jmeng/Documents/code/montavistamun/src/components/layout/AdminLayout.tsx",["575"],"import { useLocation } from \"@reach/router\";\nimport { Link } from \"gatsby\";\nimport * as Icons from \"heroicons-react\";\nimport React, { useState } from \"react\";\nimport AuthContext from \"../../context/AuthContext\";\nimport useRequireLogin from \"../accounts/useRequireLogin\";\nimport Transition from \"../Transition\";\nimport { Layout, Main } from \"./index\";\nimport Navbar from \"./Navbar\";\nimport SEO from \"./SEO\";\n\nconst AdminLinks: TypedPageOrDropdown[] = [\n\t{\n\t\ttype: \"page\",\n\t\tname: \"Manage Members\",\n\t\tpath: \"/admin/members\",\n\t\ticon: <Icons.UsersOutline />,\n\t},\n\t{\n\t\ttype: \"page\",\n\t\tname: \"Edit Awards\",\n\t\tpath: \"/admin/awards\",\n\t\ticon: <Icons.AcademicCapOutline />,\n\t},\n\t{\n\t\ttype: \"page\",\n\t\tname: \"Conference Registration\",\n\t\tpath: \"/admin/conference-registration\",\n\t\ticon: <Icons.PencilAltOutline />,\n\t},\n\t{\n\t\ttype: \"page\",\n\t\tname: \"Member Statistics\",\n\t\tpath: \"/admin/member-statistics\",\n\t\ticon: <Icons.ChartBarOutline />,\n\t},\n\t{\n\t\ttype: \"page\",\n\t\tname: \"Admin Logs\",\n\t\tpath: \"/admin/logs\",\n\t\ticon: <Icons.CollectionOutline />,\n\t},\n];\nexport default function AdminLayout({\n\ttitle,\n\tchildren,\n}: {\n\ttitle: string;\n\tchildren: React.ReactNode | React.ReactNodeArray;\n}) {\n\tconst [mobileSidebarExpanded, setMobileSidebarExpanded] = useState(false);\n\tuseRequireLogin();\n\tconst { loading, admin } = React.useContext(AuthContext);\n\tconst location = useLocation();\n\n\tif (!loading && !admin) {\n\t\treturn (\n\t\t\t<Layout title={\"Permission Denied\"}>\n\t\t\t\t<Main>\n\t\t\t\t\t<h1\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\"text-3xl leading-9 font-extrabold tracking-tight text-gray-900 sm:text-4xl sm:leading-10\"\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\tPermission Denied\n\t\t\t\t\t</h1>\n\t\t\t\t\t<p className={\"mt-4 mb-20\"}>\n\t\t\t\t\t\tSorry, but you don't have permission to view this page.\n\t\t\t\t\t</p>\n\t\t\t\t</Main>\n\t\t\t</Layout>\n\t\t);\n\t}\n\treturn (\n\t\t<div className={\"flex flex-col min-h-screen font-sans text-gray-900 \"}>\n\t\t\t<Navbar shadow={\"always\"} noMaxWidth />\n\t\t\t<SEO\n\t\t\t\tkeywords={[\n\t\t\t\t\t\"cuptertino\",\n\t\t\t\t\t\"model un\",\n\t\t\t\t\t\"mun\",\n\t\t\t\t\t\"monta vista\",\n\t\t\t\t\t\"club\",\n\t\t\t\t\t\"model united nations\",\n\t\t\t\t]}\n\t\t\t\ttitle={title}\n\t\t\t/>\n\t\t\t<div className=\"h-ca-no-footer flex overflow-hidden bg-gray-100\">\n\t\t\t\t{/* Off-canvas menu for mobile */}\n\n\t\t\t\t<div className=\"md:hidden\">\n\t\t\t\t\t<Transition show={mobileSidebarExpanded}>\n\t\t\t\t\t\t<div className=\"fixed inset-0 flex z-40\">\n\t\t\t\t\t\t\t<Transition\n\t\t\t\t\t\t\t\tenter=\"transition-opacity ease-linear duration-300\"\n\t\t\t\t\t\t\t\tenterFrom=\"opacity-0\"\n\t\t\t\t\t\t\t\tenterTo=\"opacity-100\"\n\t\t\t\t\t\t\t\tleave=\"transition-opacity ease-linear duration-300\"\n\t\t\t\t\t\t\t\tleaveFrom=\"opacity-100\"\n\t\t\t\t\t\t\t\tleaveTo=\"opacity-0\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div className=\"fixed inset-0\">\n\t\t\t\t\t\t\t\t\t<div className=\"absolute inset-0 bg-gray-600 opacity-75\"></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Transition>\n\t\t\t\t\t\t\t{/*\n            Off-canvas menu, show/hide based on off-canvas menu state.\n\n            Entering: \"transition ease-in-out duration-300 transform\"\n              From: \"-translate-x-full\"\n              To: \"translate-x-0\"\n            Leaving: \"transition ease-in-out duration-300 transform\"\n              From: \"translate-x-0\"\n              To: \"-translate-x-full\"\n          */}\n\t\t\t\t\t\t\t<Transition\n\t\t\t\t\t\t\t\tenter=\"transition ease-in-out duration-300 transform\"\n\t\t\t\t\t\t\t\tenterFrom=\"-translate-x-full\"\n\t\t\t\t\t\t\t\tenterTo=\"translate-x-0\"\n\t\t\t\t\t\t\t\tleave=\"transition ease-in-out duration-300 transform\"\n\t\t\t\t\t\t\t\tleaveFrom=\"translate-x-0\"\n\t\t\t\t\t\t\t\tleaveTo=\"-translate-x-full\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<div className=\"relative flex-1 flex flex-col max-w-xs w-full bg-white\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"absolute top-0 right-0 -mr-14 p-1\">\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"flex items-top pt-3 justify-center h-32 w-12 rounded-sm focus:outline-none focus:bg-gray-600\"\n\t\t\t\t\t\t\t\t\t\t\t\taria-label=\"Close sidebar\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetMobileSidebarExpanded(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfalse\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<Icons.X className=\"h-6 w-6 text-white\" />\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex-1 h-0 pt-5 pb-4 overflow-y-auto\">\n\t\t\t\t\t\t\t\t\t\t\t<h1\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"text-lg leading-5 font-medium pl-4\"\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tAdmin Dashboard\n\t\t\t\t\t\t\t\t\t\t\t</h1>\n\n\t\t\t\t\t\t\t\t\t\t\t<nav className=\"mt-5 px-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t{AdminLinks.map(\n\t\t\t\t\t\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpage: TypedPageOrDropdown\n\t\t\t\t\t\t\t\t\t\t\t\t\t) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpage.type ==\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"dropdown\" ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<SidebarDropdown\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname={page.name}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpages={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpage.pages\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={page.name}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<PageLink\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={page.name}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname={page.name}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpath={page.path}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ticon={page.icon}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmobile\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t</nav>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"flex-shrink-0 w-14\">\n\t\t\t\t\t\t\t\t\t\t{/* Force sidebar to shrink to fit close icon */}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t</Transition>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Transition>\n\t\t\t\t</div>\n\n\t\t\t\t{/* Static sidebar for desktop */}\n\t\t\t\t<div className=\"hidden md:flex md:flex-shrink-0\">\n\t\t\t\t\t<div className=\"flex flex-col w-64\">\n\t\t\t\t\t\t{/* Sidebar component, swap this element with another sidebar if you like */}\n\t\t\t\t\t\t<div className=\"flex flex-col h-0 flex-1 border-r border-gray-200 bg-white\">\n\t\t\t\t\t\t\t<div className=\"flex-1 flex flex-col pt-5 pb-4 overflow-y-auto\">\n\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\tto={\"/admin/\"}\n\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\"text-lg leading-5 font-bold pl-4 text-gray-700 hover:text-black\"\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tAdmin Dashboard\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t<nav className=\"mt-5 flex-1 px-2 bg-white\">\n\t\t\t\t\t\t\t\t\t{/*<SidebarDropdown*/}\n\t\t\t\t\t\t\t\t\t{/*\tname={\"Members\"}*/}\n\t\t\t\t\t\t\t\t\t{/*\ticon={<Icons.UsersOutline />}*/}\n\t\t\t\t\t\t\t\t\t{/*\tbasePath={\"/admin/members\"}*/}\n\t\t\t\t\t\t\t\t\t{/*\tpages={[*/}\n\t\t\t\t\t\t\t\t\t{/*\t\t{*/}\n\t\t\t\t\t\t\t\t\t{/*\t\t\tname: \"List\",*/}\n\t\t\t\t\t\t\t\t\t{/*\t\t\tpath: \"members\",*/}\n\t\t\t\t\t\t\t\t\t{/*\t\t\ticon: <Icons.ViewListOutline />,*/}\n\t\t\t\t\t\t\t\t\t{/*\t\t},*/}\n\t\t\t\t\t\t\t\t\t{/*\t\t{*/}\n\t\t\t\t\t\t\t\t\t{/*\t\t\tname: \"Lookup\",*/}\n\t\t\t\t\t\t\t\t\t{/*\t\t\tpath: \"members\",*/}\n\t\t\t\t\t\t\t\t\t{/*\t\t\ticon: <Icons.SearchOutline />,*/}\n\t\t\t\t\t\t\t\t\t{/*\t\t},*/}\n\t\t\t\t\t\t\t\t\t{/*\t]}*/}\n\t\t\t\t\t\t\t\t\t{/*/>*/}\n\t\t\t\t\t\t\t\t\t{AdminLinks.map(\n\t\t\t\t\t\t\t\t\t\t(page: TypedPageOrDropdown) =>\n\t\t\t\t\t\t\t\t\t\t\tpage.type == \"dropdown\" ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<SidebarDropdown\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={page.name}\n\t\t\t\t\t\t\t\t\t\t\t\t\tname={page.name}\n\t\t\t\t\t\t\t\t\t\t\t\t\tpages={page.pages}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t<PageLink\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={page.name}\n\t\t\t\t\t\t\t\t\t\t\t\t\tname={page.name}\n\t\t\t\t\t\t\t\t\t\t\t\t\tpath={page.path}\n\t\t\t\t\t\t\t\t\t\t\t\t\ticon={page.icon}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</nav>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"flex flex-col w-0 flex-1 overflow-hidden\">\n\t\t\t\t\t<div className=\"md:hidden pl-1 pt-1 sm:pl-3 sm:pt-3\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"-ml-0.5 -mt-0.5 h-12 w-12 inline-flex items-center justify-center rounded-md text-gray-500 hover:text-gray-900 focus:outline-none focus:bg-gray-200 transition ease-in-out duration-150\"\n\t\t\t\t\t\t\taria-label=\"Open sidebar\"\n\t\t\t\t\t\t\tonClick={() => setMobileSidebarExpanded(true)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Icons.Menu className=\"h-6 w-6\" />\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<main\n\t\t\t\t\t\tclassName=\"flex-1 relative z-0 overflow-y-auto focus:outline-none\"\n\t\t\t\t\t\ttabIndex={0}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"pt-2 pb-6 md:py-6\">\n\t\t\t\t\t\t\t<div className=\"max-w-7xl mx-auto px-4 sm:px-6 md:px-8\">\n\t\t\t\t\t\t\t\t<nav className=\"hidden sm:flex items-center text-sm leading-5 font-medium mt-2 mb-4\">\n\t\t\t\t\t\t\t\t\t{location.pathname\n\t\t\t\t\t\t\t\t\t\t.split(\"/\")\n\t\t\t\t\t\t\t\t\t\t.filter((el) => el !== \"\") // get rid of leading slash, if it exists\n\t\t\t\t\t\t\t\t\t\t.map((name, i, arr) => (\n\t\t\t\t\t\t\t\t\t\t\t<React.Fragment key={name}>\n\t\t\t\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\t\t\t\tto={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"/\" +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tarr\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.slice(0, i + 1)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.join(\"/\")\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-gray-500 hover:text-gray-700 transition duration-150 ease-in-out\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{name\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.replace(/-/g, \" \")\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.split(\" \")\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.map(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(word) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tword\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.charAt(0)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.toUpperCase() +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tword\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.substring(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t1\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.toLowerCase()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.join(\" \")}\n\t\t\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t\t\t\t{i !== arr.length - 1 && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Icons.ChevronRight className=\"flex-shrink-0 mx-2 h-5 w-5 text-gray-400\" />\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</nav>\n\t\t\t\t\t\t\t\t{children}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</main>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\ninterface Page {\n\tname: string;\n\t/**\n\t * Path relative to base path\n\t */\n\tpath: string;\n\n\ticon?: React.ReactElement;\n}\ninterface TypedPage extends Page {\n\ttype: \"page\";\n}\ninterface TypedDropdown {\n\ttype: \"dropdown\";\n\tname: string;\n\tpages: Page[];\n}\ntype TypedPageOrDropdown = TypedPage | TypedDropdown;\nfunction SidebarDropdown({\n\tname,\n\tbasePath,\n\tpages,\n\ticon,\n}: {\n\tname: string;\n\t/**\n\t * Defaults to root\n\t */\n\tbasePath?: string;\n\n\ticon?: React.ReactElement;\n\tpages: Page[];\n}) {\n\tconst [expanded, setExpanded] = useState(false);\n\n\treturn (\n\t\t<div>\n\t\t\t<button\n\t\t\t\tclassName=\"mt-1 group w-full flex items-center pl-2 pr-1 py-2 text-sm leading-5 font-medium rounded-md bg-white text-gray-600 hover:text-gray-900 hover:bg-gray-50 focus:outline-none focus:text-gray-900 focus:bg-gray-50 transition ease-in-out duration-150\"\n\t\t\t\tonClick={() => setExpanded((old) => !old)}\n\t\t\t>\n\t\t\t\t{icon &&\n\t\t\t\t\tReact.cloneElement(icon, {\n\t\t\t\t\t\tclassName:\n\t\t\t\t\t\t\t\"mr-3 h-6 w-6 text-gray-400 group-hover:text-gray-600 group-focus:text-gray-600 transition ease-in-out duration-150\",\n\t\t\t\t\t\tfill: \"none\",\n\t\t\t\t\t\tstroke: \"currentColor\",\n\t\t\t\t\t})}\n\t\t\t\t{name}\n\t\t\t\t<Icons.ChevronRight\n\t\t\t\t\tclassName={\n\t\t\t\t\t\t\"ml-auto h-5 w-5 transform group-hover:text-gray-400 group-focus:text-gray-400 transition-colors ease-in-out duration-150 \" +\n\t\t\t\t\t\t(expanded ? \"text-gray-400 rotate-90\" : \"text-gray-300\")\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t</button>\n\t\t\t{expanded && (\n\t\t\t\t<div className=\"mt-1\">\n\t\t\t\t\t{pages.map((page) => (\n\t\t\t\t\t\t<PageLink\n\t\t\t\t\t\t\t{...page}\n\t\t\t\t\t\t\tpath={(basePath || \"/\") + page.path}\n\t\t\t\t\t\t\tkey={page.path}\n\t\t\t\t\t\t\tdropdownElement\n\t\t\t\t\t\t/>\n\t\t\t\t\t))}\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n\nfunction PageLink({\n\tpath,\n\ticon,\n\tname,\n\tdropdownElement,\n\tmobile,\n}: Page & {\n\tdropdownElement?: boolean;\n\n\tmobile?: boolean;\n}) {\n\treturn (\n\t\t<Link\n\t\t\tto={path}\n\t\t\tclassName={\n\t\t\t\t!dropdownElement\n\t\t\t\t\t? `mt-1 group flex items-center px-2 py-2 ${\n\t\t\t\t\t\t\tmobile ? \"text-base\" : \"text-sm\"\n\t\t\t\t\t  } ${\n\t\t\t\t\t\t\tmobile ? \"leading-5\" : \"leading-6\"\n\t\t\t\t\t  } font-medium  rounded-md hover:text-gray-900 hover:bg-gray-50 focus:outline-none focus:text-gray-900 ${\n\t\t\t\t\t\t\tmobile ? \"focus:bg-gray-50\" : \"focus:bg-gray-100\"\n\t\t\t\t\t  } transition ease-in-out duration-150`\n\t\t\t\t\t: \"group w-full flex items-center pl-11 pr-2 py-2 text-sm leading-5 font-medium text-gray-600 rounded-md hover:text-gray-900 hover:bg-gray-50 focus:outline-none focus:text-gray-900 focus:bg-gray-50 transition ease-in-out duration-150\"\n\t\t\t}\n\t\t>\n\t\t\t{icon &&\n\t\t\t\tReact.cloneElement(icon, {\n\t\t\t\t\tclassName: `${\n\t\t\t\t\t\tmobile ? \"mr-4\" : \"mr-3\"\n\t\t\t\t\t} h-6 w-6 text-gray-400 group-hover:text-gray-600 group-focus:text-gray-600 transition ease-in-out duration-150`,\n\t\t\t\t\tfill: \"none\",\n\t\t\t\t\tstroke: \"currentColor\",\n\t\t\t\t})}\n\t\t\t{name}\n\t\t</Link>\n\t);\n}\n","/Users/jmeng/Documents/code/montavistamun/src/components/layout/AuthLayout.tsx",[],"/Users/jmeng/Documents/code/montavistamun/src/components/layout/Footer.tsx",[],"/Users/jmeng/Documents/code/montavistamun/src/components/layout/Layout.tsx",["576"],"import React from \"react\";\nimport AuthContext from \"../../context/AuthContext\";\nimport Footer from \"./Footer\";\nimport Navbar from \"./Navbar\";\nimport SEO from \"./SEO\";\n\nfunction useHeapAnalytics() {\n\tconst { user, loading, verified, admin } = React.useContext(AuthContext);\n\tReact.useEffect(() => {\n\t\tif (user) {\n\t\t\theap.identify(\"fbuser-\" + user.uid);\n\t\t\theap.addUserProperties({\n\t\t\t\tname: user.displayName,\n\t\t\t\temail: user.email,\n\t\t\t\thasAccount: true,\n\t\t\t\temailVerified: user.emailVerified,\n\t\t\t\tverifiedMember: verified,\n\t\t\t\tadmin,\n\t\t\t});\n\t\t} else {\n\t\t\theap.addUserProperties({\n\t\t\t\thasAccount: false,\n\t\t\t});\n\t\t}\n\t}, []);\n}\n\nexport default function Layout({\n\tchildren,\n\ttitle,\n\tclassName,\n\twrapperClassName,\n\tnavbarScrolledClassName,\n\tnavbarUnscrolledClassName,\n\tlightFooter,\n\tgray,\n\tnavbarShadow,\n\tformatTitle,\n\tdescription,\n}: {\n\tchildren: React.ReactNode | React.ReactNodeArray | Element[];\n\t/**\n\t * A title for the page, to be displayed in the browser tab\n\t */\n\ttitle: string;\n\t/**\n\t * A description for the page, displayed in og cards.\n\t */\n\tdescription?: string;\n\t/**\n\t * A list of space delimited classes to be added to the topmost div of the page (parent to the navbar and body).\n\t */\n\tclassName?: string;\n\t/**\n\t * A list of space delimited classes to be added to the content wrapper.\n\t */\n\twrapperClassName?: string;\n\n\t/**\n\t * A list of space delimited classes to be added to the navbar when the page has not yet been scrolled (i.e. the shadow is not visible)\n\t */\n\tnavbarUnscrolledClassName?: string;\n\n\t/**\n\t * A list of space delimited classes to be added to the navbar when the page has been scrolled (i.e. the shadow is visible)\n\t */\n\tnavbarScrolledClassName?: string;\n\n\t/**\n\t * If provided, the footer will be rendered in its light theme\n\t */\n\tlightFooter?: boolean;\n\t/**\n\t * If provided, the page will be rendered with a gray background (for cards)\n\t */\n\tgray?: boolean;\n\t/**\n\t * Specify the shadow for the navbar.\n\t */\n\tnavbarShadow?: \"always\" | \"scroll\" | \"never\";\n\t/**\n\t * Whether or not to format the title by appending the name of the website to the end.\n\t *\n\t */\n\tformatTitle?: boolean;\n}): React.ReactElement {\n\tuseHeapAnalytics();\n\treturn (\n\t\t<div\n\t\t\tclassName={\n\t\t\t\t\"flex flex-col min-h-screen font-sans text-gray-900 \" +\n\t\t\t\t(className || \"\") +\n\t\t\t\t\" \" +\n\t\t\t\t(gray ? \"bg-gray-100\" : \"\")\n\t\t\t}\n\t\t>\n\t\t\t<Navbar\n\t\t\t\tscrolledClassName={navbarScrolledClassName}\n\t\t\t\tunscrolledClassName={navbarUnscrolledClassName}\n\t\t\t\tshadow={navbarShadow}\n\t\t\t/>\n\t\t\t<SEO\n\t\t\t\ttitle={title}\n\t\t\t\tformatTitle={formatTitle}\n\t\t\t\tdescription={description}\n\t\t\t/>\n\t\t\t<div className={wrapperClassName}>{children}</div>\n\n\t\t\t<Footer dark={!lightFooter} />\n\t\t</div>\n\t);\n}\n","/Users/jmeng/Documents/code/montavistamun/src/components/layout/Main.tsx",[],"/Users/jmeng/Documents/code/montavistamun/src/components/layout/Navbar.tsx",["577"],"import { useLocation } from \"@reach/router\";\nimport { graphql, Link, useStaticQuery } from \"gatsby\";\nimport Img from \"gatsby-image\";\nimport * as Icon from \"heroicons-react\";\nimport React, { ReactElement, useState } from \"react\";\nimport AuthContext from \"../../context/AuthContext\";\nimport Transition from \"../Transition\";\nimport navLinks from \"./navLinks\";\n\nfunction Navbar({\n\tunscrolledClassName,\n\tscrolledClassName,\n\tshadow,\n\tnoMaxWidth,\n}: {\n\t/**\n\t * Defines a set of classes to be added to the navbar when the page has not been scrolled (i.e. the navbar doesn't have a drop shadow)\n\t */\n\tunscrolledClassName?: string;\n\t/**\n\t * Defines a set of classes to be added to the navbar when the page has been scrolled (i.e. the navbar a drop shadow)\n\t */\n\tscrolledClassName?: string;\n\tshadow?: \"always\" | \"scroll\" | \"never\";\n\tnoMaxWidth?: boolean;\n}): React.ReactElement {\n\tshadow = shadow || \"scroll\";\n\tconst [isExpanded, setIsExpanded] = useState(false);\n\tconst auth = React.useContext(AuthContext);\n\tconst toggleExpansion = () => setIsExpanded((old) => !old);\n\n\t// only show a box shadow when the user has scrolled a little bit\n\tconst [showShadow, setShowShadow] = useState(shadow === \"always\");\n\tReact.useEffect(() => {\n\t\tif (shadow !== \"scroll\") return;\n\t\tconst scrollHandler = () => {\n\t\t\tsetShowShadow(window.scrollY > 10);\n\t\t};\n\t\twindow.addEventListener(\"scroll\", scrollHandler);\n\t\treturn () => window.removeEventListener(\"scroll\", scrollHandler);\n\t}, []);\n\tconst location = useLocation();\n\n\tconst logoData = useStaticQuery(graphql`\n\t\tquery {\n\t\t\tlogo: file(relativePath: { eq: \"logo/nav-logo.png\" }) {\n\t\t\t\tchildImageSharp {\n\t\t\t\t\t# Specify a fixed image and fragment.\n\t\t\t\t\t# The default width is 400 pixels\n\t\t\t\t\tfixed(height: 32) {\n\t\t\t\t\t\t...GatsbyImageSharpFixed_withWebp_noBase64\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t`);\n\n\treturn (\n\t\t<>\n\t\t\t<nav\n\t\t\t\tclassName={`bg-white fixed w-full z-30 md:transition md:ease-in-out md:duration-200 ${\n\t\t\t\t\tshowShadow || isExpanded\n\t\t\t\t\t\t? \"shadow \" + (scrolledClassName || \"\")\n\t\t\t\t\t\t: unscrolledClassName || \"\"\n\t\t\t\t}`}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclassName={\n\t\t\t\t\t\t\"mx-auto px-4 sm:px-6 lg:px-8 \" +\n\t\t\t\t\t\t(noMaxWidth ? \"\" : \"max-w-7xl\")\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"flex justify-between h-16\">\n\t\t\t\t\t\t<div className=\"flex\">\n\t\t\t\t\t\t\t<div className=\"-ml-2 mr-2 flex items-center md:hidden\">\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tonClick={toggleExpansion}\n\t\t\t\t\t\t\t\t\tclassName=\"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 focus:text-gray-500 transition duration-150 ease-in-out\"\n\t\t\t\t\t\t\t\t\taria-label=\"Main menu\"\n\t\t\t\t\t\t\t\t\taria-expanded=\"false\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{!isExpanded ? (\n\t\t\t\t\t\t\t\t\t\t<Icon.Menu className=\"h-6 w-6\" />\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<Icon.X className=\"h-6 w-6\" />\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"flex-shrink-0 flex items-center\">\n\t\t\t\t\t\t\t\t<Link to=\"/\" aria-label=\"Home\">\n\t\t\t\t\t\t\t\t\t<Img\n\t\t\t\t\t\t\t\t\t\tclassName=\"h-8 w-auto\"\n\t\t\t\t\t\t\t\t\t\tfixed={\n\t\t\t\t\t\t\t\t\t\t\tlogoData.logo.childImageSharp.fixed\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\talt=\"MVMUN logo\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"hidden md:ml-6 md:flex\">\n\t\t\t\t\t\t\t\t{[\n\t\t\t\t\t\t\t\t\t...navLinks,\n\t\t\t\t\t\t\t\t\t...(auth.verified ? [\"Resources\"] : []),\n\t\t\t\t\t\t\t\t].map((page) => (\n\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\tto={`/${page.toLowerCase()}`}\n\t\t\t\t\t\t\t\t\t\tkey={page}\n\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\"ml-8 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium leading-5 transition duration-150 ease-in-out focus:outline-none \" +\n\t\t\t\t\t\t\t\t\t\t\t(location.pathname\n\t\t\t\t\t\t\t\t\t\t\t\t.toLowerCase()\n\t\t\t\t\t\t\t\t\t\t\t\t.replace(/\\//g, \"\") ==\n\t\t\t\t\t\t\t\t\t\t\tpage.toLowerCase()\n\t\t\t\t\t\t\t\t\t\t\t\t? /*     ACTIVE: */ \"border-indigo-500 text-gray-900 focus:border-indigo-700\"\n\t\t\t\t\t\t\t\t\t\t\t\t: /* NOT ACTIVE: */ \"border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 focus:text-gray-700 focus:border-gray-300\")\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{page}\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"flex items-center\">\n\t\t\t\t\t\t\t{auth.loading || !auth.user ? (\n\t\t\t\t\t\t\t\t<div className=\"flex-shrink-0\">\n\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\tto={\"/account/create\"}\n\t\t\t\t\t\t\t\t\t\tclassName=\"relative inline-flex items-center px-4 py-2 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-indigo-600 shadow-sm hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:ring-indigo-500 active:bg-indigo-700 transition ease-in-out duration-150\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<span>Join Today</span>\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\tto={\"/account/login\"}\n\t\t\t\t\t\t\t\t\t\tclassName=\"hidden md:inline-block ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm leading-5 font-medium rounded-md text-gray-900 bg-white hover:text-white shadow-sm hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:ring-indigo-500 active:bg-indigo-700 transition ease-in-out duration-150\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<span>Login</span>\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<div className=\"hidden md:ml-4 md:flex-shrink-0 md:flex md:items-center\">\n\t\t\t\t\t\t\t\t\t<ProfileDropdown />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t{isExpanded && (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div className=\"pt-2 pb-3\">\n\t\t\t\t\t\t\t{navLinks.map((page, i) => (\n\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\tto={\"/\" + page.toLowerCase()}\n\t\t\t\t\t\t\t\t\tkey={page}\n\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t(i !== 0 ? \"mt-1 \" : \"\") +\n\t\t\t\t\t\t\t\t\t\t\"block pl-3 pr-4 py-2 border-l-4 text-base font-medium focus:outline-none transition duration-150 ease-in-out sm:pl-5 sm:pr-6 \" +\n\t\t\t\t\t\t\t\t\t\t(location.pathname\n\t\t\t\t\t\t\t\t\t\t\t.toLowerCase()\n\t\t\t\t\t\t\t\t\t\t\t.replace(/\\//g, \"\") ==\n\t\t\t\t\t\t\t\t\t\tpage.toLowerCase()\n\t\t\t\t\t\t\t\t\t\t\t? /*     ACTIVE: */ \"border-indigo-500 text-indigo-700 bg-indigo-50 focus:text-indigo-800 focus:bg-indigo-100 focus:border-indigo-700\"\n\t\t\t\t\t\t\t\t\t\t\t: /* NOT ACTIVE: */ \"border-transparent text-gray-600 hover:text-gray-800 hover:bg-gray-50 hover:border-gray-300 focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300\")\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{page}\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t{!auth.user && (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\tto={\"/account/create\"}\n\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\"block pl-3 pr-4 py-2 border-l-4 text-base font-medium focus:outline-none transition duration-150 ease-in-out sm:pl-5 sm:pr-6 \" +\n\t\t\t\t\t\t\t\t\t\t\t(location.pathname\n\t\t\t\t\t\t\t\t\t\t\t\t.toLowerCase()\n\t\t\t\t\t\t\t\t\t\t\t\t.replace(/\\//g, \"\") ==\n\t\t\t\t\t\t\t\t\t\t\t\"/account/create\"\n\t\t\t\t\t\t\t\t\t\t\t\t? /*     ACTIVE: */ \"border-indigo-500 text-indigo-700 bg-indigo-50 focus:text-indigo-800 focus:bg-indigo-100 focus:border-indigo-700\"\n\t\t\t\t\t\t\t\t\t\t\t\t: /* NOT ACTIVE: */ \"border-transparent text-gray-600 hover:text-gray-800 hover:bg-gray-50 hover:border-gray-300 focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300\")\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tJoin Today\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\tto={\"/account/login\"}\n\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\"block pl-3 pr-4 py-2 border-l-4 text-base font-medium focus:outline-none transition duration-150 ease-in-out sm:pl-5 sm:pr-6 \" +\n\t\t\t\t\t\t\t\t\t\t\t(location.pathname\n\t\t\t\t\t\t\t\t\t\t\t\t.toLowerCase()\n\t\t\t\t\t\t\t\t\t\t\t\t.replace(/\\//g, \"\") ==\n\t\t\t\t\t\t\t\t\t\t\t\"/account/login\"\n\t\t\t\t\t\t\t\t\t\t\t\t? /*     ACTIVE: */ \"border-indigo-500 text-indigo-700 bg-indigo-50 focus:text-indigo-800 focus:bg-indigo-100 focus:border-indigo-700\"\n\t\t\t\t\t\t\t\t\t\t\t\t: /* NOT ACTIVE: */ \"border-transparent text-gray-600 hover:text-gray-800 hover:bg-gray-50 hover:border-gray-300 focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300\")\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tLogin\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{auth.user && (\n\t\t\t\t\t\t\t<div className=\"pt-4 pb-3 border-t border-gray-200\">\n\t\t\t\t\t\t\t\t<div className=\"flex items-center px-4 sm:px-6\">\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"text-base leading-6 text-gray-800 font-semibold\">\n\t\t\t\t\t\t\t\t\t\t\t{auth.user?.displayName}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"text-sm font-medium leading-5 text-gray-500\">\n\t\t\t\t\t\t\t\t\t\t\t{auth.user?.email}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"mt-3\">\n\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\tto=\"/dashboard\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"block px-4 py-2 text-base font-medium text-gray-500 hover:text-gray-800 hover:bg-gray-100 focus:outline-none focus:text-gray-800 focus:bg-gray-100 transition duration-150 ease-in-out sm:px-6\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tMember Dashboard\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t{auth.admin && (\n\t\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\t\tto=\"/admin\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"block px-4 py-2 text-base font-medium text-gray-500 hover:text-gray-800 hover:bg-gray-100 focus:outline-none focus:text-gray-800 focus:bg-gray-100 transition duration-150 ease-in-out sm:px-6\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tAdmin Dashboard\n\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\tto=\"/account/settings\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"mt-1 block px-4 py-2 text-base font-medium text-gray-500 hover:text-gray-800 hover:bg-gray-100 focus:outline-none focus:text-gray-800 focus:bg-gray-100 transition duration-150 ease-in-out sm:px-6\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tSettings\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t<div className=\"border-t border-gray-100\"></div>\n\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\tto=\"/account/logout\"\n\t\t\t\t\t\t\t\t\t\tstate={{\n\t\t\t\t\t\t\t\t\t\t\tcancelReturnURL: location.pathname,\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tclassName=\"mt-1 block px-4 py-2 text-base font-medium text-gray-500 hover:text-gray-800 hover:bg-gray-100 focus:outline-none focus:text-gray-800 focus:bg-gray-100 transition duration-150 ease-in-out sm:px-6\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tSign out\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</nav>\n\t\t\t<div className={\"w-full h-16\"} />\n\t\t</>\n\t);\n}\nfunction ProfileDropdown(): ReactElement {\n\tconst [expanded, setExpanded] = useState(false);\n\tconst { user, loading, admin } = React.useContext(AuthContext);\n\tconst toggleExpanded = () => {\n\t\tsetExpanded((old) => !old);\n\t};\n\tconst ref = React.useRef<HTMLDivElement>(null);\n\tReact.useEffect(() => {\n\t\t// https://stackoverflow.com/a/42234988, https://stackoverflow.com/a/43851475\n\t\tconst handleClickOutside = (e: Event) => {\n\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t\t// @ts-ignore\n\t\t\tif (ref.current && !ref.current?.contains(e.target as Node)) {\n\t\t\t\tsetExpanded(false);\n\t\t\t}\n\t\t};\n\t\tdocument.addEventListener(\"mousedown\", handleClickOutside);\n\t\treturn () =>\n\t\t\tdocument.removeEventListener(\"mousedown\", handleClickOutside);\n\t}, [ref]);\n\n\treturn (\n\t\t<div className=\"ml-3 relative\" ref={ref}>\n\t\t\t<div>\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"flex text-sm text-gray-500 hover:text-gray-700 font-medium leading-5 border-2 border-transparent rounded-md focus:outline-none focus:border-gray-300 py-2 px-3 transition duration-150 ease-in-out\"\n\t\t\t\t\tid=\"user-menu\"\n\t\t\t\t\taria-label=\"User menu\"\n\t\t\t\t\taria-haspopup=\"true\"\n\t\t\t\t\tonClick={toggleExpanded}\n\t\t\t\t>\n\t\t\t\t\tHello, {user?.displayName || user?.email}\n\t\t\t\t\t<Icon.ChevronDown className=\"-mr-1 ml-2 h-5 w-5\" />\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t{/*}<!--\n              Profile dropdown panel, show/hide based on dropdown state.\n\n              Entering: \"transition ease-out duration-200\"\n                From: \"transform opacity-0 scale-95\"\n                To: \"transform opacity-100 scale-100\"\n              Leaving: \"transition ease-in duration-75\"\n                From: \"transform opacity-100 scale-100\"\n                To: \"transform opacity-0 scale-95\"\n            -->*/}\n\t\t\t<Transition\n\t\t\t\tshow={expanded}\n\t\t\t\tenter=\"transition ease-out duration-200 transform\"\n\t\t\t\tenterFrom=\"opacity-0 scale-95\"\n\t\t\t\tenterTo=\"opacity-100 scale-100\"\n\t\t\t\tleave=\"transition ease-in duration-75 transform\"\n\t\t\t\tleaveFrom=\"opacity-100 scale-100\"\n\t\t\t\tleaveTo=\"opacity-0 scale-95\"\n\t\t\t>\n\t\t\t\t<div className=\"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"py-1 rounded-md bg-white shadow-xs\"\n\t\t\t\t\t\trole=\"menu\"\n\t\t\t\t\t\taria-orientation=\"vertical\"\n\t\t\t\t\t\taria-labelledby=\"user-menu\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\tto=\"/dashboard\"\n\t\t\t\t\t\t\tclassName=\"block px-4 py-2 text-sm leading-5 text-gray-700 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 transition duration-150 ease-in-out\"\n\t\t\t\t\t\t\trole=\"menuitem\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tMember Dashboard\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t{admin && (\n\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\tto=\"/admin\"\n\t\t\t\t\t\t\t\tclassName=\"block px-4 py-2 text-sm leading-5 text-gray-700 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 transition duration-150 ease-in-out\"\n\t\t\t\t\t\t\t\trole=\"menuitem\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tAdmin Dashboard\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\tto=\"/account/settings\"\n\t\t\t\t\t\t\tclassName=\"block px-4 py-2 text-sm leading-5 text-gray-700 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 transition duration-150 ease-in-out\"\n\t\t\t\t\t\t\trole=\"menuitem\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tSettings\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t<div className=\"border-t border-gray-200\"></div>\n\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\tto=\"/account/logout\"\n\t\t\t\t\t\t\tstate={{\n\t\t\t\t\t\t\t\tcancelReturnURL: location.pathname,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tclassName=\"block px-4 py-2 text-sm leading-5 text-gray-700 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 transition duration-150 ease-in-out\"\n\t\t\t\t\t\t\trole=\"menuitem\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tSign out\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Transition>\n\t\t</div>\n\t);\n}\n\nexport default Navbar;\n","/Users/jmeng/Documents/code/montavistamun/src/components/layout/SEO.tsx",[],"/Users/jmeng/Documents/code/montavistamun/src/components/layout/index.ts",[],"/Users/jmeng/Documents/code/montavistamun/src/components/layout/navLinks.ts",[],"/Users/jmeng/Documents/code/montavistamun/src/components/registration/BMUNRegistrationSection.tsx",["578","579","580","581","582","583","584","585","586","587","588","589"],"import * as Icons from \"heroicons-react\";\nimport React, { useContext, useState } from \"react\";\nimport AuthContext from \"../../context/AuthContext\";\nimport useFirebase from \"../../firebase/useFirebase\";\nimport useRequireLogin from \"../accounts/useRequireLogin\";\nimport { Main } from \"../layout\";\nimport VerticalSteps from \"../shared/VerticalSteps\";\nimport Transition from \"../Transition\";\nimport ConfirmationSection from \"./bmunsections/ConfirmationSection\";\nimport DonationsSection from \"./bmunsections/DonationsSection\";\nimport WaiverFormsSection from \"./bmunsections/WaiverFormsSection\";\nimport EmergencyInformationSection from \"./sections/EmergencyInformationSection\";\nimport PersonalInformationSection from \"./sections/PersonalInformationSection\";\n\nfunction isFunction(\n\tfunctionToCheck: any\n): functionToCheck is (oldData: Record<string, any>) => Record<string, any> {\n\treturn (\n\t\tfunctionToCheck &&\n\t\t{}.toString.call(functionToCheck) === \"[object Function]\"\n\t);\n}\nexport default function BMUNRegistrationSection() {\n\tconst name = \"BMUN\";\n\tconst key = \"bmun\";\n\tuseRequireLogin();\n\tconst firebase = useFirebase();\n\tconst { user, loading: userLoading } = useContext(AuthContext);\n\t// const [user, setUser] = useState(authUser);\n\n\t// React.useEffect(() => {\n\t// \tif (!firebase || !authUser) return;\n\t// \t// setUser(authUser);\n\t// \t(async () => {\n\t// \t\tconst token = await authUser?.getIdToken(true);\n\t// \t\tconst resp = await axios.get(\"/.netlify/functions/get-user-info\", {\n\t// \t\t\tparams: {\n\t// \t\t\t\tuser: \"yJbc2cZ34ebWZdvijZi8EwHg1PF2\",\n\t// \t\t\t},\n\t// \t\t\theaders: {\n\t// \t\t\t\tauthorization: `Bearer ${token}`,\n\t// \t\t\t},\n\t// \t\t});\n\t// \t\tconsole.log(resp);\n\t// \t\tsetUser(resp.data.data);\n\t// \t})();\n\t// }, [firebase, authUser]);\n\tconst [step, setStep] = useState(0);\n\tconst [stepHasChanges, setStepHasChanges] = useState(false);\n\n\tconst [maxStep, setMaxStep] = useState(0);\n\n\tconst [data, updateData] = React.useReducer(\n\t\t(\n\t\t\tstate: Record<string, any>,\n\t\t\taction:\n\t\t\t\t| Record<string, any>\n\t\t\t\t| ((legacyData: Record<string, any>) => Record<string, any>)\n\t\t) => {\n\t\t\tlet updates;\n\t\t\tif (isFunction(action)) {\n\t\t\t\tupdates = action(state);\n\t\t\t} else {\n\t\t\t\tupdates = action;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t...updates,\n\t\t\t};\n\t\t},\n\t\t{}\n\t);\n\tconst [loadingData, setLoadingData] = useState(true);\n\tconst [showChangesNotSavedModal, setShowChangesNotSavedModal] = useState(\n\t\tfalse\n\t);\n\n\t/**\n\t * Updates the data with a section. Dot notation up to one deep is supported (so max one dot in the section).\n\t */\n\tconst handleUpdateData = React.useCallback(\n\t\tasync (section: string, validatedData: any) => {\n\t\t\tif (!firebase) return;\n\n\t\t\tawait Promise.all([\n\t\t\t\tfirebase\n\t\t\t\t\t.firestore()\n\t\t\t\t\t.collection(\"registration\")\n\t\t\t\t\t.doc(user?.uid)\n\t\t\t\t\t.set(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t[section.split(\".\")[0]]:\n\t\t\t\t\t\t\t\tsection.split(\".\").length > 1\n\t\t\t\t\t\t\t\t\t? { [section.split(\".\")[1]]: validatedData }\n\t\t\t\t\t\t\t\t\t: validatedData,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ merge: true }\n\t\t\t\t\t),\n\t\t\t\tfirebase\n\t\t\t\t\t.firestore()\n\t\t\t\t\t.collection(\"registration\")\n\t\t\t\t\t.doc(user?.uid)\n\t\t\t\t\t.collection(\"history\")\n\t\t\t\t\t.add({\n\t\t\t\t\t\ttimestamp: firebase.firestore.FieldValue.serverTimestamp(),\n\t\t\t\t\t\tsection,\n\t\t\t\t\t\tnewData: validatedData,\n\t\t\t\t\t}),\n\t\t\t]);\n\t\t\tupdateData((current) => {\n\t\t\t\tif (section.indexOf(\".\") > -1) {\n\t\t\t\t\tconst sectionFragments = section.split(\".\");\n\t\t\t\t\treturn {\n\t\t\t\t\t\t[sectionFragments[0]]: {\n\t\t\t\t\t\t\t...current[sectionFragments[0]],\n\t\t\t\t\t\t\t[sectionFragments[1]]: validatedData,\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\treturn { [section]: validatedData };\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t[firebase, data, updateData]\n\t);\n\tReact.useEffect(() => {\n\t\tconst handler = (e: BeforeUnloadEvent) => {\n\t\t\te.returnValue = \"You have unsaved changes!\";\n\t\t\treturn false;\n\t\t};\n\t\tif (stepHasChanges) {\n\t\t\twindow.addEventListener(\"beforeunload\", handler);\n\t\t}\n\t\treturn () => window.removeEventListener(\"beforeunload\", handler);\n\t}, [stepHasChanges]);\n\tReact.useEffect(() => {\n\t\tif (!firebase || !user) return;\n\t\tif (!loadingData) return;\n\t\tfirebase\n\t\t\t.firestore()\n\t\t\t.collection(\"registration\")\n\t\t\t.doc(user?.uid)\n\t\t\t.get()\n\t\t\t.then((snapshot) => {\n\t\t\t\tif (!loadingData) {\n\t\t\t\t\t// two requests were started for the data, and this is the second one to return\n\t\t\t\t\t// to avoid overwriting any data that the user may have started entering, don't update the data\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst data = snapshot.data() || {\n\t\t\t\t\tpersonalInformation: {},\n\t\t\t\t\temergencyInformation: {},\n\t\t\t\t};\n\t\t\t\tconsole.log(data, user);\n\t\t\t\tupdateData({\n\t\t\t\t\tpersonalInformation: {\n\t\t\t\t\t\tphone: \"\",\n\t\t\t\t\t\taddressOne: \"\",\n\t\t\t\t\t\taddressTwo: \"\",\n\t\t\t\t\t\tcity: \"\",\n\t\t\t\t\t\tzip: \"\",\n\t\t\t\t\t\tstate: \"CA\",\n\t\t\t\t\t\t...data.personalInformation,\n\t\t\t\t\t},\n\t\t\t\t\temergencyInformation: {\n\t\t\t\t\t\tcontactOneName: \"\",\n\t\t\t\t\t\tcontactOnePhone: \"\",\n\t\t\t\t\t\tcontactOneRelationship: \"\",\n\t\t\t\t\t\tcontactTwoName: \"\",\n\t\t\t\t\t\tcontactTwoPhone: \"\",\n\t\t\t\t\t\tcontactTwoRelationship: \"\",\n\n\t\t\t\t\t\thouseholdMainLanguage: \"English\",\n\n\t\t\t\t\t\thealthInsuranceCarrier: \"\",\n\t\t\t\t\t\thealthInsurancePolicyNumber: \"\",\n\t\t\t\t\t\thealthInsuranceAddressOne: \"\",\n\t\t\t\t\t\thealthInsuranceAddressTwo: \"\",\n\t\t\t\t\t\thealthInsuranceCity: \"\",\n\t\t\t\t\t\thealthInsuranceState: \"\",\n\t\t\t\t\t\thealthInsuranceZip: \"\",\n\t\t\t\t\t\t...data.emergencyInformation,\n\t\t\t\t\t},\n\t\t\t\t\tforms: {\n\t\t\t\t\t\t...data.forms,\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tconst rawData = snapshot.data();\n\t\t\t\tlet step;\n\t\t\t\tif (!rawData?.personalInformation) {\n\t\t\t\t\tstep = 0;\n\t\t\t\t} else if (!rawData.emergencyInformation) {\n\t\t\t\t\tstep = 1;\n\t\t\t\t} else if (!rawData.forms?.bmunFuhsdForm) {\n\t\t\t\t\tstep = 2;\n\t\t\t\t} else if (\n\t\t\t\t\t!rawData.forms?.bmunDonation &&\n\t\t\t\t\t!rawData.forms?.bmunDonationOptOut\n\t\t\t\t) {\n\t\t\t\t\tstep = 3;\n\t\t\t\t} else {\n\t\t\t\t\tstep = 4;\n\t\t\t\t}\n\t\t\t\tsetStep(step);\n\n\t\t\t\t// typically, the current step will be displayed as incomplete circle\n\t\t\t\t// the last step cannot be completed, so we want to display it as completed whenever we are on it\n\t\t\t\tsetMaxStep(step === 4 ? 5 : step);\n\n\t\t\t\tsetLoadingData(false);\n\t\t\t\tsetStepHasChanges(false);\n\t\t\t});\n\t}, [firebase, user]);\n\n\tconst commonProps = {\n\t\thandleUpdateData,\n\t\tsetStepHasChanges,\n\t\tsetStep,\n\t\tsetMaxStep,\n\t\tuser,\n\t};\n\n\treturn (\n\t\t<div className={\"bg-gray-100 w-full\"}>\n\t\t\t<Main wide noMobileXPadding>\n\t\t\t\t<div className=\"md:grid md:grid-cols-3 md:gap-6\">\n\t\t\t\t\t<div className=\"md:col-span-1\">\n\t\t\t\t\t\t<div className=\"px-4 sm:px-0 sticky top-24\">\n\t\t\t\t\t\t\t<h3 className=\"text-2xl font-bold leading-6 text-gray-900\">\n\t\t\t\t\t\t\t\tBMUN Registration\n\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t<p className=\"mt-1 max-w-2xl text-sm leading-5 text-gray-500\">\n\t\t\t\t\t\t\t\tYour information will be saved when you click\n\t\t\t\t\t\t\t\tthe save button for each step, so you don't need\n\t\t\t\t\t\t\t\tto complete this all at once.\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<VerticalSteps\n\t\t\t\t\t\t\t\tsteps={[\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttitle: \"Personal Information\",\n\t\t\t\t\t\t\t\t\t\tdescription:\n\t\t\t\t\t\t\t\t\t\t\t\"This information will be saved to speed up registration for future conferences.\",\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttitle: \"Emergency Information\",\n\t\t\t\t\t\t\t\t\t\tdescription:\n\t\t\t\t\t\t\t\t\t\t\t\"Although conferences will be online, we still require your emergency contacts and insurance information just in case.\",\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttitle: \"Liability Forms\",\n\t\t\t\t\t\t\t\t\t\tdescription:\n\t\t\t\t\t\t\t\t\t\t\t\"These forms will be mostly autofilled with the information you provide us in earlier steps, but you'll still need to get them signed.\",\n\t\t\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttitle: \"Donations\",\n\t\t\t\t\t\t\t\t\t\tdescription:\n\t\t\t\t\t\t\t\t\t\t\t\"To cover conference fees charged by BMUN, we request a $30 donation, which will go directly towards making this conference possible.\",\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttitle: \"You're Done!\",\n\t\t\t\t\t\t\t\t\t\tdescription:\n\t\t\t\t\t\t\t\t\t\t\t\"You're now registered for BMUN! You may still edit or cancel your registration until the deadline.\",\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\tcurrentStep={step}\n\t\t\t\t\t\t\t\tmaxSwitchableStep={Math.min(\n\t\t\t\t\t\t\t\t\t!data.forms?.bmunFuhsdForm ? 2 : 1000,\n\t\t\t\t\t\t\t\t\tmaxStep\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\tonStepSwitch={(i) => {\n\t\t\t\t\t\t\t\t\tif (stepHasChanges) {\n\t\t\t\t\t\t\t\t\t\tsetShowChangesNotSavedModal(true);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tsetStep(i);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={\"mt-10 mt-5 md:mt-0 md:col-span-2 h-full\"}>\n\t\t\t\t\t\t{step === 0 && (\n\t\t\t\t\t\t\t<PersonalInformationSection\n\t\t\t\t\t\t\t\tdata={data?.personalInformation}\n\t\t\t\t\t\t\t\t{...commonProps}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{step === 1 && (\n\t\t\t\t\t\t\t<EmergencyInformationSection\n\t\t\t\t\t\t\t\tdata={data?.emergencyInformation}\n\t\t\t\t\t\t\t\t{...commonProps}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{step === 2 && (\n\t\t\t\t\t\t\t<WaiverFormsSection data={data} {...commonProps} />\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{step === 3 && (\n\t\t\t\t\t\t\t<DonationsSection data={data} {...commonProps} />\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{step === 4 && (\n\t\t\t\t\t\t\t<ConfirmationSection data={data} {...commonProps} />\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Main>\n\t\t\t<Transition show={showChangesNotSavedModal}>\n\t\t\t\t<div className=\"fixed z-10 inset-0 overflow-y-auto\">\n\t\t\t\t\t<div className=\"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0\">\n\t\t\t\t\t\t<Transition\n\t\t\t\t\t\t\tenter=\"ease-out duration-300\"\n\t\t\t\t\t\t\tenterFrom=\"opacity-0\"\n\t\t\t\t\t\t\tenterTo=\"opacity-100\"\n\t\t\t\t\t\t\tleave=\"ease-in duration-200\"\n\t\t\t\t\t\t\tleaveFrom=\"opacity-100\"\n\t\t\t\t\t\t\tleaveTo=\"opacity-0\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className=\"fixed inset-0 transition-opacity\">\n\t\t\t\t\t\t\t\t<div className=\"absolute inset-0 bg-gray-500 opacity-75\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Transition>\n\t\t\t\t\t\t{/* This element is to trick the browser into centering the modal contents. */}\n\t\t\t\t\t\t<span className=\"hidden sm:inline-block sm:align-middle sm:h-screen\"></span>\n\t\t\t\t\t\t&#8203;\n\t\t\t\t\t\t<Transition\n\t\t\t\t\t\t\tenter=\"ease-out duration-300\"\n\t\t\t\t\t\t\tenterFrom=\"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95\"\n\t\t\t\t\t\t\tenterTo=\"opacity-100 translate-y-0 sm:scale-100\"\n\t\t\t\t\t\t\tleave=\"ease-in duration-200\"\n\t\t\t\t\t\t\tleaveFrom=\"opacity-100 translate-y-0 sm:scale-100\"\n\t\t\t\t\t\t\tleaveTo=\"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName=\"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-sm sm:w-full sm:p-6\"\n\t\t\t\t\t\t\t\trole=\"dialog\"\n\t\t\t\t\t\t\t\taria-modal=\"true\"\n\t\t\t\t\t\t\t\taria-labelledby=\"modal-headline\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<div className=\"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100\">\n\t\t\t\t\t\t\t\t\t\t<Icons.ExclamationOutline className=\"h-6 w-6 text-red-600\" />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"mt-3 text-center sm:mt-5\">\n\t\t\t\t\t\t\t\t\t\t<h3\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-lg leading-6 font-medium text-gray-900\"\n\t\t\t\t\t\t\t\t\t\t\tid=\"modal-headline\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tYou Have Unsaved Changes\n\t\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t\t<div className=\"mt-2\">\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm leading-5 text-gray-500\">\n\t\t\t\t\t\t\t\t\t\t\t\t{step == 2 &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"Please upload or delete your un-uploaded (gray) files first.\"}\n\t\t\t\t\t\t\t\t\t\t\t\t{step !== 2 &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"Please save or discard your changes first.\"}\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"mt-5 sm:mt-6\">\n\t\t\t\t\t\t\t\t\t<span className=\"flex w-full rounded-md shadow-sm\">\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\tsetShowChangesNotSavedModal(\n\t\t\t\t\t\t\t\t\t\t\t\t\tfalse\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"inline-flex justify-center w-full rounded-md border border-transparent px-4 py-2 bg-indigo-600 text-base leading-6 font-medium text-white shadow-sm hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:ring-indigo-500 transition ease-in-out duration-150 sm:text-sm sm:leading-5\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tBack\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Transition>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Transition>\n\t\t</div>\n\t);\n}\n","/Users/jmeng/Documents/code/montavistamun/src/components/registration/FormUpload.tsx",["590","591","592","593","594","595","596"],"import axios from \"axios\";\nimport fileType from \"file-type/browser\";\nimport { FilePond, registerPlugin as registerFilepondPlugin } from \"filepond\";\nimport FilePondPluginFileValidateSize from \"filepond-plugin-file-validate-size\";\nimport FilePondPluginFileValidateType from \"filepond-plugin-file-validate-type\";\nimport FilePondPluginGetFile from \"filepond-plugin-get-file\";\nimport \"filepond-plugin-get-file/dist/filepond-plugin-get-file.min.css\";\nimport FilePondPluginImageExifOrientation from \"filepond-plugin-image-exif-orientation\";\nimport FilePondPluginImagePreview from \"filepond-plugin-image-preview\";\nimport \"filepond-plugin-image-preview/dist/filepond-plugin-image-preview.css\";\n// Import FilePond styles\nimport \"filepond/dist/filepond.min.css\";\nimport type firebaseType from \"firebase\";\nimport { User } from \"firebase\";\nimport React, { useState } from \"react\";\nimport { File, FilePond as ReactFilePond } from \"react-filepond\";\nimport useFirebase from \"../../firebase/useFirebase\";\n\nregisterFilepondPlugin(\n\tFilePondPluginImageExifOrientation,\n\tFilePondPluginFileValidateSize,\n\tFilePondPluginFileValidateType,\n\tFilePondPluginGetFile,\n\tFilePondPluginImagePreview\n);\nconst loadOrRestoreFile = (\n\tfirebase: typeof FirebaseType | null,\n\tuser: firebaseType.User | null,\n\tfieldName: string,\n\tfileName: string,\n\tload: (f: string | Blob) => void,\n\terror: (msg: string) => void,\n\tprogress: (isCalculable: boolean, current: number, max: number) => void,\n\tabort: () => void,\n\trequest: any\n) => {\n\tif (!firebase || !user) return;\n\t// reset our progress\n\tprogress(false, 0, 1024);\n\t// fetch the download URL from firebase\n\tfirebase\n\t\t.storage()\n\t\t.ref(`forms/sfmun/${user?.uid}/${fieldName}/${fileName}`)\n\t\t.getDownloadURL()\n\t\t.then((url: string) => {\n\t\t\treturn axios.get(url, {\n\t\t\t\tresponseType: \"arraybuffer\",\n\t\t\t\theaders: {\n\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t},\n\t\t\t});\n\t\t})\n\t\t.then((response) => {\n\t\t\treturn new Blob([response.data]);\n\t\t})\n\t\t.then((blob: Blob) => {\n\t\t\tprogress(true, blob.size, blob.size);\n\t\t\tload(blob);\n\t\t})\n\t\t.catch((err) => {\n\t\t\terror(err.message);\n\t\t\tabort();\n\t\t});\n};\nexport default function FormUpload<Data>({\n\tonInstanceChange,\n\tfile,\n\tsetFile,\n\tuploading,\n\tsetUploading,\n\tfieldName,\n\tdata,\n\tlabelIdle,\n\tacceptedFileTypes,\n\tlabelFileTypeNotAllowed,\n\tfileValidateTypeLabelExpectedTypes,\n\thandleUpdateData,\n\tallowImagePreview,\n\tuser,\n}: {\n\tonInstanceChange: (newInstance: FilePond | null) => void;\n\tuser: User;\n\tfile?: File;\n\tallowImagePreview?: boolean;\n\tsetFile: (file: File | null) => void;\n\tuploading: boolean;\n\tsetUploading: (uploading: boolean) => void;\n\tfieldName: string;\n\tacceptedFileTypes?: string[];\n\tlabelFileTypeNotAllowed?: string;\n\tfileValidateTypeLabelExpectedTypes?: string;\n\tlabelIdle?: string;\n\tdata: Record<string, any>;\n\thandleUpdateData: (name: string, data: any) => Promise<void>;\n}) {\n\tconst firebase = useFirebase();\n\tconst [instance, setInstance] = useState<FilePond | null>(null);\n\tReact.useEffect(() => {\n\t\tonInstanceChange(instance);\n\t}, [instance]);\n\tReact.useEffect(() => {\n\t\tif (!data || !firebase || !user) return;\n\t\tif (!file && data.forms && data.forms[fieldName]) {\n\t\t\tconst fileName = data.forms[fieldName];\n\t\t\tfirebase\n\t\t\t\t.storage()\n\t\t\t\t.ref(`forms/sfmun/${user?.uid}/${fieldName}/${fileName}`)\n\t\t\t\t.getDownloadURL()\n\t\t\t\t.then((url) => {\n\t\t\t\t\tsetFile([\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsource: fileName,\n\n\t\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\t\ttype: \"limbo\",\n\t\t\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\t\t\turl,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t]);\n\t\t\t\t});\n\t\t}\n\t}, [data, firebase, user]);\n\treturn (\n\t\t<ReactFilePond\n\t\t\tref={(ref) => setInstance(ref)}\n\t\t\tfiles={file}\n\t\t\tonupdatefiles={setFile}\n\t\t\tallowMultiple={false}\n\t\t\t// If enabled, you also have to handle undoing delete off server\n\t\t\tinstantUpload={false}\n\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t\t// @ts-ignore\n\t\t\tmaxFileSize={\"20MB\"}\n\t\t\tcredits={false} // TODO: credit somewhere\n\t\t\tallowImagePreview={allowImagePreview}\n\t\t\tallowDownloadByUrl={true}\n\t\t\tfileValidateTypeDetectType={(source: Blob) =>\n\t\t\t\tfileType.fromBlob(source).then((type) => type?.mime)\n\t\t\t}\n\t\t\timagePreviewMaxFileSize={\"2MB\"}\n\t\t\tacceptedFileTypes={acceptedFileTypes || [\"application/pdf\"]}\n\t\t\tlabelFileTypeNotAllowed={\n\t\t\t\tlabelFileTypeNotAllowed || \"That's not a PDF!\"\n\t\t\t}\n\t\t\tfileValidateTypeLabelExpectedTypes={\n\t\t\t\tfileValidateTypeLabelExpectedTypes || \"You may only upload pdfs\"\n\t\t\t}\n\t\t\tfileValidateTypeLabelExpectedTypesMap={{\n\t\t\t\t\"application/pdf\": \"pdf\",\n\t\t\t\t\"image/jpeg\": \"jpg\",\n\t\t\t\t\"image/png\": \"png\",\n\t\t\t\t\"image/gif\": \"gif\",\n\t\t\t}}\n\t\t\tserver={{\n\t\t\t\tprocess: (\n\t\t\t\t\tinputName,\n\t\t\t\t\tfile,\n\t\t\t\t\tmetadata,\n\t\t\t\t\tload,\n\t\t\t\t\tonError,\n\t\t\t\t\tupdateProgress,\n\t\t\t\t\tabort\n\t\t\t\t) => {\n\t\t\t\t\tif (!firebase) return;\n\n\t\t\t\t\tconst fileName = file.name;\n\t\t\t\t\tsetUploading(true);\n\t\t\t\t\t// console.log(file, file.name, file.type);\n\t\t\t\t\tconst uploadTask = firebase\n\t\t\t\t\t\t.storage()\n\t\t\t\t\t\t.ref(\n\t\t\t\t\t\t\t`forms/sfmun/${user?.uid}/${fieldName}/${fileName}`\n\t\t\t\t\t\t)\n\t\t\t\t\t\t.put(file);\n\n\t\t\t\t\tuploadTask.on(\n\t\t\t\t\t\t\"state_changed\",\n\t\t\t\t\t\t(snapshot) => {\n\t\t\t\t\t\t\tupdateProgress(\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\tsnapshot.bytesTransferred,\n\t\t\t\t\t\t\t\tsnapshot.totalBytes\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tswitch (snapshot.state) {\n\t\t\t\t\t\t\t\tcase firebase.storage.TaskState.PAUSED: // or 'paused'\n\t\t\t\t\t\t\t\t\tconsole.log(\"Upload is paused\");\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase firebase.storage.TaskState.RUNNING: // or 'running'\n\t\t\t\t\t\t\t\t\tconsole.log(\"Upload is running\");\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t(error) => {\n\t\t\t\t\t\t\tconsole.log(error);\n\t\t\t\t\t\t\tsetUploading(false);\n\t\t\t\t\t\t\tswitch ((error as { code?: string })?.code) {\n\t\t\t\t\t\t\t\tcase \"storage/canceled\":\n\t\t\t\t\t\t\t\t\tconsole.log(\"Cancelled\");\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase \"storage/quota-exceeded\":\n\t\t\t\t\t\t\t\t\tonError(\n\t\t\t\t\t\t\t\t\t\t\"Sorry, but our server has run out of space for your file. Please email us at support@montavistamun.com and let us know.\"\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase \"storage/invalid-checksum\":\n\t\t\t\t\t\t\t\t\tonError(\n\t\t\t\t\t\t\t\t\t\t\"It looks like this file got corrupted while we were uploading it. Please try again.\"\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase \"storage/retry-limit-exceeded\":\n\t\t\t\t\t\t\t\t\tonError(\n\t\t\t\t\t\t\t\t\t\t\"The upload timed out. Please try again.\"\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\tonError(\n\t\t\t\t\t\t\t\t\t\t\"An unknown error occurred. Please try again or email us at support@montavistamun.com\"\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t// done!\n\t\t\t\t\t\t\thandleUpdateData(\n\t\t\t\t\t\t\t\t\"forms.\" + fieldName,\n\t\t\t\t\t\t\t\tfileName\n\t\t\t\t\t\t\t).then(() => {\n\t\t\t\t\t\t\t\t// console.log(\"DONE\", fieldName, fileName);\n\t\t\t\t\t\t\t\tsetUploading(false);\n\t\t\t\t\t\t\t\tload(fileName);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t\treturn {\n\t\t\t\t\t\tabort: () => {\n\t\t\t\t\t\t\t// This function is entered if the user has tapped the cancel button\n\t\t\t\t\t\t\tuploadTask.cancel();\n\t\t\t\t\t\t\tsetUploading(false);\n\t\t\t\t\t\t\thandleUpdateData(\"forms.\" + fieldName, \"\").then(\n\t\t\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t\t\t// Let FilePond know the request has been cancelled\n\t\t\t\t\t\t\t\t\tabort();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t\trestore: (...props) =>\n\t\t\t\t\tloadOrRestoreFile(firebase, user, fieldName, ...props),\n\t\t\t\trevert: (fileName, load, error) => {\n\t\t\t\t\tif (!firebase) return;\n\t\t\t\t\tsetUploading(true);\n\t\t\t\t\tconsole.log(fileName);\n\t\t\t\t\tfirebase\n\t\t\t\t\t\t.storage()\n\t\t\t\t\t\t.ref(\n\t\t\t\t\t\t\t`forms/sfmun/${user?.uid}/${fieldName}/${fileName}`\n\t\t\t\t\t\t)\n\t\t\t\t\t\t.delete()\n\t\t\t\t\t\t.then(() => handleUpdateData(\"forms.\" + fieldName, \"\"))\n\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\tload();\n\t\t\t\t\t\t\tsetUploading(false);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch((e) => {\n\t\t\t\t\t\t\tsetUploading(false);\n\t\t\t\t\t\t\tswitch (e?.code) {\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\terror(\n\t\t\t\t\t\t\t\t\t\t\"An unknown error occurred while deleting your file.\"\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\t// this loads an already uploaded image to firebase\n\t\t\t\tload: (...props) =>\n\t\t\t\t\tloadOrRestoreFile(firebase, user, fieldName, ...props),\n\t\t\t}}\n\t\t\tlabelIdle={labelIdle || \"Drag a pdf here or click to browse\"}\n\t\t/>\n\t);\n}\n","/Users/jmeng/Documents/code/montavistamun/src/components/registration/PDFForm.ts",[],"/Users/jmeng/Documents/code/montavistamun/src/components/registration/RegisterFormSection.tsx",["597","598","599"],"import cx from \"classnames\";\nimport { User } from \"firebase\";\nimport { Form, Formik, FormikProps } from \"formik\";\nimport * as Icons from \"heroicons-react\";\nimport React, { ReactElement, useState } from \"react\";\nimport * as Yup from \"yup\";\nimport useRequireLogin from \"../accounts/useRequireLogin\";\nimport ConfirmModal from \"../ConfirmModal\";\nexport default function RegisterFormSection<Fields>({\n\tdata,\n\tonSubmit,\n\tonHasChangesChange,\n\tonContinue,\n\tschema,\n\tloadingValues,\n\ttitle,\n\tsubtitle,\n\tchildren,\n\tshowBack,\n\tonBack,\n\tconfirmContinue,\n\tuser,\n}: {\n\tuser?: User;\n\tdata?: Fields;\n\tonSubmit: (data: Fields) => Promise<void>;\n\tonHasChangesChange: (hasChanges: boolean) => void;\n\tonContinue: () => void;\n\tschema: Yup.ObjectSchema;\n\tloadingValues: Fields;\n\ttitle?: string;\n\tsubtitle?: string;\n\tonBack?: () => void;\n\tshowBack?: boolean;\n\t/**\n\t * If provided, the function will be extecuted to check if a confirm save modal should be shown.\n\t * The modal will be shown if a string is returned, and the help text will be that string.\n\t * @param values\n\t */\n\tconfirmContinue?: (values: Fields) => false | string;\n\tchildren: (\n\t\tprops: FormikProps<Fields> & { canEdit: boolean }\n\t) => ReactElement;\n}): ReactElement {\n\tuseRequireLogin();\n\treturn (\n\t\t<div className=\"shadow overflow-hidden sm:rounded-md\">\n\t\t\t<Formik\n\t\t\t\tinitialValues={data || loadingValues}\n\t\t\t\tenableReinitialize\n\t\t\t\tvalidationSchema={schema}\n\t\t\t\tonSubmit={async (values) => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tawait onSubmit(values);\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tconsole.log(error);\n\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{(props) => (\n\t\t\t\t\t<RegisterFormSectionInner<Fields>\n\t\t\t\t\t\tform={props}\n\t\t\t\t\t\tinitialValues={data}\n\t\t\t\t\t\tloading={!data}\n\t\t\t\t\t\tonContinue={onContinue}\n\t\t\t\t\t\tonHasChangesChange={onHasChangesChange}\n\t\t\t\t\t\ttitle={title}\n\t\t\t\t\t\tshowBack={showBack}\n\t\t\t\t\t\tonBack={onBack}\n\t\t\t\t\t\tsubtitle={subtitle}\n\t\t\t\t\t\tfields={children}\n\t\t\t\t\t\tconfirmContinue={confirmContinue}\n\t\t\t\t\t\tuser={user}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</Formik>\n\t\t</div>\n\t);\n}\n\n/**\n * Given that a and b have the same keys, checks if a and b are equal shallow objects.\n * If an array is a child, then that array will be compared to other arrays based on shallow value, not reference.\n */\nfunction compareObjectValues<T>(a: T, b: T) {\n\treturn Object.keys(a).every((key) =>\n\t\tArray.isArray(a[key as keyof T])\n\t\t\t? (a[key as keyof T] as any[]).every(\n\t\t\t\t\t(el, i) => el === (b[key as keyof T] as any[])[i]\n\t\t\t  )\n\t\t\t: a[key as keyof T] === b[key as keyof T]\n\t);\n}\nfunction RegisterFormSectionInner<Fields>({\n\tloading,\n\tonContinue,\n\tinitialValues,\n\tonHasChangesChange,\n\tform,\n\ttitle,\n\tsubtitle,\n\tconfirmContinue,\n\tfields,\n\tonBack,\n\tshowBack,\n\tuser,\n}: {\n\tuser?: User;\n\tloading: boolean;\n\tconfirmContinue?: (values: Fields) => false | string;\n\tonBack?: () => void;\n\tshowBack?: boolean;\n\tform: FormikProps<Fields>;\n\tinitialValues?: Fields;\n\tonContinue: () => void;\n\tonHasChangesChange: (hasChanges: boolean) => void;\n\ttitle?: string;\n\tsubtitle?: string;\n\tfields: (props: FormikProps<Fields> & { canEdit: boolean }) => ReactElement;\n}) {\n\tconst { isSubmitting, submitForm, values, validateForm } = form;\n\tconst [hasChanges, setHasChanges] = useState(false);\n\tconst [showConfirm, setShowConfirm] = useState(false);\n\tconst [confirmText, setConfirmText] = useState(\"\");\n\tReact.useEffect(() => {\n\t\tconst newHasChanges =\n\t\t\t!!initialValues && !compareObjectValues(values, initialValues);\n\t\tif (newHasChanges !== hasChanges) {\n\t\t\tsetHasChanges(newHasChanges);\n\t\t\tonHasChangesChange(newHasChanges);\n\t\t}\n\t}, [values, initialValues]);\n\tconst canSubmit = !isSubmitting && !loading;\n\tconst canEdit = !isSubmitting && !loading;\n\n\tconst initialValuesUnchanged =\n\t\tinitialValues &&\n\t\tObject.keys(initialValues).some((el) => {\n\t\t\tconst value = initialValues[el as keyof typeof initialValues];\n\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t\t// @ts-ignore\n\t\t\treturn value !== null && value !== undefined && value !== \"\";\n\t\t});\n\tconst onSave = React.useCallback(async () => {\n\t\t// there are no changes and at least some of the initial values (data) is not empty\n\t\tconst formIsValid = await validateForm()\n\t\t\t.then((errors) => {\n\t\t\t\tconst isValid = Object.keys(errors).length === 0;\n\t\t\t\tif (isValid) {\n\t\t\t\t\treturn Promise.resolve();\n\t\t\t\t} else {\n\t\t\t\t\treturn Promise.reject(\"invalid form\");\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then(() => true)\n\t\t\t.catch(() => false);\n\t\tif (!hasChanges && formIsValid) {\n\t\t\tonContinue();\n\t\t} else {\n\t\t\tsubmitForm()\n\t\t\t\t.then(validateForm)\n\t\t\t\t.then((errors) => {\n\t\t\t\t\tconst isValid = Object.keys(errors).length === 0;\n\t\t\t\t\tif (isValid) {\n\t\t\t\t\t\treturn Promise.resolve();\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn Promise.reject(\"invalid form\");\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.then(() => {\n\t\t\t\t\tonContinue();\n\t\t\t\t})\n\t\t\t\t.catch((e) => console.log(e));\n\t\t}\n\t}, [hasChanges, submitForm, validateForm, onContinue]);\n\treturn (\n\t\t<Form>\n\t\t\t<div className=\"px-4 bg-white py-5 sm:p-6\">\n\t\t\t\t<div>\n\t\t\t\t\t{title && (\n\t\t\t\t\t\t<h3 className=\"text-xl leading-6 font-bold text-gray-900\">\n\t\t\t\t\t\t\t{title}\n\t\t\t\t\t\t</h3>\n\t\t\t\t\t)}\n\t\t\t\t\t{subtitle && (\n\t\t\t\t\t\t<p className=\"mt-1 max-w-2xl text-sm leading-5 text-gray-500\">\n\t\t\t\t\t\t\t{subtitle}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tclassName={cx(\n\t\t\t\t\t\t\"grid grid-cols-6 gap-6\",\n\t\t\t\t\t\ttitle || subtitle ? \" mt-4\" : \"\"\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t{fields({\n\t\t\t\t\t\t...form,\n\t\t\t\t\t\tcanEdit,\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div className=\"px-4 py-3 bg-gray-50 text-right sm:px-6 flex justify-between\">\n\t\t\t\t<div>\n\t\t\t\t\t{showBack && (\n\t\t\t\t\t\t<span className=\"inline-flex rounded-md shadow-sm\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\tonClick={() => onBack()}\n\t\t\t\t\t\t\t\tdisabled={!canSubmit}\n\t\t\t\t\t\t\t\tclassName={cx(\n\t\t\t\t\t\t\t\t\t\"py-2 px-4 border border-gray-300 rounded-md text-sm leading-5 font-medium text-gray-700\",\n\t\t\t\t\t\t\t\t\t!canSubmit\n\t\t\t\t\t\t\t\t\t\t? \"bg-gray-300\"\n\t\t\t\t\t\t\t\t\t\t: \"bg-white hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:ring-blue-500 active:bg-gray-50 active:text-gray-800 transition duration-150 ease-in-out\"\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tBack\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t{/* If initial values exists and has at least one set value, then the user already has saved data. */}\n\t\t\t\t\t{!hasChanges && initialValuesUnchanged && (\n\t\t\t\t\t\t<span className=\"text-green-600 py-2 px-4 text-sm leading-5 font-medium\">\n\t\t\t\t\t\t\t<Icons.Check className={\"inline-flex mr-1\"} /> Saved\n\t\t\t\t\t\t</span>\n\t\t\t\t\t)}\n\t\t\t\t\t{hasChanges && initialValuesUnchanged && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<span className=\"inline-flex rounded-md shadow-sm\">\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\ttype=\"reset\"\n\t\t\t\t\t\t\t\t\tdisabled={!canSubmit}\n\t\t\t\t\t\t\t\t\tclassName={cx(\n\t\t\t\t\t\t\t\t\t\t\"py-2 px-4 border border-gray-300 rounded-md text-sm leading-5 font-medium text-gray-700\",\n\t\t\t\t\t\t\t\t\t\t!canSubmit\n\t\t\t\t\t\t\t\t\t\t\t? \"bg-gray-300\"\n\t\t\t\t\t\t\t\t\t\t\t: \"bg-white hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:ring-blue-500 active:bg-gray-50 active:text-gray-800 transition duration-150 ease-in-out\"\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tDiscard Changes\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype={\"button\"}\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tconst confirmModalText =\n\t\t\t\t\t\t\t\tconfirmContinue && confirmContinue(values);\n\t\t\t\t\t\t\tif (confirmModalText) {\n\t\t\t\t\t\t\t\tsetShowConfirm(true);\n\t\t\t\t\t\t\t\tsetConfirmText(confirmModalText);\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tonSave();\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tdisabled={!canSubmit}\n\t\t\t\t\t\tclassName={cx(\n\t\t\t\t\t\t\t\"ml-4 py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white shadow-sm\",\n\t\t\t\t\t\t\t!canSubmit\n\t\t\t\t\t\t\t\t? \"bg-indigo-300\"\n\t\t\t\t\t\t\t\t: \"bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:ring-blue-500 active:bg-indigo-600 transition duration-150 ease-in-out\"\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{isSubmitting\n\t\t\t\t\t\t\t? \"Saving and Continuing...\"\n\t\t\t\t\t\t\t: hasChanges\n\t\t\t\t\t\t\t? \"Save and Continue\"\n\t\t\t\t\t\t\t: \"Continue\"}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<ConfirmModal\n\t\t\t\tonConfirm={onSave}\n\t\t\t\tconfirmButtonText={\n\t\t\t\t\tisSubmitting\n\t\t\t\t\t\t? \"Saving and Continuing...\"\n\t\t\t\t\t\t: hasChanges\n\t\t\t\t\t\t? \"Save and Continue\"\n\t\t\t\t\t\t: \"Continue\"\n\t\t\t\t}\n\t\t\t\tdisabled={!canSubmit}\n\t\t\t\tshow={showConfirm}\n\t\t\t\tsetShow={setShowConfirm}\n\t\t\t\ttitle={\"Are you sure you want to continue?\"}\n\t\t\t>\n\t\t\t\t{confirmText}\n\t\t\t</ConfirmModal>\n\t\t</Form>\n\t);\n}\n","/Users/jmeng/Documents/code/montavistamun/src/components/registration/RegistrationSection.tsx",["600","601","602","603","604","605","606","607","608","609","610","611","612"],"import * as Icons from \"heroicons-react\";\nimport React, { useContext, useState } from \"react\";\nimport AuthContext from \"../../context/AuthContext\";\nimport useFirebase from \"../../firebase/useFirebase\";\nimport useRequireLogin from \"../accounts/useRequireLogin\";\nimport { Main } from \"../layout\";\nimport VerticalSteps from \"../shared/VerticalSteps\";\nimport Transition from \"../Transition\";\n\nfunction isFunction(\n\tfunctionToCheck: any\n): functionToCheck is (oldData: Record<string, any>) => Record<string, any> {\n\treturn (\n\t\tfunctionToCheck &&\n\t\t{}.toString.call(functionToCheck) === \"[object Function]\"\n\t);\n}\nexport default function RegistrationSection() {\n\tconst name = \"SFMUN\";\n\tconst key = \"sfmun\";\n\tuseRequireLogin();\n\tconst firebase = useFirebase();\n\tconst { user, loading: userLoading } = useContext(AuthContext);\n\t// const [user, setUser] = useState(authUser);\n\n\t// React.useEffect(() => {\n\t// \tif (!firebase || !authUser) return;\n\t// \t// setUser(authUser);\n\t// \t(async () => {\n\t// \t\tconst token = await authUser?.getIdToken(true);\n\t// \t\tconst resp = await axios.get(\"/.netlify/functions/get-user-info\", {\n\t// \t\t\tparams: {\n\t// \t\t\t\tuser: \"yJbc2cZ34ebWZdvijZi8EwHg1PF2\",\n\t// \t\t\t},\n\t// \t\t\theaders: {\n\t// \t\t\t\tauthorization: `Bearer ${token}`,\n\t// \t\t\t},\n\t// \t\t});\n\t// \t\tconsole.log(resp);\n\t// \t\tsetUser(resp.data.data);\n\t// \t})();\n\t// }, [firebase, authUser]);\n\tconst [step, setStep] = useState(0);\n\tconst [stepHasChanges, setStepHasChanges] = useState(false);\n\n\tconst [maxStep, setMaxStep] = useState(0);\n\n\tconst [data, updateData] = React.useReducer(\n\t\t(\n\t\t\tstate: Record<string, any>,\n\t\t\taction:\n\t\t\t\t| Record<string, any>\n\t\t\t\t| ((legacyData: Record<string, any>) => Record<string, any>)\n\t\t) => {\n\t\t\tlet updates;\n\t\t\tif (isFunction(action)) {\n\t\t\t\tupdates = action(state);\n\t\t\t} else {\n\t\t\t\tupdates = action;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t...updates,\n\t\t\t};\n\t\t},\n\t\t{}\n\t);\n\tconst [loadingData, setLoadingData] = useState(true);\n\tconst [showChangesNotSavedModal, setShowChangesNotSavedModal] = useState(\n\t\tfalse\n\t);\n\n\t/**\n\t * Updates the data with a section. Dot notation up to one deep is supported (so max one dot in the section).\n\t */\n\tconst handleUpdateData = React.useCallback(\n\t\tasync (section: string, validatedData: any) => {\n\t\t\tif (!firebase) return;\n\n\t\t\tawait Promise.all([\n\t\t\t\tfirebase\n\t\t\t\t\t.firestore()\n\t\t\t\t\t.collection(\"registration\")\n\t\t\t\t\t.doc(user?.uid)\n\t\t\t\t\t.set(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t[section.split(\".\")[0]]:\n\t\t\t\t\t\t\t\tsection.split(\".\").length > 1\n\t\t\t\t\t\t\t\t\t? { [section.split(\".\")[1]]: validatedData }\n\t\t\t\t\t\t\t\t\t: validatedData,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ merge: true }\n\t\t\t\t\t),\n\t\t\t\tfirebase\n\t\t\t\t\t.firestore()\n\t\t\t\t\t.collection(\"registration\")\n\t\t\t\t\t.doc(user?.uid)\n\t\t\t\t\t.collection(\"history\")\n\t\t\t\t\t.add({\n\t\t\t\t\t\ttimestamp: firebase.firestore.FieldValue.serverTimestamp(),\n\t\t\t\t\t\tsection,\n\t\t\t\t\t\tnewData: validatedData,\n\t\t\t\t\t}),\n\t\t\t]);\n\t\t\tupdateData((current) => {\n\t\t\t\tif (section.indexOf(\".\") > -1) {\n\t\t\t\t\tconst sectionFragments = section.split(\".\");\n\t\t\t\t\treturn {\n\t\t\t\t\t\t[sectionFragments[0]]: {\n\t\t\t\t\t\t\t...current[sectionFragments[0]],\n\t\t\t\t\t\t\t[sectionFragments[1]]: validatedData,\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\treturn { [section]: validatedData };\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t[firebase, data, updateData]\n\t);\n\tReact.useEffect(() => {\n\t\tconst handler = (e: BeforeUnloadEvent) => {\n\t\t\te.returnValue = \"You have unsaved changes!\";\n\t\t\treturn false;\n\t\t};\n\t\tif (stepHasChanges) {\n\t\t\twindow.addEventListener(\"beforeunload\", handler);\n\t\t}\n\t\treturn () => window.removeEventListener(\"beforeunload\", handler);\n\t}, [stepHasChanges]);\n\tReact.useEffect(() => {\n\t\tif (!firebase || !user) return;\n\t\tif (!loadingData) return;\n\t\tfirebase\n\t\t\t.firestore()\n\t\t\t.collection(\"registration\")\n\t\t\t.doc(user?.uid)\n\t\t\t.get()\n\t\t\t.then((snapshot) => {\n\t\t\t\tif (!loadingData) {\n\t\t\t\t\t// two requests were started for the data, and this is the second one to return\n\t\t\t\t\t// to avoid overwriting any data that the user may have started entering, don't update the data\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst data = snapshot.data() || {\n\t\t\t\t\tpersonalInformation: {},\n\t\t\t\t\temergencyInformation: {},\n\t\t\t\t};\n\t\t\t\tconsole.log(data, user);\n\t\t\t\tupdateData({\n\t\t\t\t\tpersonalInformation: {\n\t\t\t\t\t\tphone: \"\",\n\t\t\t\t\t\taddressOne: \"\",\n\t\t\t\t\t\taddressTwo: \"\",\n\t\t\t\t\t\tcity: \"\",\n\t\t\t\t\t\tzip: \"\",\n\t\t\t\t\t\tstate: \"CA\",\n\t\t\t\t\t\t...data.personalInformation,\n\t\t\t\t\t},\n\t\t\t\t\temergencyInformation: {\n\t\t\t\t\t\tcontactOneName: \"\",\n\t\t\t\t\t\tcontactOnePhone: \"\",\n\t\t\t\t\t\tcontactOneRelationship: \"\",\n\t\t\t\t\t\tcontactTwoName: \"\",\n\t\t\t\t\t\tcontactTwoPhone: \"\",\n\t\t\t\t\t\tcontactTwoRelationship: \"\",\n\n\t\t\t\t\t\thouseholdMainLanguage: \"English\",\n\n\t\t\t\t\t\thealthInsuranceCarrier: \"\",\n\t\t\t\t\t\thealthInsurancePolicyNumber: \"\",\n\t\t\t\t\t\thealthInsuranceAddressOne: \"\",\n\t\t\t\t\t\thealthInsuranceAddressTwo: \"\",\n\t\t\t\t\t\thealthInsuranceCity: \"\",\n\t\t\t\t\t\thealthInsuranceState: \"\",\n\t\t\t\t\t\thealthInsuranceZip: \"\",\n\t\t\t\t\t\t...data.emergencyInformation,\n\t\t\t\t\t},\n\t\t\t\t\tforms: {\n\t\t\t\t\t\t...data.forms,\n\t\t\t\t\t},\n\t\t\t\t\tpreferences: {\n\t\t\t\t\t\tscvmunCommittee: data.preferences?.scvmunCommittee || [\n\t\t\t\t\t\t\t\"IAEA (International Atomic Energy Association)\",\n\t\t\t\t\t\t\t\"DISEC (Disarmament and International Security Committee)\",\n\t\t\t\t\t\t\t\"WHO (World Health Organization)\",\n\t\t\t\t\t\t\t\"UNEP (United Nations Environmental Programme)\",\n\t\t\t\t\t\t\t\"SOCHUM (Social, Humanitarian and Cultural)\",\n\t\t\t\t\t\t\t\"UNDP (United Nations Development Programme)\",\n\t\t\t\t\t\t\t\"LEGAL (Legal Committee)\",\n\t\t\t\t\t\t\t\"UNESCO (United Nations Educational, Scientific and Cultural Organization)\",\n\t\t\t\t\t\t\t\"Security Council (Specialty Committee)\",\n\t\t\t\t\t\t\t\"Historic Security Council (Specialty Committee)\",\n\t\t\t\t\t\t\t\"NATO (Specialty Committee)\",\n\t\t\t\t\t\t\t\"World Bank (Specialty Committee)\",\n\t\t\t\t\t\t\t\"UNHCR (United Nations High Commissioner for Refugees) (Specialty Committee)\",\n\t\t\t\t\t\t\t\"CSW (Commission on the Status of Women) (Specialty Committee)\",\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tconst rawData = snapshot.data();\n\t\t\t\tlet step;\n\t\t\t\tif (!rawData?.personalInformation) {\n\t\t\t\t\tstep = 0;\n\t\t\t\t} else if (!rawData.emergencyInformation) {\n\t\t\t\t\tstep = 1;\n\t\t\t\t} else if (!rawData.forms?.scvmunFuhsdForm) {\n\t\t\t\t\tstep = 2;\n\t\t\t\t} else if (!rawData.preferences) {\n\t\t\t\t\tstep = 3;\n\t\t\t\t} else if (\n\t\t\t\t\t!rawData.forms?.scvmunDonation &&\n\t\t\t\t\t!rawData.forms?.scvmunDonationOptOut\n\t\t\t\t) {\n\t\t\t\t\tstep = 4;\n\t\t\t\t} else {\n\t\t\t\t\tstep = 5;\n\t\t\t\t}\n\t\t\t\tsetStep(step);\n\n\t\t\t\t// typically, the current step will be displayed as incomplete circle\n\t\t\t\t// the last step cannot be completed, so we want to display it as completed whenever we are on it\n\t\t\t\tsetMaxStep(step === 5 ? 6 : step);\n\n\t\t\t\tsetLoadingData(false);\n\t\t\t\tsetStepHasChanges(false);\n\t\t\t});\n\t}, [firebase, user]);\n\n\tconst commonProps = {\n\t\thandleUpdateData,\n\t\tsetStepHasChanges,\n\t\tsetStep,\n\t\tsetMaxStep,\n\t\tuser,\n\t};\n\n\treturn (\n\t\t<div className={\"bg-gray-100 w-full\"}>\n\t\t\t<Main wide noMobileXPadding>\n\t\t\t\t<div className=\"md:grid md:grid-cols-3 md:gap-6\">\n\t\t\t\t\t<div className=\"md:col-span-1\">\n\t\t\t\t\t\t<div className=\"px-4 sm:px-0 sticky top-24\">\n\t\t\t\t\t\t\t<h3 className=\"text-2xl font-bold leading-6 text-gray-900\">\n\t\t\t\t\t\t\t\tSCVMUN Registration\n\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t<p className=\"mt-1 max-w-2xl text-sm leading-5 text-gray-500\">\n\t\t\t\t\t\t\t\tYour information will be saved when you click\n\t\t\t\t\t\t\t\tthe save button for each step, so you don't need\n\t\t\t\t\t\t\t\tto complete this all at once.\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<VerticalSteps\n\t\t\t\t\t\t\t\tsteps={[\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttitle: \"Personal Information\",\n\t\t\t\t\t\t\t\t\t\tdescription:\n\t\t\t\t\t\t\t\t\t\t\t\"This information will be saved to speed up registration for future conferences.\",\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttitle: \"Emergency Information\",\n\t\t\t\t\t\t\t\t\t\tdescription:\n\t\t\t\t\t\t\t\t\t\t\t\"Although conferences will be online, we still require your emergency contacts and insurance information just in case.\",\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttitle: \"Liability Forms\",\n\t\t\t\t\t\t\t\t\t\tdescription:\n\t\t\t\t\t\t\t\t\t\t\t\"These forms will be mostly autofilled with the information you provide us in earlier steps, but you'll still need to get them signed.\",\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttitle:\n\t\t\t\t\t\t\t\t\t\t\t\"Committee and Partner Preferences\",\n\t\t\t\t\t\t\t\t\t\tdescription:\n\t\t\t\t\t\t\t\t\t\t\t\"Now comes the fun part! Look into the different committees offered at SCVMUN and indicate how much you like each one.\",\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttitle: \"Donations\",\n\t\t\t\t\t\t\t\t\t\tdescription:\n\t\t\t\t\t\t\t\t\t\t\t\"To cover conference fees charged by SCVMUN, we request a $25 donation, which will go directly towards making this conference possible.\",\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttitle: \"You're Done!\",\n\t\t\t\t\t\t\t\t\t\tdescription:\n\t\t\t\t\t\t\t\t\t\t\t\"You're now registered for SCVMUN! You may still edit or cancel your registration until the deadline.\",\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\tcurrentStep={step}\n\t\t\t\t\t\t\t\tmaxSwitchableStep={Math.min(\n\t\t\t\t\t\t\t\t\t!data.forms?.scvmunFuhsdForm ? 2 : 1000,\n\t\t\t\t\t\t\t\t\tmaxStep\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\tonStepSwitch={(i) => {\n\t\t\t\t\t\t\t\t\tif (stepHasChanges) {\n\t\t\t\t\t\t\t\t\t\tsetShowChangesNotSavedModal(true);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tsetStep(i);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={\"mt-10 mt-5 md:mt-0 md:col-span-2 h-full\"}>\n\t\t\t\t\t\t<h1\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\"text-xl font-semibold leading-6 text-gray-900\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tSCVMUN Registration is now closed. If you have any\n\t\t\t\t\t\t\tquestions, please email us at{\" \"}\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\tclassName={\"link\"}\n\t\t\t\t\t\t\t\thref={\"mailto:montavistamun@gmail.com\"}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tmontavistamun@gmail.com\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t.\n\t\t\t\t\t\t</h1>\n\t\t\t\t\t\t{/*{step === 0 && (*/}\n\t\t\t\t\t\t{/*\t<PersonalInformationSection*/}\n\t\t\t\t\t\t{/*\t\tdata={data?.personalInformation}*/}\n\t\t\t\t\t\t{/*\t\t{...commonProps}*/}\n\t\t\t\t\t\t{/*\t/>*/}\n\t\t\t\t\t\t{/*)}*/}\n\t\t\t\t\t\t{/*{step === 1 && (*/}\n\t\t\t\t\t\t{/*\t<EmergencyInformationSection*/}\n\t\t\t\t\t\t{/*\t\tdata={data?.emergencyInformation}*/}\n\t\t\t\t\t\t{/*\t\t{...commonProps}*/}\n\t\t\t\t\t\t{/*\t/>*/}\n\t\t\t\t\t\t{/*)}*/}\n\t\t\t\t\t\t{/*{step === 2 && (*/}\n\t\t\t\t\t\t{/*\t<WaiverFormsSection data={data} {...commonProps} />*/}\n\t\t\t\t\t\t{/*)}*/}\n\t\t\t\t\t\t{/*{step === 3 && (*/}\n\t\t\t\t\t\t{/*\t<PreferencesSection*/}\n\t\t\t\t\t\t{/*\t\tdata={data?.preferences}*/}\n\t\t\t\t\t\t{/*\t\t{...commonProps}*/}\n\t\t\t\t\t\t{/*\t/>*/}\n\t\t\t\t\t\t{/*)}*/}\n\t\t\t\t\t\t{/*{step === 4 && (*/}\n\t\t\t\t\t\t{/*\t<DonationsSection data={data} {...commonProps} />*/}\n\t\t\t\t\t\t{/*)}*/}\n\t\t\t\t\t\t{/*{step === 5 && (*/}\n\t\t\t\t\t\t{/*\t<ConfirmationSection data={data} {...commonProps} />*/}\n\t\t\t\t\t\t{/*)}*/}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Main>\n\t\t\t<Transition show={showChangesNotSavedModal}>\n\t\t\t\t<div className=\"fixed z-10 inset-0 overflow-y-auto\">\n\t\t\t\t\t<div className=\"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0\">\n\t\t\t\t\t\t<Transition\n\t\t\t\t\t\t\tenter=\"ease-out duration-300\"\n\t\t\t\t\t\t\tenterFrom=\"opacity-0\"\n\t\t\t\t\t\t\tenterTo=\"opacity-100\"\n\t\t\t\t\t\t\tleave=\"ease-in duration-200\"\n\t\t\t\t\t\t\tleaveFrom=\"opacity-100\"\n\t\t\t\t\t\t\tleaveTo=\"opacity-0\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className=\"fixed inset-0 transition-opacity\">\n\t\t\t\t\t\t\t\t<div className=\"absolute inset-0 bg-gray-500 opacity-75\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Transition>\n\t\t\t\t\t\t{/* This element is to trick the browser into centering the modal contents. */}\n\t\t\t\t\t\t<span className=\"hidden sm:inline-block sm:align-middle sm:h-screen\"></span>\n\t\t\t\t\t\t&#8203;\n\t\t\t\t\t\t<Transition\n\t\t\t\t\t\t\tenter=\"ease-out duration-300\"\n\t\t\t\t\t\t\tenterFrom=\"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95\"\n\t\t\t\t\t\t\tenterTo=\"opacity-100 translate-y-0 sm:scale-100\"\n\t\t\t\t\t\t\tleave=\"ease-in duration-200\"\n\t\t\t\t\t\t\tleaveFrom=\"opacity-100 translate-y-0 sm:scale-100\"\n\t\t\t\t\t\t\tleaveTo=\"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName=\"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-sm sm:w-full sm:p-6\"\n\t\t\t\t\t\t\t\trole=\"dialog\"\n\t\t\t\t\t\t\t\taria-modal=\"true\"\n\t\t\t\t\t\t\t\taria-labelledby=\"modal-headline\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<div className=\"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100\">\n\t\t\t\t\t\t\t\t\t\t<Icons.ExclamationOutline className=\"h-6 w-6 text-red-600\" />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"mt-3 text-center sm:mt-5\">\n\t\t\t\t\t\t\t\t\t\t<h3\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-lg leading-6 font-medium text-gray-900\"\n\t\t\t\t\t\t\t\t\t\t\tid=\"modal-headline\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tYou Have Unsaved Changes\n\t\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t\t<div className=\"mt-2\">\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm leading-5 text-gray-500\">\n\t\t\t\t\t\t\t\t\t\t\t\t{step == 2 &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"Please upload or delete your un-uploaded (gray) files first.\"}\n\t\t\t\t\t\t\t\t\t\t\t\t{step !== 2 &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"Please save or discard your changes first.\"}\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"mt-5 sm:mt-6\">\n\t\t\t\t\t\t\t\t\t<span className=\"flex w-full rounded-md shadow-sm\">\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\tsetShowChangesNotSavedModal(\n\t\t\t\t\t\t\t\t\t\t\t\t\tfalse\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"inline-flex justify-center w-full rounded-md border border-transparent px-4 py-2 bg-indigo-600 text-base leading-6 font-medium text-white shadow-sm hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:ring-indigo-500 transition ease-in-out duration-150 sm:text-sm sm:leading-5\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tBack\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Transition>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Transition>\n\t\t</div>\n\t);\n}\n","/Users/jmeng/Documents/code/montavistamun/src/components/registration/SBMUNRegistrationSection.tsx",["613","614","615","616","617","618","619","620","621","622","623","624"],"import * as Icons from \"heroicons-react\";\nimport React, { useContext, useState } from \"react\";\nimport AuthContext from \"../../context/AuthContext\";\nimport useFirebase from \"../../firebase/useFirebase\";\nimport useRequireLogin from \"../accounts/useRequireLogin\";\nimport { Main } from \"../layout\";\nimport VerticalSteps from \"../shared/VerticalSteps\";\nimport Transition from \"../Transition\";\nimport ConfirmationSection from \"./sbmunsections/ConfirmationSection\";\nimport DonationsSection from \"./sbmunsections/DonationsSection\";\nimport WaiverFormsSection from \"./sbmunsections/WaiverFormsSection\";\nimport EmergencyInformationSection from \"./sections/EmergencyInformationSection\";\nimport PersonalInformationSection from \"./sections/PersonalInformationSection\";\n\nfunction isFunction(\n\tfunctionToCheck: any\n): functionToCheck is (oldData: Record<string, any>) => Record<string, any> {\n\treturn (\n\t\tfunctionToCheck &&\n\t\t{}.toString.call(functionToCheck) === \"[object Function]\"\n\t);\n}\nexport default function SBMUNRegistrationSection() {\n\tconst name = \"SBMUN\";\n\tconst key = \"sbmun\";\n\tuseRequireLogin();\n\tconst firebase = useFirebase();\n\tconst { user, loading: userLoading } = useContext(AuthContext);\n\t// const [user, setUser] = useState(authUser);\n\n\t// React.useEffect(() => {\n\t// \tif (!firebase || !authUser) return;\n\t// \t// setUser(authUser);\n\t// \t(async () => {\n\t// \t\tconst token = await authUser?.getIdToken(true);\n\t// \t\tconst resp = await axios.get(\"/.netlify/functions/get-user-info\", {\n\t// \t\t\tparams: {\n\t// \t\t\t\tuser: \"yJbc2cZ34ebWZdvijZi8EwHg1PF2\",\n\t// \t\t\t},\n\t// \t\t\theaders: {\n\t// \t\t\t\tauthorization: `Bearer ${token}`,\n\t// \t\t\t},\n\t// \t\t});\n\t// \t\tconsole.log(resp);\n\t// \t\tsetUser(resp.data.data);\n\t// \t})();\n\t// }, [firebase, authUser]);\n\tconst [step, setStep] = useState(0);\n\tconst [stepHasChanges, setStepHasChanges] = useState(false);\n\n\tconst [maxStep, setMaxStep] = useState(0);\n\n\tconst [data, updateData] = React.useReducer(\n\t\t(\n\t\t\tstate: Record<string, any>,\n\t\t\taction:\n\t\t\t\t| Record<string, any>\n\t\t\t\t| ((legacyData: Record<string, any>) => Record<string, any>)\n\t\t) => {\n\t\t\tlet updates;\n\t\t\tif (isFunction(action)) {\n\t\t\t\tupdates = action(state);\n\t\t\t} else {\n\t\t\t\tupdates = action;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t...updates,\n\t\t\t};\n\t\t},\n\t\t{}\n\t);\n\tconst [loadingData, setLoadingData] = useState(true);\n\tconst [showChangesNotSavedModal, setShowChangesNotSavedModal] = useState(\n\t\tfalse\n\t);\n\n\t/**\n\t * Updates the data with a section. Dot notation up to one deep is supported (so max one dot in the section).\n\t */\n\tconst handleUpdateData = React.useCallback(\n\t\tasync (section: string, validatedData: any) => {\n\t\t\tif (!firebase) return;\n\n\t\t\tawait Promise.all([\n\t\t\t\tfirebase\n\t\t\t\t\t.firestore()\n\t\t\t\t\t.collection(\"registration\")\n\t\t\t\t\t.doc(user?.uid)\n\t\t\t\t\t.set(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t[section.split(\".\")[0]]:\n\t\t\t\t\t\t\t\tsection.split(\".\").length > 1\n\t\t\t\t\t\t\t\t\t? { [section.split(\".\")[1]]: validatedData }\n\t\t\t\t\t\t\t\t\t: validatedData,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ merge: true }\n\t\t\t\t\t),\n\t\t\t\tfirebase\n\t\t\t\t\t.firestore()\n\t\t\t\t\t.collection(\"registration\")\n\t\t\t\t\t.doc(user?.uid)\n\t\t\t\t\t.collection(\"history\")\n\t\t\t\t\t.add({\n\t\t\t\t\t\ttimestamp: firebase.firestore.FieldValue.serverTimestamp(),\n\t\t\t\t\t\tsection,\n\t\t\t\t\t\tnewData: validatedData,\n\t\t\t\t\t}),\n\t\t\t]);\n\t\t\tupdateData((current) => {\n\t\t\t\tif (section.indexOf(\".\") > -1) {\n\t\t\t\t\tconst sectionFragments = section.split(\".\");\n\t\t\t\t\treturn {\n\t\t\t\t\t\t[sectionFragments[0]]: {\n\t\t\t\t\t\t\t...current[sectionFragments[0]],\n\t\t\t\t\t\t\t[sectionFragments[1]]: validatedData,\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\treturn { [section]: validatedData };\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t[firebase, data, updateData]\n\t);\n\tReact.useEffect(() => {\n\t\tconst handler = (e: BeforeUnloadEvent) => {\n\t\t\te.returnValue = \"You have unsaved changes!\";\n\t\t\treturn false;\n\t\t};\n\t\tif (stepHasChanges) {\n\t\t\twindow.addEventListener(\"beforeunload\", handler);\n\t\t}\n\t\treturn () => window.removeEventListener(\"beforeunload\", handler);\n\t}, [stepHasChanges]);\n\tReact.useEffect(() => {\n\t\tif (!firebase || !user) return;\n\t\tif (!loadingData) return;\n\t\tfirebase\n\t\t\t.firestore()\n\t\t\t.collection(\"registration\")\n\t\t\t.doc(user?.uid)\n\t\t\t.get()\n\t\t\t.then((snapshot) => {\n\t\t\t\tif (!loadingData) {\n\t\t\t\t\t// two requests were started for the data, and this is the second one to return\n\t\t\t\t\t// to avoid overwriting any data that the user may have started entering, don't update the data\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst data = snapshot.data() || {\n\t\t\t\t\tpersonalInformation: {},\n\t\t\t\t\temergencyInformation: {},\n\t\t\t\t};\n\t\t\t\tconsole.log(data, user);\n\t\t\t\tupdateData({\n\t\t\t\t\tpersonalInformation: {\n\t\t\t\t\t\tphone: \"\",\n\t\t\t\t\t\taddressOne: \"\",\n\t\t\t\t\t\taddressTwo: \"\",\n\t\t\t\t\t\tcity: \"\",\n\t\t\t\t\t\tzip: \"\",\n\t\t\t\t\t\tstate: \"CA\",\n\t\t\t\t\t\t...data.personalInformation,\n\t\t\t\t\t},\n\t\t\t\t\temergencyInformation: {\n\t\t\t\t\t\tcontactOneName: \"\",\n\t\t\t\t\t\tcontactOnePhone: \"\",\n\t\t\t\t\t\tcontactOneRelationship: \"\",\n\t\t\t\t\t\tcontactTwoName: \"\",\n\t\t\t\t\t\tcontactTwoPhone: \"\",\n\t\t\t\t\t\tcontactTwoRelationship: \"\",\n\n\t\t\t\t\t\thouseholdMainLanguage: \"English\",\n\n\t\t\t\t\t\thealthInsuranceCarrier: \"\",\n\t\t\t\t\t\thealthInsurancePolicyNumber: \"\",\n\t\t\t\t\t\thealthInsuranceAddressOne: \"\",\n\t\t\t\t\t\thealthInsuranceAddressTwo: \"\",\n\t\t\t\t\t\thealthInsuranceCity: \"\",\n\t\t\t\t\t\thealthInsuranceState: \"\",\n\t\t\t\t\t\thealthInsuranceZip: \"\",\n\t\t\t\t\t\t...data.emergencyInformation,\n\t\t\t\t\t},\n\t\t\t\t\tforms: {\n\t\t\t\t\t\t...data.forms,\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tconst rawData = snapshot.data();\n\t\t\t\tlet step;\n\t\t\t\tif (!rawData?.personalInformation) {\n\t\t\t\t\tstep = 0;\n\t\t\t\t} else if (!rawData.emergencyInformation) {\n\t\t\t\t\tstep = 1;\n\t\t\t\t} else if (!rawData.forms?.sbmunFuhsdForm) {\n\t\t\t\t\tstep = 2;\n\t\t\t\t} else if (\n\t\t\t\t\t!rawData.forms?.sbmunDonation &&\n\t\t\t\t\t!rawData.forms?.sbmunDonationOptOut\n\t\t\t\t) {\n\t\t\t\t\tstep = 3;\n\t\t\t\t} else {\n\t\t\t\t\tstep = 4;\n\t\t\t\t}\n\t\t\t\tsetStep(step);\n\n\t\t\t\t// typically, the current step will be displayed as incomplete circle\n\t\t\t\t// the last step cannot be completed, so we want to display it as completed whenever we are on it\n\t\t\t\tsetMaxStep(step === 4 ? 5 : step);\n\n\t\t\t\tsetLoadingData(false);\n\t\t\t\tsetStepHasChanges(false);\n\t\t\t});\n\t}, [firebase, user]);\n\n\tconst commonProps = {\n\t\thandleUpdateData,\n\t\tsetStepHasChanges,\n\t\tsetStep,\n\t\tsetMaxStep,\n\t\tuser,\n\t};\n\n\treturn (\n\t\t<div className={\"bg-gray-100 w-full\"}>\n\t\t\t<Main wide noMobileXPadding>\n\t\t\t\t<div className=\"md:grid md:grid-cols-3 md:gap-6\">\n\t\t\t\t\t<div className=\"md:col-span-1\">\n\t\t\t\t\t\t<div className=\"px-4 sm:px-0 sticky top-24\">\n\t\t\t\t\t\t\t<h3 className=\"text-2xl font-bold leading-6 text-gray-900\">\n\t\t\t\t\t\t\t\tSBMUN Registration\n\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t<p className=\"mt-1 max-w-2xl text-sm leading-5 text-gray-500\">\n\t\t\t\t\t\t\t\tYour information will be saved when you click\n\t\t\t\t\t\t\t\tthe save button for each step, so you don't need\n\t\t\t\t\t\t\t\tto complete this all at once.\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<VerticalSteps\n\t\t\t\t\t\t\t\tsteps={[\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttitle: \"Personal Information\",\n\t\t\t\t\t\t\t\t\t\tdescription:\n\t\t\t\t\t\t\t\t\t\t\t\"This information will be saved to speed up registration for future conferences.\",\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttitle: \"Emergency Information\",\n\t\t\t\t\t\t\t\t\t\tdescription:\n\t\t\t\t\t\t\t\t\t\t\t\"Although conferences will be online, we still require your emergency contacts and insurance information just in case.\",\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttitle: \"Liability Forms\",\n\t\t\t\t\t\t\t\t\t\tdescription:\n\t\t\t\t\t\t\t\t\t\t\t\"These forms will be mostly autofilled with the information you provide us in earlier steps, but you'll still need to get them signed.\",\n\t\t\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttitle: \"Donations\",\n\t\t\t\t\t\t\t\t\t\tdescription:\n\t\t\t\t\t\t\t\t\t\t\t\"To cover conference fees charged by SBMUN, we request a $30 donation, which will go directly towards making this conference possible.\",\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttitle: \"You're Done!\",\n\t\t\t\t\t\t\t\t\t\tdescription:\n\t\t\t\t\t\t\t\t\t\t\t\"You're now registered for SBMUN! You may still edit or cancel your registration until the deadline.\",\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\tcurrentStep={step}\n\t\t\t\t\t\t\t\tmaxSwitchableStep={Math.min(\n\t\t\t\t\t\t\t\t\t!data.forms?.sbmunFuhsdForm ? 2 : 1000,\n\t\t\t\t\t\t\t\t\tmaxStep\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\tonStepSwitch={(i) => {\n\t\t\t\t\t\t\t\t\tif (stepHasChanges) {\n\t\t\t\t\t\t\t\t\t\tsetShowChangesNotSavedModal(true);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tsetStep(i);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={\"mt-10 mt-5 md:mt-0 md:col-span-2 h-full\"}>\n\t\t\t\t\t\t{step === 0 && (\n\t\t\t\t\t\t\t<PersonalInformationSection\n\t\t\t\t\t\t\t\tdata={data?.personalInformation}\n\t\t\t\t\t\t\t\t{...commonProps}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{step === 1 && (\n\t\t\t\t\t\t\t<EmergencyInformationSection\n\t\t\t\t\t\t\t\tdata={data?.emergencyInformation}\n\t\t\t\t\t\t\t\t{...commonProps}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{step === 2 && (\n\t\t\t\t\t\t\t<WaiverFormsSection data={data} {...commonProps} />\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{step === 3 && (\n\t\t\t\t\t\t\t<DonationsSection data={data} {...commonProps} />\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{step === 4 && (\n\t\t\t\t\t\t\t<ConfirmationSection data={data} {...commonProps} />\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Main>\n\t\t\t<Transition show={showChangesNotSavedModal}>\n\t\t\t\t<div className=\"fixed z-10 inset-0 overflow-y-auto\">\n\t\t\t\t\t<div className=\"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0\">\n\t\t\t\t\t\t<Transition\n\t\t\t\t\t\t\tenter=\"ease-out duration-300\"\n\t\t\t\t\t\t\tenterFrom=\"opacity-0\"\n\t\t\t\t\t\t\tenterTo=\"opacity-100\"\n\t\t\t\t\t\t\tleave=\"ease-in duration-200\"\n\t\t\t\t\t\t\tleaveFrom=\"opacity-100\"\n\t\t\t\t\t\t\tleaveTo=\"opacity-0\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className=\"fixed inset-0 transition-opacity\">\n\t\t\t\t\t\t\t\t<div className=\"absolute inset-0 bg-gray-500 opacity-75\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Transition>\n\t\t\t\t\t\t{/* This element is to trick the browser into centering the modal contents. */}\n\t\t\t\t\t\t<span className=\"hidden sm:inline-block sm:align-middle sm:h-screen\"></span>\n\t\t\t\t\t\t&#8203;\n\t\t\t\t\t\t<Transition\n\t\t\t\t\t\t\tenter=\"ease-out duration-300\"\n\t\t\t\t\t\t\tenterFrom=\"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95\"\n\t\t\t\t\t\t\tenterTo=\"opacity-100 translate-y-0 sm:scale-100\"\n\t\t\t\t\t\t\tleave=\"ease-in duration-200\"\n\t\t\t\t\t\t\tleaveFrom=\"opacity-100 translate-y-0 sm:scale-100\"\n\t\t\t\t\t\t\tleaveTo=\"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName=\"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-sm sm:w-full sm:p-6\"\n\t\t\t\t\t\t\t\trole=\"dialog\"\n\t\t\t\t\t\t\t\taria-modal=\"true\"\n\t\t\t\t\t\t\t\taria-labelledby=\"modal-headline\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<div className=\"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100\">\n\t\t\t\t\t\t\t\t\t\t<Icons.ExclamationOutline className=\"h-6 w-6 text-red-600\" />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"mt-3 text-center sm:mt-5\">\n\t\t\t\t\t\t\t\t\t\t<h3\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-lg leading-6 font-medium text-gray-900\"\n\t\t\t\t\t\t\t\t\t\t\tid=\"modal-headline\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tYou Have Unsaved Changes\n\t\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t\t<div className=\"mt-2\">\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm leading-5 text-gray-500\">\n\t\t\t\t\t\t\t\t\t\t\t\t{step == 2 &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"Please upload or delete your un-uploaded (gray) files first.\"}\n\t\t\t\t\t\t\t\t\t\t\t\t{step !== 2 &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"Please save or discard your changes first.\"}\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"mt-5 sm:mt-6\">\n\t\t\t\t\t\t\t\t\t<span className=\"flex w-full rounded-md shadow-sm\">\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\tsetShowChangesNotSavedModal(\n\t\t\t\t\t\t\t\t\t\t\t\t\tfalse\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"inline-flex justify-center w-full rounded-md border border-transparent px-4 py-2 bg-indigo-600 text-base leading-6 font-medium text-white shadow-sm hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:ring-indigo-500 transition ease-in-out duration-150 sm:text-sm sm:leading-5\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tBack\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Transition>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Transition>\n\t\t</div>\n\t);\n}\n","/Users/jmeng/Documents/code/montavistamun/src/components/registration/bmunsections/ConfirmationSection.tsx",["625","626","627","628","629","630","631","632","633","634"],"// Import React FilePond\nimport cx from \"classnames\";\nimport { User } from \"firebase\";\nimport React, { useState } from \"react\";\nimport \"../../../css/file-upload.css\";\nimport useFirebase from \"../../../firebase/useFirebase\";\n\nexport default function ConfirmationSection({\n\tdata,\n\tsetStepHasChanges,\n\thandleUpdateData,\n\tsetStep,\n\tsetMaxStep,\n\tuser,\n}: {\n\tuser: User;\n\n\tdata: Record<string, any>;\n\thandleUpdateData: (\n\t\tname: string,\n\t\tdata: Record<string, any>\n\t) => Promise<void>;\n\tsetStepHasChanges: (hasChanges: boolean) => void;\n\tsetStep: (step: number) => void;\n\tsetMaxStep: (maxStep: number | ((old: number) => number)) => void;\n}) {\n\tconst firebase = useFirebase();\n\n\tconst [submitting, setSubmitting] = useState(false);\n\treturn (\n\t\t<div className=\"mt-8 shadow rounded-md sm:overflow-hidden\">\n\t\t\t<div className={\"px-4 bg-white sm:p-6 py-4\"}>\n\t\t\t\t<h3 className=\"text-xl leading-6 font-bold text-gray-900\">\n\t\t\t\t\tYou're done!\n\t\t\t\t</h3>\n\t\t\t\t<p className=\"mt-2\">\n\t\t\t\t\t{user?.displayName ? user?.displayName + \", y\" : \"Y\"}ou are\n\t\t\t\t\tnow registered for SBMUN!\n\t\t\t\t</p>\n\t\t\t\t<p className=\"mt-2\">\n\t\t\t\t\tIf you'd like to help us improve the conference registration\n\t\t\t\t\texperience, please fill out{\" \"}\n\t\t\t\t\t<a\n\t\t\t\t\t\thref=\"https://forms.gle/RFhr4TUbaWpSPDNX7\"\n\t\t\t\t\t\tclassName=\"link\"\n\t\t\t\t\t\ttarget={\"_blank\"}\n\t\t\t\t\t\trel={\"noopener noreferrer\"}\n\t\t\t\t\t>\n\t\t\t\t\t\tthis short survey\n\t\t\t\t\t</a>\n\t\t\t\t\t.\n\t\t\t\t</p>\n\t\t\t\t<p className=\"mt-4\">\n\t\t\t\t\tYou can edit or cancel your registration until the deadline.\n\t\t\t\t\tTo edit your registration, simply go back to any step using\n\t\t\t\t\tthe back button or by clicking a step on the steps list. To\n\t\t\t\t\tcancel your registration,{\" \"}\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={\"mailto:conferenceregistration@montavistamun.com\"}\n\t\t\t\t\t\tclassName={\"link\"}\n\t\t\t\t\t>\n\t\t\t\t\t\temail us\n\t\t\t\t\t</a>\n\t\t\t\t\t. Note: unfortunately, we are unable to process refunds for\n\t\t\t\t\tdonations if you cancel.\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t<div className=\"px-4 py-3 bg-gray-50 text-right sm:px-6 flex justify-between\">\n\t\t\t\t<span className=\"inline-flex rounded-md shadow-sm\">\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tonClick={() => setStep(3)}\n\t\t\t\t\t\tclassName={cx(\n\t\t\t\t\t\t\t\"py-2 px-4 border border-gray-300 rounded-md text-sm leading-5 font-medium text-gray-700 bg-white hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:ring-blue-500 active:bg-gray-50 active:text-gray-800 transition duration-150 ease-in-out\"\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\tBack\n\t\t\t\t\t</button>\n\t\t\t\t</span>\n\t\t\t\t<div />\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","/Users/jmeng/Documents/code/montavistamun/src/components/registration/bmunsections/DonationsSection.tsx",["635","636","637","638","639"],"// Import React FilePond\nimport callbackBlobToBuffer from \"blob-to-buffer\";\nimport cx from \"classnames\";\nimport { FilePond } from \"filepond\";\nimport { User } from \"firebase\";\nimport React, { useState } from \"react\";\nimport \"../../../css/file-upload.css\";\nimport useFirebase from \"../../../firebase/useFirebase\";\nimport FormUpload from \"../FormUpload\";\n\ninterface DonationForms {\n\tbmunDonation?: string;\n\tbmunDonationOptOut?: boolean;\n}\ninterface ConfirmationData {\n\tbmunConfirmed: true;\n}\n// make promise based\nconst blobToBuffer = (blob: Blob) =>\n\tnew Promise((res, rej) =>\n\t\tcallbackBlobToBuffer(blob, (err, buffer) => {\n\t\t\tif (err) rej();\n\t\t\telse res(buffer);\n\t\t})\n\t);\n\nexport default function DonationsSection({\n\tdata,\n\tsetStepHasChanges,\n\thandleUpdateData,\n\tsetStep,\n\tsetMaxStep,\n\tuser,\n}: {\n\tuser: User;\n\tdata: Record<string, any>;\n\thandleUpdateData: (\n\t\tname: string,\n\t\tdata: DonationForms | ConfirmationData\n\t) => Promise<void>;\n\tsetStepHasChanges: (hasChanges: boolean) => void;\n\tsetStep: (step: number) => void;\n\tsetMaxStep: (maxStep: number | ((old: number) => number)) => void;\n}) {\n\tconst firebase = useFirebase();\n\n\tconst [receipt, setReceipt] = useState<\n\t\t(File & { serverId: string | null })[] | null\n\t>(null);\n\tconst [uploading, setUploading] = useState(false);\n\n\tReact.useEffect(() => {\n\t\tsetStepHasChanges(\n\t\t\tuploading ||\n\t\t\t\t!!(receipt && receipt[0] && receipt[0].serverId === null)\n\t\t);\n\t}, [uploading, receipt && receipt[0], receipt && receipt[0]?.serverId]);\n\tconst [submitting, setSubmitting] = useState(false);\n\tconst [skipping, setSkipping] = useState(false);\n\tconst [uploadInstance, setUploadInstance] = useState<FilePond | null>(null);\n\treturn (\n\t\t<div className=\"mt-8 shadow rounded-md sm:overflow-hidden\">\n\t\t\t<div className={\"px-4 bg-white sm:p-6 py-4\"}>\n\t\t\t\t<h3 className=\"text-xl leading-6 font-bold text-gray-900\">\n\t\t\t\t\tHang in there — you’re almost done!\n\t\t\t\t</h3>\n\t\t\t\t<p className=\"mt-2\">\n\t\t\t\t\tBefore you submit, we just have one last step. To cover the\n\t\t\t\t\tfees charged by BMUN, we are requesting that you include a\n\t\t\t\t\tdonation of <b>$30</b> with your registration. Your\n\t\t\t\t\tdonations will go directly towards covering conference fees\n\t\t\t\t\tand making this conference possible.\n\t\t\t\t</p>\n\t\t\t\t{data.forms?.bmunDonationOptOut && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<p className=\"mt-2\">\n\t\t\t\t\t\t\tYou've indicated that you are financially unable to\n\t\t\t\t\t\t\tdonate, or do not wish to do so, and that{\" \"}\n\t\t\t\t\t\t\t<b>\n\t\t\t\t\t\t\t\tyou've talked to Mr Hartford about your\n\t\t\t\t\t\t\t\tsituation\n\t\t\t\t\t\t\t</b>\n\t\t\t\t\t\t\t. You may now move on to the next step by clicking\n\t\t\t\t\t\t\tthe continue button below.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName={cx(\n\t\t\t\t\t\t\t\t\"mt-4 py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white shadow-sm\",\n\t\t\t\t\t\t\t\tsubmitting\n\t\t\t\t\t\t\t\t\t? \"bg-indigo-300\"\n\t\t\t\t\t\t\t\t\t: \"bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:ring-blue-500 active:bg-indigo-600 transition duration-150 ease-in-out\"\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\tdisabled={skipping}\n\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\tsetSkipping(true);\n\t\t\t\t\t\t\t\thandleUpdateData(\"forms\", {\n\t\t\t\t\t\t\t\t\tbmunDonationOptOut: false,\n\t\t\t\t\t\t\t\t}).then(() => setSkipping(false));\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{skipping ? \"Cancelling...\" : \"Cancel\"}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t\t{!data.forms?.bmunDonationOptOut && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<p className=\"mt-2\">\n\t\t\t\t\t\t\tIf you are financially unable to donate, or do not\n\t\t\t\t\t\t\twish to do so,{\" \"}\n\t\t\t\t\t\t\t<b>\n\t\t\t\t\t\t\t\tplease contact Mr. Hartford about your situation\n\t\t\t\t\t\t\t\t(join his office hours{\" \"}\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\thref=\"https://fuhsd-org.zoom.us/j/95410126748?pwd=THQxTmhtYWRWSmlEOUIrTjhuY3Z4dz09\"\n\t\t\t\t\t\t\t\t\tclassName=\"link\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\there\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t</b>\n\t\t\t\t\t\t\t, then{\" \"}\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\tclassName={\"link\"}\n\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\tif (skipping) return;\n\t\t\t\t\t\t\t\t\tsetSkipping(true);\n\t\t\t\t\t\t\t\t\thandleUpdateData(\"forms\", {\n\t\t\t\t\t\t\t\t\t\tbmunDonationOptOut: true,\n\t\t\t\t\t\t\t\t\t}).then(() => setSkipping(false));\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{skipping\n\t\t\t\t\t\t\t\t\t? \"skipping donating...\"\n\t\t\t\t\t\t\t\t\t: \"click here to skip donating\"}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t.\n\t\t\t\t\t\t</p>\n\n\t\t\t\t\t\t<h3 className=\"text-lg leading-6 font-medium text-gray-900 mt-6 mb-2\">\n\t\t\t\t\t\t\tHow to Donate\n\t\t\t\t\t\t</h3>\n\n\t\t\t\t\t\t<ul className=\"list-decimal ml-8\">\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\tHead to Monta Vista’s online Student Store and\n\t\t\t\t\t\t\t\tfind our BMUN conference donation{\" \"}\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\ttarget={\"_blank\"}\n\t\t\t\t\t\t\t\t\trel={\"noopener noreferrer\"}\n\t\t\t\t\t\t\t\t\thref={\n\t\t\t\t\t\t\t\t\t\t\"https://montavistahs.3dcartstores.com/Berkeley-Model-UN-Conference-Virtual-Conference_p_123.html\"\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tclassName={\"link\"}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\there\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t.\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li>Fill out the fields listed and pay.</li>\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\tMake sure you save a copy of your receipt\n\t\t\t\t\t\t\t\t(screenshot or print &gt; save as PDF the\n\t\t\t\t\t\t\t\tconfirmation page).\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li>Upload your receipt below.</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<p className={\"mt-4\"}>\n\t\t\t\t\t\t\tUnfortunately, we are unable to process refunds with\n\t\t\t\t\t\t\tthe online system. Please confirm you can attend the\n\t\t\t\t\t\t\tconference (<b>February 26-28, 2021</b>) before\n\t\t\t\t\t\t\tdonating!\n\t\t\t\t\t\t</p>\n\n\t\t\t\t\t\t<div className={\"mt-4\"}>\n\t\t\t\t\t\t\t<FormUpload\n\t\t\t\t\t\t\t\tonInstanceChange={(instance) =>\n\t\t\t\t\t\t\t\t\tsetUploadInstance(instance)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tuser={user}\n\t\t\t\t\t\t\t\tfile={receipt}\n\t\t\t\t\t\t\t\tsetFile={setReceipt}\n\t\t\t\t\t\t\t\tuploading={uploading}\n\t\t\t\t\t\t\t\tsetUploading={setUploading}\n\t\t\t\t\t\t\t\tfieldName={\"bmunDonation\"}\n\t\t\t\t\t\t\t\tdata={data}\n\t\t\t\t\t\t\t\tallowImagePreview\n\t\t\t\t\t\t\t\tacceptedFileTypes={[\n\t\t\t\t\t\t\t\t\t\"application/pdf\",\n\t\t\t\t\t\t\t\t\t\"image/*\",\n\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\tlabelFileTypeNotAllowed={\n\t\t\t\t\t\t\t\t\t\"That's not an image or PDF!\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tfileValidateTypeLabelExpectedTypes={\n\t\t\t\t\t\t\t\t\t\"You may only upload images or pdfs\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tlabelIdle={\n\t\t\t\t\t\t\t\t\t\"Drag a image / pdf here or click to browse\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\thandleUpdateData={handleUpdateData}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t<div className=\"px-4 py-3 bg-gray-50 text-right sm:px-6 flex justify-between\">\n\t\t\t\t<span className=\"inline-flex rounded-md shadow-sm\">\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tonClick={() => setStep(2)}\n\t\t\t\t\t\tdisabled={uploading || skipping}\n\t\t\t\t\t\tclassName={cx(\n\t\t\t\t\t\t\t\"py-2 px-4 border border-gray-300 rounded-md text-sm leading-5 font-medium text-gray-700\",\n\t\t\t\t\t\t\tuploading || skipping\n\t\t\t\t\t\t\t\t? \"bg-gray-300\"\n\t\t\t\t\t\t\t\t: \"bg-white hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:ring-blue-500 active:bg-gray-50 active:text-gray-800 transition duration-150 ease-in-out\"\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\tBack\n\t\t\t\t\t</button>\n\t\t\t\t</span>\n\t\t\t\t<button\n\t\t\t\t\ttype={\"button\"}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t!data?.forms?.bmunDonation &&\n\t\t\t\t\t\t\t!data?.forms?.bmunDonationOptOut\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tif (!uploadInstance) return;\n\t\t\t\t\t\t\tsetUploading(true);\n\t\t\t\t\t\t\tuploadInstance.processFile();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (data.confirm?.bmunConfirmed) {\n\t\t\t\t\t\t\tsetStep(4);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsetSubmitting(true);\n\t\t\t\t\t\thandleUpdateData(\"confirm\", {\n\t\t\t\t\t\t\tbmunConfirmed: true,\n\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\tif (!firebase) return;\n\t\t\t\t\t\t\t\treturn firebase\n\t\t\t\t\t\t\t\t\t.firestore()\n\t\t\t\t\t\t\t\t\t.collection(\"users\")\n\t\t\t\t\t\t\t\t\t.doc(user?.uid)\n\t\t\t\t\t\t\t\t\t.update({\n\t\t\t\t\t\t\t\t\t\tbmunRegistered: true,\n\t\t\t\t\t\t\t\t\t\tbmunRegistrationTimestamp: firebase.firestore.FieldValue.serverTimestamp(),\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\tsetSubmitting(false);\n\t\t\t\t\t\t\t\tsetStep(4);\n\t\t\t\t\t\t\t\tsetMaxStep((o) => 5); // maxStep is one higher to check it\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}}\n\t\t\t\t\tdisabled={\n\t\t\t\t\t\tuploading ||\n\t\t\t\t\t\tsubmitting ||\n\t\t\t\t\t\tskipping ||\n\t\t\t\t\t\t((!receipt || receipt.length == 0) &&\n\t\t\t\t\t\t\t!data?.forms?.bmunDonationOptOut)\n\t\t\t\t\t}\n\t\t\t\t\tclassName={cx(\n\t\t\t\t\t\t\"ml-4 py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white shadow-sm\",\n\t\t\t\t\t\tuploading ||\n\t\t\t\t\t\t\tsubmitting ||\n\t\t\t\t\t\t\tskipping ||\n\t\t\t\t\t\t\t((!receipt || receipt.length == 0) &&\n\t\t\t\t\t\t\t\t!data?.forms?.bmunDonationOptOut)\n\t\t\t\t\t\t\t? \"bg-indigo-300\"\n\t\t\t\t\t\t\t: \"bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:ring-blue-500 active:bg-indigo-600 transition duration-150 ease-in-out\"\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t{uploading\n\t\t\t\t\t\t? \"Uploading...\"\n\t\t\t\t\t\t: (!receipt || receipt.length == 0) &&\n\t\t\t\t\t\t  !data?.forms?.bmunDonationOptOut\n\t\t\t\t\t\t? \"Upload all forms to finish registration\"\n\t\t\t\t\t\t: !data?.forms?.bmunDonation &&\n\t\t\t\t\t\t  !data?.forms?.bmunDonationOptOut\n\t\t\t\t\t\t? \"Upload\"\n\t\t\t\t\t\t: !data.confirm?.bmunConfirmed\n\t\t\t\t\t\t? \"Finish Registration\"\n\t\t\t\t\t\t: \"Continue\"}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","/Users/jmeng/Documents/code/montavistamun/src/components/registration/bmunsections/WaiverFormsSection.tsx",["640","641","642"],"import axios from \"axios\";\n// Import React FilePond\nimport callbackBlobToBuffer from \"blob-to-buffer\";\nimport cx from \"classnames\";\nimport { FilePond } from \"filepond\";\nimport { User } from \"firebase\";\nimport React, { useState } from \"react\";\nimport { File } from \"react-filepond\";\nimport \"../../../css/file-upload.css\";\nimport useFirebase from \"../../../firebase/useFirebase\";\nimport FormUpload from \"../FormUpload\";\nimport * as pdfform from \"../PDFForm\";\n\ninterface WaiverForms {\n\tbmunFuhsdForm: string;\n}\n// make promise based\nconst blobToBuffer = (blob: Blob) =>\n\tnew Promise((res, rej) =>\n\t\tcallbackBlobToBuffer(blob, (err, buffer) => {\n\t\t\tif (err) rej();\n\t\t\telse res(buffer);\n\t\t})\n\t);\n\nconst isIOS = () => {\n\treturn (\n\t\t[\n\t\t\t\"iPad Simulator\",\n\t\t\t\"iPhone Simulator\",\n\t\t\t\"iPod Simulator\",\n\t\t\t\"iPad\",\n\t\t\t\"iPhone\",\n\t\t\t\"iPod\",\n\t\t].includes(navigator.platform) ||\n\t\t// iPad on iOS 13 detection\n\t\t(navigator.userAgent.includes(\"Mac\") && \"ontouchend\" in document)\n\t);\n};\nconst openOrDownload = (\n\tname: string,\n\tform: Uint8Array | null,\n\tunfilledPath: string = name\n): Promise<void> => {\n\tif (isIOS()) {\n\t\tconst shouldContinue = confirm(\n\t\t\t\"Autofilled forms are not available on iOS browsers, so an unfilled form will be opened. If you'd like an autofilled PDF form, please visit this page on a non-mobile browser.\"\n\t\t);\n\t\tif (!shouldContinue) {\n\t\t\treturn Promise.resolve();\n\t\t}\n\t}\n\tif (form === null || isIOS()) {\n\t\twindow.location.href = unfilledPath;\n\t} else {\n\t\treturn pdfform.openOrDownload(form, \"\", true, name);\n\t}\n\treturn Promise.resolve();\n};\n\nexport default function WaiverFormsSection({\n\tdata,\n\tsetStepHasChanges,\n\thandleUpdateData,\n\tsetStep,\n\tsetMaxStep,\n\tuser,\n}: {\n\tuser: User;\n\tdata: Record<string, any>;\n\thandleUpdateData: (\n\t\tname: string,\n\t\tdata: WaiverForms | ((oldData: WaiverForms) => WaiverForms)\n\t) => Promise<void>;\n\tsetStepHasChanges: (hasChanges: boolean) => void;\n\tsetStep: (step: number) => void;\n\tsetMaxStep: (maxStep: number | ((old: number) => number)) => void;\n}) {\n\tconst firebase = useFirebase();\n\n\tconst [filledForms, setFilledForms] = useState<(Uint8Array | null)[]>([\n\t\tnull,\n\t]);\n\n\tconst [fuhsdForm, setFuhsdForm] = useState<File | null>(null);\n\tconst [fuhsdUploading, setFuhsdUploading] = useState(false);\n\n\tReact.useEffect(() => {\n\t\tsetStepHasChanges(\n\t\t\tfuhsdUploading ||\n\t\t\t\t(fuhsdForm && fuhsdForm[0] && fuhsdForm[0].serverId === null)\n\t\t);\n\t}, [\n\t\tfuhsdUploading,\n\t\tfuhsdForm && fuhsdForm[0],\n\t\tfuhsdForm && fuhsdForm[0]?.serverId,\n\t]);\n\tReact.useEffect(() => {\n\t\tif (!user || !data) return;\n\t\t(async () => {\n\t\t\tconst response = await axios.get(\n\t\t\t\t\"/forms/FUHSD-field-trip-form.pdf\",\n\t\t\t\t{\n\t\t\t\t\tresponseType: \"arraybuffer\",\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\t\tAccept: \"application/pdf\",\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t);\n\t\t\tconst blob = new Blob([response.data]);\n\t\t\tconst pdf = (await blobToBuffer(blob)) as ArrayBuffer;\n\t\t\t// const keys = Object.keys(pdfform.list_fields(pdf));\n\n\t\t\tconst filled = pdfform.fillForm(pdf, {\n\t\t\t\t\"Student's Name\": [user?.displayName],\n\t\t\t\tDestination: [\"Online Model UN Conference (BMUN)\"],\n\t\t\t\t\"Date(s)\": [\"2/26/21 - 2/28/21\"],\n\t\t\t\t\"Depature Time\": [\"None (Virtual)\"],\n\t\t\t\t\"Return Time\": [\"None (Virtual)\"],\n\t\t\t\t\"Person in Charge\": [\"David Hartford\"],\n\t\t\t\t\"Home Address\": [\n\t\t\t\t\tdata.personalInformation.addressOne +\n\t\t\t\t\t\t(data.personalInformation.addressTwo\n\t\t\t\t\t\t\t? \", \" + data.personalInformation.addressTwo\n\t\t\t\t\t\t\t: \"\") +\n\t\t\t\t\t\t\", \" +\n\t\t\t\t\t\tdata.personalInformation.city +\n\t\t\t\t\t\t\", \" +\n\t\t\t\t\t\tdata.personalInformation.state +\n\t\t\t\t\t\t\", \" +\n\t\t\t\t\t\tdata.personalInformation.zip,\n\t\t\t\t],\n\t\t\t\t\"Insurance Address\": [\n\t\t\t\t\tdata.emergencyInformation.healthInsuranceAddressOne +\n\t\t\t\t\t\t(data.emergencyInformation.healthInsuranceAddressTwo\n\t\t\t\t\t\t\t? \", \" +\n\t\t\t\t\t\t\t  data.emergencyInformation\n\t\t\t\t\t\t\t\t\t.healthInsuranceAddressTwo\n\t\t\t\t\t\t\t: \"\"),\n\t\t\t\t],\n\t\t\t\t\"City/State\": [\n\t\t\t\t\tdata.emergencyInformation.healthInsuranceCity +\n\t\t\t\t\t\t\", \" +\n\t\t\t\t\t\tdata.emergencyInformation.healthInsuranceState,\n\t\t\t\t],\n\t\t\t\tZip: [data.emergencyInformation.healthInsuranceZip],\n\t\t\t\t\"Family Health Insurance Carrier\": [\n\t\t\t\t\tdata.emergencyInformation.healthInsuranceCarrier,\n\t\t\t\t],\n\t\t\t\t\"Policy Number\": [\n\t\t\t\t\tdata.emergencyInformation.healthInsurancePolicyNumber,\n\t\t\t\t],\n\t\t\t\tTelephone: [data.personalInformation.phone],\n\t\t\t\tLanguage: [data.emergencyInformation.householdMainLanguage],\n\t\t\t\t\"Emergency Contact Name and Telephone\": [\n\t\t\t\t\tdata.emergencyInformation.contactOneName +\n\t\t\t\t\t\t\", \" +\n\t\t\t\t\t\tdata.emergencyInformation.contactOnePhone,\n\t\t\t\t],\n\t\t\t});\n\t\t\tsetFilledForms((o) => [filled, o[1]]);\n\t\t})();\n\t}, [user, data]);\n\tconst [uploadInstances, setUploadInstances] = useState<(FilePond | null)[]>(\n\t\t[]\n\t);\n\treturn (\n\t\t<div className=\"mt-8 shadow rounded-md sm:overflow-hidden\">\n\t\t\t<div className={\" px-4 bg-white sm:p-6 py-4\"}>\n\t\t\t\t<h3 className=\"text-xl leading-6 font-bold text-gray-900\">\n\t\t\t\t\tLiability Forms\n\t\t\t\t</h3>\n\t\t\t\t<p className=\"mt-1 max-w-2xl text-sm leading-5 text-gray-500\">\n\t\t\t\t\tYou'll need to print out, sign, scan, and upload the\n\t\t\t\t\tfollowing forms.\n\t\t\t\t</p>\n\t\t\t\t<div className={\"mt-4\"}>\n\t\t\t\t\t<h3 className=\"text-lg leading-6 font-medium text-gray-900\">\n\t\t\t\t\t\t1. FUHSD Field Trip Form\n\t\t\t\t\t</h3>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<span className=\"inline-flex rounded-md shadow-sm my-2 mr-2\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\topenOrDownload(\n\t\t\t\t\t\t\t\t\t\t\"bmun-fuhsd-form.pdf\",\n\t\t\t\t\t\t\t\t\t\tfilledForms[0],\n\t\t\t\t\t\t\t\t\t\t\"/forms/FUHSD-field-trip-form.pdf\"\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\"py-1 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white shadow-sm \" +\n\t\t\t\t\t\t\t\t\t(filledForms[0] === null\n\t\t\t\t\t\t\t\t\t\t? \"bg-indigo-300\"\n\t\t\t\t\t\t\t\t\t\t: \"bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:ring-blue-500 active:bg-indigo-600 transition duration-150 ease-in-out\")\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tdisabled={filledForms[0] === null}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{filledForms[0] === null\n\t\t\t\t\t\t\t\t\t? \"Generating Form...\"\n\t\t\t\t\t\t\t\t\t: \"Download the form, \"}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\tprint it, sign it, scan it, then upload it below:\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<FormUpload\n\t\t\t\t\t\tonInstanceChange={(instance: FilePond | null) =>\n\t\t\t\t\t\t\tsetUploadInstances([instance])\n\t\t\t\t\t\t}\n\t\t\t\t\t\tuser={user}\n\t\t\t\t\t\tfile={fuhsdForm}\n\t\t\t\t\t\tsetFile={setFuhsdForm}\n\t\t\t\t\t\tuploading={fuhsdUploading}\n\t\t\t\t\t\tsetUploading={setFuhsdUploading}\n\t\t\t\t\t\tfieldName={\"bmunFuhsdForm\"}\n\t\t\t\t\t\tdata={data}\n\t\t\t\t\t\thandleUpdateData={handleUpdateData}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"px-4 py-3 bg-gray-50 text-right sm:px-6 flex justify-between\">\n\t\t\t\t<span className=\"inline-flex rounded-md shadow-sm\">\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tsetStep(1);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tdisabled={fuhsdUploading}\n\t\t\t\t\t\tclassName={cx(\n\t\t\t\t\t\t\t\"py-2 px-4 border border-gray-300 rounded-md text-sm leading-5 font-medium text-gray-700\",\n\t\t\t\t\t\t\tfuhsdUploading\n\t\t\t\t\t\t\t\t? \"bg-gray-300\"\n\t\t\t\t\t\t\t\t: \"bg-white hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:ring-blue-500 active:bg-gray-50 active:text-gray-800 transition duration-150 ease-in-out\"\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\tBack\n\t\t\t\t\t</button>\n\t\t\t\t</span>\n\t\t\t\t<button\n\t\t\t\t\ttype={\"button\"}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tif (!data?.forms?.bmunFuhsdForm) {\n\t\t\t\t\t\t\tuploadInstances.forEach((instance) => {\n\t\t\t\t\t\t\t\t// process first (and only) file\n\t\t\t\t\t\t\t\tif (!instance) return;\n\t\t\t\t\t\t\t\tsetFuhsdUploading(true);\n\t\t\t\t\t\t\t\tinstance.processFile();\n\t\t\t\t\t\t\t\tconsole.log(uploadInstances);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsetStep(3);\n\t\t\t\t\t\tsetMaxStep((o) => Math.max(o, 3));\n\t\t\t\t\t}}\n\t\t\t\t\tdisabled={\n\t\t\t\t\t\tfuhsdUploading || !fuhsdForm || fuhsdForm.length === 0\n\t\t\t\t\t}\n\t\t\t\t\tclassName={cx(\n\t\t\t\t\t\t\"ml-4 py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white shadow-sm\",\n\t\t\t\t\t\tfuhsdUploading || !fuhsdForm || fuhsdForm.length === 0\n\t\t\t\t\t\t\t? \"bg-indigo-300\"\n\t\t\t\t\t\t\t: \"bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:ring-blue-500 active:bg-indigo-600 transition duration-150 ease-in-out\"\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t{fuhsdUploading\n\t\t\t\t\t\t? \"Uploading...\"\n\t\t\t\t\t\t: !fuhsdForm || fuhsdForm.length === 0\n\t\t\t\t\t\t? \"Upload All Files to Continue\"\n\t\t\t\t\t\t: !data?.forms?.bmunFuhsdForm\n\t\t\t\t\t\t? \"Upload Files\"\n\t\t\t\t\t\t: \"Continue\"}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","/Users/jmeng/Documents/code/montavistamun/src/components/registration/sbmunsections/ConfirmationSection.tsx",["643","644","645","646","647","648","649","650","651","652"],"/Users/jmeng/Documents/code/montavistamun/src/components/registration/sbmunsections/DonationsSection.tsx",["653","654","655","656","657"],"// Import React FilePond\nimport callbackBlobToBuffer from \"blob-to-buffer\";\nimport cx from \"classnames\";\nimport { FilePond } from \"filepond\";\nimport { User } from \"firebase\";\nimport React, { useState } from \"react\";\nimport \"../../../css/file-upload.css\";\nimport useFirebase from \"../../../firebase/useFirebase\";\nimport FormUpload from \"../FormUpload\";\n\ninterface DonationForms {\n\tsbmunDonation?: string;\n\tsbmunDonationOptOut?: boolean;\n}\ninterface ConfirmationData {\n\tsbmunConfirmed: true;\n}\n// make promise based\nconst blobToBuffer = (blob: Blob) =>\n\tnew Promise((res, rej) =>\n\t\tcallbackBlobToBuffer(blob, (err, buffer) => {\n\t\t\tif (err) rej();\n\t\t\telse res(buffer);\n\t\t})\n\t);\n\nexport default function DonationsSection({\n\tdata,\n\tsetStepHasChanges,\n\thandleUpdateData,\n\tsetStep,\n\tsetMaxStep,\n\tuser,\n}: {\n\tuser: User;\n\tdata: Record<string, any>;\n\thandleUpdateData: (\n\t\tname: string,\n\t\tdata: DonationForms | ConfirmationData\n\t) => Promise<void>;\n\tsetStepHasChanges: (hasChanges: boolean) => void;\n\tsetStep: (step: number) => void;\n\tsetMaxStep: (maxStep: number | ((old: number) => number)) => void;\n}) {\n\tconst firebase = useFirebase();\n\n\tconst [receipt, setReceipt] = useState<\n\t\t(File & { serverId: string | null })[] | null\n\t>(null);\n\tconst [uploading, setUploading] = useState(false);\n\n\tReact.useEffect(() => {\n\t\tsetStepHasChanges(\n\t\t\tuploading ||\n\t\t\t\t!!(receipt && receipt[0] && receipt[0].serverId === null)\n\t\t);\n\t}, [uploading, receipt && receipt[0], receipt && receipt[0]?.serverId]);\n\tconst [submitting, setSubmitting] = useState(false);\n\tconst [skipping, setSkipping] = useState(false);\n\tconst [uploadInstance, setUploadInstance] = useState<FilePond | null>(null);\n\treturn (\n\t\t<div className=\"mt-8 shadow rounded-md sm:overflow-hidden\">\n\t\t\t<div className={\"px-4 bg-white sm:p-6 py-4\"}>\n\t\t\t\t<h3 className=\"text-xl leading-6 font-bold text-gray-900\">\n\t\t\t\t\tHang in there — you’re almost done!\n\t\t\t\t</h3>\n\t\t\t\t<p className=\"mt-2\">\n\t\t\t\t\tBefore you submit, we just have one last step. To cover the\n\t\t\t\t\tfees charged by SBMUN, we are requesting that you include a\n\t\t\t\t\tdonation of <b>$30</b> with your registration. Your\n\t\t\t\t\tdonations will go directly towards covering conference fees\n\t\t\t\t\tand making this conference possible.\n\t\t\t\t</p>\n\t\t\t\t{data.forms?.sbmunDonationOptOut && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<p className=\"mt-2\">\n\t\t\t\t\t\t\tYou've indicated that you are financially unable to\n\t\t\t\t\t\t\tdonate, or do not wish to do so, and that{\" \"}\n\t\t\t\t\t\t\t<b>\n\t\t\t\t\t\t\t\tyou've talked to Mr Hartford about your\n\t\t\t\t\t\t\t\tsituation\n\t\t\t\t\t\t\t</b>\n\t\t\t\t\t\t\t. You may now move on to the next step by clicking\n\t\t\t\t\t\t\tthe continue button below.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName={cx(\n\t\t\t\t\t\t\t\t\"mt-4 py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white shadow-sm\",\n\t\t\t\t\t\t\t\tsubmitting\n\t\t\t\t\t\t\t\t\t? \"bg-indigo-300\"\n\t\t\t\t\t\t\t\t\t: \"bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:ring-blue-500 active:bg-indigo-600 transition duration-150 ease-in-out\"\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\tdisabled={skipping}\n\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\tsetSkipping(true);\n\t\t\t\t\t\t\t\thandleUpdateData(\"forms\", {\n\t\t\t\t\t\t\t\t\tsbmunDonationOptOut: false,\n\t\t\t\t\t\t\t\t}).then(() => setSkipping(false));\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{skipping ? \"Cancelling...\" : \"Cancel\"}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t\t{!data.forms?.sbmunDonationOptOut && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<p className=\"mt-2\">\n\t\t\t\t\t\t\tIf you are financially unable to donate, or do not\n\t\t\t\t\t\t\twish to do so,{\" \"}\n\t\t\t\t\t\t\t<b>\n\t\t\t\t\t\t\t\tplease contact Mr. Hartford about your situation\n\t\t\t\t\t\t\t\t(join his office hours{\" \"}\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\thref=\"https://fuhsd-org.zoom.us/j/95410126748?pwd=THQxTmhtYWRWSmlEOUIrTjhuY3Z4dz09\"\n\t\t\t\t\t\t\t\t\tclassName=\"link\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\there\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t</b>\n\t\t\t\t\t\t\t, then{\" \"}\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\tclassName={\"link\"}\n\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\tif (skipping) return;\n\t\t\t\t\t\t\t\t\tsetSkipping(true);\n\t\t\t\t\t\t\t\t\thandleUpdateData(\"forms\", {\n\t\t\t\t\t\t\t\t\t\tsbmunDonationOptOut: true,\n\t\t\t\t\t\t\t\t\t}).then(() => setSkipping(false));\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{skipping\n\t\t\t\t\t\t\t\t\t? \"skipping donating...\"\n\t\t\t\t\t\t\t\t\t: \"click here to skip donating\"}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t.\n\t\t\t\t\t\t</p>\n\n\t\t\t\t\t\t<h3 className=\"text-lg leading-6 font-medium text-gray-900 mt-6 mb-2\">\n\t\t\t\t\t\t\tHow to Donate\n\t\t\t\t\t\t</h3>\n\n\t\t\t\t\t\t<ul className=\"list-decimal ml-8\">\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\tHead to Monta Vista’s online Student Store and\n\t\t\t\t\t\t\t\tfind our SBMUN conference donation{\" \"}\n\t\t\t\t\t\t\t\t{/* TODO: add actual link */}\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\ttarget={\"_blank\"}\n\t\t\t\t\t\t\t\t\trel={\"noopener noreferrer\"}\n\t\t\t\t\t\t\t\t\thref={\n\t\t\t\t\t\t\t\t\t\t\"https://www.youtube.com/watch?v=dQw4w9WgXcQ\"\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tclassName={\"link\"}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\there\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t.\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li>Fill out the fields listed and pay.</li>\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\tMake sure you save a copy of your receipt\n\t\t\t\t\t\t\t\t(screenshot or print &gt; save as PDF the\n\t\t\t\t\t\t\t\tconfirmation page).\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li>Upload your receipt below.</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<p className={\"mt-4\"}>\n\t\t\t\t\t\t\tUnfortunately, we are unable to process refunds with\n\t\t\t\t\t\t\tthe online system. Please confirm you can attend the\n\t\t\t\t\t\t\tconference (<b>April 3, 2021</b>) before donating!\n\t\t\t\t\t\t</p>\n\n\t\t\t\t\t\t<div className={\"mt-4\"}>\n\t\t\t\t\t\t\t<FormUpload\n\t\t\t\t\t\t\t\tonInstanceChange={(instance) =>\n\t\t\t\t\t\t\t\t\tsetUploadInstance(instance)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tuser={user}\n\t\t\t\t\t\t\t\tfile={receipt}\n\t\t\t\t\t\t\t\tsetFile={setReceipt}\n\t\t\t\t\t\t\t\tuploading={uploading}\n\t\t\t\t\t\t\t\tsetUploading={setUploading}\n\t\t\t\t\t\t\t\tfieldName={\"sbmunDonation\"}\n\t\t\t\t\t\t\t\tdata={data}\n\t\t\t\t\t\t\t\tallowImagePreview\n\t\t\t\t\t\t\t\tacceptedFileTypes={[\n\t\t\t\t\t\t\t\t\t\"application/pdf\",\n\t\t\t\t\t\t\t\t\t\"image/*\",\n\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\tlabelFileTypeNotAllowed={\n\t\t\t\t\t\t\t\t\t\"That's not an image or PDF!\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tfileValidateTypeLabelExpectedTypes={\n\t\t\t\t\t\t\t\t\t\"You may only upload images or pdfs\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tlabelIdle={\n\t\t\t\t\t\t\t\t\t\"Drag a image / pdf here or click to browse\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\thandleUpdateData={handleUpdateData}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t<div className=\"px-4 py-3 bg-gray-50 text-right sm:px-6 flex justify-between\">\n\t\t\t\t<span className=\"inline-flex rounded-md shadow-sm\">\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tonClick={() => setStep(2)}\n\t\t\t\t\t\tdisabled={uploading || skipping}\n\t\t\t\t\t\tclassName={cx(\n\t\t\t\t\t\t\t\"py-2 px-4 border border-gray-300 rounded-md text-sm leading-5 font-medium text-gray-700\",\n\t\t\t\t\t\t\tuploading || skipping\n\t\t\t\t\t\t\t\t? \"bg-gray-300\"\n\t\t\t\t\t\t\t\t: \"bg-white hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:ring-blue-500 active:bg-gray-50 active:text-gray-800 transition duration-150 ease-in-out\"\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\tBack\n\t\t\t\t\t</button>\n\t\t\t\t</span>\n\t\t\t\t<button\n\t\t\t\t\ttype={\"button\"}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t!data?.forms?.sbmunDonation &&\n\t\t\t\t\t\t\t!data?.forms?.sbmunDonationOptOut\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tif (!uploadInstance) return;\n\t\t\t\t\t\t\tsetUploading(true);\n\t\t\t\t\t\t\tuploadInstance.processFile();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (data.confirm?.sbmunConfirmed) {\n\t\t\t\t\t\t\tsetStep(4);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsetSubmitting(true);\n\t\t\t\t\t\thandleUpdateData(\"confirm\", {\n\t\t\t\t\t\t\tsbmunConfirmed: true,\n\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\tif (!firebase) return;\n\t\t\t\t\t\t\t\treturn firebase\n\t\t\t\t\t\t\t\t\t.firestore()\n\t\t\t\t\t\t\t\t\t.collection(\"users\")\n\t\t\t\t\t\t\t\t\t.doc(user?.uid)\n\t\t\t\t\t\t\t\t\t.update({\n\t\t\t\t\t\t\t\t\t\tsbmunRegistered: true,\n\t\t\t\t\t\t\t\t\t\tsbmunRegistrationTimestamp: firebase.firestore.FieldValue.serverTimestamp(),\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\tsetSubmitting(false);\n\t\t\t\t\t\t\t\tsetStep(4);\n\t\t\t\t\t\t\t\tsetMaxStep((o) => 5); // maxStep is one higher to check it\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}}\n\t\t\t\t\tdisabled={\n\t\t\t\t\t\tuploading ||\n\t\t\t\t\t\tsubmitting ||\n\t\t\t\t\t\tskipping ||\n\t\t\t\t\t\t((!receipt || receipt.length == 0) &&\n\t\t\t\t\t\t\t!data?.forms?.sbmunDonationOptOut)\n\t\t\t\t\t}\n\t\t\t\t\tclassName={cx(\n\t\t\t\t\t\t\"ml-4 py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white shadow-sm\",\n\t\t\t\t\t\tuploading ||\n\t\t\t\t\t\t\tsubmitting ||\n\t\t\t\t\t\t\tskipping ||\n\t\t\t\t\t\t\t((!receipt || receipt.length == 0) &&\n\t\t\t\t\t\t\t\t!data?.forms?.sbmunDonationOptOut)\n\t\t\t\t\t\t\t? \"bg-indigo-300\"\n\t\t\t\t\t\t\t: \"bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:ring-blue-500 active:bg-indigo-600 transition duration-150 ease-in-out\"\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t{uploading\n\t\t\t\t\t\t? \"Uploading...\"\n\t\t\t\t\t\t: (!receipt || receipt.length == 0) &&\n\t\t\t\t\t\t  !data?.forms?.sbmunDonationOptOut\n\t\t\t\t\t\t? \"Upload all forms to finish registration\"\n\t\t\t\t\t\t: !data?.forms?.sbmunDonation &&\n\t\t\t\t\t\t  !data?.forms?.sbmunDonationOptOut\n\t\t\t\t\t\t? \"Upload\"\n\t\t\t\t\t\t: !data.confirm?.sbmunConfirmed\n\t\t\t\t\t\t? \"Finish Registration\"\n\t\t\t\t\t\t: \"Continue\"}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","/Users/jmeng/Documents/code/montavistamun/src/components/registration/sbmunsections/WaiverFormsSection.tsx",["658","659","660"],"import axios from \"axios\";\n// Import React FilePond\nimport callbackBlobToBuffer from \"blob-to-buffer\";\nimport cx from \"classnames\";\nimport { FilePond } from \"filepond\";\nimport { User } from \"firebase\";\nimport React, { useState } from \"react\";\nimport { File } from \"react-filepond\";\nimport \"../../../css/file-upload.css\";\nimport useFirebase from \"../../../firebase/useFirebase\";\nimport FormUpload from \"../FormUpload\";\nimport * as pdfform from \"../PDFForm\";\n\ninterface WaiverForms {\n\tbmunFuhsdForm: string;\n}\n// make promise based\nconst blobToBuffer = (blob: Blob) =>\n\tnew Promise((res, rej) =>\n\t\tcallbackBlobToBuffer(blob, (err, buffer) => {\n\t\t\tif (err) rej();\n\t\t\telse res(buffer);\n\t\t})\n\t);\n\nconst isIOS = () => {\n\treturn (\n\t\t[\n\t\t\t\"iPad Simulator\",\n\t\t\t\"iPhone Simulator\",\n\t\t\t\"iPod Simulator\",\n\t\t\t\"iPad\",\n\t\t\t\"iPhone\",\n\t\t\t\"iPod\",\n\t\t].includes(navigator.platform) ||\n\t\t// iPad on iOS 13 detection\n\t\t(navigator.userAgent.includes(\"Mac\") && \"ontouchend\" in document)\n\t);\n};\nconst openOrDownload = (\n\tname: string,\n\tform: Uint8Array | null,\n\tunfilledPath: string = name\n): Promise<void> => {\n\tif (isIOS()) {\n\t\tconst shouldContinue = confirm(\n\t\t\t\"Autofilled forms are not available on iOS browsers, so an unfilled form will be opened. If you'd like an autofilled PDF form, please visit this page on a desktop browser.\"\n\t\t);\n\t\tif (!shouldContinue) {\n\t\t\treturn Promise.resolve();\n\t\t}\n\t}\n\tif (form === null || isIOS()) {\n\t\twindow.location.href = unfilledPath;\n\t} else {\n\t\treturn pdfform.openOrDownload(form, \"\", true, name);\n\t}\n\treturn Promise.resolve();\n};\n\nexport default function WaiverFormsSection({\n\tdata,\n\tsetStepHasChanges,\n\thandleUpdateData,\n\tsetStep,\n\tsetMaxStep,\n\tuser,\n}: {\n\tuser: User;\n\tdata: Record<string, any>;\n\thandleUpdateData: (\n\t\tname: string,\n\t\tdata: WaiverForms | ((oldData: WaiverForms) => WaiverForms)\n\t) => Promise<void>;\n\tsetStepHasChanges: (hasChanges: boolean) => void;\n\tsetStep: (step: number) => void;\n\tsetMaxStep: (maxStep: number | ((old: number) => number)) => void;\n}) {\n\tconst firebase = useFirebase();\n\n\tconst [filledForms, setFilledForms] = useState<(Uint8Array | null)[]>([\n\t\tnull,\n\t\tnull,\n\t]);\n\n\tconst [fuhsdForm, setFuhsdForm] = useState<File | null>(null);\n\tconst [fuhsdUploading, setFuhsdUploading] = useState(false);\n\tconst [sbmunForm, setSbmunForm] = useState<File | null>(null);\n\tconst [sbmunFormUploading, setSbmunFormUploading] = useState(false);\n\tReact.useEffect(() => {\n\t\tsetStepHasChanges(\n\t\t\tfuhsdUploading ||\n\t\t\t\t(fuhsdForm && fuhsdForm[0] && fuhsdForm[0].serverId === null) ||\n\t\t\t\t(sbmunForm && sbmunForm[0] && sbmunForm[0].serverId === null)\n\t\t);\n\t}, [\n\t\tfuhsdUploading,\n\t\tfuhsdForm && fuhsdForm[0],\n\t\tfuhsdForm && fuhsdForm[0]?.serverId,\n\t\tsbmunForm && sbmunForm[0],\n\t\tsbmunForm && sbmunForm[0]?.serverId,\n\t]);\n\tReact.useEffect(() => {\n\t\tif (!user || !data) return;\n\t\t(async () => {\n\t\t\tconst response = await axios.get(\n\t\t\t\t\"/forms/FUHSD-field-trip-form.pdf\",\n\t\t\t\t{\n\t\t\t\t\tresponseType: \"arraybuffer\",\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\t\tAccept: \"application/pdf\",\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t);\n\t\t\tconst blob = new Blob([response.data]);\n\t\t\tconst pdf = (await blobToBuffer(blob)) as ArrayBuffer;\n\t\t\t// const keys = Object.keys(pdfform.list_fields(pdf));\n\n\t\t\tconst filled = pdfform.fillForm(pdf, {\n\t\t\t\t\"Student's Name\": [user?.displayName],\n\t\t\t\tDestination: [\"Online Model UN Conference (SBMUN)\"],\n\t\t\t\t\"Date(s)\": [\"4/3/21\"],\n\t\t\t\t\"Depature Time\": [\"None (Virtual)\"],\n\t\t\t\t\"Return Time\": [\"None (Virtual)\"],\n\t\t\t\t\"Person in Charge\": [\"David Hartford\"],\n\t\t\t\t\"Home Address\": [\n\t\t\t\t\tdata.personalInformation.addressOne +\n\t\t\t\t\t\t(data.personalInformation.addressTwo\n\t\t\t\t\t\t\t? \", \" + data.personalInformation.addressTwo\n\t\t\t\t\t\t\t: \"\") +\n\t\t\t\t\t\t\", \" +\n\t\t\t\t\t\tdata.personalInformation.city +\n\t\t\t\t\t\t\", \" +\n\t\t\t\t\t\tdata.personalInformation.state +\n\t\t\t\t\t\t\", \" +\n\t\t\t\t\t\tdata.personalInformation.zip,\n\t\t\t\t],\n\t\t\t\t\"Insurance Address\": [\n\t\t\t\t\tdata.emergencyInformation.healthInsuranceAddressOne +\n\t\t\t\t\t\t(data.emergencyInformation.healthInsuranceAddressTwo\n\t\t\t\t\t\t\t? \", \" +\n\t\t\t\t\t\t\t  data.emergencyInformation\n\t\t\t\t\t\t\t\t\t.healthInsuranceAddressTwo\n\t\t\t\t\t\t\t: \"\"),\n\t\t\t\t],\n\t\t\t\t\"City/State\": [\n\t\t\t\t\tdata.emergencyInformation.healthInsuranceCity +\n\t\t\t\t\t\t\", \" +\n\t\t\t\t\t\tdata.emergencyInformation.healthInsuranceState,\n\t\t\t\t],\n\t\t\t\tZip: [data.emergencyInformation.healthInsuranceZip],\n\t\t\t\t\"Family Health Insurance Carrier\": [\n\t\t\t\t\tdata.emergencyInformation.healthInsuranceCarrier,\n\t\t\t\t],\n\t\t\t\t\"Policy Number\": [\n\t\t\t\t\tdata.emergencyInformation.healthInsurancePolicyNumber,\n\t\t\t\t],\n\t\t\t\tTelephone: [data.personalInformation.phone],\n\t\t\t\tLanguage: [data.emergencyInformation.householdMainLanguage],\n\t\t\t\t\"Emergency Contact Name and Telephone\": [\n\t\t\t\t\tdata.emergencyInformation.contactOneName +\n\t\t\t\t\t\t\", \" +\n\t\t\t\t\t\tdata.emergencyInformation.contactOnePhone,\n\t\t\t\t],\n\t\t\t});\n\t\t\tsetFilledForms((o) => [filled, o[1]]);\n\t\t})();\n\t\t(async () => {\n\t\t\tconst response = await axios.get(\n\t\t\t\t\"/forms/SBMUN-delegate-information-form.pdf\",\n\t\t\t\t{\n\t\t\t\t\tresponseType: \"arraybuffer\",\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\t\tAccept: \"application/pdf\",\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t);\n\t\t\tconst blob = new Blob([response.data]);\n\t\t\tconst pdf = (await blobToBuffer(blob)) as ArrayBuffer;\n\t\t\t// const keys = Object.keys(pdfform.list_fields(pdf));\n\t\t\tconsole.log(pdfform.list_fields(pdf));\n\t\t\tconst filled = pdfform.fillForm(pdf, {\n\t\t\t\tText1: [\"Monta Vista High School\"],\n\t\t\t\tText2: [user?.displayName],\n\t\t\t\tText3: [\"\"],\n\t\t\t\tText4: [\n\t\t\t\t\tdata.personalInformation.addressOne +\n\t\t\t\t\t\t(data.personalInformation.addressTwo\n\t\t\t\t\t\t\t? \", \" + data.personalInformation.addressTwo\n\t\t\t\t\t\t\t: \"\"),\n\t\t\t\t],\n\t\t\t\tText5: [\n\t\t\t\t\tdata.personalInformation.city +\n\t\t\t\t\t\t\", \" +\n\t\t\t\t\t\tdata.personalInformation.zip,\n\t\t\t\t],\n\t\t\t\tText6: [data.personalInformation.state],\n\t\t\t\tText7: [data.personalInformation.phone],\n\t\t\t\tText8: [user?.email],\n\t\t\t\tText9: [data.emergencyInformation.contactOneName],\n\t\t\t\tText10: [data.emergencyInformation.contactOnePhone],\n\t\t\t\tText11: [\"\"],\n\t\t\t\tText12: [data.emergencyInformation.contactTwoName],\n\t\t\t\tText13: [data.emergencyInformation.contactTwoPhone],\n\t\t\t\tText14: [\"\"],\n\t\t\t\tText15: [data.emergencyInformation.healthInsuranceCarrier],\n\t\t\t\tText16: [\"\"],\n\t\t\t\tText17: [\"\"],\n\t\t\t\tText18: [data.emergencyInformation.healthInsurancePolicyNumber],\n\t\t\t\tText19: [\"\"],\n\t\t\t\tText20: [\"\"],\n\t\t\t\tText21: [\"\"],\n\t\t\t\tText22: [\"\"],\n\t\t\t\tText23: [\"\"],\n\t\t\t\tText24: [\"\"],\n\t\t\t\tText25: [\"\"],\n\t\t\t\tText26: [\"\"],\n\t\t\t\tText27: [\"\"],\n\n\t\t\t\t\"Student's Name\": [user?.displayName],\n\t\t\t\tDestination: [\"Online Model UN Conference (SBMUN)\"],\n\t\t\t\t\"Date(s)\": [\"4/3/21\"],\n\t\t\t\t\"Depature Time\": [\"None (Virtual)\"],\n\t\t\t\t\"Return Time\": [\"None (Virtual)\"],\n\t\t\t\t\"Person in Charge\": [\"David Hartford\"],\n\t\t\t\t\"Home Address\": [\n\t\t\t\t\tdata.personalInformation.addressOne +\n\t\t\t\t\t\t(data.personalInformation.addressTwo\n\t\t\t\t\t\t\t? \", \" + data.personalInformation.addressTwo\n\t\t\t\t\t\t\t: \"\") +\n\t\t\t\t\t\t\", \" +\n\t\t\t\t\t\tdata.personalInformation.city +\n\t\t\t\t\t\t\", \" +\n\t\t\t\t\t\tdata.personalInformation.state +\n\t\t\t\t\t\t\", \" +\n\t\t\t\t\t\tdata.personalInformation.zip,\n\t\t\t\t],\n\t\t\t\t\"Insurance Address\": [\n\t\t\t\t\tdata.emergencyInformation.healthInsuranceAddressOne +\n\t\t\t\t\t\t(data.emergencyInformation.healthInsuranceAddressTwo\n\t\t\t\t\t\t\t? \", \" +\n\t\t\t\t\t\t\t  data.emergencyInformation\n\t\t\t\t\t\t\t\t\t.healthInsuranceAddressTwo\n\t\t\t\t\t\t\t: \"\"),\n\t\t\t\t],\n\t\t\t\t\"City/State\": [\n\t\t\t\t\tdata.emergencyInformation.healthInsuranceCity +\n\t\t\t\t\t\t\", \" +\n\t\t\t\t\t\tdata.emergencyInformation.healthInsuranceState,\n\t\t\t\t],\n\t\t\t\tZip: [data.emergencyInformation.healthInsuranceZip],\n\t\t\t\t\"Family Health Insurance Carrier\": [\n\t\t\t\t\tdata.emergencyInformation.healthInsuranceCarrier,\n\t\t\t\t],\n\t\t\t\t\"Policy Number\": [\n\t\t\t\t\tdata.emergencyInformation.healthInsurancePolicyNumber,\n\t\t\t\t],\n\t\t\t\tTelephone: [data.personalInformation.phone],\n\t\t\t\tLanguage: [data.emergencyInformation.householdMainLanguage],\n\t\t\t\t\"Emergency Contact Name and Telephone\": [\n\t\t\t\t\tdata.emergencyInformation.contactOneName +\n\t\t\t\t\t\t\", \" +\n\t\t\t\t\t\tdata.emergencyInformation.contactOnePhone,\n\t\t\t\t],\n\t\t\t});\n\t\t\tsetFilledForms((o) => [o[0], filled]);\n\t\t})();\n\t}, [user, data]);\n\tconst [uploadInstances, setUploadInstances] = useState<(FilePond | null)[]>(\n\t\t[]\n\t);\n\treturn (\n\t\t<div className=\"mt-8 shadow rounded-md sm:overflow-hidden\">\n\t\t\t<div className={\" px-4 bg-white sm:p-6 py-4\"}>\n\t\t\t\t<h3 className=\"text-xl leading-6 font-bold text-gray-900\">\n\t\t\t\t\tLiability Forms\n\t\t\t\t</h3>\n\t\t\t\t<p className=\"mt-1 max-w-2xl text-sm leading-5 text-gray-500\">\n\t\t\t\t\tYou'll need to print out, sign, scan, and upload the\n\t\t\t\t\tfollowing forms.\n\t\t\t\t</p>\n\t\t\t\t<div className={\"mt-4\"}>\n\t\t\t\t\t<h3 className=\"text-lg leading-6 font-medium text-gray-900\">\n\t\t\t\t\t\t1. FUHSD Field Trip Form\n\t\t\t\t\t</h3>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<span className=\"inline-flex rounded-md shadow-sm my-2 mr-2\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\topenOrDownload(\n\t\t\t\t\t\t\t\t\t\t\"sbmun-fuhsd-form.pdf\",\n\t\t\t\t\t\t\t\t\t\tfilledForms[0],\n\t\t\t\t\t\t\t\t\t\t\"/forms/FUHSD-field-trip-form.pdf\"\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\"py-1 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white shadow-sm \" +\n\t\t\t\t\t\t\t\t\t(filledForms[0] === null\n\t\t\t\t\t\t\t\t\t\t? \"bg-indigo-300\"\n\t\t\t\t\t\t\t\t\t\t: \"bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:ring-blue-500 active:bg-indigo-600 transition duration-150 ease-in-out\")\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tdisabled={filledForms[0] === null}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{filledForms[0] === null\n\t\t\t\t\t\t\t\t\t? \"Generating Form...\"\n\t\t\t\t\t\t\t\t\t: \"Download the form, \"}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\tprint it, sign it, scan it, then upload it below:\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<FormUpload\n\t\t\t\t\t\tonInstanceChange={(instance: FilePond | null) =>\n\t\t\t\t\t\t\tsetUploadInstances((o) => [instance, o[1]])\n\t\t\t\t\t\t}\n\t\t\t\t\t\tuser={user}\n\t\t\t\t\t\tfile={fuhsdForm}\n\t\t\t\t\t\tsetFile={setFuhsdForm}\n\t\t\t\t\t\tuploading={fuhsdUploading}\n\t\t\t\t\t\tsetUploading={setFuhsdUploading}\n\t\t\t\t\t\tfieldName={\"sbmunFuhsdForm\"}\n\t\t\t\t\t\tdata={data}\n\t\t\t\t\t\thandleUpdateData={handleUpdateData}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className={\"mt-4\"}>\n\t\t\t\t\t<h3 className=\"text-lg leading-6 font-medium text-gray-900\">\n\t\t\t\t\t\t2. SBMUN Delegate Information Form\n\t\t\t\t\t</h3>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<span className=\"inline-flex rounded-md shadow-sm my-2 mr-2\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\topenOrDownload(\n\t\t\t\t\t\t\t\t\t\t\"sbmun-info-form.pdf\",\n\t\t\t\t\t\t\t\t\t\tfilledForms[1],\n\t\t\t\t\t\t\t\t\t\t\"/forms/SBMUN-delegate-information-form.pdf\"\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\"py-1 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white shadow-sm \" +\n\t\t\t\t\t\t\t\t\t(filledForms[1] === null\n\t\t\t\t\t\t\t\t\t\t? \"bg-indigo-300\"\n\t\t\t\t\t\t\t\t\t\t: \"bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:ring-blue-500 active:bg-indigo-600 transition duration-150 ease-in-out\")\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tdisabled={filledForms[1] === null}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{filledForms[1] === null\n\t\t\t\t\t\t\t\t\t? \"Generating Form...\"\n\t\t\t\t\t\t\t\t\t: \"Download the form, \"}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\tprint it, sign it, scan it, then upload it below:\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<FormUpload\n\t\t\t\t\t\tonInstanceChange={(instance: FilePond | null) =>\n\t\t\t\t\t\t\tsetUploadInstances((o) => [o[0], instance])\n\t\t\t\t\t\t}\n\t\t\t\t\t\tuser={user}\n\t\t\t\t\t\tfile={sbmunForm}\n\t\t\t\t\t\tsetFile={setSbmunForm}\n\t\t\t\t\t\tuploading={sbmunFormUploading}\n\t\t\t\t\t\tsetUploading={setSbmunFormUploading}\n\t\t\t\t\t\tfieldName={\"sbmunForm\"}\n\t\t\t\t\t\tdata={data}\n\t\t\t\t\t\thandleUpdateData={handleUpdateData}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"px-4 py-3 bg-gray-50 text-right sm:px-6 flex justify-between\">\n\t\t\t\t<span className=\"inline-flex rounded-md shadow-sm\">\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tsetStep(1);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tdisabled={fuhsdUploading}\n\t\t\t\t\t\tclassName={cx(\n\t\t\t\t\t\t\t\"py-2 px-4 border border-gray-300 rounded-md text-sm leading-5 font-medium text-gray-700\",\n\t\t\t\t\t\t\tfuhsdUploading\n\t\t\t\t\t\t\t\t? \"bg-gray-300\"\n\t\t\t\t\t\t\t\t: \"bg-white hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:ring-blue-500 active:bg-gray-50 active:text-gray-800 transition duration-150 ease-in-out\"\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\tBack\n\t\t\t\t\t</button>\n\t\t\t\t</span>\n\t\t\t\t<button\n\t\t\t\t\ttype={\"button\"}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t!data?.forms?.sbmunFuhsdForm ||\n\t\t\t\t\t\t\t!data?.forms?.sbmunForm\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tuploadInstances.forEach((instance) => {\n\t\t\t\t\t\t\t\t// process first (and only) file\n\t\t\t\t\t\t\t\tif (!instance) return;\n\t\t\t\t\t\t\t\tsetFuhsdUploading(true);\n\t\t\t\t\t\t\t\tinstance.processFile();\n\t\t\t\t\t\t\t\tconsole.log(uploadInstances);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsetStep(3);\n\t\t\t\t\t\tsetMaxStep((o) => Math.max(o, 3));\n\t\t\t\t\t}}\n\t\t\t\t\tdisabled={\n\t\t\t\t\t\tfuhsdUploading ||\n\t\t\t\t\t\t!fuhsdForm ||\n\t\t\t\t\t\tfuhsdForm.length === 0 ||\n\t\t\t\t\t\tsbmunFormUploading ||\n\t\t\t\t\t\t!sbmunForm ||\n\t\t\t\t\t\tsbmunForm.length === 0\n\t\t\t\t\t}\n\t\t\t\t\tclassName={cx(\n\t\t\t\t\t\t\"ml-4 py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white shadow-sm\",\n\t\t\t\t\t\tfuhsdUploading ||\n\t\t\t\t\t\t\t!fuhsdForm ||\n\t\t\t\t\t\t\tfuhsdForm.length === 0 ||\n\t\t\t\t\t\t\tsbmunFormUploading ||\n\t\t\t\t\t\t\t!sbmunForm ||\n\t\t\t\t\t\t\tsbmunForm.length === 0\n\t\t\t\t\t\t\t? \"bg-indigo-300\"\n\t\t\t\t\t\t\t: \"bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:ring-blue-500 active:bg-indigo-600 transition duration-150 ease-in-out\"\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t{fuhsdUploading\n\t\t\t\t\t\t? \"Uploading...\"\n\t\t\t\t\t\t: !fuhsdForm || fuhsdForm.length === 0\n\t\t\t\t\t\t? \"Upload All Files to Continue\"\n\t\t\t\t\t\t: !data?.forms?.sbmunFuhsdForm ||\n\t\t\t\t\t\t  !data?.forms?.sbmunForm\n\t\t\t\t\t\t? \"Upload Files\"\n\t\t\t\t\t\t: \"Continue\"}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","/Users/jmeng/Documents/code/montavistamun/src/components/registration/sections/ConfirmationSection.tsx",["661","662","663","664","665","666","667","668","669","670"],"// Import React FilePond\nimport cx from \"classnames\";\nimport { User } from \"firebase\";\nimport React, { useState } from \"react\";\nimport \"../../../css/file-upload.css\";\nimport useFirebase from \"../../../firebase/useFirebase\";\n\nexport default function ConfirmationSection({\n\tdata,\n\tsetStepHasChanges,\n\thandleUpdateData,\n\tsetStep,\n\tsetMaxStep,\n\tuser,\n}: {\n\tuser: User;\n\n\tdata: Record<string, any>;\n\thandleUpdateData: (\n\t\tname: string,\n\t\tdata: Record<string, any>\n\t) => Promise<void>;\n\tsetStepHasChanges: (hasChanges: boolean) => void;\n\tsetStep: (step: number) => void;\n\tsetMaxStep: (maxStep: number | ((old: number) => number)) => void;\n}) {\n\tconst firebase = useFirebase();\n\n\tconst [submitting, setSubmitting] = useState(false);\n\treturn (\n\t\t<div className=\"mt-8 shadow rounded-md sm:overflow-hidden\">\n\t\t\t<div className={\"px-4 bg-white sm:p-6 py-4\"}>\n\t\t\t\t<h3 className=\"text-xl leading-6 font-bold text-gray-900\">\n\t\t\t\t\tYou're done!\n\t\t\t\t</h3>\n\t\t\t\t<p className=\"mt-2\">\n\t\t\t\t\t{user?.displayName ? user?.displayName + \", y\" : \"Y\"}ou are\n\t\t\t\t\tnow registered for SCVMUN!\n\t\t\t\t</p>\n\t\t\t\t<p className=\"mt-2\">\n\t\t\t\t\tIf you'd like to help us improve the conference registration\n\t\t\t\t\texperience, please fill out{\" \"}\n\t\t\t\t\t<a\n\t\t\t\t\t\thref=\"https://forms.gle/RFhr4TUbaWpSPDNX7\"\n\t\t\t\t\t\tclassName=\"link\"\n\t\t\t\t\t\ttarget={\"_blank\"}\n\t\t\t\t\t\trel={\"noopener noreferrer\"}\n\t\t\t\t\t>\n\t\t\t\t\t\tthis short survey\n\t\t\t\t\t</a>\n\t\t\t\t\t.\n\t\t\t\t</p>\n\t\t\t\t<p className=\"mt-4\">\n\t\t\t\t\tYou can edit or cancel your registration until the deadline.\n\t\t\t\t\tTo edit your registration, simply go back to any step using\n\t\t\t\t\tthe back button or by clicking a step on the steps list. To\n\t\t\t\t\tcancel your registration,{\" \"}\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={\"mailto:conferenceregistration@montavistamun.com\"}\n\t\t\t\t\t\tclassName={\"link\"}\n\t\t\t\t\t>\n\t\t\t\t\t\temail us\n\t\t\t\t\t</a>\n\t\t\t\t\t. Note: unfortunately, we are unable to process refunds for\n\t\t\t\t\tdonations if you cancel.\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t<div className=\"px-4 py-3 bg-gray-50 text-right sm:px-6 flex justify-between\">\n\t\t\t\t<span className=\"inline-flex rounded-md shadow-sm\">\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tonClick={() => setStep(4)}\n\t\t\t\t\t\tclassName={cx(\n\t\t\t\t\t\t\t\"py-2 px-4 border border-gray-300 rounded-md text-sm leading-5 font-medium text-gray-700 bg-white hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:ring-blue-500 active:bg-gray-50 active:text-gray-800 transition duration-150 ease-in-out\"\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\tBack\n\t\t\t\t\t</button>\n\t\t\t\t</span>\n\t\t\t\t<div />\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","/Users/jmeng/Documents/code/montavistamun/src/components/registration/sections/DonationsSection.tsx",["671","672","673","674","675"],"// Import React FilePond\nimport callbackBlobToBuffer from \"blob-to-buffer\";\nimport cx from \"classnames\";\nimport { FilePond } from \"filepond\";\nimport { User } from \"firebase\";\nimport React, { useState } from \"react\";\nimport \"../../../css/file-upload.css\";\nimport useFirebase from \"../../../firebase/useFirebase\";\nimport FormUpload from \"../FormUpload\";\n\ninterface DonationForms {\n\tscvmunDonation?: string;\n\tscvmunDonationOptOut?: boolean;\n}\ninterface ConfirmationData {\n\tscvmunConfirmed: true;\n}\n// make promise based\nconst blobToBuffer = (blob: Blob) =>\n\tnew Promise((res, rej) =>\n\t\tcallbackBlobToBuffer(blob, (err, buffer) => {\n\t\t\tif (err) rej();\n\t\t\telse res(buffer);\n\t\t})\n\t);\n\nexport default function DonationsSection({\n\tdata,\n\tsetStepHasChanges,\n\thandleUpdateData,\n\tsetStep,\n\tsetMaxStep,\n\tuser,\n}: {\n\tuser: User;\n\tdata: Record<string, any>;\n\thandleUpdateData: (\n\t\tname: string,\n\t\tdata: DonationForms | ConfirmationData\n\t) => Promise<void>;\n\tsetStepHasChanges: (hasChanges: boolean) => void;\n\tsetStep: (step: number) => void;\n\tsetMaxStep: (maxStep: number | ((old: number) => number)) => void;\n}) {\n\tconst firebase = useFirebase();\n\n\tconst [receipt, setReceipt] = useState<\n\t\t(File & { serverId: string | null })[] | null\n\t>(null);\n\tconst [uploading, setUploading] = useState(false);\n\n\tReact.useEffect(() => {\n\t\tsetStepHasChanges(\n\t\t\tuploading ||\n\t\t\t\t!!(receipt && receipt[0] && receipt[0].serverId === null)\n\t\t);\n\t}, [uploading, receipt && receipt[0], receipt && receipt[0]?.serverId]);\n\tconst [submitting, setSubmitting] = useState(false);\n\tconst [skipping, setSkipping] = useState(false);\n\tconst [uploadInstance, setUploadInstance] = useState<FilePond | null>(null);\n\treturn (\n\t\t<div className=\"mt-8 shadow rounded-md sm:overflow-hidden\">\n\t\t\t<div className={\"px-4 bg-white sm:p-6 py-4\"}>\n\t\t\t\t<h3 className=\"text-xl leading-6 font-bold text-gray-900\">\n\t\t\t\t\tHang in there — you’re almost done!\n\t\t\t\t</h3>\n\t\t\t\t<p className=\"mt-2\">\n\t\t\t\t\tBefore you submit, we just have one last step. To cover the\n\t\t\t\t\tfees charged by SCVMUN, we are requesting that you include a\n\t\t\t\t\tdonation of <b>$25</b> with your registration. Your\n\t\t\t\t\tdonations will go directly towards covering conference fees\n\t\t\t\t\tand making this conference possible.\n\t\t\t\t</p>\n\t\t\t\t{data.forms?.scvmunDonationOptOut && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<p className=\"mt-2\">\n\t\t\t\t\t\t\tYou've indicated that you are financially unable to\n\t\t\t\t\t\t\tdonate, or do not wish to do so, and that{\" \"}\n\t\t\t\t\t\t\t<b>\n\t\t\t\t\t\t\t\tyou've talked to Mr Hartford about your\n\t\t\t\t\t\t\t\tsituation\n\t\t\t\t\t\t\t</b>\n\t\t\t\t\t\t\t. You may now move on to the next step by clicking\n\t\t\t\t\t\t\tthe continue button below.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName={cx(\n\t\t\t\t\t\t\t\t\"mt-4 py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white shadow-sm\",\n\t\t\t\t\t\t\t\tsubmitting\n\t\t\t\t\t\t\t\t\t? \"bg-indigo-300\"\n\t\t\t\t\t\t\t\t\t: \"bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:ring-blue-500 active:bg-indigo-600 transition duration-150 ease-in-out\"\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\tdisabled={skipping}\n\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\tsetSkipping(true);\n\t\t\t\t\t\t\t\thandleUpdateData(\"forms\", {\n\t\t\t\t\t\t\t\t\tscvmunDonationOptOut: false,\n\t\t\t\t\t\t\t\t}).then(() => setSkipping(false));\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{skipping ? \"Cancelling...\" : \"Cancel\"}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t\t{!data.forms?.scvmunDonationOptOut && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<p className=\"mt-2\">\n\t\t\t\t\t\t\tIf you are financially unable to donate, or do not\n\t\t\t\t\t\t\twish to do so,{\" \"}\n\t\t\t\t\t\t\t<b>\n\t\t\t\t\t\t\t\tplease contact Mr. Hartford about your situation\n\t\t\t\t\t\t\t\t(join his office hours{\" \"}\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\thref=\"https://fuhsd-org.zoom.us/j/95410126748?pwd=THQxTmhtYWRWSmlEOUIrTjhuY3Z4dz09\"\n\t\t\t\t\t\t\t\t\tclassName=\"link\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\there\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t</b>\n\t\t\t\t\t\t\t, then{\" \"}\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\tclassName={\"link\"}\n\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\tif (skipping) return;\n\t\t\t\t\t\t\t\t\tsetSkipping(true);\n\t\t\t\t\t\t\t\t\thandleUpdateData(\"forms\", {\n\t\t\t\t\t\t\t\t\t\tscvmunDonationOptOut: true,\n\t\t\t\t\t\t\t\t\t}).then(() => setSkipping(false));\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{skipping\n\t\t\t\t\t\t\t\t\t? \"skipping donating...\"\n\t\t\t\t\t\t\t\t\t: \"click here to skip donating\"}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t.\n\t\t\t\t\t\t</p>\n\n\t\t\t\t\t\t<h3 className=\"text-lg leading-6 font-medium text-gray-900 mt-6 mb-2\">\n\t\t\t\t\t\t\tHow to Donate\n\t\t\t\t\t\t</h3>\n\n\t\t\t\t\t\t<ul className=\"list-decimal ml-8\">\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\tHead to Monta Vista’s online Student Store and\n\t\t\t\t\t\t\t\tfind our scvmun conference donation{\" \"}\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\ttarget={\"_blank\"}\n\t\t\t\t\t\t\t\t\trel={\"noopener noreferrer\"}\n\t\t\t\t\t\t\t\t\thref={\n\t\t\t\t\t\t\t\t\t\t\"https://montavistahs.3dcartstores.com/Santa-Clara-Valley-Model-UN-Conference-Virtual-Conference_p_123.html\"\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tclassName={\"link\"}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\there\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t.\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li>Fill out the fields listed and pay.</li>\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\tMake sure you save a copy of your receipt\n\t\t\t\t\t\t\t\t(screenshot or print &gt; save as PDF the\n\t\t\t\t\t\t\t\tconfirmation page).\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li>Upload your receipt below.</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<p className={\"mt-4\"}>\n\t\t\t\t\t\t\tUnfortunately, we are unable to process refunds with\n\t\t\t\t\t\t\tthe online system. Please confirm you can attend the\n\t\t\t\t\t\t\tconference (<b>January 29-30, 2021</b>) before\n\t\t\t\t\t\t\tdonating!\n\t\t\t\t\t\t</p>\n\n\t\t\t\t\t\t<div className={\"mt-4\"}>\n\t\t\t\t\t\t\t<FormUpload\n\t\t\t\t\t\t\t\tonInstanceChange={(instance) =>\n\t\t\t\t\t\t\t\t\tsetUploadInstance(instance)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tuser={user}\n\t\t\t\t\t\t\t\tfile={receipt}\n\t\t\t\t\t\t\t\tsetFile={setReceipt}\n\t\t\t\t\t\t\t\tuploading={uploading}\n\t\t\t\t\t\t\t\tsetUploading={setUploading}\n\t\t\t\t\t\t\t\tfieldName={\"scvmunDonation\"}\n\t\t\t\t\t\t\t\tdata={data}\n\t\t\t\t\t\t\t\tallowImagePreview\n\t\t\t\t\t\t\t\tacceptedFileTypes={[\n\t\t\t\t\t\t\t\t\t\"application/pdf\",\n\t\t\t\t\t\t\t\t\t\"image/*\",\n\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\tlabelFileTypeNotAllowed={\n\t\t\t\t\t\t\t\t\t\"That's not an image or PDF!\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tfileValidateTypeLabelExpectedTypes={\n\t\t\t\t\t\t\t\t\t\"You may only upload images or pdfs\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tlabelIdle={\n\t\t\t\t\t\t\t\t\t\"Drag a image / pdf here or click to browse\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\thandleUpdateData={handleUpdateData}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t<div className=\"px-4 py-3 bg-gray-50 text-right sm:px-6 flex justify-between\">\n\t\t\t\t<span className=\"inline-flex rounded-md shadow-sm\">\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tonClick={() => setStep(3)}\n\t\t\t\t\t\tdisabled={uploading || skipping}\n\t\t\t\t\t\tclassName={cx(\n\t\t\t\t\t\t\t\"py-2 px-4 border border-gray-300 rounded-md text-sm leading-5 font-medium text-gray-700\",\n\t\t\t\t\t\t\tuploading || skipping\n\t\t\t\t\t\t\t\t? \"bg-gray-300\"\n\t\t\t\t\t\t\t\t: \"bg-white hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:ring-blue-500 active:bg-gray-50 active:text-gray-800 transition duration-150 ease-in-out\"\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\tBack\n\t\t\t\t\t</button>\n\t\t\t\t</span>\n\t\t\t\t<button\n\t\t\t\t\ttype={\"button\"}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t!data?.forms?.scvmunDonation &&\n\t\t\t\t\t\t\t!data?.forms?.scvmunDonationOptOut\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tif (!uploadInstance) return;\n\t\t\t\t\t\t\tsetUploading(true);\n\t\t\t\t\t\t\tuploadInstance.processFile();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (data.confirm?.scvmunConfirmed) {\n\t\t\t\t\t\t\tsetStep(5);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsetSubmitting(true);\n\t\t\t\t\t\thandleUpdateData(\"confirm\", {\n\t\t\t\t\t\t\tscvmunConfirmed: true,\n\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\tif (!firebase) return;\n\t\t\t\t\t\t\t\treturn firebase\n\t\t\t\t\t\t\t\t\t.firestore()\n\t\t\t\t\t\t\t\t\t.collection(\"users\")\n\t\t\t\t\t\t\t\t\t.doc(user?.uid)\n\t\t\t\t\t\t\t\t\t.update({\n\t\t\t\t\t\t\t\t\t\tscvmunRegistered: true,\n\t\t\t\t\t\t\t\t\t\tscvmunRegistrationTimestamp: firebase.firestore.FieldValue.serverTimestamp(),\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\tsetSubmitting(false);\n\t\t\t\t\t\t\t\tsetStep(5);\n\t\t\t\t\t\t\t\tsetMaxStep((o) => Math.max(6)); // maxStep is one higher to check it\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}}\n\t\t\t\t\tdisabled={\n\t\t\t\t\t\tuploading ||\n\t\t\t\t\t\tsubmitting ||\n\t\t\t\t\t\tskipping ||\n\t\t\t\t\t\t((!receipt || receipt.length == 0) &&\n\t\t\t\t\t\t\t!data?.forms?.scvmunDonationOptOut)\n\t\t\t\t\t}\n\t\t\t\t\tclassName={cx(\n\t\t\t\t\t\t\"ml-4 py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white shadow-sm\",\n\t\t\t\t\t\tuploading ||\n\t\t\t\t\t\t\tsubmitting ||\n\t\t\t\t\t\t\tskipping ||\n\t\t\t\t\t\t\t((!receipt || receipt.length == 0) &&\n\t\t\t\t\t\t\t\t!data?.forms?.scvmunDonationOptOut)\n\t\t\t\t\t\t\t? \"bg-indigo-300\"\n\t\t\t\t\t\t\t: \"bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:ring-blue-500 active:bg-indigo-600 transition duration-150 ease-in-out\"\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t{uploading\n\t\t\t\t\t\t? \"Uploading...\"\n\t\t\t\t\t\t: (!receipt || receipt.length == 0) &&\n\t\t\t\t\t\t  !data?.forms?.scvmunDonationOptOut\n\t\t\t\t\t\t? \"Upload all forms to finish registration\"\n\t\t\t\t\t\t: !data?.forms?.scvmunDonation &&\n\t\t\t\t\t\t  !data?.forms?.scvmunDonationOptOut\n\t\t\t\t\t\t? \"Upload\"\n\t\t\t\t\t\t: !data.confirm?.scvmunConfirmed\n\t\t\t\t\t\t? \"Finish Registration\"\n\t\t\t\t\t\t: \"Continue\"}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","/Users/jmeng/Documents/code/montavistamun/src/components/registration/sections/EmergencyInformationSection.tsx",["676"],"import { User } from \"firebase\";\nimport { Field } from \"formik\";\nimport React from \"react\";\nimport Select from \"react-select\";\nimport * as Yup from \"yup\";\nimport InputGroup from \"../../shared/InputGroup\";\nimport RegisterFormSection from \"../RegisterFormSection\";\nimport stateOptions from \"../stateOptions\";\n\ninterface EmergencyInformation {\n\tcontactOneName: string;\n\tcontactOnePhone: string;\n\tcontactOneRelationship: string;\n\tcontactTwoName: string;\n\tcontactTwoPhone: string;\n\tcontactTwoRelationship: string;\n\n\thouseholdMainLanguage: string;\n\n\thealthInsuranceCarrier: string;\n\thealthInsurancePolicyNumber: string;\n\thealthInsuranceAddressOne: string;\n\thealthInsuranceAddressTwo: string;\n\thealthInsuranceCity: string;\n\thealthInsuranceState: string;\n\thealthInsuranceZip: string;\n}\n\nconst formatPhoneNumber = (phoneNumber: string) => {\n\tlet stripped = phoneNumber.replace(/\\D/g, \"\");\n\tif (stripped.length === 11) {\n\t\tstripped = stripped.substring(1);\n\t}\n\treturn `(${stripped.substring(0, 3)}) ${stripped.substring(\n\t\t3,\n\t\t6\n\t)}-${stripped.substring(6, 10)}`;\n};\nexport default function EmergencyInformationSection({\n\tdata,\n\tsetStepHasChanges,\n\thandleUpdateData,\n\tsetStep,\n\tsetMaxStep,\n\tuser,\n}: {\n\tuser: User;\n\tdata?: EmergencyInformation;\n\thandleUpdateData: (\n\t\tname: string,\n\t\tdata: EmergencyInformation\n\t) => Promise<void>;\n\tsetStepHasChanges: (hasChanges: boolean) => void;\n\tsetStep: (step: number) => void;\n\tsetMaxStep: (fn: (oldMaxStep: number) => number) => void;\n}) {\n\treturn (\n\t\t<RegisterFormSection<EmergencyInformation>\n\t\t\tuser={user}\n\t\t\tdata={data}\n\t\t\tshowBack\n\t\t\tonBack={() => setStep(0)}\n\t\t\tonSubmit={(data: EmergencyInformation) =>\n\t\t\t\thandleUpdateData(\"emergencyInformation\", {\n\t\t\t\t\t...data,\n\t\t\t\t\tcontactOnePhone: formatPhoneNumber(data.contactOnePhone),\n\t\t\t\t\tcontactTwoPhone:\n\t\t\t\t\t\tdata.contactTwoPhone &&\n\t\t\t\t\t\tformatPhoneNumber(data.contactTwoPhone),\n\t\t\t\t\thealthInsuranceZip:\n\t\t\t\t\t\tdata.healthInsuranceZip.length === 9\n\t\t\t\t\t\t\t? `${data.healthInsuranceZip.substring(\n\t\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\t\t5\n\t\t\t\t\t\t\t  )}-${data.healthInsuranceZip.substring(5, 9)}`\n\t\t\t\t\t\t\t: data.healthInsuranceZip,\n\t\t\t\t})\n\t\t\t}\n\t\t\tonHasChangesChange={(hasChanges: boolean) =>\n\t\t\t\tsetStepHasChanges(hasChanges)\n\t\t\t}\n\t\t\tonContinue={() => {\n\t\t\t\tsetStep(2);\n\t\t\t\tsetMaxStep((old: number) => Math.max(old, 2));\n\t\t\t}}\n\t\t\tschema={Yup.object().shape({\n\t\t\t\tcontactOneName: Yup.string()\n\t\t\t\t\t.min(2, \"Please enter an emergency contact name\")\n\t\t\t\t\t.required(\"Please enter an emergency contact name\"),\n\t\t\t\tcontactOneRelationship: Yup.string()\n\t\t\t\t\t.min(\n\t\t\t\t\t\t2,\n\t\t\t\t\t\t\"Please enter the emergency contact's relationship to the participant\"\n\t\t\t\t\t)\n\t\t\t\t\t.required(\n\t\t\t\t\t\t\"Please enter the emergency contact's relationship to the participant\"\n\t\t\t\t\t),\n\t\t\t\tcontactOnePhone: Yup.string()\n\t\t\t\t\t.test(\n\t\t\t\t\t\t\"is a phone number\",\n\t\t\t\t\t\t\"This phone number doesn't look valid! Try using the format (xxx) xxx-xxxx.\",\n\t\t\t\t\t\t(v) =>\n\t\t\t\t\t\t\t!!v && /^1?\\d{10}$/.test(v.replace(/[^\\d\\w]/g, \"\"))\n\t\t\t\t\t)\n\t\t\t\t\t.required(\n\t\t\t\t\t\t\"Please enter the emergency contact's phone number.\"\n\t\t\t\t\t),\n\t\t\t\tcontactTwoName: Yup.string().min(\n\t\t\t\t\t2,\n\t\t\t\t\t\"Please enter an emergency contact name\"\n\t\t\t\t),\n\t\t\t\t// .required(\"Please enter an emergency contact name\"),\n\t\t\t\tcontactTwoRelationship: Yup.string().min(\n\t\t\t\t\t2,\n\t\t\t\t\t\"Please enter the emergency contact's relationship to the participant\"\n\t\t\t\t),\n\t\t\t\t// .required(\n\t\t\t\t// \t\"Please enter the emergency contact's relationship to the participant\"\n\t\t\t\t// ),\n\t\t\t\tcontactTwoPhone: Yup.string().test(\n\t\t\t\t\t\"is a phone number\",\n\t\t\t\t\t\"This phone number doesn't look valid! Try using the format (xxx) xxx-xxxx.\",\n\t\t\t\t\t(v) => !v || /^1?\\d{10}$/.test(v.replace(/[^\\d\\w]/g, \"\"))\n\t\t\t\t),\n\t\t\t\thouseholdMainLanguage: Yup.string()\n\t\t\t\t\t.min(\n\t\t\t\t\t\t2,\n\t\t\t\t\t\t\"Please enter the main language spoken at your household.\"\n\t\t\t\t\t)\n\t\t\t\t\t.required(\n\t\t\t\t\t\t\"Please enter the main language spoken at your household.\"\n\t\t\t\t\t),\n\t\t\t\thealthInsuranceCarrier: Yup.string()\n\t\t\t\t\t.min(\n\t\t\t\t\t\t2,\n\t\t\t\t\t\t\"Please enter your family health insurance carrier.\"\n\t\t\t\t\t)\n\t\t\t\t\t.required(\n\t\t\t\t\t\t\"Please enter your family health insurance carrier.\"\n\t\t\t\t\t),\n\t\t\t\thealthInsurancePolicyNumber: Yup.string()\n\t\t\t\t\t.min(\n\t\t\t\t\t\t2,\n\t\t\t\t\t\t\"Please enter your family health insurance policy number or member ID.\"\n\t\t\t\t\t)\n\t\t\t\t\t.required(\n\t\t\t\t\t\t\"Please enter your family health insurance policy number or member ID.\"\n\t\t\t\t\t),\n\t\t\t\thealthInsuranceAddressOne: Yup.string()\n\t\t\t\t\t.min(5, \"That doesn't look like a real address\")\n\t\t\t\t\t.max(128, \"The address is too long\")\n\t\t\t\t\t.required(\"Please enter a valid address or PO box\"),\n\t\t\t\thealthInsuranceCity: Yup.string()\n\t\t\t\t\t.min(3, \"That doesn't look like a real city\")\n\t\t\t\t\t.max(128, \"The city is too long\")\n\t\t\t\t\t.required(\"Please enter a city\"),\n\t\t\t\thealthInsuranceState: Yup.string().required(\n\t\t\t\t\t\"Please enter a state\"\n\t\t\t\t),\n\t\t\t\thealthInsuranceZip: Yup.string()\n\t\t\t\t\t.matches(\n\t\t\t\t\t\t/(^\\d{5}$)|(^\\d{9}$)|(^\\d{5}-\\d{4}$)/,\n\t\t\t\t\t\t\"Please enter a valid 5 or 9 digit zip code\"\n\t\t\t\t\t)\n\t\t\t\t\t.required(\"Please enter a valid 5 or 9 digit zip code\"),\n\t\t\t})}\n\t\t\tloadingValues={{\n\t\t\t\tcontactOneName: \"Loading...\",\n\t\t\t\tcontactOnePhone: \"Loading...\",\n\t\t\t\tcontactOneRelationship: \"Loading...\",\n\t\t\t\tcontactTwoName: \"Loading...\",\n\t\t\t\tcontactTwoPhone: \"Loading...\",\n\t\t\t\tcontactTwoRelationship: \"Loading...\",\n\n\t\t\t\thouseholdMainLanguage: \"Loading...\",\n\n\t\t\t\thealthInsuranceCarrier: \"Loading...\",\n\t\t\t\thealthInsurancePolicyNumber: \"Loading...\",\n\t\t\t\thealthInsuranceAddressOne: \"Loading...\",\n\t\t\t\thealthInsuranceAddressTwo: \"Loading...\",\n\t\t\t\thealthInsuranceCity: \"Loading...\",\n\t\t\t\thealthInsuranceState: \"Loading...\",\n\t\t\t\thealthInsuranceZip: \"Loading...\",\n\t\t\t}}\n\t\t\ttitle={\"Emergency Information\"}\n\t\t>\n\t\t\t{({\n\t\t\t\terrors,\n\t\t\t\tcanEdit,\n\t\t\t\ttouched,\n\t\t\t\tvalues,\n\t\t\t\tsetFieldValue,\n\t\t\t\tsetFieldTouched,\n\t\t\t}) => (\n\t\t\t\t<>\n\t\t\t\t\t<div className=\"col-span-6 mt-4\">\n\t\t\t\t\t\t<h3 className=\"text-lg leading-6 font-medium text-gray-900\">\n\t\t\t\t\t\t\tFirst Emergency Contact\n\t\t\t\t\t\t</h3>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Field\n\t\t\t\t\t\tas={InputGroup}\n\t\t\t\t\t\tclassName=\"col-span-6 sm:col-span-4\"\n\t\t\t\t\t\tlabel={\"Full Name\"}\n\t\t\t\t\t\tname={\"contactOneName\"}\n\t\t\t\t\t\tdisabled={!canEdit}\n\t\t\t\t\t\tinvalid={\n\t\t\t\t\t\t\terrors.contactOneName && !!touched.contactOneName\n\t\t\t\t\t\t}\n\t\t\t\t\t\terror={errors.contactOneName}\n\t\t\t\t\t/>\n\t\t\t\t\t<Field\n\t\t\t\t\t\tas={InputGroup}\n\t\t\t\t\t\tclassName=\"col-span-6 sm:col-span-2\"\n\t\t\t\t\t\tlabel={\"Relationship to Participant\"}\n\t\t\t\t\t\tname={\"contactOneRelationship\"}\n\t\t\t\t\t\tplaceholder={\"e.g. Mother, Father, Neighbor\"}\n\t\t\t\t\t\tdisabled={!canEdit}\n\t\t\t\t\t\tinvalid={\n\t\t\t\t\t\t\terrors.contactOneRelationship &&\n\t\t\t\t\t\t\t!!touched.contactOneRelationship\n\t\t\t\t\t\t}\n\t\t\t\t\t\terror={errors.contactOneRelationship}\n\t\t\t\t\t/>\n\t\t\t\t\t<Field\n\t\t\t\t\t\tas={InputGroup}\n\t\t\t\t\t\tclassName=\"col-span-6\"\n\t\t\t\t\t\tlabel={\"Telephone Number\"}\n\t\t\t\t\t\thint={\"Any 10 or 11 digit format\"}\n\t\t\t\t\t\tname={\"contactOnePhone\"}\n\t\t\t\t\t\tdisabled={!canEdit}\n\t\t\t\t\t\tinvalid={\n\t\t\t\t\t\t\terrors.contactOnePhone && !!touched.contactOnePhone\n\t\t\t\t\t\t}\n\t\t\t\t\t\terror={errors.contactOnePhone}\n\t\t\t\t\t/>\n\t\t\t\t\t<Field\n\t\t\t\t\t\tas={InputGroup}\n\t\t\t\t\t\tclassName=\"col-span-6\"\n\t\t\t\t\t\tlabel={\"Main Language Spoken In Household\"}\n\t\t\t\t\t\tname={\"householdMainLanguage\"}\n\t\t\t\t\t\tdisabled={!canEdit}\n\t\t\t\t\t\tinvalid={\n\t\t\t\t\t\t\terrors.householdMainLanguage &&\n\t\t\t\t\t\t\t!!touched.householdMainLanguage\n\t\t\t\t\t\t}\n\t\t\t\t\t\terror={errors.householdMainLanguage}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"col-span-6 mt-4\">\n\t\t\t\t\t\t<h3 className=\"text-lg leading-6 font-medium text-gray-900\">\n\t\t\t\t\t\t\tSecond Emergency Contact (Optional)\n\t\t\t\t\t\t</h3>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Field\n\t\t\t\t\t\tas={InputGroup}\n\t\t\t\t\t\tclassName=\"col-span-6 sm:col-span-4\"\n\t\t\t\t\t\tlabel={\"Full Name\"}\n\t\t\t\t\t\tname={\"contactTwoName\"}\n\t\t\t\t\t\tdisabled={!canEdit}\n\t\t\t\t\t\tinvalid={\n\t\t\t\t\t\t\terrors.contactTwoName && !!touched.contactTwoName\n\t\t\t\t\t\t}\n\t\t\t\t\t\terror={errors.contactTwoName}\n\t\t\t\t\t/>\n\t\t\t\t\t<Field\n\t\t\t\t\t\tas={InputGroup}\n\t\t\t\t\t\tclassName=\"col-span-6 sm:col-span-2\"\n\t\t\t\t\t\tlabel={\"Relationship to Participant\"}\n\t\t\t\t\t\tname={\"contactTwoRelationship\"}\n\t\t\t\t\t\tplaceholder={\"e.g. Mother, Father, Neighbor\"}\n\t\t\t\t\t\tdisabled={!canEdit}\n\t\t\t\t\t\tinvalid={\n\t\t\t\t\t\t\terrors.contactTwoRelationship &&\n\t\t\t\t\t\t\t!!touched.contactTwoRelationship\n\t\t\t\t\t\t}\n\t\t\t\t\t\terror={errors.contactTwoRelationship}\n\t\t\t\t\t/>\n\t\t\t\t\t<Field\n\t\t\t\t\t\tas={InputGroup}\n\t\t\t\t\t\tclassName=\"col-span-6\"\n\t\t\t\t\t\tlabel={\"Telephone Number\"}\n\t\t\t\t\t\thint={\"Any 10 or 11 digit format\"}\n\t\t\t\t\t\tname={\"contactTwoPhone\"}\n\t\t\t\t\t\tdisabled={!canEdit}\n\t\t\t\t\t\tinvalid={\n\t\t\t\t\t\t\terrors.contactTwoPhone && !!touched.contactTwoPhone\n\t\t\t\t\t\t}\n\t\t\t\t\t\terror={errors.contactTwoPhone}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"col-span-6 mt-4\">\n\t\t\t\t\t\t<h3 className=\"text-lg leading-6 font-medium text-gray-900\">\n\t\t\t\t\t\t\tFamily Health Insurance Information\n\t\t\t\t\t\t</h3>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Field\n\t\t\t\t\t\tas={InputGroup}\n\t\t\t\t\t\tclassName=\"col-span-6\"\n\t\t\t\t\t\tlabel={\"Carrier Name\"}\n\t\t\t\t\t\tname={\"healthInsuranceCarrier\"}\n\t\t\t\t\t\tdisabled={!canEdit}\n\t\t\t\t\t\tinvalid={\n\t\t\t\t\t\t\terrors.healthInsuranceCarrier &&\n\t\t\t\t\t\t\t!!touched.healthInsuranceCarrier\n\t\t\t\t\t\t}\n\t\t\t\t\t\terror={errors.healthInsuranceCarrier}\n\t\t\t\t\t/>\n\t\t\t\t\t<Field\n\t\t\t\t\t\tas={InputGroup}\n\t\t\t\t\t\tclassName=\"col-span-6\"\n\t\t\t\t\t\tlabel={\"Policy Number / Member ID\"}\n\t\t\t\t\t\tname={\"healthInsurancePolicyNumber\"}\n\t\t\t\t\t\tdisabled={!canEdit}\n\t\t\t\t\t\tinvalid={\n\t\t\t\t\t\t\terrors.healthInsurancePolicyNumber &&\n\t\t\t\t\t\t\t!!touched.healthInsurancePolicyNumber\n\t\t\t\t\t\t}\n\t\t\t\t\t\terror={errors.healthInsurancePolicyNumber}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"col-span-6\">\n\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\tas={InputGroup}\n\t\t\t\t\t\t\tlabel={\"Health Insurance Carrier Address\"}\n\t\t\t\t\t\t\tname={\"healthInsuranceAddressOne\"}\n\t\t\t\t\t\t\tplaceholder={\"Street and Number\"}\n\t\t\t\t\t\t\tdisabled={!canEdit}\n\t\t\t\t\t\t\tinvalid={\n\t\t\t\t\t\t\t\terrors.healthInsuranceAddressOne &&\n\t\t\t\t\t\t\t\t!!touched.healthInsuranceAddressOne\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\terror={errors.healthInsuranceAddressOne}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\tclassName={\"mt-2\"}\n\t\t\t\t\t\t\tas={InputGroup}\n\t\t\t\t\t\t\tid={\"health-insurance-address-two\"}\n\t\t\t\t\t\t\tname={\"healthInsuranceAddressTwo\"}\n\t\t\t\t\t\t\tplaceholder={\n\t\t\t\t\t\t\t\t\"Apartment, suite, unit, building, etc. (Optional)\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdisabled={!canEdit}\n\t\t\t\t\t\t\tinvalid={\n\t\t\t\t\t\t\t\terrors.healthInsuranceAddressTwo &&\n\t\t\t\t\t\t\t\t!!touched.healthInsuranceAddressTwo\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\terror={errors.healthInsuranceAddressTwo}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Field\n\t\t\t\t\t\tas={InputGroup}\n\t\t\t\t\t\tclassName=\"col-span-6 sm:col-span-3 lg:col-span-2\"\n\t\t\t\t\t\tlabel={\"City\"}\n\t\t\t\t\t\tname={\"healthInsuranceCity\"}\n\t\t\t\t\t\tdisabled={!canEdit}\n\t\t\t\t\t\tinvalid={\n\t\t\t\t\t\t\terrors.healthInsuranceCity &&\n\t\t\t\t\t\t\t!!touched.healthInsuranceCity\n\t\t\t\t\t\t}\n\t\t\t\t\t\terror={errors.healthInsuranceCity}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className={\"col-span-6 sm:col-span-3 lg:col-span-2\"}>\n\t\t\t\t\t\t<label\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\"block text-sm font-medium leading-5 text-gray-700 \"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tState\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\tisDisabled={!canEdit}\n\t\t\t\t\t\t\toptions={stateOptions}\n\t\t\t\t\t\t\tclassName=\"mt-1\"\n\t\t\t\t\t\t\t{...(typeof window === \"undefined\"\n\t\t\t\t\t\t\t\t? {}\n\t\t\t\t\t\t\t\t: { menuPortalTarget: document.body })}\n\t\t\t\t\t\t\tstyles={{\n\t\t\t\t\t\t\t\tmenuPortal: (base) => ({\n\t\t\t\t\t\t\t\t\t...base,\n\t\t\t\t\t\t\t\t\tzIndex: 9999,\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tvalue={stateOptions.find(\n\t\t\t\t\t\t\t\t(o) =>\n\t\t\t\t\t\t\t\t\to.value === values.healthInsuranceState ||\n\t\t\t\t\t\t\t\t\t// before adding this select, we encouraged full state names.\n\t\t\t\t\t\t\t\t\to.label.toLowerCase() ===\n\t\t\t\t\t\t\t\t\t\tvalues.healthInsuranceState.toLowerCase()\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\tonChange={(v) =>\n\t\t\t\t\t\t\t\tsetFieldValue(\n\t\t\t\t\t\t\t\t\t\"healthInsuranceState\",\n\t\t\t\t\t\t\t\t\tArray.isArray(v) ? v[0].value : v.value\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tonBlur={() =>\n\t\t\t\t\t\t\t\tsetFieldTouched(\"healthInsuranceState\")\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tinvalid={\n\t\t\t\t\t\t\t\terrors.healthInsuranceState &&\n\t\t\t\t\t\t\t\t!!touched.healthInsuranceState\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\terror={errors.healthInsuranceState}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{errors.healthInsuranceState &&\n\t\t\t\t\t\t\t!!touched.healthInsuranceState && (\n\t\t\t\t\t\t\t\t<p className={\"mt-2 text-sm text-red-600\"}>\n\t\t\t\t\t\t\t\t\t{errors.healthInsuranceState}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t\t<Field\n\t\t\t\t\t\tas={InputGroup}\n\t\t\t\t\t\tclassName=\"col-span-6 sm:col-span-3 lg:col-span-2\"\n\t\t\t\t\t\tlabel={\"Zip Code\"}\n\t\t\t\t\t\tname={\"healthInsuranceZip\"}\n\t\t\t\t\t\tdisabled={!canEdit}\n\t\t\t\t\t\tinvalid={\n\t\t\t\t\t\t\terrors.healthInsuranceZip &&\n\t\t\t\t\t\t\t!!touched.healthInsuranceZip\n\t\t\t\t\t\t}\n\t\t\t\t\t\terror={errors.healthInsuranceZip}\n\t\t\t\t\t/>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</RegisterFormSection>\n\t);\n}\n","/Users/jmeng/Documents/code/montavistamun/src/components/registration/sections/PersonalInformationSection.tsx",["677"],"import { User } from \"firebase\";\nimport { Field } from \"formik\";\nimport { Link } from \"gatsby\";\nimport React from \"react\";\nimport Select from \"react-select\";\nimport * as Yup from \"yup\";\nimport InputGroup from \"../../shared/InputGroup\";\nimport RegisterFormSection from \"../RegisterFormSection\";\nimport stateOptions from \"../stateOptions\";\n\ninterface PersonalInformation {\n\tphone: string;\n\taddressOne: string;\n\taddressTwo: string;\n\tcity: string;\n\tstate: string;\n\tzip: string;\n}\nconst formatPhoneNumber = (phoneNumber: string) => {\n\tlet stripped = phoneNumber.replace(/\\D/g, \"\");\n\tif (stripped.length === 11) {\n\t\tstripped = stripped.substring(1);\n\t}\n\treturn `(${stripped.substring(0, 3)}) ${stripped.substring(\n\t\t3,\n\t\t6\n\t)}-${stripped.substring(6, 10)}`;\n};\nexport default function PersonalInformationSection({\n\tdata,\n\tsetStepHasChanges,\n\thandleUpdateData,\n\tsetStep,\n\tsetMaxStep,\n\tuser,\n}: {\n\tuser?: User;\n\tdata?: PersonalInformation;\n\thandleUpdateData: (\n\t\tname: string,\n\t\tdata: PersonalInformation\n\t) => Promise<void>;\n\tsetStepHasChanges: (hasChanges: boolean) => void;\n\tsetStep: (step: number) => void;\n\tsetMaxStep: (fn: (oldMaxStep: number) => number) => void;\n}) {\n\tconst userLoading = !user;\n\treturn (\n\t\t<RegisterFormSection<PersonalInformation>\n\t\t\tuser={user}\n\t\t\ttitle={\"Personal Information\"}\n\t\t\tdata={data}\n\t\t\tonSubmit={(data: PersonalInformation) =>\n\t\t\t\thandleUpdateData(\"personalInformation\", {\n\t\t\t\t\t...data,\n\t\t\t\t\tphone: formatPhoneNumber(data.phone),\n\t\t\t\t\tzip:\n\t\t\t\t\t\tdata.zip.length === 9\n\t\t\t\t\t\t\t? `${data.zip.substring(0, 5)}-${data.zip.substring(\n\t\t\t\t\t\t\t\t\t5,\n\t\t\t\t\t\t\t\t\t9\n\t\t\t\t\t\t\t  )}`\n\t\t\t\t\t\t\t: data.zip,\n\t\t\t\t})\n\t\t\t}\n\t\t\tonHasChangesChange={(hasChanges: boolean) =>\n\t\t\t\tsetStepHasChanges(hasChanges)\n\t\t\t}\n\t\t\tonContinue={() => {\n\t\t\t\tsetStep(1);\n\t\t\t\tsetMaxStep((old: number) => Math.max(old, 1));\n\t\t\t}}\n\t\t\tschema={Yup.object().shape({\n\t\t\t\tphone: Yup.string()\n\t\t\t\t\t.test(\n\t\t\t\t\t\t\"is a phone number\",\n\t\t\t\t\t\t\"This phone number doesn't look valid! Try using the format (xxx) xxx-xxxx.\",\n\t\t\t\t\t\t(v) =>\n\t\t\t\t\t\t\t!!v && /^1?\\d{10}$/.test(v.replace(/[^\\d\\w]/g, \"\"))\n\t\t\t\t\t)\n\t\t\t\t\t.required(\n\t\t\t\t\t\t\"Please enter the emergency contact's phone number.\"\n\t\t\t\t\t),\n\t\t\t\taddressOne: Yup.string()\n\t\t\t\t\t.min(5, \"That doesn't look like a real address\")\n\t\t\t\t\t.max(128, \"Your address is too long\")\n\t\t\t\t\t.required(\n\t\t\t\t\t\t\"Please enter a valid address, including your house number and street\"\n\t\t\t\t\t),\n\t\t\t\tcity: Yup.string()\n\t\t\t\t\t.min(3, \"That doesn't look like a real city\")\n\t\t\t\t\t.max(128, \"Your city is too long\")\n\t\t\t\t\t.required(\"Please enter a city\"),\n\t\t\t\tstate: Yup.string().required(\"Please enter a state\"),\n\t\t\t\tzip: Yup.string()\n\t\t\t\t\t.matches(\n\t\t\t\t\t\t/(^\\d{5}$)|(^\\d{9}$)|(^\\d{5}-\\d{4}$)/,\n\t\t\t\t\t\t\"Please enter a valid 5 or 9 digit zip code\"\n\t\t\t\t\t)\n\t\t\t\t\t.required(\"Please enter a valid 5 or 9 digit zip code\"),\n\t\t\t})}\n\t\t\tloadingValues={{\n\t\t\t\tphone: \"Loading...\",\n\t\t\t\taddressOne: \"Loading...\",\n\t\t\t\taddressTwo: \"Loading...\",\n\t\t\t\tcity: \"Loading...\",\n\t\t\t\tstate: \"Loading...\",\n\t\t\t\tzip: \"Loading...\",\n\t\t\t}}\n\t\t>\n\t\t\t{({\n\t\t\t\terrors,\n\t\t\t\tcanEdit,\n\t\t\t\ttouched,\n\t\t\t\tvalues,\n\t\t\t\tsetFieldValue,\n\t\t\t\tsetFieldTouched,\n\t\t\t}) => (\n\t\t\t\t<>\n\t\t\t\t\t<Field\n\t\t\t\t\t\tas={InputGroup}\n\t\t\t\t\t\tclassName=\"col-span-6 sm:col-span-3\"\n\t\t\t\t\t\tlabel={\"First Name\"}\n\t\t\t\t\t\thideHelpTextIfError\n\t\t\t\t\t\tvalue={\n\t\t\t\t\t\t\tuserLoading\n\t\t\t\t\t\t\t\t? \"Loading...\"\n\t\t\t\t\t\t\t\t: user?.displayName?.split(\" \")[0] || \"Not Set\"\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdisabled\n\t\t\t\t\t/>\n\t\t\t\t\t<Field\n\t\t\t\t\t\tas={InputGroup}\n\t\t\t\t\t\tclassName=\"col-span-6 sm:col-span-3\"\n\t\t\t\t\t\tlabel={\"Last Name\"}\n\t\t\t\t\t\tdisabled\n\t\t\t\t\t\tvalue={\n\t\t\t\t\t\t\tuserLoading\n\t\t\t\t\t\t\t\t? \"Loading...\"\n\t\t\t\t\t\t\t\t: user?.displayName\n\t\t\t\t\t\t\t\t\t\t?.split(\" \")\n\t\t\t\t\t\t\t\t\t\t.slice(1)\n\t\t\t\t\t\t\t\t\t\t.join(\" \") || \"Not Set\"\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t<Field\n\t\t\t\t\t\tas={InputGroup}\n\t\t\t\t\t\tclassName=\"col-span-6 sm:col-span-4\"\n\t\t\t\t\t\tlabel={\"Email\"}\n\t\t\t\t\t\tname={\"email\"}\n\t\t\t\t\t\tdisabled\n\t\t\t\t\t\tvalue={\n\t\t\t\t\t\t\tuserLoading\n\t\t\t\t\t\t\t\t? \"Loading...\"\n\t\t\t\t\t\t\t\t: user?.email || \"Not Set\"\n\t\t\t\t\t\t}\n\t\t\t\t\t\thelpText={\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\tTo edit your name or email, go to{\" \"}\n\t\t\t\t\t\t\t\t<Link to={\"/account/settings\"} className=\"link\">\n\t\t\t\t\t\t\t\t\tAccount Settings\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t.\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t<Field\n\t\t\t\t\t\tas={InputGroup}\n\t\t\t\t\t\tclassName=\"col-span-6\"\n\t\t\t\t\t\tlabel={\"Your Phone Number\"}\n\t\t\t\t\t\thint={\"Any 10 or 11 digit format\"}\n\t\t\t\t\t\tname={\"phone\"}\n\t\t\t\t\t\tdisabled={!canEdit}\n\t\t\t\t\t\tinvalid={errors.phone && !!touched.phone}\n\t\t\t\t\t\terror={errors.phone}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"col-span-6\">\n\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\tas={InputGroup}\n\t\t\t\t\t\t\tlabel={\"Street Address\"}\n\t\t\t\t\t\t\tname={\"addressOne\"}\n\t\t\t\t\t\t\tplaceholder={\"Street and Number\"}\n\t\t\t\t\t\t\tdisabled={!canEdit}\n\t\t\t\t\t\t\tinvalid={errors.addressOne && !!touched.addressOne}\n\t\t\t\t\t\t\terror={errors.addressOne}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\tclassName={\"mt-2\"}\n\t\t\t\t\t\t\tas={InputGroup}\n\t\t\t\t\t\t\tid={\"address-two\"}\n\t\t\t\t\t\t\tname={\"addressTwo\"}\n\t\t\t\t\t\t\tplaceholder={\n\t\t\t\t\t\t\t\t\"Apartment, suite, unit, building, etc. (Optional)\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdisabled={!canEdit}\n\t\t\t\t\t\t\tinvalid={errors.addressTwo && !!touched.addressTwo}\n\t\t\t\t\t\t\terror={errors.addressTwo}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Field\n\t\t\t\t\t\tas={InputGroup}\n\t\t\t\t\t\tclassName=\"col-span-6 sm:col-span-3 lg:col-span-2\"\n\t\t\t\t\t\tlabel={\"City\"}\n\t\t\t\t\t\tname={\"city\"}\n\t\t\t\t\t\tdisabled={!canEdit}\n\t\t\t\t\t\tinvalid={errors.city && !!touched.city}\n\t\t\t\t\t\terror={errors.city}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className={\"col-span-6 sm:col-span-3 lg:col-span-2\"}>\n\t\t\t\t\t\t<label\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\"block text-sm font-medium leading-5 text-gray-700 \"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tState\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\tisDisabled={!canEdit}\n\t\t\t\t\t\t\toptions={stateOptions}\n\t\t\t\t\t\t\tclassName=\"mt-1\"\n\t\t\t\t\t\t\t{...(typeof window === \"undefined\"\n\t\t\t\t\t\t\t\t? {}\n\t\t\t\t\t\t\t\t: { menuPortalTarget: document.body })}\n\t\t\t\t\t\t\tstyles={{\n\t\t\t\t\t\t\t\tmenuPortal: (base) => ({\n\t\t\t\t\t\t\t\t\t...base,\n\t\t\t\t\t\t\t\t\tzIndex: 9999,\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tvalue={stateOptions.find(\n\t\t\t\t\t\t\t\t(o) =>\n\t\t\t\t\t\t\t\t\to.value === values.state ||\n\t\t\t\t\t\t\t\t\t// before adding this select, we encouraged full state names.\n\t\t\t\t\t\t\t\t\to.label.toLowerCase() ===\n\t\t\t\t\t\t\t\t\t\tvalues.state.toLowerCase()\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\tonChange={(v) =>\n\t\t\t\t\t\t\t\tsetFieldValue(\n\t\t\t\t\t\t\t\t\t\"state\",\n\t\t\t\t\t\t\t\t\tArray.isArray(v) ? v[0].value : v.value\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tonBlur={() => setFieldTouched(\"state\")}\n\t\t\t\t\t\t\tinvalid={errors.state && !!touched.state}\n\t\t\t\t\t\t\terror={errors.state}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{errors.state && !!touched.state && (\n\t\t\t\t\t\t\t<p className={\"mt-2 text-sm text-red-600\"}>\n\t\t\t\t\t\t\t\t{errors.state}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t\t<Field\n\t\t\t\t\t\tas={InputGroup}\n\t\t\t\t\t\tclassName=\"col-span-6 sm:col-span-3 lg:col-span-2\"\n\t\t\t\t\t\tlabel={\"Zip Code\"}\n\t\t\t\t\t\tname={\"zip\"}\n\t\t\t\t\t\tdisabled={!canEdit}\n\t\t\t\t\t\tinvalid={errors.zip && !!touched.zip}\n\t\t\t\t\t\terror={errors.zip}\n\t\t\t\t\t/>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</RegisterFormSection>\n\t);\n}\n","/Users/jmeng/Documents/code/montavistamun/src/components/registration/sections/PreferencesSection.tsx",["678","679"],"import { User } from \"firebase\";\nimport { Field } from \"formik\";\nimport React from \"react\";\nimport * as Yup from \"yup\";\nimport PreferenceList from \"../../conferences/PreferenceList\";\nimport InputGroup from \"../../shared/InputGroup\";\nimport RegisterFormSection from \"../RegisterFormSection\";\n\ninterface PreferencesInformation {\n\tscvmunCommittee: string[];\n\tscvmunPartnerPrefs: string;\n}\n\nexport default function PreferencesSection({\n\tdata,\n\tsetStepHasChanges,\n\thandleUpdateData,\n\tsetStep,\n\tsetMaxStep,\n\tuser,\n}: {\n\tuser: User;\n\tdata?: PreferencesInformation;\n\thandleUpdateData: (\n\t\tname: string,\n\t\tdata: PreferencesInformation\n\t) => Promise<void>;\n\tsetStepHasChanges: (hasChanges: boolean) => void;\n\tsetStep: (step: number) => void;\n\tsetMaxStep: (fn: (oldMaxStep: number) => number) => void;\n}) {\n\treturn (\n\t\t<RegisterFormSection<PreferencesInformation>\n\t\t\tuser={user}\n\t\t\ttitle={\"Committee Preferences\"}\n\t\t\tdata={data}\n\t\t\tshowBack\n\t\t\tonBack={() => setStep(2)}\n\t\t\tonSubmit={(data: PreferencesInformation) =>\n\t\t\t\thandleUpdateData(\"preferences\", {\n\t\t\t\t\t...data,\n\t\t\t\t})\n\t\t\t}\n\t\t\tonHasChangesChange={(hasChanges: boolean) =>\n\t\t\t\tsetStepHasChanges(hasChanges)\n\t\t\t}\n\t\t\tonContinue={() => {\n\t\t\t\tsetStep(4);\n\t\t\t\tsetMaxStep((old: number) => Math.max(old, 4));\n\t\t\t}}\n\t\t\tschema={Yup.object().shape({\n\t\t\t\tscvmunCommittee: Yup.array().required(),\n\t\t\t\tscvmunPartnerPrefs: Yup.string(),\n\t\t\t})}\n\t\t\tloadingValues={{\n\t\t\t\tscvmunCommittee: [\"Loading...\"],\n\t\t\t\tscvmunPartnerPrefs: \"\",\n\t\t\t}}\n\t\t\tconfirmContinue={(values: { scvmunCommittee: string[] }) =>\n\t\t\t\t[\n\t\t\t\t\t\"IAEA (International Atomic Energy Association)\",\n\t\t\t\t\t\"DISEC (Disarmament and International Security Committee)\",\n\t\t\t\t\t\"WHO (World Health Organization)\",\n\t\t\t\t\t\"UNEP (United Nations Environmental Programme)\",\n\t\t\t\t\t\"SOCHUM (Social, Humanitarian and Cultural)\",\n\t\t\t\t\t\"UNDP (United Nations Development Programme)\",\n\t\t\t\t\t\"LEGAL (Legal Committee)\",\n\t\t\t\t\t\"UNESCO (United Nations Educational, Scientific and Cultural Organization)\",\n\t\t\t\t\t\"Security Council (Specialty Committee)\",\n\t\t\t\t\t\"Historic Security Council (Specialty Committee)\",\n\t\t\t\t\t\"NATO (Specialty Committee)\",\n\t\t\t\t\t\"World Bank (Specialty Committee)\",\n\t\t\t\t\t\"UNHCR (United Nations High Commissioner for Refugees) (Specialty Committee)\",\n\t\t\t\t\t\"CSW (Commission on the Status of Women) (Specialty Committee)\",\n\t\t\t\t].every((el, i) => el === values.scvmunCommittee[i])\n\t\t\t\t\t? \"It doesn't look like you've re-ordered any of the committees.\"\n\t\t\t\t\t: false\n\t\t\t}\n\t\t>\n\t\t\t{({\n\t\t\t\tvalues: { scvmunCommittee, scvmunPartnerPrefs },\n\t\t\t\terrors,\n\t\t\t\tcanEdit,\n\t\t\t\ttouched,\n\t\t\t\tsetFieldValue,\n\t\t\t}) => (\n\t\t\t\t<>\n\t\t\t\t\t<div className={\"col-span-6\"}>\n\t\t\t\t\t\t<span className=\"inline-flex rounded-md shadow-sm my-2 mr-2\">\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref={\"https://www.scvmun.com/committees\"}\n\t\t\t\t\t\t\t\trel={\"noopener noreferrer\"}\n\t\t\t\t\t\t\t\ttarget={\"_blank\"}\n\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\"py-1 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white shadow-sm bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:ring-blue-500 active:bg-indigo-600 transition duration-150 ease-in-out\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tView Committees\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\tTo indicate to us which committees you are more\n\t\t\t\t\t\t\tinterested in, please drag to reorder the list of\n\t\t\t\t\t\t\tcommittees below such that the committee you want\n\t\t\t\t\t\t\tthe most is on top. We'll assign you a committee as\n\t\t\t\t\t\t\tclose to the top of your list as possible, taking\n\t\t\t\t\t\t\tinto account factors such as availability and\n\t\t\t\t\t\t\texperience.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p className=\"mt-4\">\n\t\t\t\t\t\t\tIf you'd like to start over, you can{\" \"}\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\trole={\"button\"}\n\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\t\t\t\t\tsetFieldValue(\"scvmunCommittee\", [\n\t\t\t\t\t\t\t\t\t\t\"IAEA (International Atomic Energy Association)\",\n\t\t\t\t\t\t\t\t\t\t\"DISEC (Disarmament and International Security Committee)\",\n\t\t\t\t\t\t\t\t\t\t\"WHO (World Health Organization)\",\n\t\t\t\t\t\t\t\t\t\t\"UNEP (United Nations Environmental Programme)\",\n\t\t\t\t\t\t\t\t\t\t\"SOCHUM (Social, Humanitarian and Cultural)\",\n\t\t\t\t\t\t\t\t\t\t\"UNDP (United Nations Development Programme)\",\n\t\t\t\t\t\t\t\t\t\t\"LEGAL (Legal Committee)\",\n\t\t\t\t\t\t\t\t\t\t\"UNESCO (United Nations Educational, Scientific and Cultural Organization)\",\n\t\t\t\t\t\t\t\t\t\t\"Security Council (Specialty Committee)\",\n\t\t\t\t\t\t\t\t\t\t\"Historic Security Council (Specialty Committee)\",\n\t\t\t\t\t\t\t\t\t\t\"NATO (Specialty Committee)\",\n\t\t\t\t\t\t\t\t\t\t\"World Bank (Specialty Committee)\",\n\t\t\t\t\t\t\t\t\t\t\"UNHCR (United Nations High Commissioner for Refugees) (Specialty Committee)\",\n\t\t\t\t\t\t\t\t\t\t\"CSW (Commission on the Status of Women) (Specialty Committee)\",\n\t\t\t\t\t\t\t\t\t]);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tclassName=\"link\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\treset the ordering\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p className={\"mt-4 mb-1\"}>\n\t\t\t\t\t\t\t<b>Committee Most Wanted</b>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<PreferenceList\n\t\t\t\t\t\t\titems={scvmunCommittee}\n\t\t\t\t\t\t\tsetItems={(items) =>\n\t\t\t\t\t\t\t\tsetFieldValue(\"scvmunCommittee\", items)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<p className={\"mt-1\"}>\n\t\t\t\t\t\t\t<b>Committee Least Wanted</b>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<h3 className=\"text-xl leading-6 font-bold text-gray-900 mt-6\">\n\t\t\t\t\t\t\tPartner Preferences\n\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t<p className={\"text-sm text-gray-800 mt-2\"}>\n\t\t\t\t\t\t\tAll SCVMUN committees are double delegation\n\t\t\t\t\t\t\tcommittees, so you'll be competing with a partner!\n\t\t\t\t\t\t\tIf you'd like to choose your partner, you can write\n\t\t\t\t\t\t\ttheir name below. Feel free to also leave this field\n\t\t\t\t\t\t\tblank, and we'll assign you a partner.{\" \"}\n\t\t\t\t\t\t\t<b>\n\t\t\t\t\t\t\t\tIf you are choosing a partner, make sure you\n\t\t\t\t\t\t\t\tcoordinate with them so they also writes down\n\t\t\t\t\t\t\t\tyour name!\n\t\t\t\t\t\t\t</b>{\" \"}\n\t\t\t\t\t\t\tOnly mutual partner requests will be considered.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\tclassName={\"mt-2\"}\n\t\t\t\t\t\t\tas={InputGroup}\n\t\t\t\t\t\t\tid={\"scvmunPartnerPrefs\"}\n\t\t\t\t\t\t\tname={\"scvmunPartnerPrefs\"}\n\t\t\t\t\t\t\tlabel={\"Your Requested Partner\"}\n\t\t\t\t\t\t\thint={\"Optional\"}\n\t\t\t\t\t\t\tplaceholder={\n\t\t\t\t\t\t\t\t\"If you'd like us to assign you one, feel free to leave this blank.\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdisabled={!canEdit}\n\t\t\t\t\t\t\tinvalid={\n\t\t\t\t\t\t\t\terrors.scvmunPartnerPrefs &&\n\t\t\t\t\t\t\t\t!!touched.scvmunPartnerPrefs\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\terror={errors.scvmunPartnerPrefs}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</RegisterFormSection>\n\t);\n}\n","/Users/jmeng/Documents/code/montavistamun/src/components/registration/sections/WaiverFormsSection.tsx",["680","681","682"],"import axios from \"axios\";\n// Import React FilePond\nimport callbackBlobToBuffer from \"blob-to-buffer\";\nimport cx from \"classnames\";\nimport { FilePond } from \"filepond\";\nimport { User } from \"firebase\";\nimport React, { useState } from \"react\";\nimport { File } from \"react-filepond\";\nimport \"../../../css/file-upload.css\";\nimport useFirebase from \"../../../firebase/useFirebase\";\nimport FormUpload from \"../FormUpload\";\nimport * as pdfform from \"../PDFForm\";\n\ninterface WaiverForms {\n\tscvmunFuhsdForm: string;\n}\n// make promise based\nconst blobToBuffer = (blob: Blob) =>\n\tnew Promise((res, rej) =>\n\t\tcallbackBlobToBuffer(blob, (err, buffer) => {\n\t\t\tif (err) rej();\n\t\t\telse res(buffer);\n\t\t})\n\t);\n\nconst isIOS = () => {\n\treturn (\n\t\t[\n\t\t\t\"iPad Simulator\",\n\t\t\t\"iPhone Simulator\",\n\t\t\t\"iPod Simulator\",\n\t\t\t\"iPad\",\n\t\t\t\"iPhone\",\n\t\t\t\"iPod\",\n\t\t].includes(navigator.platform) ||\n\t\t// iPad on iOS 13 detection\n\t\t(navigator.userAgent.includes(\"Mac\") && \"ontouchend\" in document)\n\t);\n};\nconst openOrDownload = (\n\tname: string,\n\tform: Uint8Array | null,\n\tunfilledPath: string = name\n): Promise<void> => {\n\tif (isIOS()) {\n\t\tconst shouldContinue = confirm(\n\t\t\t\"Autofilled forms are not available on iOS browsers, so an unfilled form will be opened. If you'd like an autofilled PDF form, please visit this page on a non-mobile browser.\"\n\t\t);\n\t\tif (!shouldContinue) {\n\t\t\treturn Promise.resolve();\n\t\t}\n\t}\n\tif (form === null || isIOS()) {\n\t\twindow.location.href = unfilledPath;\n\t} else {\n\t\treturn pdfform.openOrDownload(form, \"\", true, name);\n\t}\n\treturn Promise.resolve();\n};\n\nexport default function WaiverFormsSection({\n\tdata,\n\tsetStepHasChanges,\n\thandleUpdateData,\n\tsetStep,\n\tsetMaxStep,\n\tuser,\n}: {\n\tuser: User;\n\tdata: Record<string, any>;\n\thandleUpdateData: (\n\t\tname: string,\n\t\tdata: WaiverForms | ((oldData: WaiverForms) => WaiverForms)\n\t) => Promise<void>;\n\tsetStepHasChanges: (hasChanges: boolean) => void;\n\tsetStep: (step: number) => void;\n\tsetMaxStep: (maxStep: number | ((old: number) => number)) => void;\n}) {\n\tconst firebase = useFirebase();\n\n\tconst [filledForms, setFilledForms] = useState<(Uint8Array | null)[]>([\n\t\tnull,\n\t]);\n\n\tconst [fuhsdForm, setFuhsdForm] = useState<File | null>(null);\n\tconst [fuhsdUploading, setFuhsdUploading] = useState(false);\n\n\tReact.useEffect(() => {\n\t\tsetStepHasChanges(\n\t\t\tfuhsdUploading ||\n\t\t\t\t(fuhsdForm && fuhsdForm[0] && fuhsdForm[0].serverId === null)\n\t\t);\n\t}, [\n\t\tfuhsdUploading,\n\t\tfuhsdForm && fuhsdForm[0],\n\t\tfuhsdForm && fuhsdForm[0]?.serverId,\n\t]);\n\tReact.useEffect(() => {\n\t\tif (!user || !data) return;\n\t\t(async () => {\n\t\t\tconst response = await axios.get(\n\t\t\t\t\"/forms/FUHSD-field-trip-form.pdf\",\n\t\t\t\t{\n\t\t\t\t\tresponseType: \"arraybuffer\",\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\t\tAccept: \"application/pdf\",\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t);\n\t\t\tconst blob = new Blob([response.data]);\n\t\t\tconst pdf = (await blobToBuffer(blob)) as ArrayBuffer;\n\t\t\t// const keys = Object.keys(pdfform.list_fields(pdf));\n\n\t\t\tconst filled = pdfform.fillForm(pdf, {\n\t\t\t\t\"Student's Name\": [user?.displayName],\n\t\t\t\tDestination: [\"Online Model UN Conference (SCVMUN)\"],\n\t\t\t\t\"Date(s)\": [\"1/29/21 - 1/30/21\"],\n\t\t\t\t\"Depature Time\": [\"None (Virtual)\"],\n\t\t\t\t\"Return Time\": [\"None (Virtual)\"],\n\t\t\t\t\"Person in Charge\": [\"David Hartford\"],\n\t\t\t\t\"Home Address\": [\n\t\t\t\t\tdata.personalInformation.addressOne +\n\t\t\t\t\t\t(data.personalInformation.addressTwo\n\t\t\t\t\t\t\t? \", \" + data.personalInformation.addressTwo\n\t\t\t\t\t\t\t: \"\") +\n\t\t\t\t\t\t\", \" +\n\t\t\t\t\t\tdata.personalInformation.city +\n\t\t\t\t\t\t\", \" +\n\t\t\t\t\t\tdata.personalInformation.state +\n\t\t\t\t\t\t\", \" +\n\t\t\t\t\t\tdata.personalInformation.zip,\n\t\t\t\t],\n\t\t\t\t\"Insurance Address\": [\n\t\t\t\t\tdata.emergencyInformation.healthInsuranceAddressOne +\n\t\t\t\t\t\t(data.emergencyInformation.healthInsuranceAddressTwo\n\t\t\t\t\t\t\t? \", \" +\n\t\t\t\t\t\t\t  data.emergencyInformation\n\t\t\t\t\t\t\t\t\t.healthInsuranceAddressTwo\n\t\t\t\t\t\t\t: \"\"),\n\t\t\t\t],\n\t\t\t\t\"City/State\": [\n\t\t\t\t\tdata.emergencyInformation.healthInsuranceCity +\n\t\t\t\t\t\t\", \" +\n\t\t\t\t\t\tdata.emergencyInformation.healthInsuranceState,\n\t\t\t\t],\n\t\t\t\tZip: [data.emergencyInformation.healthInsuranceZip],\n\t\t\t\t\"Family Health Insurance Carrier\": [\n\t\t\t\t\tdata.emergencyInformation.healthInsuranceCarrier,\n\t\t\t\t],\n\t\t\t\t\"Policy Number\": [\n\t\t\t\t\tdata.emergencyInformation.healthInsurancePolicyNumber,\n\t\t\t\t],\n\t\t\t\tTelephone: [data.personalInformation.phone],\n\t\t\t\tLanguage: [data.emergencyInformation.householdMainLanguage],\n\t\t\t\t\"Emergency Contact Name and Telephone\": [\n\t\t\t\t\tdata.emergencyInformation.contactOneName +\n\t\t\t\t\t\t\", \" +\n\t\t\t\t\t\tdata.emergencyInformation.contactOnePhone,\n\t\t\t\t],\n\t\t\t});\n\t\t\tsetFilledForms((o) => [filled, o[1]]);\n\t\t})();\n\t}, [user, data]);\n\tconst [uploadInstances, setUploadInstances] = useState<(FilePond | null)[]>(\n\t\t[]\n\t);\n\treturn (\n\t\t<div className=\"mt-8 shadow rounded-md sm:overflow-hidden\">\n\t\t\t<div className={\" px-4 bg-white sm:p-6 py-4\"}>\n\t\t\t\t<h3 className=\"text-xl leading-6 font-bold text-gray-900\">\n\t\t\t\t\tLiability Forms\n\t\t\t\t</h3>\n\t\t\t\t<p className=\"mt-1 max-w-2xl text-sm leading-5 text-gray-500\">\n\t\t\t\t\tYou'll need to print out, sign, scan, and upload the\n\t\t\t\t\tfollowing forms.\n\t\t\t\t</p>\n\t\t\t\t<div className={\"mt-4\"}>\n\t\t\t\t\t<h3 className=\"text-lg leading-6 font-medium text-gray-900\">\n\t\t\t\t\t\t1. FUHSD Field Trip Form\n\t\t\t\t\t</h3>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<span className=\"inline-flex rounded-md shadow-sm my-2 mr-2\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\topenOrDownload(\n\t\t\t\t\t\t\t\t\t\t\"scvmun-fuhsd-form.pdf\",\n\t\t\t\t\t\t\t\t\t\tfilledForms[0],\n\t\t\t\t\t\t\t\t\t\t\"/forms/FUHSD-field-trip-form.pdf\"\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\"py-1 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white shadow-sm \" +\n\t\t\t\t\t\t\t\t\t(filledForms[0] === null\n\t\t\t\t\t\t\t\t\t\t? \"bg-indigo-300\"\n\t\t\t\t\t\t\t\t\t\t: \"bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:ring-blue-500 active:bg-indigo-600 transition duration-150 ease-in-out\")\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tdisabled={filledForms[0] === null}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{filledForms[0] === null\n\t\t\t\t\t\t\t\t\t? \"Generating Form...\"\n\t\t\t\t\t\t\t\t\t: \"Download the form, \"}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\tprint it, sign it, scan it, then upload it below:\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<FormUpload\n\t\t\t\t\t\tonInstanceChange={(instance: FilePond | null) =>\n\t\t\t\t\t\t\tsetUploadInstances([instance])\n\t\t\t\t\t\t}\n\t\t\t\t\t\tuser={user}\n\t\t\t\t\t\tfile={fuhsdForm}\n\t\t\t\t\t\tsetFile={setFuhsdForm}\n\t\t\t\t\t\tuploading={fuhsdUploading}\n\t\t\t\t\t\tsetUploading={setFuhsdUploading}\n\t\t\t\t\t\tfieldName={\"scvmunFuhsdForm\"}\n\t\t\t\t\t\tdata={data}\n\t\t\t\t\t\thandleUpdateData={handleUpdateData}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"px-4 py-3 bg-gray-50 text-right sm:px-6 flex justify-between\">\n\t\t\t\t<span className=\"inline-flex rounded-md shadow-sm\">\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tsetStep(1);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tdisabled={fuhsdUploading}\n\t\t\t\t\t\tclassName={cx(\n\t\t\t\t\t\t\t\"py-2 px-4 border border-gray-300 rounded-md text-sm leading-5 font-medium text-gray-700\",\n\t\t\t\t\t\t\tfuhsdUploading\n\t\t\t\t\t\t\t\t? \"bg-gray-300\"\n\t\t\t\t\t\t\t\t: \"bg-white hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:ring-blue-500 active:bg-gray-50 active:text-gray-800 transition duration-150 ease-in-out\"\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\tBack\n\t\t\t\t\t</button>\n\t\t\t\t</span>\n\t\t\t\t<button\n\t\t\t\t\ttype={\"button\"}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tif (!data?.forms?.scvmunFuhsdForm) {\n\t\t\t\t\t\t\tuploadInstances.forEach((instance) => {\n\t\t\t\t\t\t\t\t// process first (and only) file\n\t\t\t\t\t\t\t\tif (!instance) return;\n\t\t\t\t\t\t\t\tsetFuhsdUploading(true);\n\t\t\t\t\t\t\t\tinstance.processFile();\n\t\t\t\t\t\t\t\tconsole.log(uploadInstances);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsetStep(3);\n\t\t\t\t\t\tsetMaxStep((o) => Math.max(o, 3));\n\t\t\t\t\t}}\n\t\t\t\t\tdisabled={\n\t\t\t\t\t\tfuhsdUploading || !fuhsdForm || fuhsdForm.length === 0\n\t\t\t\t\t}\n\t\t\t\t\tclassName={cx(\n\t\t\t\t\t\t\"ml-4 py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white shadow-sm\",\n\t\t\t\t\t\tfuhsdUploading || !fuhsdForm || fuhsdForm.length === 0\n\t\t\t\t\t\t\t? \"bg-indigo-300\"\n\t\t\t\t\t\t\t: \"bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:ring-blue-500 active:bg-indigo-600 transition duration-150 ease-in-out\"\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t{fuhsdUploading\n\t\t\t\t\t\t? \"Uploading...\"\n\t\t\t\t\t\t: !fuhsdForm || fuhsdForm.length === 0\n\t\t\t\t\t\t? \"Upload All Files to Continue\"\n\t\t\t\t\t\t: !data?.forms?.scvmunFuhsdForm\n\t\t\t\t\t\t? \"Upload Files\"\n\t\t\t\t\t\t: \"Continue\"}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","/Users/jmeng/Documents/code/montavistamun/src/components/registration/smunc/ConfirmationSection.tsx",["683","684","685","686","687","688","689","690","691","692"],"// Import React FilePond\nimport cx from \"classnames\";\nimport { User } from \"firebase\";\nimport React, { useState } from \"react\";\nimport \"../../../css/file-upload.css\";\nimport useFirebase from \"../../../firebase/useFirebase\";\n\nexport default function ConfirmationSection({\n\tdata,\n\tsetStepHasChanges,\n\thandleUpdateData,\n\tsetStep,\n\tsetMaxStep,\n\tuser,\n}: {\n\tuser: User;\n\tdata: Record<string, any>;\n\thandleUpdateData: (\n\t\tname: string,\n\t\tdata: Record<string, any>\n\t) => Promise<void>;\n\tsetStepHasChanges: (hasChanges: boolean) => void;\n\tsetStep: (step: number) => void;\n\tsetMaxStep: (maxStep: number | ((old: number) => number)) => void;\n}) {\n\tconst firebase = useFirebase();\n\n\tconst [submitting, setSubmitting] = useState(false);\n\treturn (\n\t\t<div className=\"mt-8 shadow rounded-md sm:overflow-hidden\">\n\t\t\t<div className={\"px-4 bg-white sm:p-6 py-4\"}>\n\t\t\t\t<h3 className=\"text-xl leading-6 font-bold text-gray-900\">\n\t\t\t\t\tYou're done!\n\t\t\t\t</h3>\n\t\t\t\t<p className=\"mt-2\">\n\t\t\t\t\t{user?.displayName ? user?.displayName + \", y\" : \"Y\"}ou are\n\t\t\t\t\tnow registered for SMUNC!\n\t\t\t\t</p>\n\t\t\t\t<p className=\"mt-2\">\n\t\t\t\t\tIf you'd like to help us improve the conference registration\n\t\t\t\t\texperience, please fill out{\" \"}\n\t\t\t\t\t<a\n\t\t\t\t\t\thref=\"https://forms.gle/RFhr4TUbaWpSPDNX7\"\n\t\t\t\t\t\tclassName=\"link\"\n\t\t\t\t\t\ttarget={\"_blank\"}\n\t\t\t\t\t\trel={\"noopener noreferrer\"}\n\t\t\t\t\t>\n\t\t\t\t\t\tthis short survey\n\t\t\t\t\t</a>\n\t\t\t\t\t.\n\t\t\t\t</p>\n\t\t\t\t<p className=\"mt-4\">\n\t\t\t\t\tYou can edit your registration until the deadline. To edit\n\t\t\t\t\tyour registration, simply go back to any step using the back\n\t\t\t\t\tbutton or by clicking a step on the steps list.\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t<div className=\"px-4 py-3 bg-gray-50 text-right sm:px-6 flex justify-between\">\n\t\t\t\t<span className=\"inline-flex rounded-md shadow-sm\">\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tonClick={() => setStep(3)}\n\t\t\t\t\t\tclassName={cx(\n\t\t\t\t\t\t\t\"py-2 px-4 border border-gray-300 rounded-md text-sm leading-5 font-medium text-gray-700 bg-white hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:ring-blue-500 active:bg-gray-50 active:text-gray-800 transition duration-150 ease-in-out\"\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\tBack\n\t\t\t\t\t</button>\n\t\t\t\t</span>\n\t\t\t\t<div />\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","/Users/jmeng/Documents/code/montavistamun/src/components/registration/smunc/DonationsSection.tsx",["693","694","695","696","697"],"// Import React FilePond\nimport callbackBlobToBuffer from \"blob-to-buffer\";\nimport cx from \"classnames\";\nimport { User } from \"firebase\";\nimport React, { useState } from \"react\";\nimport \"../../../css/file-upload.css\";\nimport useFirebase from \"../../../firebase/useFirebase\";\nimport FormUpload from \"../FormUpload\";\n\ninterface DonationForms {\n\tsmuncDonation?: string;\n\tsmuncDonationOptOut?: boolean;\n}\ninterface ConfirmationData {\n\tsmuncConfirmed: true;\n}\n// make promise based\nconst blobToBuffer = (blob: Blob) =>\n\tnew Promise((res, rej) =>\n\t\tcallbackBlobToBuffer(blob, (err, buffer) => {\n\t\t\tif (err) rej();\n\t\t\telse res(buffer);\n\t\t})\n\t);\n\nexport default function DonationsSection({\n\tdata,\n\tsetStepHasChanges,\n\thandleUpdateData,\n\tsetStep,\n\tsetMaxStep,\n\tuser,\n}: {\n\tuser: User;\n\tdata: Record<string, any>;\n\thandleUpdateData: (\n\t\tname: string,\n\t\tdata: DonationForms | ConfirmationData\n\t) => Promise<void>;\n\tsetStepHasChanges: (hasChanges: boolean) => void;\n\tsetStep: (step: number) => void;\n\tsetMaxStep: (maxStep: number | ((old: number) => number)) => void;\n}) {\n\tconst firebase = useFirebase();\n\n\tconst [receipt, setReceipt] = useState<\n\t\t(File & { serverId: string | null })[] | null\n\t>(null);\n\tconst [uploading, setUploading] = useState(false);\n\n\tReact.useEffect(() => {\n\t\tsetStepHasChanges(\n\t\t\tuploading ||\n\t\t\t\t!!(receipt && receipt[0] && receipt[0].serverId === null)\n\t\t);\n\t}, [uploading, receipt && receipt[0], receipt && receipt[0]?.serverId]);\n\tconst [submitting, setSubmitting] = useState(false);\n\tconst [skipping, setSkipping] = useState(false);\n\treturn (\n\t\t<div className=\"mt-8 shadow rounded-md sm:overflow-hidden\">\n\t\t\t<div className={\"px-4 bg-white sm:p-6 py-4\"}>\n\t\t\t\t<h3 className=\"text-xl leading-6 font-bold text-gray-900\">\n\t\t\t\t\tHang in there — you’re almost done!\n\t\t\t\t</h3>\n\t\t\t\t<p className=\"mt-2\">\n\t\t\t\t\tBefore you submit, we just have one last step. To cover the\n\t\t\t\t\tfees charged by SMUNC, we are requesting that you include a\n\t\t\t\t\tdonation of <b>$35</b> with your registration. Your\n\t\t\t\t\tdonations will go directly towards covering conference fees\n\t\t\t\t\tand making this conference possible.\n\t\t\t\t</p>\n\t\t\t\t{data.forms?.smuncDonationOptOut && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<p className=\"mt-2\">\n\t\t\t\t\t\t\tYou've indicated that you are financially unable to\n\t\t\t\t\t\t\tdonate, or do not wish to do so, and that{\" \"}\n\t\t\t\t\t\t\t<b>\n\t\t\t\t\t\t\t\tyou've talked to Mr Hartford about your\n\t\t\t\t\t\t\t\tsituation\n\t\t\t\t\t\t\t</b>\n\t\t\t\t\t\t\t. You may now move on to the next step by clicking\n\t\t\t\t\t\t\tthe continue button below.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName={cx(\n\t\t\t\t\t\t\t\t\"mt-4 py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white shadow-sm\",\n\t\t\t\t\t\t\t\tsubmitting\n\t\t\t\t\t\t\t\t\t? \"bg-indigo-300\"\n\t\t\t\t\t\t\t\t\t: \"bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:ring-blue-500 active:bg-indigo-600 transition duration-150 ease-in-out\"\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\tdisabled={skipping}\n\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\tsetSkipping(true);\n\t\t\t\t\t\t\t\thandleUpdateData(\"forms\", {\n\t\t\t\t\t\t\t\t\tsmuncDonationOptOut: false,\n\t\t\t\t\t\t\t\t}).then(() => setSkipping(false));\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{skipping ? \"Cancelling...\" : \"Cancel\"}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t\t{!data.forms?.smuncDonationOptOut && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<p className=\"mt-2\">\n\t\t\t\t\t\t\tIf you are financially unable to donate, or do not\n\t\t\t\t\t\t\twish to do so,{\" \"}\n\t\t\t\t\t\t\t<b>\n\t\t\t\t\t\t\t\tplease contact Mr. Hartford about your situation\n\t\t\t\t\t\t\t\t(join his office hours{\" \"}\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\thref=\"https://fuhsd-org.zoom.us/j/95410126748?pwd=THQxTmhtYWRWSmlEOUIrTjhuY3Z4dz09\"\n\t\t\t\t\t\t\t\t\tclassName=\"link\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\there\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t</b>\n\t\t\t\t\t\t\t, then{\" \"}\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\tclassName={\"link\"}\n\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\tif (skipping) return;\n\t\t\t\t\t\t\t\t\tsetSkipping(true);\n\t\t\t\t\t\t\t\t\thandleUpdateData(\"forms\", {\n\t\t\t\t\t\t\t\t\t\tsmuncDonationOptOut: true,\n\t\t\t\t\t\t\t\t\t}).then(() => setSkipping(false));\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{skipping\n\t\t\t\t\t\t\t\t\t? \"skipping donating...\"\n\t\t\t\t\t\t\t\t\t: \"skip donating\"}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t.\n\t\t\t\t\t\t</p>\n\n\t\t\t\t\t\t<h3 className=\"text-lg leading-6 font-medium text-gray-900 mt-6 mb-2\">\n\t\t\t\t\t\t\tHow to Donate\n\t\t\t\t\t\t</h3>\n\n\t\t\t\t\t\t<ul className=\"list-decimal ml-8\">\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\tHead to Monta Vista’s online Student Store and\n\t\t\t\t\t\t\t\tfind our smunc conference donation{\" \"}\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\ttarget={\"_blank\"}\n\t\t\t\t\t\t\t\t\trel={\"noopener noreferrer\"}\n\t\t\t\t\t\t\t\t\thref={\n\t\t\t\t\t\t\t\t\t\t\"http://montavistahs.3dcartstores.com/Stanford-Model-UN-Conference-Virtual-Conference_p_68.html\"\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tclassName={\"link\"}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\there\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t.\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li>Fill out the fields listed and pay.</li>\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\tMake sure you save a copy of your receipt\n\t\t\t\t\t\t\t\t(screenshot or print &gt; save as PDF the\n\t\t\t\t\t\t\t\tconfirmation page).\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li>Upload your receipt below.</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<p className={\"mt-4\"}>\n\t\t\t\t\t\t\tUnfortunately, we are unable to process refunds with\n\t\t\t\t\t\t\tthe online system. Please confirm you can attend the\n\t\t\t\t\t\t\tconference (<b>September 12-15, 2020</b>) before\n\t\t\t\t\t\t\tdonating!\n\t\t\t\t\t\t</p>\n\n\t\t\t\t\t\t<div className={\"mt-4\"}>\n\t\t\t\t\t\t\t<FormUpload\n\t\t\t\t\t\t\t\tuser={user}\n\t\t\t\t\t\t\t\tfile={receipt}\n\t\t\t\t\t\t\t\tsetFile={setReceipt}\n\t\t\t\t\t\t\t\tuploading={uploading}\n\t\t\t\t\t\t\t\tsetUploading={setUploading}\n\t\t\t\t\t\t\t\tfieldName={\"smuncDonation\"}\n\t\t\t\t\t\t\t\tdata={data}\n\t\t\t\t\t\t\t\tallowImagePreview\n\t\t\t\t\t\t\t\tacceptedFileTypes={[\n\t\t\t\t\t\t\t\t\t\"application/pdf\",\n\t\t\t\t\t\t\t\t\t\"image/*\",\n\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\tlabelFileTypeNotAllowed={\n\t\t\t\t\t\t\t\t\t\"That's not an image or PDF!\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tfileValidateTypeLabelExpectedTypes={\n\t\t\t\t\t\t\t\t\t\"You may only upload images or pdfs\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tlabelIdle={\n\t\t\t\t\t\t\t\t\t\"Drag a image / pdf here or click to browse\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\thandleUpdateData={handleUpdateData}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t<div className=\"px-4 py-3 bg-gray-50 text-right sm:px-6 flex justify-between\">\n\t\t\t\t<span className=\"inline-flex rounded-md shadow-sm\">\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tonClick={() => setStep(3)}\n\t\t\t\t\t\tdisabled={uploading || skipping}\n\t\t\t\t\t\tclassName={cx(\n\t\t\t\t\t\t\t\"py-2 px-4 border border-gray-300 rounded-md text-sm leading-5 font-medium text-gray-700\",\n\t\t\t\t\t\t\tuploading || skipping\n\t\t\t\t\t\t\t\t? \"bg-gray-300\"\n\t\t\t\t\t\t\t\t: \"bg-white hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:ring-blue-500 active:bg-gray-50 active:text-gray-800 transition duration-150 ease-in-out\"\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\tBack\n\t\t\t\t\t</button>\n\t\t\t\t</span>\n\t\t\t\t<button\n\t\t\t\t\ttype={\"button\"}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tif (data.confirm?.smuncConfirmed) {\n\t\t\t\t\t\t\tsetStep(4);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsetSubmitting(true);\n\t\t\t\t\t\thandleUpdateData(\"confirm\", {\n\t\t\t\t\t\t\tsmuncConfirmed: true,\n\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\tif (!firebase) return;\n\t\t\t\t\t\t\t\treturn firebase\n\t\t\t\t\t\t\t\t\t.firestore()\n\t\t\t\t\t\t\t\t\t.collection(\"users\")\n\t\t\t\t\t\t\t\t\t.doc(user?.uid)\n\t\t\t\t\t\t\t\t\t.update({\n\t\t\t\t\t\t\t\t\t\tsmuncRegistered: true,\n\t\t\t\t\t\t\t\t\t\tsmuncRegistrationTimestamp: firebase.firestore.FieldValue.serverTimestamp(),\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\tsetSubmitting(false);\n\t\t\t\t\t\t\t\tsetStep(4);\n\t\t\t\t\t\t\t\tsetMaxStep((o) => 5); // maxStep is one higher to check it\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}}\n\t\t\t\t\tdisabled={\n\t\t\t\t\t\tuploading ||\n\t\t\t\t\t\tsubmitting ||\n\t\t\t\t\t\tskipping ||\n\t\t\t\t\t\t(!data?.forms?.smuncDonation &&\n\t\t\t\t\t\t\t!data?.forms?.smuncDonationOptOut)\n\t\t\t\t\t}\n\t\t\t\t\tclassName={cx(\n\t\t\t\t\t\t\"ml-4 py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white shadow-sm\",\n\t\t\t\t\t\tuploading ||\n\t\t\t\t\t\t\tsubmitting ||\n\t\t\t\t\t\t\tskipping ||\n\t\t\t\t\t\t\t(!data?.forms?.smuncDonation &&\n\t\t\t\t\t\t\t\t!data?.forms?.smuncDonationOptOut)\n\t\t\t\t\t\t\t? \"bg-indigo-300\"\n\t\t\t\t\t\t\t: \"bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:ring-blue-500 active:bg-indigo-600 transition duration-150 ease-in-out\"\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t{uploading\n\t\t\t\t\t\t? \"Uploading...\"\n\t\t\t\t\t\t: !data?.forms?.smuncDonation &&\n\t\t\t\t\t\t  !data?.forms?.smuncDonationOptOut\n\t\t\t\t\t\t? \"Upload all forms to finish registration\"\n\t\t\t\t\t\t: !data.confirm?.smuncConfirmed\n\t\t\t\t\t\t? \"Finish Registration\"\n\t\t\t\t\t\t: \"Continue\"}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","/Users/jmeng/Documents/code/montavistamun/src/components/registration/smunc/WaiverFormsSection.tsx",["698","699","700"],"import axios from \"axios\";\n// Import React FilePond\nimport callbackBlobToBuffer from \"blob-to-buffer\";\nimport cx from \"classnames\";\nimport { User } from \"firebase\";\nimport React, { useState } from \"react\";\nimport { File } from \"react-filepond\";\nimport \"../../../css/file-upload.css\";\nimport useFirebase from \"../../../firebase/useFirebase\";\nimport FormUpload from \"../FormUpload\";\nimport * as pdfform from \"../PDFForm\";\ninterface WaiverForms {\n\tsmuncFuhsdForm: string;\n}\n// make promise based\nconst blobToBuffer = (blob: Blob) =>\n\tnew Promise((res, rej) =>\n\t\tcallbackBlobToBuffer(blob, (err, buffer) => {\n\t\t\tif (err) rej();\n\t\t\telse res(buffer);\n\t\t})\n\t);\n\nconst isIOS = () => {\n\treturn (\n\t\t[\n\t\t\t\"iPad Simulator\",\n\t\t\t\"iPhone Simulator\",\n\t\t\t\"iPod Simulator\",\n\t\t\t\"iPad\",\n\t\t\t\"iPhone\",\n\t\t\t\"iPod\",\n\t\t].includes(navigator.platform) ||\n\t\t// iPad on iOS 13 detection\n\t\t(navigator.userAgent.includes(\"Mac\") && \"ontouchend\" in document)\n\t);\n};\nconst openOrDownload = (\n\tname: string,\n\tform: Uint8Array | null,\n\tunfilledPath: string = name\n): Promise<void> => {\n\tif (isIOS()) {\n\t\tconst shouldContinue = confirm(\n\t\t\t\"Autofilled forms are not available on iOS browsers, so an unfilled form will be opened. If you'd like an autofilled PDF form, please visit this page on a non-mobile browser.\"\n\t\t);\n\t\tif (!shouldContinue) {\n\t\t\treturn Promise.resolve();\n\t\t}\n\t}\n\tif (form === null || isIOS()) {\n\t\twindow.location.href = unfilledPath;\n\t} else {\n\t\treturn pdfform.openOrDownload(form, \"\", true, name);\n\t}\n\treturn Promise.resolve();\n};\n\nexport default function WaiverFormsSection({\n\tdata,\n\tsetStepHasChanges,\n\thandleUpdateData,\n\tsetStep,\n\tsetMaxStep,\n\tuser,\n}: {\n\tuser: User;\n\tdata: Record<string, any>;\n\thandleUpdateData: (\n\t\tname: string,\n\t\tdata: WaiverForms | ((oldData: WaiverForms) => WaiverForms)\n\t) => Promise<void>;\n\tsetStepHasChanges: (hasChanges: boolean) => void;\n\tsetStep: (step: number) => void;\n\tsetMaxStep: (maxStep: number | ((old: number) => number)) => void;\n}) {\n\tconst firebase = useFirebase();\n\n\tconst [filledForms, setFilledForms] = useState<(Uint8Array | null)[]>([\n\t\tnull,\n\t\tnull,\n\t]);\n\tconst [fuhsdForm, setFuhsdForm] = useState<File | null>(null);\n\tconst [fuhsdUploading, setFuhsdUploading] = useState(false);\n\n\tReact.useEffect(() => {\n\t\tsetStepHasChanges(\n\t\t\tfuhsdUploading ||\n\t\t\t\t(fuhsdForm && fuhsdForm[0] && fuhsdForm[0].serverId === null)\n\t\t);\n\t}, [\n\t\tfuhsdUploading,\n\t\tfuhsdForm && fuhsdForm[0],\n\t\tfuhsdForm && fuhsdForm[0]?.serverId,\n\t]);\n\tReact.useEffect(() => {\n\t\tif (!user || !data) return;\n\t\t(async () => {\n\t\t\tconst response = await axios.get(\n\t\t\t\t\"/forms/FUHSD-field-trip-form.pdf\",\n\t\t\t\t{\n\t\t\t\t\tresponseType: \"arraybuffer\",\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\t\tAccept: \"application/pdf\",\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t);\n\t\t\tconst blob = new Blob([response.data]);\n\t\t\tconst pdf = (await blobToBuffer(blob)) as ArrayBuffer;\n\t\t\t// const keys = Object.keys(pdfform.list_fields(pdf));\n\n\t\t\tconst filled = pdfform.fillForm(pdf, {\n\t\t\t\t\"Student's Name\": [user?.displayName],\n\t\t\t\tDestination: [\"Online Model UN Conference (SMUNC)\"],\n\t\t\t\t\"Date(s)\": [\"11/12/20 - 11/15/20\"],\n\t\t\t\t\"Depature Time\": [\"None (Virtual)\"],\n\t\t\t\t\"Return Time\": [\"None (Virtual)\"],\n\t\t\t\t\"Person in Charge\": [\"David Hartford\"],\n\t\t\t\t\"Home Address\": [\n\t\t\t\t\tdata.personalInformation.addressOne +\n\t\t\t\t\t\t(data.personalInformation.addressTwo\n\t\t\t\t\t\t\t? \", \" + data.personalInformation.addressTwo\n\t\t\t\t\t\t\t: \"\") +\n\t\t\t\t\t\t\", \" +\n\t\t\t\t\t\tdata.personalInformation.city +\n\t\t\t\t\t\t\", \" +\n\t\t\t\t\t\tdata.personalInformation.state +\n\t\t\t\t\t\t\", \" +\n\t\t\t\t\t\tdata.personalInformation.zip,\n\t\t\t\t],\n\t\t\t\t\"Insurance Address\": [\n\t\t\t\t\tdata.emergencyInformation.healthInsuranceAddressOne +\n\t\t\t\t\t\t(data.emergencyInformation.healthInsuranceAddressTwo\n\t\t\t\t\t\t\t? \", \" +\n\t\t\t\t\t\t\t  data.emergencyInformation\n\t\t\t\t\t\t\t\t\t.healthInsuranceAddressTwo\n\t\t\t\t\t\t\t: \"\"),\n\t\t\t\t],\n\t\t\t\t\"City/State\": [\n\t\t\t\t\tdata.emergencyInformation.healthInsuranceCity +\n\t\t\t\t\t\t\", \" +\n\t\t\t\t\t\tdata.emergencyInformation.healthInsuranceState,\n\t\t\t\t],\n\t\t\t\tZip: [data.emergencyInformation.healthInsuranceZip],\n\t\t\t\t\"Family Health Insurance Carrier\": [\n\t\t\t\t\tdata.emergencyInformation.healthInsuranceCarrier,\n\t\t\t\t],\n\t\t\t\t\"Policy Number\": [\n\t\t\t\t\tdata.emergencyInformation.healthInsurancePolicyNumber,\n\t\t\t\t],\n\t\t\t\tTelephone: [data.personalInformation.phone],\n\t\t\t\tLanguage: [data.emergencyInformation.householdMainLanguage],\n\t\t\t\t\"Emergency Contact Name and Telephone\": [\n\t\t\t\t\tdata.emergencyInformation.contactOneName +\n\t\t\t\t\t\t\", \" +\n\t\t\t\t\t\tdata.emergencyInformation.contactOnePhone,\n\t\t\t\t],\n\t\t\t});\n\t\t\tsetFilledForms((o) => [filled, o[1]]);\n\t\t})();\n\t}, [user, data]);\n\treturn (\n\t\t<div className=\"mt-8 shadow rounded-md sm:overflow-hidden\">\n\t\t\t<div className={\" px-4 bg-white sm:p-6 py-4\"}>\n\t\t\t\t<h3 className=\"text-xl leading-6 font-bold text-gray-900\">\n\t\t\t\t\tLiability Forms\n\t\t\t\t</h3>\n\t\t\t\t<p className=\"mt-1 max-w-2xl text-sm leading-5 text-gray-500\">\n\t\t\t\t\tWe'll need you to fill out the following field trip form.\n\t\t\t\t\tNote that in addition to the below form, you'll also have to\n\t\t\t\t\tfill out another digital liability form for SMUNC; you\n\t\t\t\t\tshould receive an email from SMUNC with instructions on how\n\t\t\t\t\tto fill this form out soon.\n\t\t\t\t</p>\n\t\t\t\t<div className={\"mt-4\"}>\n\t\t\t\t\t<h3 className=\"text-lg leading-6 font-medium text-gray-900\">\n\t\t\t\t\t\tFUHSD Field Trip Form\n\t\t\t\t\t</h3>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<span className=\"inline-flex rounded-md shadow-sm my-2 mr-2\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\topenOrDownload(\n\t\t\t\t\t\t\t\t\t\t\"sfmun-fuhsd-form.pdf\",\n\t\t\t\t\t\t\t\t\t\tfilledForms[0],\n\t\t\t\t\t\t\t\t\t\t\"/forms/FUHSD-field-trip-form.pdf\"\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\"py-1 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white shadow-sm \" +\n\t\t\t\t\t\t\t\t\t(filledForms[0] === null\n\t\t\t\t\t\t\t\t\t\t? \"bg-indigo-300\"\n\t\t\t\t\t\t\t\t\t\t: \"bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:ring-blue-500 active:bg-indigo-600 transition duration-150 ease-in-out\")\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tdisabled={filledForms[0] === null}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{filledForms[0] === null\n\t\t\t\t\t\t\t\t\t? \"Generating Form...\"\n\t\t\t\t\t\t\t\t\t: \"Download the form, \"}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\tprint it, sign it, scan it, then upload it below:\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<FormUpload\n\t\t\t\t\t\tfile={fuhsdForm}\n\t\t\t\t\t\tsetFile={setFuhsdForm}\n\t\t\t\t\t\tuploading={fuhsdUploading}\n\t\t\t\t\t\tsetUploading={setFuhsdUploading}\n\t\t\t\t\t\tfieldName={\"smuncFuhsdForm\"}\n\t\t\t\t\t\tdata={data}\n\t\t\t\t\t\thandleUpdateData={handleUpdateData}\n\t\t\t\t\t\tuser={user}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"px-4 py-3 bg-gray-50 text-right sm:px-6 flex justify-between\">\n\t\t\t\t<span className=\"inline-flex rounded-md shadow-sm\">\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tsetStep(1);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tdisabled={fuhsdUploading}\n\t\t\t\t\t\tclassName={cx(\n\t\t\t\t\t\t\t\"py-2 px-4 border border-gray-300 rounded-md text-sm leading-5 font-medium text-gray-700\",\n\t\t\t\t\t\t\tfuhsdUploading\n\t\t\t\t\t\t\t\t? \"bg-gray-300\"\n\t\t\t\t\t\t\t\t: \"bg-white hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:ring-blue-500 active:bg-gray-50 active:text-gray-800 transition duration-150 ease-in-out\"\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\tBack\n\t\t\t\t\t</button>\n\t\t\t\t</span>\n\t\t\t\t<button\n\t\t\t\t\ttype={\"button\"}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tsetStep(3);\n\t\t\t\t\t\tsetMaxStep((o) => Math.max(o, 3));\n\t\t\t\t\t}}\n\t\t\t\t\tdisabled={fuhsdUploading || !data?.forms?.smuncFuhsdForm}\n\t\t\t\t\tclassName={cx(\n\t\t\t\t\t\t\"ml-4 py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white shadow-sm\",\n\t\t\t\t\t\tfuhsdUploading || !data?.forms?.smuncFuhsdForm\n\t\t\t\t\t\t\t? \"bg-indigo-300\"\n\t\t\t\t\t\t\t: \"bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:ring-blue-500 active:bg-indigo-600 transition duration-150 ease-in-out\"\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t{fuhsdUploading\n\t\t\t\t\t\t? \"Uploading...\"\n\t\t\t\t\t\t: !data?.forms?.smuncFuhsdForm\n\t\t\t\t\t\t? \"Upload all forms to continue\"\n\t\t\t\t\t\t: \"Continue\"}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","/Users/jmeng/Documents/code/montavistamun/src/components/registration/stateOptions.ts",[],"/Users/jmeng/Documents/code/montavistamun/src/components/secretariat/secretariatData.tsx",[],"/Users/jmeng/Documents/code/montavistamun/src/components/shared/InputGroup.tsx",[],"/Users/jmeng/Documents/code/montavistamun/src/components/shared/VerticalSteps.tsx",["701"],"import * as Icons from \"heroicons-react\";\nimport React from \"react\";\n// TODO: refactor into just the individual state for each step (checked, current, disabled)\nexport default function VerticalSteps({\n\tsteps,\n\tcurrentStep,\n\tmaxSwitchableStep,\n\tonStepSwitch,\n}: {\n\t/**\n\t * The title and description for each step.\n\t */\n\tsteps: {\n\t\ttitle: string;\n\t\tdescription: string;\n\t}[];\n\t/**\n\t * The current active step. This is 0-indexed and corresponds to the step array.\n\t */\n\tcurrentStep: number;\n\t/**\n\t * The index of the maximum step that the user can switch to. By default, this is equal to the current step.\n\t * If this is set to a number less than the current step, it will be set to the current step.\n\t */\n\tmaxSwitchableStep?: number;\n\n\t/**\n\t * A callback that will be called when the user clicks on a step that is not the current step and less than the max switchable step.\n\t * @param step - the 0-indexed index of the step that was clicked.\n\t */\n\tonStepSwitch?: (step: number) => void;\n}) {\n\tmaxSwitchableStep = maxSwitchableStep || currentStep;\n\tif (maxSwitchableStep < currentStep) {\n\t\tmaxSwitchableStep = currentStep;\n\t}\n\n\treturn (\n\t\t<nav className={\"pt-8\"}>\n\t\t\t<ul className=\"overflow-hidden\">\n\t\t\t\t{steps.map(({ title, description }, i) => (\n\t\t\t\t\t<li\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\"relative \" +\n\t\t\t\t\t\t\t(i === steps.length - 1 ? \"\" : \"pb-10\")\n\t\t\t\t\t\t}\n\t\t\t\t\t\tkey={title + \" \" + description}\n\t\t\t\t\t>\n\t\t\t\t\t\t{i !== steps.length - 1 && (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\"-ml-px absolute mt-0.5 top-4 left-4 w-0.5 h-full \" +\n\t\t\t\t\t\t\t\t\t(i < maxSwitchableStep - 1 ||\n\t\t\t\t\t\t\t\t\ti === currentStep - 1\n\t\t\t\t\t\t\t\t\t\t? \"bg-indigo-600\"\n\t\t\t\t\t\t\t\t\t\t: i <\n\t\t\t\t\t\t\t\t\t\t  maxSwitchableStep /* because the line is attached to the element before*/\n\t\t\t\t\t\t\t\t\t\t? \"bg-gray-400\"\n\t\t\t\t\t\t\t\t\t\t: \"bg-gray-300\")\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tonClick={\n\t\t\t\t\t\t\t\ti === currentStep || i > maxSwitchableStep\n\t\t\t\t\t\t\t\t\t? undefined\n\t\t\t\t\t\t\t\t\t: () => {\n\t\t\t\t\t\t\t\t\t\t\tif (onStepSwitch) onStepSwitch(i);\n\t\t\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\"relative flex items-start space-x-4 group focus:outline-none text-left \" +\n\t\t\t\t\t\t\t\t(i > maxSwitchableStep || i === currentStep\n\t\t\t\t\t\t\t\t\t? \"cursor-default\"\n\t\t\t\t\t\t\t\t\t: \"\")\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className=\"h-9 flex items-center\">\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\"relative z-10 w-8 h-8 flex items-center justify-center rounded-full \" +\n\t\t\t\t\t\t\t\t\t\t(i !== currentStep\n\t\t\t\t\t\t\t\t\t\t\t? \"transition ease-in-out duration-150 \"\n\t\t\t\t\t\t\t\t\t\t\t: \"\") +\n\t\t\t\t\t\t\t\t\t\t(i >= currentStep\n\t\t\t\t\t\t\t\t\t\t\t? \"bg-white border-2 \"\n\t\t\t\t\t\t\t\t\t\t\t: \"\") +\n\t\t\t\t\t\t\t\t\t\t(i < maxSwitchableStep\n\t\t\t\t\t\t\t\t\t\t\t? \"border-indigo-600 \"\n\t\t\t\t\t\t\t\t\t\t\t: \"\") +\n\t\t\t\t\t\t\t\t\t\t(i < currentStep ||\n\t\t\t\t\t\t\t\t\t\t(i < maxSwitchableStep &&\n\t\t\t\t\t\t\t\t\t\t\ti !== currentStep)\n\t\t\t\t\t\t\t\t\t\t\t? \"bg-indigo-600 group-hover:bg-indigo-800 group-focus:bg-indigo-800 \"\n\t\t\t\t\t\t\t\t\t\t\t: \"\") +\n\t\t\t\t\t\t\t\t\t\t(i > currentStep\n\t\t\t\t\t\t\t\t\t\t\t? \"border-gray-300 \" +\n\t\t\t\t\t\t\t\t\t\t\t  (i <= maxSwitchableStep\n\t\t\t\t\t\t\t\t\t\t\t\t\t? \"border-gray-400\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t: \"\")\n\t\t\t\t\t\t\t\t\t\t\t: \"\")\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{i !== currentStep &&\n\t\t\t\t\t\t\t\t\ti < maxSwitchableStep ? (\n\t\t\t\t\t\t\t\t\t\t<Icons.Check className=\"w-5 h-5 text-white\" />\n\t\t\t\t\t\t\t\t\t) : i === currentStep ? (\n\t\t\t\t\t\t\t\t\t\t<span className=\"h-2.5 w-2.5 bg-indigo-600 rounded-full\"></span>\n\t\t\t\t\t\t\t\t\t) : i > currentStep &&\n\t\t\t\t\t\t\t\t\t  i <= maxSwitchableStep ? (\n\t\t\t\t\t\t\t\t\t\t<span className=\"h-2.5 w-2.5 bg-transparent rounded-full group-hover:bg-gray-300 group-focus:bg-gray-300 transition ease-in-out duration-150\"></span>\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<span className=\"h-2.5 w-2.5 bg-transparent rounded-full\"></span>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"min-w-0\">\n\t\t\t\t\t\t\t\t<h3 className=\"text-xs leading-4 font-semibold uppercase tracking-wide\">\n\t\t\t\t\t\t\t\t\t{title}\n\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t<p className=\"text-sm leading-5 text-gray-500\">\n\t\t\t\t\t\t\t\t\t{description}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t{i !== currentStep && (\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref=\"/\"\n\t\t\t\t\t\t\t\tclassName=\"relative flex items-start space-x-4 group focus:outline-none\"\n\t\t\t\t\t\t\t></a>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</li>\n\t\t\t\t))}\n\t\t\t</ul>\n\t\t</nav>\n\t);\n}\n","/Users/jmeng/Documents/code/montavistamun/src/context/AuthContext.tsx",["702","703"],"import type firebaseType from \"firebase\";\nimport type { User as FirebaseUser } from \"firebase\";\nimport React, { ReactElement, ReactNode, useEffect, useState } from \"react\";\nimport firebaseConfig from \"../../firebase-config\";\n\nconst AuthContext = React.createContext<{\n\tuser: FirebaseUser | null;\n\tloading: boolean | null;\n\terror: boolean | null;\n\tadmin: boolean | null;\n\tverified: boolean | null;\n}>({\n\tuser: null,\n\tloading: true,\n\terror: null,\n\tadmin: null,\n\tverified: null,\n});\n\nconst AuthProvider = ({ children }: { children: ReactNode }): ReactElement => {\n\tconst [user, setUser] = useState<FirebaseUser | null>(null);\n\tconst [loading, setLoading] = useState(true);\n\tconst [error, setError] = useState(null);\n\tconst [admin, setAdmin] = useState<boolean | null>(null);\n\tconst [auth, setAuth] = useState<firebaseType.auth.Auth | null>(null);\n\tconst [verified, setVerified] = useState<boolean | null>(null);\n\tReact.useEffect(() => {\n\t\t(async (): Promise<void> => {\n\t\t\t// import firebase app\n\t\t\tconst firebaseApp: any = (await import(\"firebase/app\")).default;\n\t\t\t//\n\t\t\tawait Promise.all([\n\t\t\t\timport(\"firebase/auth\"),\n\t\t\t\timport(\"firebase/firestore\"),\n\t\t\t\t// import(\"firebase/functions\"),\n\t\t\t]);\n\t\t\t// lazy load firebase in an async IIFE\n\t\t\tif (firebaseApp.apps.length === 0) {\n\t\t\t\tfirebaseApp.initializeApp(firebaseConfig);\n\t\t\t}\n\t\t\tsetAuth(firebaseApp.auth());\n\t\t})();\n\t}, []);\n\tuseEffect(() => {\n\t\tif (!auth) {\n\t\t\treturn;\n\t\t}\n\t\tconst unsubscribe = auth.onAuthStateChanged(\n\t\t\t(user: FirebaseUser | null) => {\n\t\t\t\tsetUser(user);\n\t\t\t\tif (user) {\n\t\t\t\t\tuser.getIdTokenResult()\n\t\t\t\t\t\t.then(({ claims }) => {\n\t\t\t\t\t\t\t// console.log(\"CLAIMS\", claims);\n\t\t\t\t\t\t\tsetAdmin(!!claims.admin);\n\t\t\t\t\t\t\tsetVerified(!!claims.verified);\n\t\t\t\t\t\t\tsetLoading(false);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\t\tconsole.log(error);\n\t\t\t\t\t\t\tsetAdmin(false);\n\t\t\t\t\t\t\tsetVerified(false);\n\t\t\t\t\t\t\tsetLoading(false);\n\t\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tsetLoading(false);\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t\treturn (): void => {\n\t\t\tunsubscribe();\n\t\t};\n\t}, [auth]);\n\n\treturn (\n\t\t<AuthContext.Provider\n\t\t\tvalue={{\n\t\t\t\tuser,\n\t\t\t\tloading,\n\t\t\t\terror,\n\t\t\t\tadmin,\n\t\t\t\tverified,\n\t\t\t}}\n\t\t>\n\t\t\t{children}\n\t\t</AuthContext.Provider>\n\t);\n};\n\nexport default AuthContext;\nexport { AuthProvider };\n","/Users/jmeng/Documents/code/montavistamun/src/firebase/FirebaseStoredUserData.ts",[],"/Users/jmeng/Documents/code/montavistamun/src/firebase/useFirebase.tsx",["704"],"// the below firebase is used only for the type, so typescript removes it before gatsby compiles\n// thus, we can use it as a type even though firebase uses `window` which gatsby doesnt allow in ssr\n// the below lazy import of firebase is still necessary.\nimport * as FirebaseType from \"firebase\";\nimport useIsMounted from \"ismounted\";\nimport React, { useState } from \"react\";\nimport firebaseConfig from \"../../firebase-config\";\n\nexport default function useFirebase(): null | typeof FirebaseType.default {\n\tconst isMounted = useIsMounted();\n\tconst [firebase, setFirebase] = useState(null);\n\tReact.useEffect(() => {\n\t\tif (typeof window == \"undefined\") {\n\t\t\treturn;\n\t\t}\n\t\t(async (): Promise<void> => {\n\t\t\t// import firebase app\n\t\t\tconst firebaseApp: any = (await import(\"firebase/app\")).default;\n\t\t\t//\n\t\t\tawait Promise.all([\n\t\t\t\timport(\"firebase/auth\"),\n\t\t\t\timport(\"firebase/firestore\"),\n\t\t\t\timport(\"firebase/storage\"),\n\t\t\t]);\n\t\t\t// lazy load firebase in an async IIFE\n\t\t\tif (firebaseApp.apps.length === 0) {\n\t\t\t\tfirebaseApp.initializeApp(firebaseConfig);\n\t\t\t}\n\t\t\tif (isMounted.current) {\n\t\t\t\tsetFirebase(firebaseApp);\n\t\t\t}\n\t\t})();\n\t}, [firebaseConfig]);\n\treturn firebase as null | typeof FirebaseType.default;\n}\n","/Users/jmeng/Documents/code/montavistamun/src/pages/404.tsx",[],"/Users/jmeng/Documents/code/montavistamun/src/pages/account/create.tsx",["705","706"],"import axios from \"axios\";\nimport classNames from \"classnames\";\nimport { Link } from \"gatsby\";\nimport { Eye, EyeOff } from \"heroicons-react\";\nimport Mailcheck from \"mailcheck\";\nimport React, { useState } from \"react\";\nimport { AuthLayout } from \"../../components/layout\";\nimport AuthContext from \"../../context/AuthContext\";\nimport FirebaseStoredUserData from \"../../firebase/FirebaseStoredUserData\";\nimport useFirebase from \"../../firebase/useFirebase\";\nimport { getClassOf, getIsSummer } from \"../../utils/schoolYearUtils\";\nimport { LoginPageProps } from \"./login\";\n\nexport default function CreatePage({\n\tlocation: { state },\n}: {\n\tlocation: { state: LoginPageProps };\n}): React.ReactElement {\n\tconst { user, loading } = React.useContext(AuthContext);\n\tconst [name, setName] = useState(user?.displayName || \"\");\n\tconst [grade, setGrade] = useState(\"\");\n\tconst [email, setEmail] = useState(user?.email || \"\");\n\tconst [emailSuggestion, setEmailSuggestion] = React.useState<\n\t\tstring | undefined\n\t>(\"\");\n\n\tconst [password, setPassword] = useState(\"\");\n\tconst [discordClicked, setDiscordClicked] = useState(false);\n\tconst [showPassword, setShowPassword] = useState(false);\n\tconst [error, setError] = React.useState<React.ReactNode | null>(null);\n\tconst [submitting, setSubmitting] = useState(false);\n\tconst [done, setDone] = useState(!!user);\n\tconst [resendTimeLeft, setResendTimeLeft] = useState(60);\n\tconst [timesResent, setTimesResent] = useState(0);\n\n\tconst [verificationComplete, setVerificationComplete] = useState(\n\t\t!!user?.emailVerified\n\t);\n\tconst [verificationEmailSent, setVerificationEmailSent] = useState(false);\n\n\tReact.useEffect(() => {\n\t\tif (user) {\n\t\t\tsetDone(true);\n\n\t\t\tsetName((currentValue) => user.displayName || currentValue);\n\t\t\tsetEmail(\n\t\t\t\t(currentValue) => user.email || currentValue || \"your email\"\n\t\t\t);\n\t\t\tsetVerificationComplete(user.emailVerified);\n\t\t}\n\t}, [user]);\n\tconst [sysend, setSysend] = React.useState<\n\t\tRecord<string, any> | undefined\n\t>();\n\tReact.useEffect(() => {\n\t\tif (!done) return;\n\t\tconst interval = setInterval(() => {\n\t\t\tsetResendTimeLeft((old) => (old > 0 ? old - 1 : 0));\n\t\t}, 1000);\n\t\treturn () => clearInterval(interval);\n\t}, [done]);\n\tconst firebase = useFirebase();\n\n\tReact.useEffect(() => {\n\t\timport(\"sysend\").then((module) => setSysend(module));\n\t}, []);\n\tReact.useEffect(() => {\n\t\tif (!sysend) return;\n\n\t\tconst handler = (verifiedEmail: string) => {\n\t\t\tif (email == verifiedEmail) {\n\t\t\t\tconsole.log(\n\t\t\t\t\t\"VERIFICATION EMAIL MISMATCH. Expected \" +\n\t\t\t\t\t\temail +\n\t\t\t\t\t\t\" but got \" +\n\t\t\t\t\t\tverifiedEmail +\n\t\t\t\t\t\t\".\"\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (firebase) {\n\t\t\t\tfirebase.auth().currentUser?.reload();\n\t\t\t}\n\t\t\tsetVerificationComplete(true);\n\t\t};\n\t\tsysend.on(\"email-verified\", handler);\n\t\treturn () => sysend.off(\"email-verified\", handler);\n\t}, [sysend, firebase]);\n\treturn (\n\t\t<AuthLayout\n\t\t\ttitle={\"Join MVMUN\"}\n\t\t\tdescription={\n\t\t\t\t\"Monta Vista Model United Nations is a close-knit club and community that strives to provide experiences in teamwork, negotiation, and diplomacy by simulating the United Nations during engaging conferences. Join MV Model UN today to start your MUN journey!\"\n\t\t\t}\n\t\t>\n\t\t\t{done ? (\n\t\t\t\t<div className=\"mx-auto w-full max-w-sm\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h2 className=\"mt-6 text-3xl leading-9 font-extrabold text-gray-900\">\n\t\t\t\t\t\t\tWelcome\n\t\t\t\t\t\t\t{name && (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t{\", \"}\n\t\t\t\t\t\t\t\t\t{name.split(\" \").slice(0, -1).join(\" \")}\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t!\n\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t<h3 className=\"mt-3 text-xl font-bold text-gray-700\">\n\t\t\t\t\t\t\tYou're now a member of Monta Vista Model United\n\t\t\t\t\t\t\tNations!\n\t\t\t\t\t\t</h3>\n\t\t\t\t\t</div>\n\t\t\t\t\t<h5 className={\"text-xl font-extrabold mt-5\"}>\n\t\t\t\t\t\tNext steps:\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t{verificationComplete && \"✓ \"}\n\t\t\t\t\t\t{verificationEmailSent || verificationComplete ? (\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\tverificationComplete ? \"line-through\" : \"\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tVerify Your Email\n\t\t\t\t\t\t\t\t{!verificationComplete && \" (required)\"}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\tclassName={\"link\"}\n\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\tuser?.sendEmailVerification().catch(\n\t\t\t\t\t\t\t\t\t\t(error) => console.log(error)\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tsetResendTimeLeft(60);\n\t\t\t\t\t\t\t\t\tsetVerificationEmailSent(true);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tVerify Your Email (required)\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t{discordClicked && \"✓ \"}\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref={\"https://discord.gg/5sN9WXa\"}\n\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\tsetDiscordClicked(true);\n\t\t\t\t\t\t\t\twindow.open(\n\t\t\t\t\t\t\t\t\t\"https://discord.gg/5sN9WXa\",\n\t\t\t\t\t\t\t\t\t\"_blank\"\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\"link font-extrabold\" +\n\t\t\t\t\t\t\t\t(discordClicked ? \" line-through\" : \"\")\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tJoin Our Discord\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\tAttend your first member meeting\n\t\t\t\t\t\t{/*\tTODO: add time */}\n\t\t\t\t\t</h5>\n\n\t\t\t\t\t{verificationComplete && (\n\t\t\t\t\t\t<div className=\"mt-8 md:mt-20 lg:mt-40\">\n\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\tto={state?.continueURL || \"/dashboard/\"}\n\t\t\t\t\t\t\t\tclassName={classNames(\n\t\t\t\t\t\t\t\t\t\"mt-4 w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white transition duration-150 ease-in-out bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:ring-indigo-500 active:bg-indigo-700\"\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{state?.continueURL\n\t\t\t\t\t\t\t\t\t? \"Continue\"\n\t\t\t\t\t\t\t\t\t: \"Continue to Member Dashboard\"}\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{!verificationComplete && verificationEmailSent && (\n\t\t\t\t\t\t<div className=\"mt-8\">\n\t\t\t\t\t\t\t<h4 className=\"text-lg\">\n\t\t\t\t\t\t\t\tWe've sent a verification email to{\" \"}\n\t\t\t\t\t\t\t\t<b>{email}</b>. <br />\n\t\t\t\t\t\t\t\tOnce you verify your email, we'll send you\n\t\t\t\t\t\t\t\tweekly member updates.\n\t\t\t\t\t\t\t</h4>\n\n\t\t\t\t\t\t\t<span className=\"block w-full rounded-md shadow-sm mt-5\">\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\tdisabled={resendTimeLeft > 0}\n\t\t\t\t\t\t\t\t\tclassName={classNames(\n\t\t\t\t\t\t\t\t\t\t\"w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white transition duration-150 ease-in-out\",\n\t\t\t\t\t\t\t\t\t\tresendTimeLeft > 0\n\t\t\t\t\t\t\t\t\t\t\t? \"bg-indigo-400\"\n\t\t\t\t\t\t\t\t\t\t\t: \"bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:ring-indigo-500 active:bg-indigo-700\"\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\tif (resendTimeLeft > 0) return;\n\t\t\t\t\t\t\t\t\t\tsetResendTimeLeft(60);\n\t\t\t\t\t\t\t\t\t\tsetTimesResent((old) => old + 1);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{resendTimeLeft > 0\n\t\t\t\t\t\t\t\t\t\t? `If you don't get the email after ${resendTimeLeft} second${\n\t\t\t\t\t\t\t\t\t\t\t\tresendTimeLeft === 1 ? \"\" : \"s\"\n\t\t\t\t\t\t\t\t\t\t  }, you can resend it`\n\t\t\t\t\t\t\t\t\t\t: \"Didn't get the email? Resend it\"}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t{timesResent >= 1 && (\n\t\t\t\t\t\t\t\t<p className=\"text-md mt-5\">\n\t\t\t\t\t\t\t\t\t<b>Having problems getting our emails?</b>\n\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\tRemember to check your spam folder. If you\n\t\t\t\t\t\t\t\t\tstill don't see it, send us an email at{\" \"}\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\thref=\"mailto:support@montavistamun.com\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"link\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tsupport@montavistamun.com\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t.\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t) : (\n\t\t\t\t<div className=\"mx-auto w-full max-w-sm\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h2 className=\"mt-6 text-3xl leading-9 font-extrabold text-gray-900\">\n\t\t\t\t\t\t\tStart your MUN journey today\n\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t<p className=\"mt-2 text-sm leading-5 text-gray-600 max-w\">\n\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\tto=\"/account/login\"\n\t\t\t\t\t\t\t\tstate={{\n\t\t\t\t\t\t\t\t\tcontinueURL: state?.continueURL,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tclassName=\"font-medium text-indigo-600 hover:text-indigo-500 focus:outline-none focus:underline transition ease-in-out duration-150\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tAlready have an account?\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"mt-8\">\n\t\t\t\t\t\t<div className=\"mt-6\">\n\t\t\t\t\t\t\t<form\n\t\t\t\t\t\t\t\tnoValidate\n\t\t\t\t\t\t\t\tonSubmit={async (e) => {\n\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\tif (!firebase) return;\n\n\t\t\t\t\t\t\t\t\t// the validation for this form is relatively lax because accounts are generally going\n\t\t\t\t\t\t\t\t\t// to be verified when they are used for anything significant, and decreasing sign-up\n\t\t\t\t\t\t\t\t\t// friction is more important than for some other web service\n\n\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t!name.trim() ||\n\t\t\t\t\t\t\t\t\t\t!email.trim() ||\n\t\t\t\t\t\t\t\t\t\t!password.trim()\n\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\tsetError(\"All fields are required.\");\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t// check the grade field seperately because it is the one they are most likely to not notice\n\t\t\t\t\t\t\t\t\t// since it's a radio and not an input field\n\t\t\t\t\t\t\t\t\t// for any other field, once they realize all fields are required, it should be easy\n\t\t\t\t\t\t\t\t\t// to instantly identify the empty input field(s)\n\t\t\t\t\t\t\t\t\tif (!grade) {\n\t\t\t\t\t\t\t\t\t\tsetError(\"Please enter your grade.\");\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\tname\n\t\t\t\t\t\t\t\t\t\t\t.trim()\n\t\t\t\t\t\t\t\t\t\t\t.split(\" \")\n\t\t\t\t\t\t\t\t\t\t\t.filter((n) => n.length > 1)\n\t\t\t\t\t\t\t\t\t\t\t.length < 2\n\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t// full name should have a first name of 2+ characters and\n\t\t\t\t\t\t\t\t\t\t// a last name of 2+ characters\n\t\t\t\t\t\t\t\t\t\tsetError(\n\t\t\t\t\t\t\t\t\t\t\t\"Please enter your full name.\"\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif (email.split(\"@\").length < 2) {\n\t\t\t\t\t\t\t\t\t\tsetError(\"Please enter a valid email.\");\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif (password.length < 8) {\n\t\t\t\t\t\t\t\t\t\tsetError(\n\t\t\t\t\t\t\t\t\t\t\t\"Your password should be at least 8 characters.\"\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tsetSubmitting(true);\n\t\t\t\t\t\t\t\t\tsetShowPassword(false);\n\n\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\tconst credential = await firebase\n\t\t\t\t\t\t\t\t\t\t\t.auth()\n\t\t\t\t\t\t\t\t\t\t\t.createUserWithEmailAndPassword(\n\t\t\t\t\t\t\t\t\t\t\t\temail,\n\t\t\t\t\t\t\t\t\t\t\t\tpassword\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tconst user = credential.user;\n\t\t\t\t\t\t\t\t\t\tif (!user) {\n\t\t\t\t\t\t\t\t\t\t\tthrow {\n\t\t\t\t\t\t\t\t\t\t\t\tmessage:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"User not found in credential. This is an internal error.\",\n\t\t\t\t\t\t\t\t\t\t\t\tcode:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"internal/no-user-in-credential\",\n\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tconst gradeNum = parseInt(grade, 10);\n\t\t\t\t\t\t\t\t\t\tconst firstName = name\n\t\t\t\t\t\t\t\t\t\t\t.trim()\n\t\t\t\t\t\t\t\t\t\t\t.split(\" \")\n\t\t\t\t\t\t\t\t\t\t\t.slice(0, -1)\n\t\t\t\t\t\t\t\t\t\t\t.join(\" \");\n\t\t\t\t\t\t\t\t\t\tconst lastName =\n\t\t\t\t\t\t\t\t\t\t\tname.trim().indexOf(\" \") > -1\n\t\t\t\t\t\t\t\t\t\t\t\t? name\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.trim()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.split(\" \")\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.slice(-1)[0]\n\t\t\t\t\t\t\t\t\t\t\t\t: \"\";\n\t\t\t\t\t\t\t\t\t\tawait Promise.all([\n\t\t\t\t\t\t\t\t\t\t\tfirebase\n\t\t\t\t\t\t\t\t\t\t\t\t.firestore()\n\t\t\t\t\t\t\t\t\t\t\t\t.collection(\"users\")\n\t\t\t\t\t\t\t\t\t\t\t\t.doc(user.uid)\n\t\t\t\t\t\t\t\t\t\t\t\t.set({\n\t\t\t\t\t\t\t\t\t\t\t\t\tfirstName,\n\t\t\t\t\t\t\t\t\t\t\t\t\tlastName,\n\t\t\t\t\t\t\t\t\t\t\t\t\temail,\n\t\t\t\t\t\t\t\t\t\t\t\t\tgrade: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tgrade: gradeNum,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tasOf: firebase.firestore.FieldValue.serverTimestamp(),\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassOf: getClassOf(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tgradeNum\n\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t} as FirebaseStoredUserData),\n\t\t\t\t\t\t\t\t\t\t\tuser.updateProfile({\n\t\t\t\t\t\t\t\t\t\t\t\tdisplayName: name,\n\t\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\t\tuser.sendEmailVerification(),\n\t\t\t\t\t\t\t\t\t\t\tuser.getIdToken().then((token) =>\n\t\t\t\t\t\t\t\t\t\t\t\taxios.post(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"/.netlify/functions/update-email-list\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfirstName,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlastName,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\temail,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tgrade: gradeNum,\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tauthorization: `Bearer ${token}`,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t]);\n\t\t\t\t\t\t\t\t\t\tsetVerificationEmailSent(true);\n\t\t\t\t\t\t\t\t\t\tsetDone(true);\n\t\t\t\t\t\t\t\t\t\tsetResendTimeLeft(59);\n\t\t\t\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\t\t\t\tconsole.log({ ...error });\n\t\t\t\t\t\t\t\t\t\tswitch (error.code) {\n\t\t\t\t\t\t\t\t\t\t\tcase \"auth/email-already-in-use\":\n\t\t\t\t\t\t\t\t\t\t\t\tsetError(\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tIt looks like you\n\t\t\t\t\t\t\t\t\t\t\t\t\t\talready have an account.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tTry{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tto=\"/account/login\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"link\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlogging in instead\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.\n\t\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\tcase \"auth/invalid-email\":\n\t\t\t\t\t\t\t\t\t\t\t\tsetError(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"The email address you entered isn't valid.\"\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\tcase \"auth/weak-password\":\n\t\t\t\t\t\t\t\t\t\t\t\tsetError(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"Please enter a stronger password. Try increasing the length or adding numbers / special characters.\"\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\t\t\tsetError(\n\t\t\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tError:{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{error.message}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tIf this was\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tunexpected, please\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\temail us at{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thref={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"mailto:support@montavistamun.com\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"link\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsupport@montavistamun.com\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tsetSubmitting(false);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tsetSubmitting(false);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t\t\t\thtmlFor=\"name\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"block text-sm font-medium leading-5 text-gray-700\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tFull Name\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t<div className=\"mt-1 rounded-md shadow-sm\">\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\tid=\"name\"\n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t\t\tvalue={name}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\tsetName(e.target.value)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tdisabled={submitting}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-300 transition duration-150 ease-in-out sm:text-sm sm:leading-5\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"mt-6\">\n\t\t\t\t\t\t\t\t\t<legend className=\"block text-sm font-medium leading-5 text-gray-700\">\n\t\t\t\t\t\t\t\t\t\tGrade\n\t\t\t\t\t\t\t\t\t\t{getIsSummer() && \" (in fall)\"}\n\t\t\t\t\t\t\t\t\t</legend>\n\t\t\t\t\t\t\t\t\t<div className=\"mt-1\">\n\t\t\t\t\t\t\t\t\t\t{[\"9\", \"10\", \"11\", \"12\"].map(\n\t\t\t\t\t\t\t\t\t\t\t(el, i) => (\n\t\t\t\t\t\t\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={el}\n\t\t\t\t\t\t\t\t\t\t\t\t\thtmlFor={`grade${el}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={`${\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ti == 0 ? \"\" : \"pl-3\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t} pr-3 inline-flex items-center py-2`}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid={`grade${el}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"form-input grade\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={submitting}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={`form-radio h-4 w-4 transition duration-150 ease-in-out ${\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsubmitting\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? `text-gray-600 ${\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgrade ==\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tel\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"bg-gray-200\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  }`\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"text-indigo-600\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.target.checked &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetGrade(el)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tchecked={grade == el}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"ml-2 block text-sm leading-5 font-medium text-gray-700\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{el}th\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"mt-6\">\n\t\t\t\t\t\t\t\t\t<div className=\"flex justify-between\">\n\t\t\t\t\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t\t\t\t\thtmlFor=\"email\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"block text-sm font-medium leading-5 text-gray-700\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tEmail\n\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm leading-5 text-gray-500\">\n\t\t\t\t\t\t\t\t\t\t\tWe'll email you weekly updates\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"mt-1 rounded-md shadow-sm\">\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\tid=\"email\"\n\t\t\t\t\t\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t\t\tvalue={email}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\tsetEmail(e.target.value);\n\n\t\t\t\t\t\t\t\t\t\t\t\t// if a suggestion is already being displayed, update it so it doesn't become outdated\n\t\t\t\t\t\t\t\t\t\t\t\t// but otherwise don't check it until the user unfocuses the input\n\t\t\t\t\t\t\t\t\t\t\t\tif (emailSuggestion) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst result = Mailcheck.run(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\temail:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.target.value,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetEmailSuggestion(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tresult?.full\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\tonBlur={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tconst result = Mailcheck.run({\n\t\t\t\t\t\t\t\t\t\t\t\t\temail: email,\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\tsetEmailSuggestion(\n\t\t\t\t\t\t\t\t\t\t\t\t\tresult?.full\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\tdisabled={submitting}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-300 transition duration-150 ease-in-out sm:text-sm sm:leading-5\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{emailSuggestion && (\n\t\t\t\t\t\t\t\t\t\t<p\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"mt-2 text-sm text-gray-500\"\n\t\t\t\t\t\t\t\t\t\t\tid=\"email-description\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tDid you mean{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\ttype={\"button\"}\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetEmail(emailSuggestion);\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetEmailSuggestion(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tundefined\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"link\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{emailSuggestion}\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t?\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div className=\"mt-6\">\n\t\t\t\t\t\t\t\t\t<div className=\"flex justify-between\">\n\t\t\t\t\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t\t\t\t\thtmlFor=\"password\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"block text-sm font-medium leading-5 text-gray-700\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tPassword\n\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm leading-5 text-gray-500\">\n\t\t\t\t\t\t\t\t\t\t\tFor Your Member Account\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"mt-1 relative rounded-md shadow-sm\">\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\tid=\"password\"\n\t\t\t\t\t\t\t\t\t\t\ttype={\n\t\t\t\t\t\t\t\t\t\t\t\tshowPassword\n\t\t\t\t\t\t\t\t\t\t\t\t\t? \"text\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t: \"password\"\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t\t\tvalue={password}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\tsetPassword(e.target.value)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tdisabled={submitting}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-300 transition duration-150 ease-in-out sm:text-sm sm:leading-5\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<div className=\"absolute inset-y-0 right-0 flex items-center\">\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetShowPassword(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(old) => !old\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={submitting}\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\ttitle={\n\t\t\t\t\t\t\t\t\t\t\t\t\tshowPassword\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"Hide Password\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"Show Password\"\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\ttabIndex={\n\t\t\t\t\t\t\t\t\t\t\t\t\t-1\n\t\t\t\t\t\t\t\t\t\t\t\t} /* Allowing it to be tabbable would be bad because a user could press tab and then immediately press enter, expeciting the submit button to get pressed but instead revealing their password. */\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"h-full py-0 px-3 border-transparent bg-transparent text-gray-500 sm:text-sm sm:leading-5 rounded-md focus:outline-none transition duration-150 ease-in-out \" +\n\t\t\t\t\t\t\t\t\t\t\t\t\t(submitting\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"focus:ring-blue-500 focus:border-blue-300 hover:text-gray-700 active:text-gray-900 \"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"\")\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{showPassword ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<EyeOff />\n\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Eye />\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t{error && (\n\t\t\t\t\t\t\t\t\t<div className=\"mt-6 text-left\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"text-sm  text-red-400 leading-5\">\n\t\t\t\t\t\t\t\t\t\t\t{typeof error === \"string\" ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<p>{error}</p>\n\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t<>{error}</>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t<div className=\"mt-6\">\n\t\t\t\t\t\t\t\t\t<p className=\"mt-2 text-sm text-gray-500\">\n\t\t\t\t\t\t\t\t\t\tYou must be a MVHS student to join.\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t<p className=\"mt-2 text-sm text-gray-500\">\n\t\t\t\t\t\t\t\t\t\tWhen you create your MVMUN account, you\n\t\t\t\t\t\t\t\t\t\twill be automatically sent member\n\t\t\t\t\t\t\t\t\t\tupdates every week.\n\t\t\t\t\t\t\t\t\t</p>\n\n\t\t\t\t\t\t\t\t\t<span className=\"block w-full rounded-md shadow-sm mt-2\">\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\t\t\tdisabled={submitting}\n\t\t\t\t\t\t\t\t\t\t\tclassName={classNames(\n\t\t\t\t\t\t\t\t\t\t\t\t\"w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white transition duration-150 ease-in-out\",\n\t\t\t\t\t\t\t\t\t\t\t\tsubmitting\n\t\t\t\t\t\t\t\t\t\t\t\t\t? \"bg-indigo-400\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t: \"bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:ring-indigo-500 active:bg-indigo-700\"\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{submitting\n\t\t\t\t\t\t\t\t\t\t\t\t? \"Creating Account...\"\n\t\t\t\t\t\t\t\t\t\t\t\t: \"Create Account\"}\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</AuthLayout>\n\t);\n}\n","/Users/jmeng/Documents/code/montavistamun/src/pages/account/email-action/confirm-email-change.tsx",[],"/Users/jmeng/Documents/code/montavistamun/src/pages/account/email-action/handle.tsx",["707"],"import { navigate, PageProps } from \"gatsby\";\nimport React, { useState } from \"react\";\nimport { AuthLayout } from \"../../../components/layout\";\n\nexport default function HandleEmailActionPage({ location }: PageProps) {\n\tconst [error, setError] = useState(false);\n\n\tReact.useEffect(() => {\n\t\tconst params = new URLSearchParams(location.search);\n\t\tconst mode = params.get(\"mode\");\n\t\tif (\n\t\t\tmode &&\n\t\t\t[\n\t\t\t\t\"resetPassword\",\n\t\t\t\t\"recoverEmail\",\n\t\t\t\t\"verifyEmail\",\n\t\t\t\t\"verifyAndChangeEmail\",\n\t\t\t].includes(mode)\n\t\t) {\n\t\t\tconst pageMap = {\n\t\t\t\tresetPassword: \"reset-password\",\n\t\t\t\trecoverEmail: \"recover-email\",\n\t\t\t\tverifyEmail: \"verify-email\",\n\t\t\t\tverifyAndChangeEmail: \"confirm-email-change\",\n\t\t\t};\n\t\t\tnavigate(\n\t\t\t\t\"/account/email-action/\" +\n\t\t\t\t\tpageMap[mode as keyof typeof pageMap],\n\t\t\t\t{\n\t\t\t\t\tstate: {\n\t\t\t\t\t\tcode: params.get(\"oobCode\"),\n\t\t\t\t\t\tcontinueURL: params.get(\"continueUrl\"),\n\t\t\t\t\t},\n\t\t\t\t\treplace: true,\n\t\t\t\t}\n\t\t\t);\n\t\t} else {\n\t\t\tsetError(true);\n\t\t}\n\t}, []);\n\n\treturn (\n\t\t<AuthLayout title=\"Loading...\">\n\t\t\t{!error && <h1 className=\"text-3xl font-bold\">Loading...</h1>}\n\t\t\t{error && (\n\t\t\t\t<>\n\t\t\t\t\t<h1 className=\"text-3xl font-bold\">\n\t\t\t\t\t\tYou found a broken link!\n\t\t\t\t\t</h1>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tThis page can only be accessed via special links that we\n\t\t\t\t\t\tsend you. If you followed a link to get to this page,\n\t\t\t\t\t\tplease email{\" \"}\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref=\"mailto:support@montavistamun.com\"\n\t\t\t\t\t\t\tclassName=\"link\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tsupport@montavistamun.com\n\t\t\t\t\t\t</a>{\" \"}\n\t\t\t\t\t\tand let us know how you got to this page.\n\t\t\t\t\t</p>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</AuthLayout>\n\t);\n}\n","/Users/jmeng/Documents/code/montavistamun/src/pages/account/email-action/recover-email.tsx",[],"/Users/jmeng/Documents/code/montavistamun/src/pages/account/email-action/reset-password.tsx",[],"/Users/jmeng/Documents/code/montavistamun/src/pages/account/email-action/verify-email.tsx",[],"/Users/jmeng/Documents/code/montavistamun/src/pages/account/index.tsx",[],"/Users/jmeng/Documents/code/montavistamun/src/pages/account/login.tsx",[],"/Users/jmeng/Documents/code/montavistamun/src/pages/account/logout.tsx",[],"/Users/jmeng/Documents/code/montavistamun/src/pages/account/recover.tsx",[],"/Users/jmeng/Documents/code/montavistamun/src/pages/account/send-email-verification.tsx",["708","709"],"import classNames from \"classnames\";\nimport { Link } from \"gatsby\";\nimport React, { useState } from \"react\";\nimport useRequireLogin from \"../../components/accounts/useRequireLogin\";\nimport { AuthLayout } from \"../../components/layout\";\nimport AuthContext from \"../../context/AuthContext\";\nimport useFirebase from \"../../firebase/useFirebase\";\nexport interface EmailVerificationProps {\n\t/**\n\t * If provided, a continue button will be displayed allowing the user to continue to their original action.\n\t */\n\tcontinueURL?: string;\n\t/**\n\t * The name of the page to continue to. This will be used to customize the continue button text after a successful verification.\n\t */\n\tcontinueName?: string;\n}\nexport default function SendEmailVerificationPage({\n\tlocation: { state },\n}: {\n\tlocation: { state: EmailVerificationProps };\n}): React.ReactElement {\n\tuseRequireLogin();\n\tconst { user, loading } = React.useContext(AuthContext);\n\tconst [submitting, setSubmitting] = useState(false);\n\tconst [error, setError] = React.useState<React.ReactNode>(\"\");\n\tconst [success, setSuccess] = useState(false);\n\tconst firebase = useFirebase();\n\n\treturn (\n\t\t<AuthLayout title={\"Verify Your Email\"}>\n\t\t\t{user?.emailVerified ? (\n\t\t\t\t<div className=\"mt-8\">\n\t\t\t\t\t<div className=\"mt-6\">\n\t\t\t\t\t\t<h3\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\"mt-6 text-3xl leading-9 font-extrabold text-gray-900\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tYour email has already been verified.\n\t\t\t\t\t\t</h3>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t) : (\n\t\t\t\t<>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h2 className=\"mt-6 text-3xl leading-9 font-extrabold text-gray-900\">\n\t\t\t\t\t\t\tPlease verify your email\n\t\t\t\t\t\t\t{state?.continueURL ? \" to continue\" : \"\"}\n\t\t\t\t\t\t</h2>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{!success && (\n\t\t\t\t\t\t<div className=\"mt-8\">\n\t\t\t\t\t\t\t<div className=\"mt-6\">\n\t\t\t\t\t\t\t\t<h3 className={\"text-xl font-semibold\"}>\n\t\t\t\t\t\t\t\t\tVerifying your email is required for access\n\t\t\t\t\t\t\t\t\tto conference registration and member\n\t\t\t\t\t\t\t\t\tresources.\n\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t<h4 className={\"text-md mt-4\"}>\n\t\t\t\t\t\t\t\t\tIf <b>{user?.email || \"loading...\"}</b> is\n\t\t\t\t\t\t\t\t\tnot your email, then you'll need to{\" \"}\n\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\tto=\"/account/settings\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"link\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tchange your email\n\t\t\t\t\t\t\t\t\t</Link>{\" \"}\n\t\t\t\t\t\t\t\t\tbefore you verify it.\n\t\t\t\t\t\t\t\t</h4>\n\n\t\t\t\t\t\t\t\t{error && (\n\t\t\t\t\t\t\t\t\t<p className=\"text-red-700\">\n\t\t\t\t\t\t\t\t\t\tError: {error}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tdisabled={submitting || !user}\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\tsetSubmitting(true);\n\t\t\t\t\t\t\t\t\t\tif (!user) return;\n\t\t\t\t\t\t\t\t\t\tuser.sendEmailVerification()\n\t\t\t\t\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\t\t\t\t\tsetSubmitting(false);\n\t\t\t\t\t\t\t\t\t\t\t\tsetSuccess(true);\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\t\t\t\t\t\t\tsetSubmitting(false);\n\t\t\t\t\t\t\t\t\t\t\t\tsetError(\n\t\t\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{error.message} If this\n\t\t\t\t\t\t\t\t\t\t\t\t\t\twas unexpected, please\n\t\t\t\t\t\t\t\t\t\t\t\t\t\temail{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thref=\"mailto:support@montavistamun.com\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"link\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsupport@montavistamun.com\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.\n\t\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tclassName={classNames(\n\t\t\t\t\t\t\t\t\t\t\"mt-5 w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white transition duration-150 ease-in-out\",\n\t\t\t\t\t\t\t\t\t\tsubmitting\n\t\t\t\t\t\t\t\t\t\t\t? \"bg-indigo-400\"\n\t\t\t\t\t\t\t\t\t\t\t: \"bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:ring-indigo-500 active:bg-indigo-700\"\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{submitting\n\t\t\t\t\t\t\t\t\t\t? \"Sending Verification Email...\"\n\t\t\t\t\t\t\t\t\t\t: \"Send Verification Email\"}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{success && (\n\t\t\t\t\t\t<div className=\"mt-8\">\n\t\t\t\t\t\t\t<div className=\"mt-6\">\n\t\t\t\t\t\t\t\t<h4\n\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\"text-2xl font-bold text-gray-900\"\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tWe've sent an email to{\" \"}\n\t\t\t\t\t\t\t\t\t<b>{user?.email || \"you\"}</b>. If your\n\t\t\t\t\t\t\t\t\taccount email is incorrect, you can change\n\t\t\t\t\t\t\t\t\tit in{\" \"}\n\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\tto={\"/account/settings\"}\n\t\t\t\t\t\t\t\t\t\tclassName={\"link\"}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tsettings\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t.\n\t\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\tOn rare occasions, our emails can take up to\n\t\t\t\t\t\t\t\t\t10 minutes to arrive. If you still don't see\n\t\t\t\t\t\t\t\t\tit after 10 minutes, you can try{\" \"}\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tonClick={() => window.location.reload()}\n\t\t\t\t\t\t\t\t\t\tclassName=\"link\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tresending the email\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t.\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</>\n\t\t\t)}\n\t\t</AuthLayout>\n\t);\n}\n","/Users/jmeng/Documents/code/montavistamun/src/pages/account/settings.tsx",["710","711","712"],"import axios from \"axios\";\nimport type firebaseType from \"firebase\";\nimport { Check, InformationCircle } from \"heroicons-react\";\nimport moment from \"moment\";\nimport React, { useState } from \"react\";\nimport Select from \"react-select\";\nimport useRequireLogin from \"../../components/accounts/useRequireLogin\";\nimport { Layout, Main } from \"../../components/layout\";\nimport Transition from \"../../components/Transition\";\nimport AuthContext from \"../../context/AuthContext\";\nimport \"../../css/select.css\";\nimport FirebaseStoredUserData from \"../../firebase/FirebaseStoredUserData\";\nimport useFirebase from \"../../firebase/useFirebase\";\nimport { getGrade, getLastDayOfSchool } from \"../../utils/schoolYearUtils\";\nexport default function SettingsPage(): React.ReactElement {\n\tconst { user, loading } = React.useContext(AuthContext);\n\tconst firebase = useFirebase();\n\n\tconst [passwordModalOpen, setPasswordModalOpen] = useState(false);\n\tconst [emailModalOpen, setEmailModalOpen] = useState(false);\n\tuseRequireLogin();\n\n\treturn (\n\t\t<Layout title=\"Account Settings\" gray>\n\t\t\t<Main wide className={\"min-h-ca\"}>\n\t\t\t\t<h2 className=\"text-2xl font-bold leading-7 text-gray-900 sm:text-3xl sm:leading-9 sm:truncate\">\n\t\t\t\t\tAccount Settings\n\t\t\t\t</h2>\n\t\t\t\t<p className=\"text-lg font-semibold mt-5 leading-6 text-gray-900 sm:text-xl sm:leading:7\">\n\t\t\t\t\tThese settings affect both your account and the member\n\t\t\t\t\tupdate emails we send you.\n\t\t\t\t</p>\n\n\t\t\t\t<div className=\"mt-15 sm:mt-10\">\n\t\t\t\t\t<div className=\"md:grid md:grid-cols-3 md:gap-6\">\n\t\t\t\t\t\t<div className=\"md:col-span-1\">\n\t\t\t\t\t\t\t<div className=\"px-4 sm:px-0\">\n\t\t\t\t\t\t\t\t<h3 className=\"text-lg font-medium leading-6 text-gray-900\">\n\t\t\t\t\t\t\t\t\tPersonal Information\n\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"mt-5 md:mt-0 md:col-span-2\">\n\t\t\t\t\t\t\t<PersonalInformationDisplay />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"hidden sm:block\">\n\t\t\t\t\t<div className=\"py-5\">\n\t\t\t\t\t\t<div className=\"border-t border-gray-200\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"mt-10 sm:mt-0\">\n\t\t\t\t\t<div className=\"md:grid md:grid-cols-3 md:gap-6\">\n\t\t\t\t\t\t<div className=\"md:col-span-1\">\n\t\t\t\t\t\t\t<div className=\"px-4 sm:px-0\">\n\t\t\t\t\t\t\t\t<h3 className=\"text-lg font-medium leading-6 text-gray-900\">\n\t\t\t\t\t\t\t\t\tEmail and Password\n\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t<p className=\"mt-1 text-sm leading-5 text-gray-600\">\n\t\t\t\t\t\t\t\t\tThis information allows you to log in to\n\t\t\t\t\t\t\t\t\tyour account. This also controls where we\n\t\t\t\t\t\t\t\t\tsend member update emails.\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"mt-5 md:mt-0 md:col-span-2\">\n\t\t\t\t\t\t\t<div className=\"shadow sm:rounded-md\">\n\t\t\t\t\t\t\t\t<div className=\"px-4 py-5 bg-white sm:p-6 rounded-b-md\">\n\t\t\t\t\t\t\t\t\t<div className=\"grid grid-cols-6 gap-3 sm:gap-6\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"col-span-6\">\n\t\t\t\t\t\t\t\t\t\t\t<label className=\"block text-sm font-medium leading-5 text-gray-700\">\n\t\t\t\t\t\t\t\t\t\t\t\tEmail Address\n\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"mt-1 block w-full py-2 focus:outline-none sm:text-sm sm:leading-5\">\n\t\t\t\t\t\t\t\t\t\t\t\t{user?.email\n\t\t\t\t\t\t\t\t\t\t\t\t\t? user.email\n\t\t\t\t\t\t\t\t\t\t\t\t\t: \"loading...\"}{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetEmailModalOpen(true)\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"link\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\tChange Your Email\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t<ChangeEmailModal\n\t\t\t\t\t\t\t\t\t\t\t\tuser={user}\n\t\t\t\t\t\t\t\t\t\t\t\tisOpen={emailModalOpen}\n\t\t\t\t\t\t\t\t\t\t\t\tonClose={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetEmailModalOpen(false)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"col-span-6\">\n\t\t\t\t\t\t\t\t\t\t\t<label className=\"block text-sm font-medium leading-5 text-gray-700\">\n\t\t\t\t\t\t\t\t\t\t\t\tPassword\n\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"mt-1 block w-full py-2 focus:outline-none sm:text-sm sm:leading-5\">\n\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetPasswordModalOpen(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"link\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\tChange Your Password\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t<ChangePasswordModal\n\t\t\t\t\t\t\t\t\t\t\t\tuser={user}\n\t\t\t\t\t\t\t\t\t\t\t\tisOpen={passwordModalOpen}\n\t\t\t\t\t\t\t\t\t\t\t\tonClose={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetPasswordModalOpen(false)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t{/*<div className=\"hidden sm:block\">*/}\n\t\t\t\t{/*\t<div className=\"py-5\">*/}\n\t\t\t\t{/*\t\t<div className=\"border-t border-gray-200\"></div>*/}\n\t\t\t\t{/*\t</div>*/}\n\t\t\t\t{/*</div>*/}\n\t\t\t\t{/*<div className=\"mt-10 sm:mt-0\">*/}\n\t\t\t\t{/*\t<div className=\"md:grid md:grid-cols-3 md:gap-6\">*/}\n\t\t\t\t{/*\t\t<div className=\"md:col-span-1\">*/}\n\t\t\t\t{/*\t\t\t<div className=\"px-4 sm:px-0\">*/}\n\t\t\t\t{/*\t\t\t\t<h3 className=\"text-lg font-medium leading-6 text-gray-900\">*/}\n\t\t\t\t{/*\t\t\t\t\tDisable Account*/}\n\t\t\t\t{/*\t\t\t\t</h3>*/}\n\t\t\t\t{/*\t\t\t\t<p className=\"mt-1 text-sm leading-5 text-gray-600\">*/}\n\t\t\t\t{/*\t\t\t\t\tStop participating in MVMUN and be*/}\n\t\t\t\t{/*\t\t\t\t\tunsubscribed from our emails.*/}\n\t\t\t\t{/*\t\t\t\t</p>*/}\n\t\t\t\t{/*\t\t\t</div>*/}\n\t\t\t\t{/*\t\t</div>*/}\n\t\t\t\t{/*\t\t<div className=\"mt-5 md:mt-0 md:col-span-2\">*/}\n\t\t\t\t{/*\t\t\t<form action=\"#\" method=\"POST\">*/}\n\t\t\t\t{/*\t\t\t\t<div className=\"shadow overflow-hidden sm:rounded-md\">*/}\n\t\t\t\t{/*\t\t\t\t\t<div className=\"px-4 py-5 bg-white sm:p-6\">*/}\n\t\t\t\t{/*\t\t\t\t\t\t<fieldset>*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t<legend className=\"text-base leading-6 font-medium text-gray-900\">*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\tBy Email*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t</legend>*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t<div className=\"mt-4\">*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t<div className=\"flex items-start\">*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t<div className=\"flex items-center h-5\">*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t<input*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t\tid=\"comments\"*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\"*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t\tclassName=\"form-checkbox h-4 w-4 text-indigo-600 transition duration-150 ease-in-out\"*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t/>*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t</div>*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t<div className=\"ml-3 text-sm leading-5\">*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t<label*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t\thtmlFor=\"comments\"*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t\tclassName=\"font-medium text-gray-700\"*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t>*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t\tComments*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t</label>*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t<p className=\"text-gray-500\">*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t\tGet notified when*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t\tsomeones posts a*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t\tcomment on a*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t\tposting.*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t</p>*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t</div>*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t</div>*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t<div className=\"mt-4\">*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t<div className=\"flex items-start\">*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center h-5\">*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t\t<input*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t\t\tid=\"candidates\"*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\"*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"form-checkbox h-4 w-4 text-indigo-600 transition duration-150 ease-in-out\"*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t\t/>*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t</div>*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t<div className=\"ml-3 text-sm leading-5\">*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t\t<label*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t\t\thtmlFor=\"candidates\"*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"font-medium text-gray-700\"*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t\t>*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t\t\tCandidates*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t\t</label>*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-gray-500\">*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t\t\tGet notified*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t\t\twhen a candidate*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t\t\tapplies for a*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t\t\tjob.*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t\t</p>*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t</div>*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t</div>*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t</div>*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t<div className=\"mt-4\">*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t<div className=\"flex items-start\">*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center h-5\">*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t\t<input*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t\t\tid=\"offers\"*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\"*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"form-checkbox h-4 w-4 text-indigo-600 transition duration-150 ease-in-out\"*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t\t/>*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t</div>*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t<div className=\"ml-3 text-sm leading-5\">*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t\t<label*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t\t\thtmlFor=\"offers\"*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"font-medium text-gray-700\"*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t\t>*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t\t\tOffers*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t\t</label>*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-gray-500\">*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t\t\tGet notified*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t\t\twhen a candidate*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t\t\taccepts or*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t\t\trejects an*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t\t\toffer.*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t\t</p>*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t</div>*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t</div>*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t</div>*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t</div>*/}\n\t\t\t\t{/*\t\t\t\t\t\t</fieldset>*/}\n\t\t\t\t{/*\t\t\t\t\t\t<fieldset className=\"mt-6\">*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t<legend className=\"text-base leading-6 font-medium text-gray-900\">*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\tPush Notifications*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t</legend>*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t<p className=\"text-sm leading-5 text-gray-500\">*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\tThese are delivered via SMS to*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\tyour mobile phone.*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t</p>*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t<div className=\"mt-4\">*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t<div className=\"flex items-center\">*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t<input*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\tid=\"push_everything\"*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\tname=\"form-input push_notifications\"*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\ttype=\"radio\"*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\tclassName=\"form-radio h-4 w-4 text-indigo-600 transition duration-150 ease-in-out\"*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t/>*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t<label*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\thtmlFor=\"push_everything\"*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\tclassName=\"ml-3\"*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t>*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t<span className=\"block text-sm leading-5 font-medium text-gray-700\">*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t\tEverything*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t</span>*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t</label>*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t</div>*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t<div className=\"mt-4 flex items-center\">*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t<input*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\tid=\"push_email\"*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\tname=\"form-input push_notifications\"*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\ttype=\"radio\"*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\tclassName=\"form-radio h-4 w-4 text-indigo-600 transition duration-150 ease-in-out\"*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t/>*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t<label*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\thtmlFor=\"push_email\"*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\tclassName=\"ml-3\"*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t>*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t<span className=\"block text-sm leading-5 font-medium text-gray-700\">*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t\tSame as email*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t</span>*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t</label>*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t</div>*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t<div className=\"mt-4 flex items-center\">*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t<input*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\tid=\"push_nothing\"*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\tname=\"form-input push_notifications\"*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\ttype=\"radio\"*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\tclassName=\"form-radio h-4 w-4 text-indigo-600 transition duration-150 ease-in-out\"*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t/>*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t<label*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\thtmlFor=\"push_nothing\"*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\tclassName=\"ml-3\"*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t>*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t<span className=\"block text-sm leading-5 font-medium text-gray-700\">*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t\tNo push*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t\tnotifications*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t\t</span>*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t\t</label>*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t\t</div>*/}\n\t\t\t\t{/*\t\t\t\t\t\t\t</div>*/}\n\t\t\t\t{/*\t\t\t\t\t\t</fieldset>*/}\n\t\t\t\t{/*\t\t\t\t\t</div>*/}\n\t\t\t\t{/*\t\t\t\t\t<div className=\"px-4 py-3 bg-gray-50 text-right sm:px-6\">*/}\n\t\t\t\t{/*\t\t\t\t\t\t<button className=\"py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 shadow-sm hover:bg-indigo-500 focus:outline-none focus:ring-blue-500 focus:bg-indigo-500 active:bg-indigo-600 transition duration-150 ease-in-out\">*/}\n\t\t\t\t{/*\t\t\t\t\t\t\tSave*/}\n\t\t\t\t{/*\t\t\t\t\t\t</button>*/}\n\t\t\t\t{/*\t\t\t\t\t</div>*/}\n\t\t\t\t{/*\t\t\t\t</div>*/}\n\t\t\t\t{/*\t\t\t</form>*/}\n\t\t\t\t{/*\t\t</div>*/}\n\t\t\t\t{/*\t</div>*/}\n\t\t\t\t{/*</div>*/}\n\t\t\t</Main>\n\t\t</Layout>\n\t);\n}\nfunction PersonalInformationDisplay() {\n\tconst { user, loading } = React.useContext(AuthContext);\n\tconst firebase = useFirebase();\n\tconst [currentFirstName, setCurrentFirstName] = useState(\"\");\n\tconst [currentLastName, setCurrentLastName] = useState(\"\");\n\n\tconst [firstName, setFirstName] = useState(\"Loading...\");\n\tconst [lastName, setLastName] = useState(\"Loading...\");\n\tconst [currentClassOf, setCurrentClassOf] = useState(-1);\n\tconst [classOf, setClassOf] = useState(-1);\n\tconst [loadingProfile, setLoadingProfile] = useState(true);\n\tconst [profileChangeSuccess, setProfileChangeSuccess] = useState(false);\n\tconst [profileChangeError, setProfileChangeError] = React.useState<\n\t\tReact.ReactNode\n\t>(\"\");\n\tconst [profileChangeSubmitting, setProfileChangeSubmitting] = useState(\n\t\tfalse\n\t);\n\tconst hasUpdates = React.useMemo(\n\t\t() =>\n\t\t\tfirstName !== currentFirstName ||\n\t\t\tlastName !== currentLastName ||\n\t\t\tclassOf !== currentClassOf,\n\t\t[\n\t\t\tfirstName,\n\t\t\tlastName,\n\t\t\tclassOf,\n\t\t\tcurrentFirstName,\n\t\t\tcurrentLastName,\n\t\t\tcurrentClassOf,\n\t\t]\n\t);\n\tReact.useEffect(() => {\n\t\tif (!firebase || !user) return;\n\t\tif (currentFirstName != \"\") return;\n\t\tfirebase\n\t\t\t.firestore()\n\t\t\t.collection(\"users\")\n\t\t\t.doc(user?.uid)\n\t\t\t.get()\n\t\t\t.then((snapshot) => snapshot.data() as FirebaseStoredUserData)\n\t\t\t.then((data) => {\n\t\t\t\tsetCurrentFirstName(data.firstName);\n\t\t\t\tsetCurrentLastName(data.lastName);\n\t\t\t\tsetFirstName(data.firstName);\n\t\t\t\tsetLastName(data.lastName);\n\t\t\t\tsetClassOf(data.classOf);\n\t\t\t\tsetCurrentClassOf(data.classOf);\n\t\t\t\tsetLoadingProfile(false);\n\t\t\t});\n\t}, [firebase, user]);\n\tconst classOfOptions = React.useMemo(() => {\n\t\tconst temp = [];\n\t\tconst yearOfNextLastDayOfSchool = moment().isAfter(getLastDayOfSchool())\n\t\t\t? moment().year() + 1\n\t\t\t: moment().year();\n\t\tfor (\n\t\t\tlet i = yearOfNextLastDayOfSchool;\n\t\t\ti < yearOfNextLastDayOfSchool + 4;\n\t\t\ti++\n\t\t) {\n\t\t\ttemp.push({\n\t\t\t\tlabel: `${i} (Grade ${getGrade(i)})`,\n\t\t\t\tvalue: i,\n\t\t\t});\n\t\t}\n\t\treturn temp;\n\t}, []);\n\n\treturn (\n\t\t<form\n\t\t\tnoValidate\n\t\t\tonSubmit={(e) => {\n\t\t\t\te.preventDefault();\n\n\t\t\t\tif (!hasUpdates || loadingProfile || profileChangeSubmitting)\n\t\t\t\t\treturn;\n\t\t\t\tsetProfileChangeError(\"\");\n\t\t\t\tsetProfileChangeSuccess(false);\n\t\t\t\tif (!firebase || !user) return;\n\t\t\t\tif (!firstName || !lastName) {\n\t\t\t\t\tsetProfileChangeError(\n\t\t\t\t\t\t\"Please enter a first and last name.\"\n\t\t\t\t\t);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tsetProfileChangeSubmitting(true);\n\t\t\t\tPromise.all([\n\t\t\t\t\tuser.updateProfile({\n\t\t\t\t\t\tdisplayName: firstName + \" \" + lastName,\n\t\t\t\t\t}),\n\t\t\t\t\tfirebase\n\t\t\t\t\t\t.firestore()\n\t\t\t\t\t\t.collection(\"users\")\n\t\t\t\t\t\t.doc(user.uid)\n\t\t\t\t\t\t.update({\n\t\t\t\t\t\t\tfirstName,\n\t\t\t\t\t\t\tlastName,\n\t\t\t\t\t\t\tclassOf,\n\t\t\t\t\t\t}),\n\t\t\t\t])\n\t\t\t\t\t.then(async () => {\n\t\t\t\t\t\tawait user.getIdToken().then((token) => {\n\t\t\t\t\t\t\treturn axios.post(\n\t\t\t\t\t\t\t\t\"/.netlify/functions/update-email-list\",\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\temail: user.email,\n\t\t\t\t\t\t\t\t\tfirstName,\n\t\t\t\t\t\t\t\t\tlastName,\n\t\t\t\t\t\t\t\t\tgrade: getGrade(classOf),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\t\t\tauthorization: `Bearer ${token}`,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tsetProfileChangeSubmitting(false);\n\t\t\t\t\t\tsetProfileChangeSuccess(true);\n\t\t\t\t\t\tsetCurrentFirstName(firstName);\n\t\t\t\t\t\tsetCurrentLastName(lastName);\n\t\t\t\t\t\tsetCurrentClassOf(classOf);\n\t\t\t\t\t})\n\t\t\t\t\t.catch((e) => {\n\t\t\t\t\t\tsetProfileChangeSubmitting(false);\n\t\t\t\t\t\tsetProfileChangeError(\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<p>Error: {e.message}</p>\n\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\tIf this was unexpected, please email us at{\" \"}\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\thref={\n\t\t\t\t\t\t\t\t\t\t\t\"mailto:support@montavistamun.com\"\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\"text-blue-500 active:text-blue-700 hover:underline\"\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tsupport@montavistamun.com\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t.\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t}}\n\t\t>\n\t\t\t<div className=\"shadow sm:rounded-md\">\n\t\t\t\t<div className=\"px-4 py-5 bg-white sm:p-6\">\n\t\t\t\t\t<div className=\"grid grid-cols-6 gap-6\">\n\t\t\t\t\t\t<div className=\"col-span-6 sm:col-span-3\">\n\t\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t\thtmlFor=\"first_name\"\n\t\t\t\t\t\t\t\tclassName=\"block text-sm font-medium leading-5 text-gray-700\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tFirst name\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tid=\"first_name\"\n\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\tloadingProfile || profileChangeSubmitting\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tvalue={firstName}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tsetFirstName(e.target.value);\n\t\t\t\t\t\t\t\t\tsetProfileChangeError(\"\");\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\"mt-1 form-input block w-full py-2 px-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-300 transition duration-150 ease-in-out sm:text-sm sm:leading-5 \" +\n\t\t\t\t\t\t\t\t\t(loadingProfile || profileChangeSubmitting\n\t\t\t\t\t\t\t\t\t\t? \"bg-gray-100\"\n\t\t\t\t\t\t\t\t\t\t: \"\")\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className=\"col-span-6 sm:col-span-3\">\n\t\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t\thtmlFor=\"last_name\"\n\t\t\t\t\t\t\t\tclassName=\"block text-sm font-medium leading-5 text-gray-700\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tLast name\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tid=\"last_name\"\n\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\tloadingProfile || profileChangeSubmitting\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tvalue={lastName}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tsetLastName(e.target.value);\n\t\t\t\t\t\t\t\t\tsetProfileChangeError(\"\");\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\"mt-1 form-input block w-full py-2 px-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-300 transition duration-150 ease-in-out sm:text-sm sm:leading-5 \" +\n\t\t\t\t\t\t\t\t\t(loadingProfile || profileChangeSubmitting\n\t\t\t\t\t\t\t\t\t\t? \"bg-gray-100\"\n\t\t\t\t\t\t\t\t\t\t: \"\")\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"mt-6\">\n\t\t\t\t\t\t<label\n\t\t\t\t\t\t\thtmlFor=\"class_of\"\n\t\t\t\t\t\t\tclassName=\"block text-sm font-medium leading-5 text-gray-700\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tClass Of\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\tisClearable={classOf !== currentClassOf}\n\t\t\t\t\t\t\tisDisabled={\n\t\t\t\t\t\t\t\tloadingProfile || profileChangeSubmitting\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\toptions={classOfOptions}\n\t\t\t\t\t\t\tvalue={classOfOptions.find(\n\t\t\t\t\t\t\t\t(opt) => opt.value == classOf\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\tonChange={(opt) => {\n\t\t\t\t\t\t\t\tsetClassOf(\n\t\t\t\t\t\t\t\t\tArray.isArray(opt)\n\t\t\t\t\t\t\t\t\t\t? (() => {\n\t\t\t\t\t\t\t\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"Multiple grades selected\"\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t  })()\n\t\t\t\t\t\t\t\t\t\t: opt === null\n\t\t\t\t\t\t\t\t\t\t? currentClassOf\n\t\t\t\t\t\t\t\t\t\t: // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t\t\t\t\t\t\t\t\t  //@ts-ignore\n\t\t\t\t\t\t\t\t\t\t  opt.value\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tclassName={\"mt-1 block w-full text-sm\"}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{/*<span id=\"class_of\">*/}\n\t\t\t\t\t\t{/*\t{classOf} (<a>this is wrong</a>)*/}\n\t\t\t\t\t\t{/*</span>*/}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{profileChangeSuccess && !profileChangeError && (\n\t\t\t\t\t\t<p className=\"text-green-600 my-2 mt-5\">\n\t\t\t\t\t\t\tYour profile has been updated.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t)}\n\t\t\t\t\t{/* don't show the error if they change it back to the original name */}\n\t\t\t\t\t{profileChangeError && hasUpdates && (\n\t\t\t\t\t\t<p className=\"text-red-600 my-2 mt-5\">\n\t\t\t\t\t\t\t{profileChangeError}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"px-4 py-3 bg-gray-50 text-right sm:px-6 rounded-b-md\">\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t!hasUpdates ||\n\t\t\t\t\t\t\tloadingProfile ||\n\t\t\t\t\t\t\tprofileChangeSubmitting\n\t\t\t\t\t\t}\n\t\t\t\t\t\tclassName={`py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white ${\n\t\t\t\t\t\t\t!hasUpdates ||\n\t\t\t\t\t\t\tloadingProfile ||\n\t\t\t\t\t\t\tprofileChangeSubmitting\n\t\t\t\t\t\t\t\t? \"bg-indigo-300\"\n\t\t\t\t\t\t\t\t: \"bg-indigo-600 hover:bg-indigo-500 focus:ring-blue-500 active:bg-indigo-600\"\n\t\t\t\t\t\t} shadow-sm focus:outline-none`}\n\t\t\t\t\t>\n\t\t\t\t\t\t{profileChangeSubmitting\n\t\t\t\t\t\t\t? \"Loading...\"\n\t\t\t\t\t\t\t: !hasUpdates || loadingProfile\n\t\t\t\t\t\t\t? \"No Changes to Save\"\n\t\t\t\t\t\t\t: \"Save\"}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</form>\n\t);\n}\nfunction ChangePasswordModal({\n\tisOpen,\n\tonClose,\n\tuser,\n}: {\n\tisOpen: boolean;\n\tonClose: () => void;\n\t// can be null until the form is submitted\n\tuser?: firebaseType.User | null;\n}) {\n\tconst [submitting, setSubmitting] = useState(false);\n\tconst [success, setSuccess] = useState(false);\n\tconst [currentPassword, setCurrentPassword] = useState(\"\");\n\tconst [newPassword, setNewPassword] = useState(\"\");\n\tconst [confirmNewPassword, setConfirmNewPassword] = useState(\"\");\n\tconst [error, setError] = React.useState<React.ReactNode>(\"\");\n\tconst resetForm = () => {\n\t\tsetCurrentPassword(\"\");\n\t\tsetNewPassword(\"\");\n\t\tsetConfirmNewPassword(\"\");\n\t\tsetError(\"\");\n\t\tsetSubmitting(false);\n\t\tsetTimeout(() => setSuccess(false), 300); // revert back to the normal view after the transition is over.\n\t};\n\tconst firebase = useFirebase();\n\treturn (\n\t\t<Transition show={isOpen}>\n\t\t\t<div className=\"fixed bottom-0 inset-x-0 px-4 pb-6 sm:inset-0 sm:p-0 sm:flex sm:items-center sm:justify-center\">\n\t\t\t\t<Transition\n\t\t\t\t\tenter=\"ease-out duration-300\"\n\t\t\t\t\tenterFrom=\"opacity-0\"\n\t\t\t\t\tenterTo=\"opacity-100\"\n\t\t\t\t\tleave=\"ease-in duration-200\"\n\t\t\t\t\tleaveFrom=\"opacity-100\"\n\t\t\t\t\tleaveTo=\"opacity-0\"\n\t\t\t\t>\n\t\t\t\t\t<div className=\"fixed inset-0 transition-opacity\">\n\t\t\t\t\t\t<div className=\"absolute inset-0 bg-gray-500 opacity-75\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</Transition>\n\n\t\t\t\t<Transition\n\t\t\t\t\tenter=\"ease-out duration-300\"\n\t\t\t\t\tenterFrom=\"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95\"\n\t\t\t\t\tenterTo=\"opacity-100 translate-y-0 sm:scale-100\"\n\t\t\t\t\tleave=\"ease-in duration-200\"\n\t\t\t\t\tleaveFrom=\"opacity-100 translate-y-0 sm:scale-100\"\n\t\t\t\t\tleaveTo=\"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95\"\n\t\t\t\t>\n\t\t\t\t\t{success ? (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"bg-white rounded-lg px-4 pt-5 pb-4 overflow-hidden shadow-xl transform transition-all sm:max-w-sm sm:w-full sm:p-6\"\n\t\t\t\t\t\t\trole=\"dialog\"\n\t\t\t\t\t\t\taria-modal=\"true\"\n\t\t\t\t\t\t\taria-labelledby=\"modal-headline\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<div className=\"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100\">\n\t\t\t\t\t\t\t\t\t<Check\n\t\t\t\t\t\t\t\t\t\tclassName={\"h-6 w-6 text-green-600\"}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"mt-3 text-center sm:mt-5\">\n\t\t\t\t\t\t\t\t\t<h3\n\t\t\t\t\t\t\t\t\t\tclassName=\"text-lg leading-6 font-medium text-gray-900\"\n\t\t\t\t\t\t\t\t\t\tid=\"modal-headline\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tYour password has been updated\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"mt-5 sm:mt-6\">\n\t\t\t\t\t\t\t\t<span className=\"flex w-full rounded-md shadow-sm\">\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\tresetForm();\n\t\t\t\t\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tclassName=\"inline-flex justify-center w-full rounded-md border border-transparent px-4 py-2 bg-indigo-600 text-base leading-6 font-medium text-white shadow-sm hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:ring-indigo-500 transition ease-in-out duration-150 sm:text-sm sm:leading-5\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tClose\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"bg-white rounded-lg px-4 pt-5 pb-4 overflow-hidden shadow-xl transform transition-all sm:max-w-lg sm:w-full sm:p-6\"\n\t\t\t\t\t\t\trole=\"dialog\"\n\t\t\t\t\t\t\taria-modal=\"true\"\n\t\t\t\t\t\t\taria-labelledby=\"modal-headline\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<form\n\t\t\t\t\t\t\t\tnoValidate\n\t\t\t\t\t\t\t\tonSubmit={async (e) => {\n\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\tif (!firebase || !user) return;\n\n\t\t\t\t\t\t\t\t\tif (newPassword.length < 8) {\n\t\t\t\t\t\t\t\t\t\tsetError(\n\t\t\t\t\t\t\t\t\t\t\t\"Your new password isn't long enough. It must be at least 8 characters.\"\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif (newPassword !== confirmNewPassword) {\n\t\t\t\t\t\t\t\t\t\tsetError(\n\t\t\t\t\t\t\t\t\t\t\t\"Your new passwords don't match.\"\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tsetSubmitting(true);\n\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\tif (!user.email)\n\t\t\t\t\t\t\t\t\t\t\tthrow {\n\t\t\t\t\t\t\t\t\t\t\t\tcode:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"internal/user-has-no-email\",\n\t\t\t\t\t\t\t\t\t\t\t\tmessage:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"The current user's email could not be identified. Please try signing in again.\",\n\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\tawait user.reauthenticateWithCredential(\n\t\t\t\t\t\t\t\t\t\t\tfirebase.auth.EmailAuthProvider.credential(\n\t\t\t\t\t\t\t\t\t\t\t\tuser.email,\n\t\t\t\t\t\t\t\t\t\t\t\tcurrentPassword\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\t\t\tawait user.updatePassword(newPassword);\n\t\t\t\t\t\t\t\t\t\tsetSubmitting(false);\n\t\t\t\t\t\t\t\t\t\tsetSuccess(true);\n\t\t\t\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\t\t\t\tswitch (error.code) {\n\t\t\t\t\t\t\t\t\t\t\tcase \"auth/wrong-password\":\n\t\t\t\t\t\t\t\t\t\t\t\tsetError(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"Your current password is not correct.\"\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\tsetCurrentPassword(\"\");\n\t\t\t\t\t\t\t\t\t\t\t\tsetSubmitting(false);\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\tcase \"auth/weak-password\":\n\t\t\t\t\t\t\t\t\t\t\t\tsetError(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"Your new password is not strong enough. Try adding more numbers and special characters. Avoid common passwords.\"\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\tsetCurrentPassword(\"\");\n\t\t\t\t\t\t\t\t\t\t\t\tsetSubmitting(false);\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\t\t\tsetError(\n\t\t\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tError:{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{error.message}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tIf this was\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tunexpected, please\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\temail us at{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thref={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"mailto:support@montavistamun.com\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"text-blue-500 active:text-blue-700 hover:underline\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsupport@montavistamun.com\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\tsetCurrentPassword(\"\");\n\t\t\t\t\t\t\t\t\t\t\t\tsetSubmitting(false);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div className=\"mt-3 text-center sm:mt-5\">\n\t\t\t\t\t\t\t\t\t<h3\n\t\t\t\t\t\t\t\t\t\tclassName=\"text-lg leading-6 font-medium text-gray-900\"\n\t\t\t\t\t\t\t\t\t\tid=\"modal-headline\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tChange Your Password\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t<div className=\"mt-2\">\n\t\t\t\t\t\t\t\t\t\t<div className={\"text-left\"}>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"\">\n\t\t\t\t\t\t\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t\t\t\t\t\t\thtmlFor=\"current-password\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"block text-sm font-medium leading-5 text-gray-700\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\tCurrent Password\n\t\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"current-password\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype={\"password\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={submitting}\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={currentPassword}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetCurrentPassword(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.target.value\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetError(\"\");\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"mt-1 form-input block w-full py-2 px-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-300 transition duration-150 ease-in-out sm:text-sm sm:leading-5 \" +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(submitting\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"bg-gray-100\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"\")\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"mt-5\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex justify-between\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thtmlFor=\"new-password\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"block text-sm font-medium leading-5 text-gray-700\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tNew Password\n\t\t\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm leading-5 text-gray-500\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t8+ Characters\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"new-password\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype={\"password\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={submitting}\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={newPassword}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetNewPassword(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.target.value\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetError(\"\");\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"mt-1 form-input block w-full py-2 px-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-300 transition duration-150 ease-in-out sm:text-sm sm:leading-5 \" +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(submitting\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"bg-gray-100\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"\")\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"mt-5\">\n\t\t\t\t\t\t\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t\t\t\t\t\t\thtmlFor=\"confirm-password\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"block text-sm font-medium leading-5 text-gray-700\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\tConfirm New Password\n\t\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"confirm-password\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype={\"password\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={submitting}\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={confirmNewPassword}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetConfirmNewPassword(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.target.value\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetError(\"\");\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"mt-1 form-input block w-full py-2 px-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-300 transition duration-150 ease-in-out sm:text-sm sm:leading-5 \" +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(submitting\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"bg-gray-100\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"\")\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{error && (\n\t\t\t\t\t\t\t\t\t\t<p className=\"text-red-600 my-2 mt-5\">\n\t\t\t\t\t\t\t\t\t\t\t{error}\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3 sm:grid-flow-row-dense\">\n\t\t\t\t\t\t\t\t\t<span className=\"flex w-full rounded-md shadow-sm sm:col-start-2\">\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\t\t\tdisabled={submitting}\n\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t(submitting\n\t\t\t\t\t\t\t\t\t\t\t\t\t? \"bg-indigo-400\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t: \"bg-indigo-600 hover:bg-indigo-500 focus:border-indigo-700 focus:ring-indigo-500\") +\n\t\t\t\t\t\t\t\t\t\t\t\t\" \" +\n\t\t\t\t\t\t\t\t\t\t\t\t\"inline-flex justify-center w-full rounded-md border border-transparent px-4 py-2 text-base leading-6 font-medium text-white shadow-sm focus:outline-none transition ease-in-out duration-150 sm:text-sm sm:leading-5\"\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tChange Password\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span className=\"mt-3 flex w-full rounded-md shadow-sm sm:mt-0 sm:col-start-1\">\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tresetForm();\n\t\t\t\t\t\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\tdisabled={submitting}\n\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t(submitting\n\t\t\t\t\t\t\t\t\t\t\t\t\t? \"bg-gray-50 opacity-75\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t: \"hover:text-gray-500 focus:border-blue-300 focus:ring-blue-500\") +\n\t\t\t\t\t\t\t\t\t\t\t\t\" \" +\n\t\t\t\t\t\t\t\t\t\t\t\t\"inline-flex justify-center w-full rounded-md border border-gray-300 px-4 py-2 bg-white text-base leading-6 font-medium text-gray-700 shadow-sm focus:outline-none transition ease-in-out duration-150 sm:text-sm sm:leading-5\"\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</Transition>\n\t\t\t</div>\n\t\t</Transition>\n\t);\n}\n\nfunction ChangeEmailModal({\n\tisOpen,\n\tonClose,\n\tuser,\n}: {\n\tisOpen: boolean;\n\tonClose: () => void;\n\t// can be null until the form is submitted\n\tuser?: firebaseType.User | null;\n}) {\n\tconst [submitting, setSubmitting] = useState(false);\n\tconst [success, setSuccess] = useState(false);\n\tconst [password, setPassword] = useState(\"\");\n\tconst [newEmail, setNewEmail] = useState(\"\");\n\tconst [error, setError] = React.useState<React.ReactNode>(\"\");\n\tconst resetForm = () => {\n\t\tsetPassword(\"\");\n\t\tsetNewEmail(\"\");\n\t\tsetError(\"\");\n\t\tsetSubmitting(false);\n\t\tsetTimeout(() => setSuccess(false), 300); // revert back to the normal view after the transition is over.\n\t};\n\tconst firebase = useFirebase();\n\treturn (\n\t\t<Transition show={isOpen}>\n\t\t\t<div className=\"fixed bottom-0 inset-x-0 px-4 pb-6 sm:inset-0 sm:p-0 sm:flex sm:items-center sm:justify-center\">\n\t\t\t\t<Transition\n\t\t\t\t\tenter=\"ease-out duration-300\"\n\t\t\t\t\tenterFrom=\"opacity-0\"\n\t\t\t\t\tenterTo=\"opacity-100\"\n\t\t\t\t\tleave=\"ease-in duration-200\"\n\t\t\t\t\tleaveFrom=\"opacity-100\"\n\t\t\t\t\tleaveTo=\"opacity-0\"\n\t\t\t\t>\n\t\t\t\t\t<div className=\"fixed inset-0 transition-opacity\">\n\t\t\t\t\t\t<div className=\"absolute inset-0 bg-gray-500 opacity-75\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</Transition>\n\n\t\t\t\t<Transition\n\t\t\t\t\tenter=\"ease-out duration-300\"\n\t\t\t\t\tenterFrom=\"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95\"\n\t\t\t\t\tenterTo=\"opacity-100 translate-y-0 sm:scale-100\"\n\t\t\t\t\tleave=\"ease-in duration-200\"\n\t\t\t\t\tleaveFrom=\"opacity-100 translate-y-0 sm:scale-100\"\n\t\t\t\t\tleaveTo=\"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95\"\n\t\t\t\t>\n\t\t\t\t\t{success ? (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"bg-white rounded-lg px-4 pt-5 pb-4 overflow-hidden shadow-xl transform transition-all sm:max-w-sm sm:w-full sm:p-6\"\n\t\t\t\t\t\t\trole=\"dialog\"\n\t\t\t\t\t\t\taria-modal=\"true\"\n\t\t\t\t\t\t\taria-labelledby=\"modal-headline\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{/*<div className=\"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100\">*/}\n\t\t\t\t\t\t\t\t{/*\t<Check*/}\n\t\t\t\t\t\t\t\t{/*\t\tclassName={\"h-6 w-6 text-green-600\"}*/}\n\t\t\t\t\t\t\t\t{/*\t/>*/}\n\t\t\t\t\t\t\t\t{/*</div>*/}\n\t\t\t\t\t\t\t\t<div className=\"mt-3 text-center sm:mt-5\">\n\t\t\t\t\t\t\t\t\t<h3\n\t\t\t\t\t\t\t\t\t\tclassName=\"text-lg leading-6 font-medium text-gray-900\"\n\t\t\t\t\t\t\t\t\t\tid=\"modal-headline\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tVerify Your New Email\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t<div className=\"mt-2\">\n\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm leading-5 text-gray-500\">\n\t\t\t\t\t\t\t\t\t\t\tIn order to finish changing your\n\t\t\t\t\t\t\t\t\t\t\temail, you'll have to click on the\n\t\t\t\t\t\t\t\t\t\t\tlink in the verification email that\n\t\t\t\t\t\t\t\t\t\t\twe've sent to <b>{newEmail}</b>.\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"link\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => resetForm()}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tTyped the wrong email?\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"mt-5 sm:mt-6\">\n\t\t\t\t\t\t\t\t<span className=\"flex w-full rounded-md shadow-sm\">\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\tresetForm();\n\t\t\t\t\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tclassName=\"inline-flex justify-center w-full rounded-md border border-transparent px-4 py-2 bg-indigo-600 text-base leading-6 font-medium text-white shadow-sm hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:ring-indigo-500 transition ease-in-out duration-150 sm:text-sm sm:leading-5\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tClose\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"bg-white rounded-lg px-4 pt-5 pb-4 overflow-hidden shadow-xl transform transition-all sm:max-w-lg sm:w-full sm:p-6\"\n\t\t\t\t\t\t\trole=\"dialog\"\n\t\t\t\t\t\t\taria-modal=\"true\"\n\t\t\t\t\t\t\taria-labelledby=\"modal-headline\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<form\n\t\t\t\t\t\t\t\tnoValidate\n\t\t\t\t\t\t\t\tonSubmit={async (e) => {\n\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\tif (!firebase || !user) return;\n\t\t\t\t\t\t\t\t\tif (!newEmail) {\n\t\t\t\t\t\t\t\t\t\tsetError(\"Please enter a new email.\");\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif (newEmail.indexOf(\"@\") === -1) {\n\t\t\t\t\t\t\t\t\t\tsetError(\n\t\t\t\t\t\t\t\t\t\t\t\"Your new email doesn't appear to be formatted correctly.\"\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tsetSubmitting(true);\n\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\tif (!user.email)\n\t\t\t\t\t\t\t\t\t\t\tthrow {\n\t\t\t\t\t\t\t\t\t\t\t\tcode:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"internal/user-has-no-email\",\n\t\t\t\t\t\t\t\t\t\t\t\tmessage:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"The current user's email could not be identified. Please try signing in again.\",\n\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\tawait user.reauthenticateWithCredential(\n\t\t\t\t\t\t\t\t\t\t\tfirebase.auth.EmailAuthProvider.credential(\n\t\t\t\t\t\t\t\t\t\t\t\tuser.email,\n\t\t\t\t\t\t\t\t\t\t\t\tpassword\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\t\t\tawait user.verifyBeforeUpdateEmail(\n\t\t\t\t\t\t\t\t\t\t\tnewEmail\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tsetSubmitting(false);\n\t\t\t\t\t\t\t\t\t\tsetSuccess(true);\n\t\t\t\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\t\t\t\tswitch (error.code) {\n\t\t\t\t\t\t\t\t\t\t\tcase \"auth/wrong-password\":\n\t\t\t\t\t\t\t\t\t\t\t\tsetError(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"Your password is not correct.\"\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\tsetPassword(\"\");\n\t\t\t\t\t\t\t\t\t\t\t\tsetSubmitting(false);\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\t\t\tsetError(\n\t\t\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tError:{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{error.message}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tIf this was\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tunexpected, please\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\temail us at{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thref={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"mailto:support@montavistamun.com\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"text-blue-500 active:text-blue-700 hover:underline\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsupport@montavistamun.com\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\tsetPassword(\"\");\n\t\t\t\t\t\t\t\t\t\t\t\tsetSubmitting(false);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div className=\"mt-3 text-center sm:mt-5\">\n\t\t\t\t\t\t\t\t\t<h3\n\t\t\t\t\t\t\t\t\t\tclassName=\"text-lg leading-6 font-medium text-gray-900\"\n\t\t\t\t\t\t\t\t\t\tid=\"modal-headline\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tChange Your Email\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t<p\n\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\"text-sm leading-2 mt-4 mb-3 font-bold\"\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tThis will change the email address you\n\t\t\t\t\t\t\t\t\t\tuse to sign in, and also the email\n\t\t\t\t\t\t\t\t\t\taddress where we send member updates.\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t<div className=\"mt-2\">\n\t\t\t\t\t\t\t\t\t\t<div className={\"text-left\"}>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"\">\n\t\t\t\t\t\t\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t\t\t\t\t\t\thtmlFor=\"current-password-email-modal\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"block text-sm font-medium leading-5 text-gray-700\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\tYour Password\n\t\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"current-password-email-modal\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype={\"password\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={submitting}\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={password}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetPassword(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.target.value\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetError(\"\");\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"mt-1 form-input block w-full py-2 px-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-300 transition duration-150 ease-in-out sm:text-sm sm:leading-5 \" +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(submitting\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"bg-gray-100\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"\")\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"mt-5\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex justify-between\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thtmlFor=\"new-password\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"block text-sm font-medium leading-5 text-gray-700\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tNew Email\n\t\t\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"new-email\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype={\"text\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={submitting}\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={newEmail}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetNewEmail(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.target.value\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetError(\"\");\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"mt-1 form-input block w-full py-2 px-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-300 transition duration-150 ease-in-out sm:text-sm sm:leading-5 \" +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(submitting\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"bg-gray-100\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"\")\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<p\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"mt-4 text-gray-700 italic\"\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<InformationCircle\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\"inline-block\"}\n\t\t\t\t\t\t\t\t\t\t\t\t/>{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t\tTo finalize your email change,\n\t\t\t\t\t\t\t\t\t\t\t\tyou'll have to verify your new\n\t\t\t\t\t\t\t\t\t\t\t\temail.\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{error && (\n\t\t\t\t\t\t\t\t\t\t<p className=\"text-red-600 my-2 mt-5\">\n\t\t\t\t\t\t\t\t\t\t\t{error}\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3 sm:grid-flow-row-dense\">\n\t\t\t\t\t\t\t\t\t<span className=\"flex w-full rounded-md shadow-sm sm:col-start-2\">\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\t\t\tdisabled={submitting}\n\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t(submitting\n\t\t\t\t\t\t\t\t\t\t\t\t\t? \"bg-indigo-400\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t: \"bg-indigo-600 hover:bg-indigo-500 focus:border-indigo-700 focus:ring-indigo-500\") +\n\t\t\t\t\t\t\t\t\t\t\t\t\" \" +\n\t\t\t\t\t\t\t\t\t\t\t\t\"inline-flex justify-center w-full rounded-md border border-transparent px-4 py-2 text-base leading-6 font-medium text-white shadow-sm focus:outline-none transition ease-in-out duration-150 sm:text-sm sm:leading-5\"\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tNext\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span className=\"mt-3 flex w-full rounded-md shadow-sm sm:mt-0 sm:col-start-1\">\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tresetForm();\n\t\t\t\t\t\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\tdisabled={submitting}\n\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t(submitting\n\t\t\t\t\t\t\t\t\t\t\t\t\t? \"bg-gray-50 opacity-75\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t: \"hover:text-gray-500 focus:border-blue-300 focus:ring-blue-500\") +\n\t\t\t\t\t\t\t\t\t\t\t\t\" \" +\n\t\t\t\t\t\t\t\t\t\t\t\t\"inline-flex justify-center w-full rounded-md border border-gray-300 px-4 py-2 bg-white text-base leading-6 font-medium text-gray-700 shadow-sm focus:outline-none transition ease-in-out duration-150 sm:text-sm sm:leading-5\"\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</Transition>\n\t\t\t</div>\n\t\t</Transition>\n\t);\n}\n","/Users/jmeng/Documents/code/montavistamun/src/pages/admin/awards.tsx",[],"/Users/jmeng/Documents/code/montavistamun/src/pages/admin/conference-registration.tsx",["713","714","715","716","717","718","719","720","721","722","723","724","725","726"],"import axios from \"axios\";\nimport { saveAs } from \"file-saver\";\nimport JSZip from \"jszip\";\nimport moment from \"moment\";\nimport React, { useState } from \"react\";\nimport Select from \"react-select\";\nimport UserData from \"../../components/admin/UserData\";\nimport AdminLayout from \"../../components/layout/AdminLayout\";\nimport AuthContext from \"../../context/AuthContext\";\nimport useFirebase from \"../../firebase/useFirebase\";\nimport { getGrade } from \"../../utils/schoolYearUtils\";\nimport { approvedUserIds } from \"../conferences/smunc/register\";\n\nexport default function AdminLogPage(): React.ReactElement {\n\tconst [target, setTarget] = useState(\"\");\n\tconst [admin, setAdmin] = useState(\"same\");\n\tconst [verified, setVerified] = useState(\"same\");\n\tconst firebase = useFirebase();\n\tconst {\n\t\tuser,\n\t\tloading,\n\t\tverified: userVerified,\n\t\tadmin: userAdmin,\n\t} = React.useContext(AuthContext);\n\tconst conferenceOptions = [\n\t\t{ label: \"SBMUN Registration\", value: \"sbmun\" },\n\t\t{ label: \"BMUN Registration\", value: \"bmun\" },\n\t\t{ label: \"SCVMUN Registration\", value: \"scvmun\" },\n\t\t{ label: \"SFMUN Registration\", value: \"sfmun\" },\n\t\t{ label: \"SMUNC Registration\", value: \"smunc\" },\n\t];\n\tconst hash =\n\t\ttypeof window !== \"undefined\" ? window.location.hash?.substring(1) : \"\";\n\tconst selectedConference = [\n\t\t\"sfmun\",\n\t\t\"smunc\",\n\t\t\"scvmun\",\n\t\t\"bmun\",\n\t\t\"sbmun\",\n\t].includes(hash)\n\t\t? hash\n\t\t: \"bmun\";\n\tif (\n\t\t![\"sfmun\", \"smunc\", \"scvmun\", \"bmun\", \"sbmun\"].includes(\n\t\t\tselectedConference\n\t\t)\n\t) {\n\t\twindow.location.hash = \"sbmun\";\n\t}\n\tconst setSelectedConference = (conf: string) => {\n\t\twindow.location.hash = conf;\n\t};\n\tconst [data, setData] = React.useState<\n\t\t{\n\t\t\tid: string;\n\t\t\tdata: any;\n\t\t\tuserData: {\n\t\t\t\tid: string;\n\t\t\t\tdata: UserData;\n\t\t\t};\n\t\t}[]\n\t>([]);\n\tconst [usersData, setUsersData] = useState<\n\t\t{ id: string; data: UserData }[]\n\t>([]);\n\tconst [expandStatistics, setExpandStatistics] = useState(() =>\n\t\tnew Array(3).fill(false)\n\t);\n\tReact.useEffect(() => {\n\t\tif (!firebase) return;\n\t\tlet unsubscribe = () => {\n\t\t\t/*noop*/\n\t\t};\n\t\tfirebase\n\t\t\t.firestore()\n\t\t\t.collection(\"users\")\n\t\t\t.get()\n\t\t\t.then((querySnapshot) => {\n\t\t\t\tconst tempUserData: { id: string; data: UserData }[] = [];\n\t\t\t\tquerySnapshot.forEach(function (doc) {\n\t\t\t\t\ttempUserData.push({ id: doc.id, data: doc.data() });\n\t\t\t\t});\n\t\t\t\tsetUsersData(tempUserData);\n\n\t\t\t\tunsubscribe = firebase\n\t\t\t\t\t.firestore()\n\t\t\t\t\t.collection(\"registration\")\n\t\t\t\t\t.onSnapshot(function (querySnapshot) {\n\t\t\t\t\t\tsetData((legacyData) => {\n\t\t\t\t\t\t\tlet users: {\n\t\t\t\t\t\t\t\tid: string;\n\t\t\t\t\t\t\t\tdata: any;\n\t\t\t\t\t\t\t\tuserData: { id: string; data: UserData };\n\t\t\t\t\t\t\t}[] = legacyData.slice();\n\t\t\t\t\t\t\tquerySnapshot.forEach(function (doc) {\n\t\t\t\t\t\t\t\tusers = users.filter((u) => u.id !== doc.id);\n\t\t\t\t\t\t\t\tconst userUserData = tempUserData.find(\n\t\t\t\t\t\t\t\t\t(u) => u.id === doc.id\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tif (!userUserData) {\n\t\t\t\t\t\t\t\t\tconsole.log(users, tempUserData);\n\t\t\t\t\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t\t\t\t\t\"Unable to find user data for registration with id: \" +\n\t\t\t\t\t\t\t\t\t\t\tdoc.id\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tusers.push({\n\t\t\t\t\t\t\t\t\tid: doc.id,\n\t\t\t\t\t\t\t\t\tdata: doc.data(),\n\t\t\t\t\t\t\t\t\tuserData: userUserData,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn users;\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t});\n\n\t\treturn () => unsubscribe();\n\t}, [firebase]);\n\tconst statistics: string[][] = React.useMemo(() => {\n\t\t// use object internally for clarity, but an array is easier to manipulate into elements\n\t\tconst temp: {\n\t\t\tpersonalInformation: string[];\n\t\t\temergencyInformation: string[];\n\t\t\tliabilityForms: string[];\n\t\t\tpreferences: string[];\n\t\t\tregistered: string[];\n\t\t} = {\n\t\t\tpersonalInformation: [],\n\t\t\temergencyInformation: [],\n\t\t\tliabilityForms: [],\n\t\t\tpreferences: [],\n\t\t\tregistered: [],\n\t\t};\n\n\t\t(selectedConference === \"smunc\"\n\t\t\t? data.filter((u) => approvedUserIds.includes(u.userData.id))\n\t\t\t: data\n\t\t).forEach((user) => {\n\t\t\tconsole.log(user);\n\n\t\t\tif (\n\t\t\t\t(selectedConference === \"sfmun\" &&\n\t\t\t\t\tuser.data.confirm?.sfmunConfirmed) ||\n\t\t\t\t(selectedConference === \"smunc\" &&\n\t\t\t\t\tuser.data.confirm?.smuncConfirmed) ||\n\t\t\t\t(selectedConference === \"scvmun\" &&\n\t\t\t\t\tuser.data.confirm?.scvmunConfirmed) ||\n\t\t\t\t(selectedConference === \"bmun\" &&\n\t\t\t\t\tuser.data.confirm?.bmunConfirmed) ||\n\t\t\t\t(selectedConference === \"sbmun\" &&\n\t\t\t\t\tuser.data.confirm?.sbmunConfirmed)\n\t\t\t) {\n\t\t\t\ttemp.registered.push(\n\t\t\t\t\tuser.userData.data.firstName +\n\t\t\t\t\t\t\" \" +\n\t\t\t\t\t\tuser.userData.data.lastName\n\t\t\t\t);\n\t\t\t} else if (\n\t\t\t\t(selectedConference === \"sfmun\" &&\n\t\t\t\t\tuser.data.preferences?.committee) ||\n\t\t\t\t(selectedConference === \"scvmun\" &&\n\t\t\t\t\tuser.data.preferences?.scvmunCommittee &&\n\t\t\t\t\tuser.data.preferences?.scvmunPartnerPrefs) ||\n\t\t\t\t(selectedConference === \"sbmun\" &&\n\t\t\t\t\tuser.data.preferences?.sbmunCommittee)\n\t\t\t) {\n\t\t\t\ttemp.preferences.push(\n\t\t\t\t\tuser.userData.data.firstName +\n\t\t\t\t\t\t\" \" +\n\t\t\t\t\t\tuser.userData.data.lastName\n\t\t\t\t);\n\t\t\t} else if (\n\t\t\t\t(selectedConference === \"sfmun\" &&\n\t\t\t\t\tuser.data.forms?.sfmunForm) ||\n\t\t\t\t(selectedConference === \"smunc\" &&\n\t\t\t\t\tuser.data.forms?.smuncFuhsdForm) ||\n\t\t\t\t(selectedConference === \"scvmun\" &&\n\t\t\t\t\tuser.data.forms?.scvmunFuhsdForm) ||\n\t\t\t\t(selectedConference === \"bmun\" &&\n\t\t\t\t\tuser.data.forms?.bmunFuhsdForm) ||\n\t\t\t\t(selectedConference === \"sbmun\" &&\n\t\t\t\t\tuser.data.forms?.sbmunFuhsdForm)\n\t\t\t) {\n\t\t\t\ttemp.liabilityForms.push(\n\t\t\t\t\tuser.userData.data.firstName +\n\t\t\t\t\t\t\" \" +\n\t\t\t\t\t\tuser.userData.data.lastName\n\t\t\t\t);\n\t\t\t} else if (user.data.emergencyInformation) {\n\t\t\t\ttemp.emergencyInformation.push(\n\t\t\t\t\tuser.userData.data.firstName +\n\t\t\t\t\t\t\" \" +\n\t\t\t\t\t\tuser.userData.data.lastName\n\t\t\t\t);\n\t\t\t} else if (user.data.personalInformation) {\n\t\t\t\ttemp.personalInformation.push(\n\t\t\t\t\tuser.userData.data.firstName +\n\t\t\t\t\t\t\" \" +\n\t\t\t\t\t\tuser.userData.data.lastName\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\t// this should never happen\n\t\t\t\tconsole.log(user);\n\t\t\t\tthrow new Error(\n\t\t\t\t\t\"User with no registration data: \" + user.userData.id\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t\treturn [\n\t\t\t// temp.personalInformation,\n\t\t\t// temp.emergencyInformation,\n\t\t\ttemp.liabilityForms,\n\t\t\ttemp.preferences,\n\t\t\ttemp.registered,\n\t\t];\n\t}, [data, selectedConference]);\n\tconst [exportAllFields, setExportAllFields] = useState(false);\n\tconst exportRegistration = React.useCallback(\n\t\tasync (includeIncomplete: boolean, allFields: boolean) => {\n\t\t\tif (!firebase) return;\n\t\t\tconst allFieldsHeaders = [\n\t\t\t\t\"Address Line One\",\n\t\t\t\t\"Address Line Two\",\n\t\t\t\t\"City\",\n\t\t\t\t\"State\",\n\t\t\t\t\"Zip Code\",\n\t\t\t\t\"Emergency Contact One Name\",\n\t\t\t\t\"Emergency Contact One Phone Number\",\n\t\t\t\t\"Emergency Contact One Relationship\",\n\t\t\t\t\"Emergency Contact Two Name\",\n\t\t\t\t\"Emergency Contact Two Phone Number\",\n\t\t\t\t\"Emergency Contact Two Relationship\",\n\t\t\t\t\"Health Insurance Carrier\",\n\t\t\t\t\"Health Insurance Address Line One\",\n\t\t\t\t\"Health Insurance Address Line Two\",\n\t\t\t\t\"Health Insurance City\",\n\t\t\t\t\"Health Insurance State\",\n\t\t\t\t\"Health Insurance Zip\",\n\t\t\t\t`FUHSD Field Trip Form Link (valid through ${moment()\n\t\t\t\t\t.add(6, \"days\")\n\t\t\t\t\t.format(\"M/D/Y\")})`,\n\t\t\t\t...(selectedConference === \"sfmun\"\n\t\t\t\t\t? [\n\t\t\t\t\t\t\t`SFMUN Liability Trip Form Link (valid through ${moment()\n\t\t\t\t\t\t\t\t.add(6, \"days\")\n\t\t\t\t\t\t\t\t.format(\"M/D/Y\")})`,\n\t\t\t\t\t  ]\n\t\t\t\t\t: []),\n\t\t\t\t`Donation Receipt Link (valid through ${moment()\n\t\t\t\t\t.add(6, \"days\")\n\t\t\t\t\t.format(\"M/D/Y\")})`,\n\t\t\t];\n\t\t\tconst headers = [\n\t\t\t\t\"Registration Complete\",\n\t\t\t\t\"User ID\",\n\t\t\t\t\"First Name\",\n\t\t\t\t\"Last Name\",\n\t\t\t\t\"Grade\",\n\t\t\t\t\"Email\",\n\t\t\t\t\"Phone Number\",\n\t\t\t\t...(allFields ? allFieldsHeaders : []),\n\t\t\t\t...(selectedConference === \"scvmun\"\n\t\t\t\t\t? [\"Requested Partner\"]\n\t\t\t\t\t: []),\n\t\t\t\t...(selectedConference === \"sfmun\" ||\n\t\t\t\tselectedConference === \"scvmun\"\n\t\t\t\t\t? [\n\t\t\t\t\t\t\t...[\n\t\t\t\t\t\t\t\t\"First\",\n\t\t\t\t\t\t\t\t\"Second\",\n\t\t\t\t\t\t\t\t\"Third\",\n\t\t\t\t\t\t\t\t\"Fourth\",\n\t\t\t\t\t\t\t\t\"Fifth\",\n\t\t\t\t\t\t\t\t\"Sixth\",\n\t\t\t\t\t\t\t\t\"Seventh\",\n\t\t\t\t\t\t\t\t\"Eighth\",\n\t\t\t\t\t\t\t\t...(selectedConference === \"scvmun\"\n\t\t\t\t\t\t\t\t\t? [\n\t\t\t\t\t\t\t\t\t\t\t\"Ninth\",\n\t\t\t\t\t\t\t\t\t\t\t\"Tenth\",\n\t\t\t\t\t\t\t\t\t\t\t\"Eleventh\",\n\t\t\t\t\t\t\t\t\t\t\t\"Twelfth\",\n\t\t\t\t\t\t\t\t\t\t\t\"Thirteenth\",\n\t\t\t\t\t\t\t\t\t\t\t\"Fourteenth\",\n\t\t\t\t\t\t\t\t\t  ]\n\t\t\t\t\t\t\t\t\t: []),\n\t\t\t\t\t\t\t].map((el) => `${el} Choice Committee`),\n\t\t\t\t\t\t\t...(selectedConference === \"sfmun\"\n\t\t\t\t\t\t\t\t? [\n\t\t\t\t\t\t\t\t\t\t\"DISEC\",\n\t\t\t\t\t\t\t\t\t\t\"IAEA\",\n\t\t\t\t\t\t\t\t\t\t\"UNODC\",\n\t\t\t\t\t\t\t\t\t\t\"SPECPOL\",\n\t\t\t\t\t\t\t\t\t\t\"UNHCR\",\n\t\t\t\t\t\t\t\t\t\t\"Catherine The Great's Coup\",\n\t\t\t\t\t\t\t\t\t\t\"UNSC\",\n\t\t\t\t\t\t\t\t\t\t\"Senate\",\n\t\t\t\t\t\t\t\t  ]\n\t\t\t\t\t\t\t\t: [\n\t\t\t\t\t\t\t\t\t\t\"IAEA\",\n\t\t\t\t\t\t\t\t\t\t\"DISEC\",\n\t\t\t\t\t\t\t\t\t\t\"WHO\",\n\t\t\t\t\t\t\t\t\t\t\"UNEP\",\n\t\t\t\t\t\t\t\t\t\t\"SOCHUM\",\n\t\t\t\t\t\t\t\t\t\t\"UNDP\",\n\t\t\t\t\t\t\t\t\t\t\"LEGAL\",\n\t\t\t\t\t\t\t\t\t\t\"UNESCO\",\n\t\t\t\t\t\t\t\t\t\t\"Security Council (Spec)\",\n\t\t\t\t\t\t\t\t\t\t\"Historic Security Council (Spec)\",\n\t\t\t\t\t\t\t\t\t\t\"NATO (Spec)\",\n\t\t\t\t\t\t\t\t\t\t\"World Bank (Spec)\",\n\t\t\t\t\t\t\t\t\t\t\"UNHCR (Spec)\",\n\t\t\t\t\t\t\t\t\t\t\"CSW (Spec)\",\n\t\t\t\t\t\t\t\t  ]\n\t\t\t\t\t\t\t).map((el) => `${el} Committee Ranking`),\n\t\t\t\t\t  ]\n\t\t\t\t\t: []),\n\t\t\t];\n\t\t\tlet filteredRegistrationData = data;\n\t\t\tif (selectedConference === \"smunc\") {\n\t\t\t\tfilteredRegistrationData = filteredRegistrationData.filter(\n\t\t\t\t\t(u) => approvedUserIds.includes(u.userData.id)\n\t\t\t\t);\n\t\t\t}\n\t\t\tif (!includeIncomplete) {\n\t\t\t\tfilteredRegistrationData = filteredRegistrationData.filter(\n\t\t\t\t\t(r) =>\n\t\t\t\t\t\t(selectedConference === \"sfmun\" &&\n\t\t\t\t\t\t\tr.data.confirm?.sfmunConfirmed) ||\n\t\t\t\t\t\t(selectedConference === \"smunc\" &&\n\t\t\t\t\t\t\tr.data.confirm?.smuncConfirmed) ||\n\t\t\t\t\t\t(selectedConference === \"scvmun\" &&\n\t\t\t\t\t\t\tr.data.confirm?.scvmunConfirmed) ||\n\t\t\t\t\t\t(selectedConference === \"bmun\" &&\n\t\t\t\t\t\t\tr.data.confirm?.bmunConfirmed)\n\t\t\t\t);\n\t\t\t}\n\t\t\tconst registrations: {\n\t\t\t\tfiles: { file: Blob | null; name?: string }[];\n\t\t\t\tcsvRow: string;\n\t\t\t\tfullName: string;\n\t\t\t}[] = await Promise.all(\n\t\t\t\tfilteredRegistrationData.map((registration) =>\n\t\t\t\t\tPromise.all(\n\t\t\t\t\t\t(selectedConference === \"sfmun\"\n\t\t\t\t\t\t\t? [\"fuhsdForm\", \"sfmunForm\", \"donation\"]\n\t\t\t\t\t\t\t: selectedConference === \"smunc\"\n\t\t\t\t\t\t\t? [\"smuncFuhsdForm\", \"smuncDonation\"]\n\t\t\t\t\t\t\t: selectedConference === \"scvmun\"\n\t\t\t\t\t\t\t? [\"scvmunFuhsdForm\", \"scvmunDonation\"]\n\t\t\t\t\t\t\t: [\"bmunFuhsdForm\", \"bmunDonation\"]\n\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.map((field) =>\n\t\t\t\t\t\t\t\tregistration.data.forms &&\n\t\t\t\t\t\t\t\tregistration.data.forms[field]\n\t\t\t\t\t\t\t\t\t? firebase\n\t\t\t\t\t\t\t\t\t\t\t.storage()\n\t\t\t\t\t\t\t\t\t\t\t.ref(\n\t\t\t\t\t\t\t\t\t\t\t\t`forms/sfmun/${registration.userData.id}/${field}/${registration.data.forms[field]}`\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t.getDownloadURL()\n\t\t\t\t\t\t\t\t\t\t\t.then((link) =>\n\t\t\t\t\t\t\t\t\t\t\t\taxios\n\t\t\t\t\t\t\t\t\t\t\t\t\t.get(link, {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tresponseType:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"arraybuffer\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"Content-Type\":\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"application/json\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tAccept:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"application/pdf\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t.then((response) => ({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfile: new Blob([\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tresponse.data,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlink: link,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tregistration.data\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.forms[field],\n\t\t\t\t\t\t\t\t\t\t\t\t\t}))\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t: Promise.reject({\n\t\t\t\t\t\t\t\t\t\t\tcode: \"storage/object-not-found\",\n\t\t\t\t\t\t\t\t\t  })\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.map((promise) =>\n\t\t\t\t\t\t\t\tpromise.catch((e) => {\n\t\t\t\t\t\t\t\t\tif (e.code === \"storage/object-not-found\") {\n\t\t\t\t\t\t\t\t\t\t// user probably deleted file\n\t\t\t\t\t\t\t\t\t\treturn Promise.resolve({\n\t\t\t\t\t\t\t\t\t\t\tfile: null,\n\t\t\t\t\t\t\t\t\t\t\tlink: \"\",\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\treturn Promise.resolve({\n\t\t\t\t\t\t\t\t\t\t\tfile: null,\n\t\t\t\t\t\t\t\t\t\t\tlink:\n\t\t\t\t\t\t\t\t\t\t\t\t\"Unable to get file URL (error code: \" +\n\t\t\t\t\t\t\t\t\t\t\t\te.code +\n\t\t\t\t\t\t\t\t\t\t\t\t\")\",\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t)\n\t\t\t\t\t).then((forms) => ({\n\t\t\t\t\t\tfullName:\n\t\t\t\t\t\t\tregistration.userData.data.firstName +\n\t\t\t\t\t\t\t\" \" +\n\t\t\t\t\t\t\tregistration.userData.data.lastName,\n\t\t\t\t\t\tfiles: forms,\n\t\t\t\t\t\tcsvRow: [\n\t\t\t\t\t\t\t(selectedConference === \"sfmun\" &&\n\t\t\t\t\t\t\t\tregistration.data.confirm?.sfmunConfirmed) ||\n\t\t\t\t\t\t\t(selectedConference === \"smunc\" &&\n\t\t\t\t\t\t\t\tregistration.data.confirm?.smuncConfirmed) ||\n\t\t\t\t\t\t\t(selectedConference === \"scvmun\" &&\n\t\t\t\t\t\t\t\tregistration.data.confirm?.scvmunConfirmed) ||\n\t\t\t\t\t\t\t(selectedConference === \"bmun\" &&\n\t\t\t\t\t\t\t\tregistration.data.confirm?.bmunConfirmed)\n\t\t\t\t\t\t\t\t? \"TRUE\"\n\t\t\t\t\t\t\t\t: \"FALSE\",\n\t\t\t\t\t\t\tregistration.userData.id,\n\t\t\t\t\t\t\tregistration.userData.data.firstName,\n\t\t\t\t\t\t\tregistration.userData.data.lastName,\n\t\t\t\t\t\t\tgetGrade(registration.userData.data.classOf),\n\t\t\t\t\t\t\tregistration.userData.data.email,\n\t\t\t\t\t\t\tregistration.data?.personalInformation?.phone,\n\t\t\t\t\t\t\t...(allFields\n\t\t\t\t\t\t\t\t? [\n\t\t\t\t\t\t\t\t\t\tregistration.data.personalInformation\n\t\t\t\t\t\t\t\t\t\t\t?.addressOne,\n\t\t\t\t\t\t\t\t\t\tregistration.data.personalInformation\n\t\t\t\t\t\t\t\t\t\t\t?.addressTwo,\n\t\t\t\t\t\t\t\t\t\tregistration.data.personalInformation\n\t\t\t\t\t\t\t\t\t\t\t?.city,\n\t\t\t\t\t\t\t\t\t\tregistration.data.personalInformation\n\t\t\t\t\t\t\t\t\t\t\t?.state,\n\t\t\t\t\t\t\t\t\t\tregistration.data.personalInformation\n\t\t\t\t\t\t\t\t\t\t\t?.zip,\n\t\t\t\t\t\t\t\t\t\tregistration.data.emergencyInformation\n\t\t\t\t\t\t\t\t\t\t\t?.contactOneName,\n\t\t\t\t\t\t\t\t\t\tregistration.data.emergencyInformation\n\t\t\t\t\t\t\t\t\t\t\t?.contactOnePhone,\n\t\t\t\t\t\t\t\t\t\tregistration.data.emergencyInformation\n\t\t\t\t\t\t\t\t\t\t\t?.contactOneRelationship,\n\t\t\t\t\t\t\t\t\t\tregistration.data.emergencyInformation\n\t\t\t\t\t\t\t\t\t\t\t?.contactTwoName,\n\t\t\t\t\t\t\t\t\t\tregistration.data.emergencyInformation\n\t\t\t\t\t\t\t\t\t\t\t?.contactTwoPhone,\n\t\t\t\t\t\t\t\t\t\tregistration.data.emergencyInformation\n\t\t\t\t\t\t\t\t\t\t\t?.contactTwoRelationship,\n\t\t\t\t\t\t\t\t\t\tregistration.data.emergencyInformation\n\t\t\t\t\t\t\t\t\t\t\t?.healthInsuranceCarrier,\n\t\t\t\t\t\t\t\t\t\tregistration.data.emergencyInformation\n\t\t\t\t\t\t\t\t\t\t\t?.healthInsuranceAddressOne,\n\t\t\t\t\t\t\t\t\t\tregistration.data.emergencyInformation\n\t\t\t\t\t\t\t\t\t\t\t?.healthInsuranceAddressTwo,\n\t\t\t\t\t\t\t\t\t\tregistration.data.emergencyInformation\n\t\t\t\t\t\t\t\t\t\t\t?.healthInsuranceCity,\n\t\t\t\t\t\t\t\t\t\tregistration.data.emergencyInformation\n\t\t\t\t\t\t\t\t\t\t\t?.healthInsuranceState,\n\t\t\t\t\t\t\t\t\t\tregistration.data.emergencyInformation\n\t\t\t\t\t\t\t\t\t\t\t?.healthInsuranceZip,\n\t\t\t\t\t\t\t\t\t\tforms[0].link,\n\t\t\t\t\t\t\t\t\t\tforms[1].link,\n\t\t\t\t\t\t\t\t\t\t...(selectedConference === \"sfmun\"\n\t\t\t\t\t\t\t\t\t\t\t? [forms[2].link]\n\t\t\t\t\t\t\t\t\t\t\t: []),\n\t\t\t\t\t\t\t\t  ]\n\t\t\t\t\t\t\t\t: []),\n\t\t\t\t\t\t\t...(selectedConference === \"scvmun\"\n\t\t\t\t\t\t\t\t? [\n\t\t\t\t\t\t\t\t\t\tregistration.data.preferences\n\t\t\t\t\t\t\t\t\t\t\t?.scvmunPartnerPrefs,\n\t\t\t\t\t\t\t\t  ]\n\t\t\t\t\t\t\t\t: []),\n\t\t\t\t\t\t\t...(selectedConference === \"sfmun\"\n\t\t\t\t\t\t\t\t? [\n\t\t\t\t\t\t\t\t\t\t...(registration.data.preferences\n\t\t\t\t\t\t\t\t\t\t\t?.committee || Array(8).fill(\"\")),\n\t\t\t\t\t\t\t\t\t\t...(registration.data.preferences\n\t\t\t\t\t\t\t\t\t\t\t?.committee\n\t\t\t\t\t\t\t\t\t\t\t? [\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"DISEC\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"IAEA\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"UNODC\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"SPECPOL\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"UNHCR\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"Catherine The Great's Coup (Crisis)\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"UNSC (Crisis)\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"Senate (Crisis)\",\n\t\t\t\t\t\t\t\t\t\t\t  ].map(\n\t\t\t\t\t\t\t\t\t\t\t\t\t(committee) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tregistration.data.preferences.committee.indexOf(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcommittee\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) + 1\n\t\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t\t\t: Array(8).fill(\"\")),\n\t\t\t\t\t\t\t\t  ]\n\t\t\t\t\t\t\t\t: selectedConference === \"scvmun\"\n\t\t\t\t\t\t\t\t? [\n\t\t\t\t\t\t\t\t\t\t...(registration.data.preferences?.scvmunCommittee?.map(\n\t\t\t\t\t\t\t\t\t\t\t(el: string) =>\n\t\t\t\t\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\t\t\t\t\tel,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"IAEA\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"DISEC\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"WHO\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"UNEP\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"SOCHUM\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"UNDP\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"LEGAL\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"UNESCO\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"Security Council (Spec)\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"Historic Security Council (Spec)\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"NATO (Spec)\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"World Bank (Spec)\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"UNHCR (Spec)\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"CSW (Spec)\",\n\t\t\t\t\t\t\t\t\t\t\t\t][\n\t\t\t\t\t\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"IAEA (International Atomic Energy Association)\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"DISEC (Disarmament and International Security Committee)\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"WHO (World Health Organization)\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"UNEP (United Nations Environmental Programme)\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"SOCHUM (Social, Humanitarian and Cultural)\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"UNDP (United Nations Development Programme)\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"LEGAL (Legal Committee)\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"UNESCO (United Nations Educational, Scientific and Cultural Organization)\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"Security Council (Specialty Committee)\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"Historic Security Council (Specialty Committee)\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"NATO (Specialty Committee)\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"World Bank (Specialty Committee)\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"UNHCR (United Nations High Commissioner for Refugees) (Specialty Committee)\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"CSW (Commission on the Status of Women) (Specialty Committee)\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t].indexOf(el) + 1\n\t\t\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t\t) || Array(14).fill(\"\")),\n\t\t\t\t\t\t\t\t\t\t...(registration.data.preferences\n\t\t\t\t\t\t\t\t\t\t\t?.scvmunCommittee\n\t\t\t\t\t\t\t\t\t\t\t? [\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"IAEA (International Atomic Energy Association)\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"DISEC (Disarmament and International Security Committee)\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"WHO (World Health Organization)\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"UNEP (United Nations Environmental Programme)\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"SOCHUM (Social, Humanitarian and Cultural)\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"UNDP (United Nations Development Programme)\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"LEGAL (Legal Committee)\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"UNESCO (United Nations Educational, Scientific and Cultural Organization)\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"Security Council (Specialty Committee)\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"Historic Security Council (Specialty Committee)\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"NATO (Specialty Committee)\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"World Bank (Specialty Committee)\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"UNHCR (United Nations High Commissioner for Refugees) (Specialty Committee)\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"CSW (Commission on the Status of Women) (Specialty Committee)\",\n\t\t\t\t\t\t\t\t\t\t\t  ].map(\n\t\t\t\t\t\t\t\t\t\t\t\t\t(committee) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tregistration.data.preferences.scvmunCommittee.indexOf(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcommittee\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) + 1\n\t\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t\t\t: Array(14).fill(\"\")),\n\t\t\t\t\t\t\t\t  ]\n\t\t\t\t\t\t\t\t: []),\n\t\t\t\t\t\t]\n\t\t\t\t\t\t\t.map((field) =>\n\t\t\t\t\t\t\t\t(field + \"\").indexOf(\",\") > -1\n\t\t\t\t\t\t\t\t\t? `\"${field}\"`\n\t\t\t\t\t\t\t\t\t: field || \"\"\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.join(\",\"),\n\t\t\t\t\t}))\n\t\t\t\t)\n\t\t\t);\n\t\t\tconst zip = new JSZip();\n\t\t\tconst fuhsdForms = zip.folder(\"FUHSD Field Trip Forms\");\n\n\t\t\tconst sfmunForms =\n\t\t\t\tselectedConference === \"sfmun\"\n\t\t\t\t\t? zip.folder(\"SFMUN Liability Forms\")\n\t\t\t\t\t: null;\n\t\t\tconst donationReceipts = zip.folder(\"Donation Receipts\");\n\t\t\tif (\n\t\t\t\t!fuhsdForms ||\n\t\t\t\t(selectedConference === \"sfmun\" && !sfmunForms) ||\n\t\t\t\t!donationReceipts\n\t\t\t) {\n\t\t\t\tthrow new Error(\"Unable to create zip folders.\");\n\t\t\t}\n\t\t\tconsole.log(registrations);\n\t\t\tregistrations.forEach((r) => {\n\t\t\t\tconst name = r.fullName.replace(/\\s/g, \"-\");\n\t\t\t\tif (r.files[0] && r.files[0].file) {\n\t\t\t\t\tfuhsdForms.file(\n\t\t\t\t\t\t`FUHSD-field-trip-form-for-${selectedConference.toUpperCase()}-${name}.pdf`,\n\t\t\t\t\t\tr.files[0].file\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tif (selectedConference === \"sfmun\" && sfmunForms) {\n\t\t\t\t\tif (r.files[1] && r.files[1].file) {\n\t\t\t\t\t\tsfmunForms.file(\n\t\t\t\t\t\t\t\"SFMUN-liability-form-\" + name + \".pdf\",\n\t\t\t\t\t\t\tr.files[1].file\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tif (r.files[2] && r.files[2].file) {\n\t\t\t\t\t\tconst ext = r.files[2].name?.split(\".\").pop();\n\t\t\t\t\t\tdonationReceipts.file(\n\t\t\t\t\t\t\t\"SFMUN-donation-receipt-\" + name + \".\" + ext,\n\t\t\t\t\t\t\tr.files[2].file\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (r.files[1] && r.files[1].file) {\n\t\t\t\t\t\tconst ext = r.files[1].name?.split(\".\").pop();\n\t\t\t\t\t\tdonationReceipts.file(\n\t\t\t\t\t\t\tselectedConference.toUpperCase() +\n\t\t\t\t\t\t\t\t\"-donation-receipt-\" +\n\t\t\t\t\t\t\t\tname +\n\t\t\t\t\t\t\t\t\".\" +\n\t\t\t\t\t\t\t\text,\n\t\t\t\t\t\t\tr.files[1].file\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tconst csv = [\n\t\t\t\theaders.join(\",\"),\n\t\t\t\t...registrations.map((r) => r.csvRow),\n\t\t\t].join(\"\\n\");\n\t\t\tzip.file(\n\t\t\t\t`${selectedConference.toUpperCase()}-registration-data-${\n\t\t\t\t\tallFields ? \"all-fields\" : \"preferences\"\n\t\t\t\t}.csv`,\n\t\t\t\tcsv\n\t\t\t);\n\t\t\tconst zipFile = await zip.generateAsync({\n\t\t\t\ttype: \"blob\",\n\t\t\t});\n\t\t\tsaveAs(\n\t\t\t\tzipFile,\n\t\t\t\t`${selectedConference.toUpperCase()}-registration-export-${\n\t\t\t\t\tallFields ? \"all-fields\" : \"preferences-and-forms\"\n\t\t\t\t}-${\n\t\t\t\t\tincludeIncomplete\n\t\t\t\t\t\t? \"including-incomplete-registrations\"\n\t\t\t\t\t\t: \"only-complete-registrations\"\n\t\t\t\t}.zip`\n\t\t\t);\n\t\t},\n\t\t[data, selectedConference, firebase]\n\t);\n\treturn (\n\t\t<AdminLayout title={\"Conference Registration\"}>\n\t\t\t<h1\n\t\t\t\tclassName={\n\t\t\t\t\t\"text-3xl leading-9 font-extrabold tracking-tight text-gray-900 sm:text-4xl sm:leading-10 mb-6\"\n\t\t\t\t}\n\t\t\t>\n\t\t\t\tConference Registration\n\t\t\t</h1>\n\t\t\t<b>Displaying live data for:</b>\n\t\t\t<Select\n\t\t\t\toptions={conferenceOptions}\n\t\t\t\tvalue={conferenceOptions.find(\n\t\t\t\t\t(c) => c.value === selectedConference\n\t\t\t\t)}\n\t\t\t\tonChange={(o) =>\n\t\t\t\t\tArray.isArray(o)\n\t\t\t\t\t\t? setSelectedConference(o[0].value)\n\t\t\t\t\t\t: setSelectedConference(o.value)\n\t\t\t\t}\n\t\t\t/>\n\t\t\t<h3 className={\"text-xl leading-7 font-bold tracking-tight mt-4\"}>\n\t\t\t\tRegistration Progress\n\t\t\t</h3>\n\t\t\t<p className={\"text-gray-700 mt-1\"}>\n\t\t\t\t{statistics.some((s) => s.length > 0) && (\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"link active:outline-none focus:outline-none\"\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tsetExpandStatistics(\n\t\t\t\t\t\t\t\tnew Array(statistics.length).fill(\n\t\t\t\t\t\t\t\t\t!expandStatistics.every(\n\t\t\t\t\t\t\t\t\t\t(e, i) =>\n\t\t\t\t\t\t\t\t\t\t\te || statistics[i].length === 0\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{/* Allow user to show all steps unless every step with users is already shown */}\n\t\t\t\t\t\t{expandStatistics.every(\n\t\t\t\t\t\t\t(e, i) => e || statistics[i].length === 0\n\t\t\t\t\t\t)\n\t\t\t\t\t\t\t? \"Collapse All Steps\"\n\t\t\t\t\t\t\t: \"Expand All Steps\"}\n\t\t\t\t\t</button>\n\t\t\t\t)}\n\t\t\t</p>\n\t\t\t{/*<p>*/}\n\t\t\t{/*\tNote: The personal and emergency information steps are shared */}\n\t\t\t{/*\tbetween all conferences. Thus, a member can be on the emergency */}\n\t\t\t{/*\tinformation or liability forms step without necessarily having */}\n\t\t\t{/*\texplicitly started to register for this specific conference. */}\n\t\t\t{/*</p>*/}\n\t\t\t<ul className={\"list-disc ml-5 mt-2\"}>\n\t\t\t\t{statistics.map((step, i) => (\n\t\t\t\t\t// don't show first two steps because they are misleading\n\t\t\t\t\t<li key={i}>\n\t\t\t\t\t\t{step.length} user\n\t\t\t\t\t\t{i < statistics.length - 1\n\t\t\t\t\t\t\t? `${\n\t\t\t\t\t\t\t\t\tstep.length !== 1 ? \"s are \" : \" is \"\n\t\t\t\t\t\t\t  } on the ${[\"preferences\", \"donations\"][i]} step.`\n\t\t\t\t\t\t\t: `${\n\t\t\t\t\t\t\t\t\tstep.length !== 1 ? \"s have \" : \" has \"\n\t\t\t\t\t\t\t  } finished registering for ${selectedConference.toUpperCase()}.`}{\" \"}\n\t\t\t\t\t\t{step.length > 0 && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\t\tsetExpandStatistics((o: boolean[]) => {\n\t\t\t\t\t\t\t\t\t\t\tconst newValue = o.slice();\n\t\t\t\t\t\t\t\t\t\t\tnewValue[i] = !newValue[i];\n\t\t\t\t\t\t\t\t\t\t\treturn newValue;\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tclassName=\"link active:outline-none focus:outline-none\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{expandStatistics[i] ? \"hide\" : \"show\"}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{expandStatistics[i] && step.length > 0 && (\n\t\t\t\t\t\t\t<ul className={\"list-circle ml-5\"}>\n\t\t\t\t\t\t\t\t{step.map((name) => (\n\t\t\t\t\t\t\t\t\t<li key={name}>{name}</li>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</li>\n\t\t\t\t))}\n\t\t\t</ul>\n\t\t\t<h3 className={\"text-xl leading-7 font-bold tracking-tight mt-4\"}>\n\t\t\t\tExport\n\t\t\t</h3>\n\t\t\t<div className={\"mt-2\"}>\n\t\t\t\t<p className={\"mb-3\"}>\n\t\t\t\t\tCurrently exporting{\" \"}\n\t\t\t\t\t{exportAllFields\n\t\t\t\t\t\t? \"all fields\"\n\t\t\t\t\t\t: \"only forms and preferences\"}{\" \"}\n\t\t\t\t\t(\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"link active:outline-none focus:outline-none\"\n\t\t\t\t\t\tonClick={() => setExportAllFields((o) => !o)}\n\t\t\t\t\t>\n\t\t\t\t\t\texport{\" \"}\n\t\t\t\t\t\t{!exportAllFields\n\t\t\t\t\t\t\t? \"all fields\"\n\t\t\t\t\t\t\t: \"only forms and preferences\"}{\" \"}\n\t\t\t\t\t\tinstead\n\t\t\t\t\t</button>\n\t\t\t\t\t)\n\t\t\t\t</p>\n\t\t\t\t<button\n\t\t\t\t\tonClick={() => exportRegistration(false, exportAllFields)}\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tclassName=\"relative inline-flex items-center px-4 py-2 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-indigo-600 shadow-sm hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:ring-indigo-500 active:bg-indigo-700 transition ease-in-out duration-150\"\n\t\t\t\t>\n\t\t\t\t\t<span>\n\t\t\t\t\t\tExport completed {selectedConference.toUpperCase()}{\" \"}\n\t\t\t\t\t\tregistrations\n\t\t\t\t\t</span>\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\tonClick={() => exportRegistration(true, exportAllFields)}\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tclassName=\"mt-3 md:mt-0 md:ml-3 relative inline-flex items-center px-4 py-2 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-indigo-600 shadow-sm hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:ring-indigo-500 active:bg-indigo-700 transition ease-in-out duration-150\"\n\t\t\t\t>\n\t\t\t\t\t<span>\n\t\t\t\t\t\tExport all {selectedConference.toUpperCase()}{\" \"}\n\t\t\t\t\t\tregistrations (including incomplete registrations)\n\t\t\t\t\t</span>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</AdminLayout>\n\t);\n}\n","/Users/jmeng/Documents/code/montavistamun/src/pages/admin/index.tsx",[],"/Users/jmeng/Documents/code/montavistamun/src/pages/admin/logs.tsx",["727"],"import React, { useCallback, useEffect, useState } from \"react\";\nimport useRequireLogin from \"../../components/accounts/useRequireLogin\";\nimport LogDetailModal from \"../../components/admin/logs/LogDetailModal\";\nimport LogItem, { AdminLogItem } from \"../../components/admin/logs/LogItem\";\nimport AdminLayout from \"../../components/layout/AdminLayout\";\nimport useFirebase from \"../../firebase/useFirebase\";\n\nexport default function AdminLogPage(): React.ReactElement {\n\tuseRequireLogin();\n\n\tconst firebase = useFirebase();\n\tconst [actions, setActions] = useState<Record<string, any>[]>([]);\n\tconst [canLoadMore, setCanLoadMore] = useState(true);\n\tconst [loadingMore, setLoadingMore] = useState(false);\n\tconst [usersData, setUsersData] = useState<{\n\t\t[uid: string]: {\n\t\t\tname: string;\n\t\t\temail: string;\n\t\t};\n\t}>({});\n\tconst [requestedUsers, setRequestedUsers] = useState<string[]>([]);\n\tconst [showDetailModal, setShowDetailModal] = useState(false);\n\tconst [detailModalData, setDetailModalData] = useState<{\n\t\tid: string;\n\t\tloading: boolean;\n\t\tdata?: AdminLogItem;\n\t}>({ loading: true, id: \"\" });\n\tconst requestUserData = useCallback(\n\t\t(uid: string) => {\n\t\t\tif (!firebase) return;\n\t\t\tif (requestedUsers.includes(uid)) return;\n\t\t\tsetRequestedUsers((old) => [...old, uid]);\n\t\t\tfirebase\n\t\t\t\t.firestore()\n\t\t\t\t.collection(\"users\")\n\t\t\t\t.doc(uid)\n\t\t\t\t.get()\n\t\t\t\t.then((snapshot) => {\n\t\t\t\t\tconst data = snapshot.data();\n\t\t\t\t\tsetUsersData((old) => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...old,\n\t\t\t\t\t\t\t[uid]: {\n\t\t\t\t\t\t\t\tname:\n\t\t\t\t\t\t\t\t\tdata?.firstName || data?.lastName\n\t\t\t\t\t\t\t\t\t\t? `${data?.firstName || \"\"}${\n\t\t\t\t\t\t\t\t\t\t\t\tdata?.firstName &&\n\t\t\t\t\t\t\t\t\t\t\t\tdata?.lastName\n\t\t\t\t\t\t\t\t\t\t\t\t\t? \" \"\n\t\t\t\t\t\t\t\t\t\t\t\t\t: \"\"\n\t\t\t\t\t\t\t\t\t\t  }${data?.lastName || \"\"}`\n\t\t\t\t\t\t\t\t\t\t: \"User \" + uid,\n\t\t\t\t\t\t\t\temail: data?.email,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t};\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t},\n\t\t[firebase, requestedUsers]\n\t);\n\tuseEffect(() => {\n\t\tif (!firebase) return;\n\t\t// fetch the most recent 20 and listen for new documents\n\t\tconst newActionListener = firebase\n\t\t\t.firestore()\n\t\t\t.collection(\"admin-log\")\n\t\t\t.orderBy(\"timestamp\", \"asc\")\n\t\t\t.startAfter(firebase.firestore.Timestamp.now())\n\t\t\t.onSnapshot((snapshot) => {\n\t\t\t\tsetActions((oldActions) => [\n\t\t\t\t\t...snapshot\n\t\t\t\t\t\t.docChanges()\n\t\t\t\t\t\t.filter((change) => change.type === \"added\")\n\t\t\t\t\t\t.map((change) => ({\n\t\t\t\t\t\t\tid: change.doc.id,\n\t\t\t\t\t\t\tdata: change.doc.data(),\n\t\t\t\t\t\t})),\n\t\t\t\t\t...oldActions,\n\t\t\t\t]);\n\t\t\t});\n\n\t\treturn () => newActionListener();\n\t}, [firebase]);\n\tuseEffect(() => {\n\t\tif (!firebase) return;\n\t\tif (actions.length > 0) return;\n\t\tfirebase\n\t\t\t.firestore()\n\t\t\t.collection(\"admin-log\")\n\t\t\t.orderBy(\"timestamp\", \"desc\")\n\t\t\t.limit(16)\n\t\t\t.get()\n\t\t\t.then((snapshot) => {\n\t\t\t\tsetActions((oldActions) => [\n\t\t\t\t\t...oldActions,\n\t\t\t\t\t...snapshot\n\t\t\t\t\t\t.docChanges()\n\t\t\t\t\t\t.filter((change) => change.type === \"added\")\n\t\t\t\t\t\t.map((change) => ({\n\t\t\t\t\t\t\tid: change.doc.id,\n\t\t\t\t\t\t\tdata: change.doc.data(),\n\t\t\t\t\t\t})),\n\t\t\t\t]);\n\t\t\t});\n\t}, [firebase]);\n\tuseEffect(() => {\n\t\tif (!firebase) return;\n\t\tconst handler = () => {\n\t\t\tconst id = window.location.hash?.substring(1) || \"\";\n\t\t\tif (id) {\n\t\t\t\tconst data = actions.find((a) => a.id == id) || null;\n\t\t\t\tif (data) {\n\t\t\t\t\tsetDetailModalData({\n\t\t\t\t\t\tid: id,\n\t\t\t\t\t\tdata: data.data,\n\t\t\t\t\t\tloading: false,\n\t\t\t\t\t});\n\t\t\t\t\tsetShowDetailModal(true);\n\t\t\t\t} else {\n\t\t\t\t\tsetDetailModalData({\n\t\t\t\t\t\tid: id,\n\t\t\t\t\t\tloading: true,\n\t\t\t\t\t});\n\t\t\t\t\tsetShowDetailModal(true);\n\t\t\t\t\tfirebase\n\t\t\t\t\t\t.firestore()\n\t\t\t\t\t\t.collection(\"admin-log\")\n\t\t\t\t\t\t.doc(id)\n\t\t\t\t\t\t.get()\n\t\t\t\t\t\t.then((snapshot) => {\n\t\t\t\t\t\t\tconst data = snapshot.data() as AdminLogItem;\n\t\t\t\t\t\t\trequestUserData(data?.user);\n\t\t\t\t\t\t\tif (data?.action == \"update-user-permissions\") {\n\t\t\t\t\t\t\t\trequestUserData(data?.target);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsetDetailModalData({\n\t\t\t\t\t\t\t\tid: id,\n\t\t\t\t\t\t\t\tloading: false,\n\t\t\t\t\t\t\t\tdata: data,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsetShowDetailModal(false);\n\t\t\t}\n\t\t};\n\t\twindow.addEventListener(\"hashchange\", handler);\n\t\thandler();\n\t\treturn () => window.removeEventListener(\"hashchange\", handler);\n\t}, [firebase, actions]);\n\treturn (\n\t\t<AdminLayout title={\"Admin Logs\"}>\n\t\t\t<h1\n\t\t\t\tclassName={\n\t\t\t\t\t\"text-3xl leading-9 font-extrabold tracking-tight text-gray-900 sm:text-4xl sm:leading-10 mb-6\"\n\t\t\t\t}\n\t\t\t>\n\t\t\t\tLive Admin Logs\n\t\t\t</h1>\n\t\t\t<div className=\"bg-white shadow overflow-hidden sm:rounded-md\">\n\t\t\t\t{actions.length === 0 ? (\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<div className=\"px-4 py-4 flex items-center sm:px-6\">\n\t\t\t\t\t\t\t\t<div className=\"text-md leading-5 font-medium truncate\">\n\t\t\t\t\t\t\t\t\tLoading...\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t) : (\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t{actions.map(({ id, data }) => (\n\t\t\t\t\t\t\t<LogItem\n\t\t\t\t\t\t\t\tkey={id}\n\t\t\t\t\t\t\t\tid={id}\n\t\t\t\t\t\t\t\tdata={data}\n\t\t\t\t\t\t\t\trequestUserData={requestUserData}\n\t\t\t\t\t\t\t\tusersData={usersData}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t))}\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\tclassName=\"block hover:bg-gray-50 focus:outline-none focus:bg-gray-50 transition duration-150 ease-in-out\"\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tif (!firebase) return;\n\t\t\t\t\t\t\t\t\tif (loadingMore || !canLoadMore) return;\n\t\t\t\t\t\t\t\t\tsetLoadingMore(true);\n\t\t\t\t\t\t\t\t\tfirebase\n\t\t\t\t\t\t\t\t\t\t.firestore()\n\t\t\t\t\t\t\t\t\t\t.collection(\"admin-log\")\n\t\t\t\t\t\t\t\t\t\t.orderBy(\"timestamp\", \"desc\")\n\t\t\t\t\t\t\t\t\t\t.startAfter(\n\t\t\t\t\t\t\t\t\t\t\tactions[actions.length - 1].data\n\t\t\t\t\t\t\t\t\t\t\t\t.timestamp\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t.limit(8)\n\t\t\t\t\t\t\t\t\t\t.get()\n\t\t\t\t\t\t\t\t\t\t.then((snapshot) => {\n\t\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\t\tsnapshot\n\t\t\t\t\t\t\t\t\t\t\t\t\t.docChanges()\n\t\t\t\t\t\t\t\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(change) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tchange.type ===\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"added\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t).length < 8\n\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\tsetCanLoadMore(false);\n\t\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tsetActions((oldActions) => [\n\t\t\t\t\t\t\t\t\t\t\t\t...oldActions,\n\t\t\t\t\t\t\t\t\t\t\t\t...snapshot\n\t\t\t\t\t\t\t\t\t\t\t\t\t.docChanges()\n\t\t\t\t\t\t\t\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(change) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tchange.type ===\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"added\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t.map((change) => ({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid: change.doc.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata: change.doc.data(),\n\t\t\t\t\t\t\t\t\t\t\t\t\t})),\n\t\t\t\t\t\t\t\t\t\t\t]);\n\t\t\t\t\t\t\t\t\t\t\tsetLoadingMore(false);\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div className=\"px-4 py-4 flex items-center sm:px-6\">\n\t\t\t\t\t\t\t\t\t<div className=\"text-md leading-5 font-medium truncate\">\n\t\t\t\t\t\t\t\t\t\t{!canLoadMore\n\t\t\t\t\t\t\t\t\t\t\t? \"No more to load\"\n\t\t\t\t\t\t\t\t\t\t\t: loadingMore\n\t\t\t\t\t\t\t\t\t\t\t? \"Loading More...\"\n\t\t\t\t\t\t\t\t\t\t\t: \"Load More\"}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t<LogDetailModal\n\t\t\t\tshow={showDetailModal}\n\t\t\t\tdata={detailModalData}\n\t\t\t\tusersData={usersData}\n\t\t\t/>\n\t\t</AdminLayout>\n\t);\n}\n","/Users/jmeng/Documents/code/montavistamun/src/pages/admin/member-statistics.tsx",["728"],"import React, { useEffect, useMemo, useState } from \"react\";\nimport { Bar as BarChart } from \"react-chartjs-2\";\nimport UserData from \"../../components/admin/UserData\";\nimport AdminLayout from \"../../components/layout/AdminLayout\";\nimport AuthContext from \"../../context/AuthContext\";\nimport useFirebase from \"../../firebase/useFirebase\";\nimport { getGrade } from \"../../utils/schoolYearUtils\";\n\nexport default function AdminStatsPage(): React.ReactElement {\n\tconst firebase = useFirebase();\n\n\tconst [allUsers, setAllUsers] = useState<{ id: string; data: UserData }[]>(\n\t\t[]\n\t);\n\tconst [allRegistration, setAllRegistration] = useState([]);\n\tuseEffect(() => {\n\t\tif (!firebase) return;\n\n\t\tfirebase\n\t\t\t.firestore()\n\t\t\t.collection(\"users\")\n\t\t\t.get()\n\t\t\t.then(function (querySnapshot) {\n\t\t\t\tconst temp = [];\n\t\t\t\tquerySnapshot.forEach(function (doc) {\n\t\t\t\t\ttemp.push({\n\t\t\t\t\t\tid: doc.id,\n\t\t\t\t\t\tdata: doc.data(),\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tsetAllUsers(temp);\n\t\t\t})\n\t\t\t.catch(function (error) {\n\t\t\t\tconsole.log(\"Error getting documents: \", error);\n\t\t\t});\n\t\tfirebase\n\t\t\t.firestore()\n\t\t\t.collection(\"registration\")\n\t\t\t.get()\n\t\t\t.then(function (querySnapshot) {\n\t\t\t\tconst temp = [];\n\t\t\t\tquerySnapshot.forEach(function (doc) {\n\t\t\t\t\ttemp.push({\n\t\t\t\t\t\tid: doc.id,\n\t\t\t\t\t\tdata: doc.data(),\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tsetAllRegistration(temp);\n\t\t\t})\n\t\t\t.catch(function (error) {\n\t\t\t\tconsole.log(\"Error getting documents: \", error);\n\t\t\t});\n\t}, [firebase]);\n\tconst [expanded, setExpanded] = useState(Array(8).fill(false));\n\n\tconst hasConfirmedConference = (el) =>\n\t\tel &&\n\t\t(el.data.confirm?.scvmunConfirmed ||\n\t\t\tel.data.confirm?.smuncConfirmed ||\n\t\t\tel.data.confirm?.bmunConfirmed ||\n\t\t\tel.data.confirm?.sfmunConfirmed);\n\tconst chartData = useMemo(\n\t\t() => ({\n\t\t\tlabels: [\"Freshmen\", \"Sophomores\", \"Juniors\", \"Seniors\"],\n\t\t\tdatasets: [\n\t\t\t\t{\n\t\t\t\t\tlabel: \"One Or More Conferences\",\n\t\t\t\t\tdata: [9, 10, 11, 12].map(\n\t\t\t\t\t\t(grade) =>\n\t\t\t\t\t\t\tallUsers.filter(\n\t\t\t\t\t\t\t\t(el) =>\n\t\t\t\t\t\t\t\t\tgetGrade(el.data.classOf) == grade &&\n\t\t\t\t\t\t\t\t\thasConfirmedConference(\n\t\t\t\t\t\t\t\t\t\tallRegistration.find(\n\t\t\t\t\t\t\t\t\t\t\t(reg) => reg.id == el.id\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t).length\n\t\t\t\t\t),\n\t\t\t\t\tbackgroundColor: \"rgb(54, 162, 235)\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: \"No Conferences\",\n\t\t\t\t\tdata: [9, 10, 11, 12].map(\n\t\t\t\t\t\t(grade) =>\n\t\t\t\t\t\t\tallUsers.filter(\n\t\t\t\t\t\t\t\t(el) =>\n\t\t\t\t\t\t\t\t\tgetGrade(el.data.classOf) == grade &&\n\t\t\t\t\t\t\t\t\t!hasConfirmedConference(\n\t\t\t\t\t\t\t\t\t\tallRegistration.find(\n\t\t\t\t\t\t\t\t\t\t\t(reg) => reg.id == el.id\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t).length\n\t\t\t\t\t),\n\t\t\t\t\tbackgroundColor: \"rgb(75, 192, 192)\",\n\t\t\t\t},\n\t\t\t],\n\t\t}),\n\t\t[allUsers, allRegistration]\n\t);\n\treturn (\n\t\t<AdminLayout title={\"Admin Dashboard\"}>\n\t\t\t<h1\n\t\t\t\tclassName={\n\t\t\t\t\t\"text-3xl leading-9 font-extrabold tracking-tight text-gray-900 sm:text-4xl sm:leading-10 mb-6\"\n\t\t\t\t}\n\t\t\t>\n\t\t\t\tMember Statistics\n\t\t\t</h1>\n\t\t\t<BarChart\n\t\t\t\tdata={chartData}\n\t\t\t\toptions={{\n\t\t\t\t\ttooltips: { yAlign: \"bottom\" },\n\t\t\t\t\tscales: {\n\t\t\t\t\t\tyAxes: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tstacked: true,\n\t\t\t\t\t\t\t\tticks: {\n\t\t\t\t\t\t\t\t\tsuggestedMax:\n\t\t\t\t\t\t\t\t\t\t// take 5 more than the highest value, and round up to nearest 10\n\t\t\t\t\t\t\t\t\t\tMath.ceil(\n\t\t\t\t\t\t\t\t\t\t\t([9, 10, 11, 12].reduce(\n\t\t\t\t\t\t\t\t\t\t\t\t(maxVal, grade) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst numInGrade = allUsers.filter(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(el) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgetGrade(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tel.data.classOf\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) == grade\n\t\t\t\t\t\t\t\t\t\t\t\t\t).length;\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (numInGrade > maxVal) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn numInGrade;\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn maxVal;\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t0\n\t\t\t\t\t\t\t\t\t\t\t) +\n\t\t\t\t\t\t\t\t\t\t\t\t5) /\n\t\t\t\t\t\t\t\t\t\t\t\t10\n\t\t\t\t\t\t\t\t\t\t) * 10,\n\t\t\t\t\t\t\t\t\tbeginAtZero: true,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t\txAxes: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tstacked: true,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t{/*<p className={\"text-gray-700 mt-1\"}>*/}\n\t\t\t{/*\t{*/}\n\t\t\t{/*\t\t<button*/}\n\t\t\t{/*\t\t\tclassName=\"link active:outline-none focus:outline-none\"*/}\n\t\t\t{/*\t\t\tonClick={() => {*/}\n\t\t\t{/*\t\t\t\tsetExpanded(*/}\n\t\t\t{/*\t\t\t\t\tnew Array(expanded.length).fill(*/}\n\t\t\t{/*\t\t\t\t\t\t!expanded.every((e) => e)*/}\n\t\t\t{/*\t\t\t\t\t)*/}\n\t\t\t{/*\t\t\t\t);*/}\n\t\t\t{/*\t\t\t}}*/}\n\t\t\t{/*\t\t>*/}\n\t\t\t{/*\t\t\t/!* Allow user to show all steps unless every step with users is already shown *!/*/}\n\t\t\t{/*\t\t\t{expanded.every((e) => e)*/}\n\t\t\t{/*\t\t\t\t? \"Collapse All Steps\"*/}\n\t\t\t{/*\t\t\t\t: \"Expand All Steps\"}*/}\n\t\t\t{/*\t\t</button>*/}\n\t\t\t{/*\t}*/}\n\t\t\t{/*</p>*/}\n\t\t\t{allUsers.length == 0 || allRegistration.length == 0 ? (\n\t\t\t\t<p>Loading...</p>\n\t\t\t) : (\n\t\t\t\t<>\n\t\t\t\t\t<ul className={\"mb-4\"}>\n\t\t\t\t\t\t{[\n\t\t\t\t\t\t\t[9, \"freshmen\"],\n\t\t\t\t\t\t\t[10, \"sophomores\"],\n\t\t\t\t\t\t\t[11, \"juniors\"],\n\t\t\t\t\t\t\t[12, \"seniors\"],\n\t\t\t\t\t\t].map(([grade, gradeWord], i) => (\n\t\t\t\t\t\t\t<li key={grade}>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tallUsers.filter(\n\t\t\t\t\t\t\t\t\t\t(el) =>\n\t\t\t\t\t\t\t\t\t\t\tgetGrade(el.data.classOf) == grade\n\t\t\t\t\t\t\t\t\t).length\n\t\t\t\t\t\t\t\t}{\" \"}\n\t\t\t\t\t\t\t\t{gradeWord} with accounts (\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\tclassName={\"link\"}\n\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\tsetExpanded((old) => {\n\t\t\t\t\t\t\t\t\t\t\tconst newArr = old.slice();\n\t\t\t\t\t\t\t\t\t\t\tnewArr[i] = !newArr[i];\n\t\t\t\t\t\t\t\t\t\t\treturn newArr;\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{!expanded[i] ? \"show\" : \"hide\"}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t{expanded[i] && (\n\t\t\t\t\t\t\t\t\t<ul className={\"list-disc ml-5\"}>\n\t\t\t\t\t\t\t\t\t\t{allUsers\n\t\t\t\t\t\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t\t\t\t\t\t(el) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tgetGrade(el.data.classOf) ==\n\t\t\t\t\t\t\t\t\t\t\t\t\tgrade\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t.sort((a, b) =>\n\t\t\t\t\t\t\t\t\t\t\t\ta.data.lastName.localeCompare(\n\t\t\t\t\t\t\t\t\t\t\t\t\tb.data.lastName\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t.map((u) => (\n\t\t\t\t\t\t\t\t\t\t\t\t<li key={u.id}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{u.data.firstName}{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{u.data.lastName}\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</ul>\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t{[\n\t\t\t\t\t\t\t[9, \"freshmen\"],\n\t\t\t\t\t\t\t[10, \"sophomores\"],\n\t\t\t\t\t\t\t[11, \"juniors\"],\n\t\t\t\t\t\t\t[12, \"seniors\"],\n\t\t\t\t\t\t].map(([grade, gradeWord], i) => (\n\t\t\t\t\t\t\t<li key={grade}>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tallUsers.filter(\n\t\t\t\t\t\t\t\t\t\t(el) =>\n\t\t\t\t\t\t\t\t\t\t\tgetGrade(el.data.classOf) ==\n\t\t\t\t\t\t\t\t\t\t\t\tgrade &&\n\t\t\t\t\t\t\t\t\t\t\thasConfirmedConference(\n\t\t\t\t\t\t\t\t\t\t\t\tallRegistration.find(\n\t\t\t\t\t\t\t\t\t\t\t\t\t(reg) => reg.id == el.id\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t).length\n\t\t\t\t\t\t\t\t}{\" \"}\n\t\t\t\t\t\t\t\t{gradeWord} with one or more registrations (\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\tclassName={\"link\"}\n\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\tsetExpanded((old) => {\n\t\t\t\t\t\t\t\t\t\t\tconst newArr = old.slice();\n\t\t\t\t\t\t\t\t\t\t\tnewArr[i + 4] = !newArr[i + 4];\n\t\t\t\t\t\t\t\t\t\t\treturn newArr;\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{!expanded[i + 4] ? \"show\" : \"hide\"}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t{expanded[i + 4] && (\n\t\t\t\t\t\t\t\t\t<ul className={\"list-disc ml-5\"}>\n\t\t\t\t\t\t\t\t\t\t{allUsers\n\t\t\t\t\t\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t\t\t\t\t\t(el) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tgetGrade(el.data.classOf) ==\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tgrade &&\n\t\t\t\t\t\t\t\t\t\t\t\t\thasConfirmedConference(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tallRegistration.find(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(reg) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treg.id == el.id\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t.sort((a, b) =>\n\t\t\t\t\t\t\t\t\t\t\t\ta.data.lastName.localeCompare(\n\t\t\t\t\t\t\t\t\t\t\t\t\tb.data.lastName\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t.map((u) => (\n\t\t\t\t\t\t\t\t\t\t\t\t<li key={u.id}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{u.data.firstName}{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{u.data.lastName} (\n\t\t\t\t\t\t\t\t\t\t\t\t\t{Object.keys(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tallRegistration.find(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(reg) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treg.id == u.id\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)?.data.confirm || {}\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.map((name) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.replace(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"Confirmed\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.toUpperCase()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.sort()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.join(\", \")}\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</ul>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</AdminLayout>\n\t);\n}\n","/Users/jmeng/Documents/code/montavistamun/src/pages/admin/members.tsx",["729","730","731"],"import axios from \"axios\";\nimport type firebaseType from \"firebase\";\nimport * as Icons from \"heroicons-react\";\nimport React, { useState } from \"react\";\nimport SelectAllCheckbox from \"../../components/admin/SelectAllCheckbox\";\nimport UserData from \"../../components/admin/UserData\";\nimport AdminLayout from \"../../components/layout/AdminLayout\";\nimport Transition from \"../../components/Transition\";\nimport AuthContext from \"../../context/AuthContext\";\nimport useFirebase from \"../../firebase/useFirebase\";\nimport { getGrade } from \"../../utils/schoolYearUtils\";\n\nexport default function MembersPage(): React.ReactElement {\n\tconst [lastActionID, setLastActionID] = useState(\"\");\n\n\tconst [selectedUsers, setSelectedUsers] = React.useState<Set<string>>(\n\t\t() => new Set()\n\t);\n\tconst [loadingUsers, setLoadingUsers] = useState(true);\n\n\tconst firebase = useFirebase();\n\tconst {\n\t\tuser,\n\t\tloading,\n\t\tverified: userVerified,\n\t\tadmin: userAdmin,\n\t} = React.useContext(AuthContext);\n\tconst [users, setUsers] = React.useState<\n\t\t{\n\t\t\tid: string;\n\t\t\tdata: UserData;\n\t\t}[]\n\t>([]);\n\n\tReact.useEffect(() => {\n\t\tif (!firebase || !user) {\n\t\t\treturn;\n\t\t}\n\t\tif (!userAdmin) {\n\t\t\treturn;\n\t\t}\n\t\tconst unsubscribe = firebase\n\t\t\t.firestore()\n\t\t\t.collection(\"users\")\n\t\t\t.onSnapshot((querySnapshot) => {\n\t\t\t\tconst newUsers: {\n\t\t\t\t\tid: string;\n\t\t\t\t\tdata: UserData;\n\t\t\t\t}[] = [];\n\t\t\t\t(querySnapshot as firebaseType.firestore.QuerySnapshot<\n\t\t\t\t\tUserData\n\t\t\t\t>).forEach((doc) => {\n\t\t\t\t\tnewUsers.push({\n\t\t\t\t\t\tid: doc.id,\n\t\t\t\t\t\tdata: doc.data(),\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tsetUsers(newUsers);\n\t\t\t\tsetLoadingUsers(false);\n\t\t\t});\n\n\t\treturn () => unsubscribe();\n\t}, [firebase, user, userAdmin]);\n\n\tconst allUsers = users\n\t\t.filter((user) => showDisabled || !user.data.disabled)\n\t\t.sort((a, b) =>\n\t\t\t`${a.data.firstName} ${a.data.lastName}`.localeCompare(\n\t\t\t\t`${b.data.firstName} ${b.data.lastName}`\n\t\t\t)\n\t\t)\n\t\t.map((u) => u.id);\n\tconst updateCheckbox = (\n\t\tid: string,\n\t\tchecked: boolean,\n\t\tshiftKey: boolean\n\t) => {\n\t\tsetSelectedUsers((set) => {\n\t\t\tconst clone = new Set(set);\n\t\t\tif (shiftKey && lastActionID) {\n\t\t\t\tlet startIndex = allUsers.indexOf(lastActionID);\n\t\t\t\tlet endIndex = allUsers.indexOf(id);\n\t\t\t\tif (startIndex === -1 || endIndex === -1) {\n\t\t\t\t\tif (checked || startIndex == endIndex) {\n\t\t\t\t\t\tclone.add(id);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tclone.delete(id);\n\t\t\t\t\t}\n\t\t\t\t\treturn clone;\n\t\t\t\t}\n\t\t\t\tif (startIndex > endIndex) {\n\t\t\t\t\tconst temp = startIndex;\n\t\t\t\t\tstartIndex = endIndex;\n\t\t\t\t\tendIndex = temp;\n\t\t\t\t}\n\t\t\t\tfor (let i = startIndex; i <= endIndex; i++) {\n\t\t\t\t\tif (checked) {\n\t\t\t\t\t\tclone.add(allUsers[i]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tclone.delete(allUsers[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (checked) {\n\t\t\t\t\tclone.add(id);\n\t\t\t\t} else {\n\t\t\t\t\tclone.delete(id);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn clone;\n\t\t});\n\t\tsetLastActionID(id);\n\t};\n\tconst [showConfirmModal, setShowConfirmModal] = useState(false);\n\tconst [confirmModal, setConfirmModal] = React.useState<{\n\t\ttitle: string;\n\t\ttext: string;\n\t\tusers: {\n\t\t\tname: string;\n\t\t\temail: string;\n\t\t}[];\n\t\tonConfirm: () => void;\n\t\tbuttonText: string;\n\t\terror?: string;\n\t}>();\n\t// const Checkbox = ({\n\t// \tindeterminate,\n\t// \tchecked,\n\t// \tonChange,\n\t// }: {\n\t// \tindeterminate: boolean;\n\t// \tchecked: boolean;\n\t// \tonChange: ChangeEventHandler;\n\t// }) => {\n\t// \tconst ref = React.useRef(null);\n\t// \tReact.useEffect(() => {\n\t// \t\tif (ref.current) {\n\t// \t\t\tref.current.indeterminate = indeterminate;\n\t// \t\t}\n\t// \t}, [indeterminate, checked]);\n\t// \treturn (\n\t// \t\t<input\n\t// \t\t\ttype=\"checkbox\"\n\t// \t\t\tclassName=\"form-checkbox h-6 w-6\"\n\t// \t\t\tchecked={checked}\n\t// \t\t\tonChange={onChange}\n\t// \t\t\tref={ref}\n\t// \t\t/>\n\t// \t);\n\t// };\n\tconst updatePermissions = (\n\t\tmode: \"verify\" | \"unverify\" | \"make_admin\" | \"remove_admin\"\n\t) => {\n\t\tconst isBulkAction = selectedUsers.size > 1;\n\t\t// firstUser is only needed if its not a bulk action\n\t\tconst firstUser = isBulkAction\n\t\t\t? null\n\t\t\t: users.find(\n\t\t\t\t\t(user) => user.id === selectedUsers.values().next().value\n\t\t\t  );\n\t\tconst mappedUsers = Array.from(selectedUsers).map((id) => {\n\t\t\tconst user = users.find((user) => user.id === id);\n\t\t\tif (!user) {\n\t\t\t\treturn {\n\t\t\t\t\tname: \"Unknown\",\n\t\t\t\t\temail: \"Unknown\",\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tname: user.data.firstName + \" \" + user.data.lastName,\n\t\t\t\temail: user.data.email,\n\t\t\t\tid: user.id,\n\t\t\t};\n\t\t});\n\t\tconst actionWord =\n\t\t\tmode == \"verify\" || mode == \"unverify\"\n\t\t\t\t? mode\n\t\t\t\t: mode == \"make_admin\"\n\t\t\t\t? \"Promote\"\n\t\t\t\t: \"Demote\";\n\t\tconst actionWordUpper =\n\t\t\tactionWord.charAt(0).toUpperCase() + actionWord.substring(1);\n\t\tsetConfirmModal({\n\t\t\ttitle: isBulkAction\n\t\t\t\t? `${actionWordUpper} ${selectedUsers.size} members?`\n\t\t\t\t: `${actionWordUpper} member?`,\n\t\t\ttext: isBulkAction\n\t\t\t\t? `Are you sure you would like to ${actionWord} these members${\n\t\t\t\t\t\tmode == \"make_admin\"\n\t\t\t\t\t\t\t? \" to administrator\"\n\t\t\t\t\t\t\t: mode == \"remove_admin\"\n\t\t\t\t\t\t\t? \" from administrator\"\n\t\t\t\t\t\t\t: \"\"\n\t\t\t\t  }?`\n\t\t\t\t: `Are you should you would like to ${actionWord} ${\n\t\t\t\t\t\tfirstUser?.data.firstName\n\t\t\t\t  } ${firstUser?.data.lastName} (${firstUser?.data.email})${\n\t\t\t\t\t\tmode == \"make_admin\"\n\t\t\t\t\t\t\t? \" to administrator\"\n\t\t\t\t\t\t\t: mode == \"remove_admin\"\n\t\t\t\t\t\t\t? \" from administrator\"\n\t\t\t\t\t\t\t: \"\"\n\t\t\t\t  }?`,\n\t\t\tbuttonText: isBulkAction\n\t\t\t\t? `${actionWordUpper} ${selectedUsers?.size} Members`\n\t\t\t\t: `${actionWordUpper} Member`,\n\t\t\tusers: mappedUsers,\n\t\t\tonConfirm: async () => {\n\t\t\t\tconst users = mappedUsers;\n\n\t\t\t\ttry {\n\t\t\t\t\tconst token = await user?.getIdToken(true);\n\t\t\t\t\tconst start = new Date().getTime();\n\t\t\t\t\tawait Promise.all(\n\t\t\t\t\t\tusers.map((targetUser) =>\n\t\t\t\t\t\t\taxios.post(\n\t\t\t\t\t\t\t\t\"/.netlify/functions/set-user-permissions\",\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tnewPermissions:\n\t\t\t\t\t\t\t\t\t\tmode == \"verify\" || mode == \"unverify\"\n\t\t\t\t\t\t\t\t\t\t\t? { verified: mode == \"verify\" }\n\t\t\t\t\t\t\t\t\t\t\t: { admin: mode == \"make_admin\" },\n\t\t\t\t\t\t\t\t\ttarget: targetUser.id,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\t\t\tauthorization: `Bearer ${token}`,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t).then(() =>\n\t\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\tusers.length +\n\t\t\t\t\t\t\t\t\" Requests Took \" +\n\t\t\t\t\t\t\t\t(new Date().getTime() - start) / 1000 +\n\t\t\t\t\t\t\t\t\" seconds\"\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t\t\tsetShowConfirmModal(false);\n\t\t\t\t} catch (error) {\n\t\t\t\t\tsetConfirmModal((current) =>\n\t\t\t\t\t\tcurrent\n\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t...current,\n\t\t\t\t\t\t\t\t\terror:\n\t\t\t\t\t\t\t\t\t\t\"An error occurred. Please try again later.\",\n\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t);\n\t\t\t\t\tconsole.log(error);\n\t\t\t\t\tconsole.log({ ...error });\n\t\t\t\t\tif (error.response) {\n\t\t\t\t\t\tconsole.log(error.response.data);\n\t\t\t\t\t\tconsole.log(error.response.status);\n\t\t\t\t\t\tconsole.log(error.response.headers);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\t\tsetShowConfirmModal(true);\n\t};\n\tconst tableHeaders = [\n\t\t\"Basic Information\",\n\t\t// \"SFMUN Registration\",\n\t\t\"Permissions\",\n\t];\n\tconst [showDisabled, setShowDisabled] = useState(false);\n\treturn (\n\t\t<AdminLayout title={\"Members\"}>\n\t\t\t<h1\n\t\t\t\tclassName={\n\t\t\t\t\t\"text-3xl leading-9 font-extrabold tracking-tight text-gray-900 sm:text-4xl sm:leading-10 mb-6\"\n\t\t\t\t}\n\t\t\t>\n\t\t\t\tMembers\n\t\t\t</h1>\n\n\t\t\t<div className={\"py-4 sticky top-0 bg-gray-100\"}>\n\t\t\t\t<span className=\"relative z-0 inline-flex shadow-sm rounded-md mr-4\">\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tonClick={() => updatePermissions(\"verify\")}\n\t\t\t\t\t\tdisabled={selectedUsers.size === 0}\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t(selectedUsers.size === 0\n\t\t\t\t\t\t\t\t? \"bg-gray-200\"\n\t\t\t\t\t\t\t\t: \"bg-white hover:text-gray-500 focus:z-10 focus:outline-none focus:border-blue-300 focus:ring-blue-500 active:bg-gray-100 active:text-gray-700 \") +\n\t\t\t\t\t\t\t\" \" +\n\t\t\t\t\t\t\t\"relative inline-flex items-center px-4 py-2 rounded-l-md border border-gray-300 text-sm leading-5 font-medium text-gray-700 transition ease-in-out duration-150\"\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Icons.CheckCircleOutline\n\t\t\t\t\t\t\tclassName={\"h-5 w-5 text-gray-600 mr-3\"}\n\t\t\t\t\t\t/>{\" \"}\n\t\t\t\t\t\tVerify\n\t\t\t\t\t</button>\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tdisabled={selectedUsers.size === 0}\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t(selectedUsers.size === 0\n\t\t\t\t\t\t\t\t? \"bg-gray-200\"\n\t\t\t\t\t\t\t\t: \"bg-white hover:text-gray-500 focus:z-10 focus:outline-none focus:border-blue-300 focus:ring-blue-500 active:bg-gray-100 active:text-gray-700 \") +\n\t\t\t\t\t\t\t\" \" +\n\t\t\t\t\t\t\t\"-ml-px relative inline-flex items-center px-4 py-2 rounded-r-md border border-gray-300 text-sm leading-5 font-medium text-gray-700 transition ease-in-out duration-150\"\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={() => updatePermissions(\"unverify\")}\n\t\t\t\t\t>\n\t\t\t\t\t\tUnverify\n\t\t\t\t\t</button>\n\t\t\t\t</span>\n\t\t\t\t<span className=\"relative z-0 inline-flex shadow-sm rounded-md mt-4 lg:mt-0 lg:mx-4\">\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tdisabled={selectedUsers.size === 0}\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t(selectedUsers.size === 0\n\t\t\t\t\t\t\t\t? \"bg-gray-200\"\n\t\t\t\t\t\t\t\t: \"bg-white hover:text-gray-500 focus:z-10 focus:outline-none focus:border-blue-300 focus:ring-blue-500 active:bg-gray-100 active:text-gray-700 \") +\n\t\t\t\t\t\t\t\" \" +\n\t\t\t\t\t\t\t\"relative inline-flex items-center px-4 py-2 rounded-l-md border border-gray-300 text-sm leading-5 font-medium text-gray-700 transition ease-in-out duration-150\"\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={() => updatePermissions(\"make_admin\")}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Icons.ShieldCheckOutline\n\t\t\t\t\t\t\tclassName={\"h-5 w-5 text-gray-600 mr-3\"}\n\t\t\t\t\t\t/>{\" \"}\n\t\t\t\t\t\tPromote to Admin\n\t\t\t\t\t</button>\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\tselectedUsers.size === 0 ||\n\t\t\t\t\t\t\tselectedUsers.has(user?.uid || \"\")\n\t\t\t\t\t\t}\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t(selectedUsers.size === 0 ||\n\t\t\t\t\t\t\tselectedUsers.has(user?.uid || \"\")\n\t\t\t\t\t\t\t\t? \"bg-gray-200\"\n\t\t\t\t\t\t\t\t: \"bg-white hover:text-gray-500 focus:z-10 focus:outline-none focus:border-blue-300 focus:ring-blue-500 active:bg-gray-100 active:text-gray-700 \") +\n\t\t\t\t\t\t\t\" \" +\n\t\t\t\t\t\t\t\"-ml-px relative inline-flex items-center px-4 py-2 rounded-r-md border border-gray-300 text-sm leading-5 font-medium text-gray-700 transition ease-in-out duration-150\"\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={() => updatePermissions(\"remove_admin\")}\n\t\t\t\t\t>\n\t\t\t\t\t\tDemote from Admin\n\t\t\t\t\t</button>\n\t\t\t\t</span>\n\t\t\t</div>\n\n\t\t\t<Transition show={showConfirmModal}>\n\t\t\t\t<div className=\"fixed bottom-0 inset-x-0 px-4 pb-6 sm:inset-0 sm:p-0 sm:flex sm:items-center sm:justify-center normal-case tracking-normal\">\n\t\t\t\t\t<Transition\n\t\t\t\t\t\tenter=\"ease-out duration-300\"\n\t\t\t\t\t\tenterFrom=\"opacity-0\"\n\t\t\t\t\t\tenterTo=\"opacity-100\"\n\t\t\t\t\t\tleave=\"ease-in duration-200\"\n\t\t\t\t\t\tleaveFrom=\"opacity-100\"\n\t\t\t\t\t\tleaveTo=\"opacity-0\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"fixed inset-0 transition-opacity\">\n\t\t\t\t\t\t\t<div className=\"absolute inset-0 bg-gray-500 opacity-75\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Transition>\n\n\t\t\t\t\t<Transition\n\t\t\t\t\t\tenter=\"ease-out duration-300\"\n\t\t\t\t\t\tenterFrom=\"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95\"\n\t\t\t\t\t\tenterTo=\"opacity-100 translate-y-0 sm:scale-100\"\n\t\t\t\t\t\tleave=\"ease-in duration-200\"\n\t\t\t\t\t\tleaveFrom=\"opacity-100 translate-y-0 sm:scale-100\"\n\t\t\t\t\t\tleaveTo=\"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"bg-white rounded-lg px-4 pt-5 pb-4 overflow-hidden shadow-xl transform transition-all sm:max-w-lg sm:w-full sm:p-6\"\n\t\t\t\t\t\t\trole=\"dialog\"\n\t\t\t\t\t\t\taria-modal=\"true\"\n\t\t\t\t\t\t\taria-labelledby=\"modal-headline\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<div className=\"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100\">\n\t\t\t\t\t\t\t\t\t<Icons.Exclamation className=\"h-6 w-6 text-red-600\" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"mt-3 text-center sm:mt-5\">\n\t\t\t\t\t\t\t\t\t<h3\n\t\t\t\t\t\t\t\t\t\tclassName=\"text-lg leading-6 font-medium text-gray-900\"\n\t\t\t\t\t\t\t\t\t\tid=\"modal-headline\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{confirmModal?.title}\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t<div className=\"mt-2\">\n\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm leading-5 text-gray-500\">\n\t\t\t\t\t\t\t\t\t\t\t{confirmModal?.text}\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t<ul\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"list-disc mx-9 text-base text-left my-2 overflow-auto px-12 py-6\"\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\t\tmaxHeight: \"40vh\",\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{confirmModal &&\n\t\t\t\t\t\t\t\t\t\t\t\t\tconfirmModal?.users.length >\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t1 &&\n\t\t\t\t\t\t\t\t\t\t\t\t\tconfirmModal?.users.map(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(user) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuser.email +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"\" +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuser.name\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<b>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{user.name}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</b>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t, {user.email}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{confirmModal?.error && (\n\t\t\t\t\t\t\t\t\t\t<div className=\"mt-4\">\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm leading-5 text-red-500 font-bold\">\n\t\t\t\t\t\t\t\t\t\t\t\t{confirmModal.error}\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3 sm:grid-flow-row-dense\">\n\t\t\t\t\t\t\t\t<span className=\"flex w-full rounded-md shadow-sm sm:col-start-2\">\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\tconfirmModal?.onConfirm()\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tclassName=\"inline-flex justify-center w-full rounded-md border border-transparent px-4 py-2 bg-indigo-600 text-base leading-6 font-medium text-white shadow-sm hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:ring-indigo-500 transition ease-in-out duration-150 sm:text-sm sm:leading-5\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{confirmModal?.buttonText}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span className=\"mt-3 flex w-full rounded-md shadow-sm sm:mt-0 sm:col-start-1\">\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\tsetShowConfirmModal(false)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"inline-flex justify-center w-full rounded-md border border-gray-300 px-4 py-2 bg-white text-base leading-6 font-medium text-gray-700 shadow-sm hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:ring-blue-500 transition ease-in-out duration-150 sm:text-sm sm:leading-5\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Transition>\n\t\t\t\t</div>\n\t\t\t</Transition>\n\t\t\t<div className=\"flex flex-col\">\n\t\t\t\t<div className=\"-my-2 py-2 overflow-x-auto sm:-mx-6 sm:px-6 lg:-mx-8 lg:px-8\">\n\t\t\t\t\t<div className=\"align-middle inline-block min-w-full shadow overflow-hidden sm:rounded-lg border-b border-gray-200\">\n\t\t\t\t\t\t<table className=\"min-w-full\">\n\t\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<th className=\"px-6 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider\">\n\t\t\t\t\t\t\t\t\t\t<SelectAllCheckbox\n\t\t\t\t\t\t\t\t\t\t\tselectedUsers={selectedUsers}\n\t\t\t\t\t\t\t\t\t\t\tsetSelectedUsers={setSelectedUsers}\n\t\t\t\t\t\t\t\t\t\t\tsetLastActionID={setLastActionID}\n\t\t\t\t\t\t\t\t\t\t\tusers={users}\n\t\t\t\t\t\t\t\t\t\t\tsetUsers={setUsers}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t{tableHeaders.map((name) => (\n\t\t\t\t\t\t\t\t\t\t<th\n\t\t\t\t\t\t\t\t\t\t\tkey={name}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"px-6 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{name}\n\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t<tbody className=\"bg-white\">\n\t\t\t\t\t\t\t\t{loadingUsers && (\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"px-6 py-4 whitespace-nowrap border-b border-gray-200 w-full\"\n\t\t\t\t\t\t\t\t\t\t\tcolSpan={tableHeaders.length + 1}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"text-sm leading-5 font-medium text-gray-900\">\n\t\t\t\t\t\t\t\t\t\t\t\tLoading...\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{!loadingUsers && users.length === 0 && (\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"px-6 py-4 whitespace-nowrap border-b border-gray-200 w-full\"\n\t\t\t\t\t\t\t\t\t\t\tcolSpan={tableHeaders.length + 1}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"text-sm leading-5 font-medium text-gray-900\">\n\t\t\t\t\t\t\t\t\t\t\t\tError: unable to load users\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{users\n\t\t\t\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t\t\t\t(user) =>\n\t\t\t\t\t\t\t\t\t\t\tshowDisabled || !user.data.disabled\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t.sort((a, b) =>\n\t\t\t\t\t\t\t\t\t\t`${a.data.firstName} ${a.data.lastName}`.localeCompare(\n\t\t\t\t\t\t\t\t\t\t\t`${b.data.firstName} ${b.data.lastName}`\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t.map(({ id: id, data: data }) => (\n\t\t\t\t\t\t\t\t\t\t<tr key={id}>\n\t\t\t\t\t\t\t\t\t\t\t<td\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"pl-9 pr-0 py-4 border-b border-gray-200\"\n\t\t\t\t\t\t\t\t\t\t\t\tonMouseDown={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\twindow\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.getSelection()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t?.removeAllRanges()\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tupdateCheckbox(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t!selectedUsers.has(id),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\te.shiftKey\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"form-checkbox h-6 w-6\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tchecked={selectedUsers.has(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={() => null}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tupdateCheckbox(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t!selectedUsers.has(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.shiftKey\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t{/*<button*/}\n\t\t\t\t\t\t\t\t\t\t\t\t{/*\tclassName={*/}\n\t\t\t\t\t\t\t\t\t\t\t\t{/*\t\t\"rounded-md bg-blue-200 m-0 px-4 py-2 align-middle\"*/}\n\t\t\t\t\t\t\t\t\t\t\t\t{/*\t}*/}\n\t\t\t\t\t\t\t\t\t\t\t\t{/*>*/}\n\t\t\t\t\t\t\t\t\t\t\t\t{/*\t<Icons.Check />*/}\n\t\t\t\t\t\t\t\t\t\t\t\t{/*</button>*/}\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 whitespace-nowrap border-b border-gray-200\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"text-sm leading-5 font-medium text-gray-900\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{`${data.firstName} ${\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.lastName\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}, ${getGrade(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.classOf\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}th Grade`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"text-sm leading-5 text-gray-500\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{data.email}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t{/*<td className=\"px-6 py-4 whitespace-nowrap border-b border-gray-200\">*/}\n\t\t\t\t\t\t\t\t\t\t\t{/*\t<div*/}\n\t\t\t\t\t\t\t\t\t\t\t{/*\t\tclassName={*/}\n\t\t\t\t\t\t\t\t\t\t\t{/*\t\t\t\"text-sm leading-5 \" +*/}\n\t\t\t\t\t\t\t\t\t\t\t{/*\t\t\t(data.sfmunRegistered*/}\n\t\t\t\t\t\t\t\t\t\t\t{/*\t\t\t\t? \"text-green-800\"*/}\n\t\t\t\t\t\t\t\t\t\t\t{/*\t\t\t\t: \"text-yellow-800\")*/}\n\t\t\t\t\t\t\t\t\t\t\t{/*\t\t}*/}\n\t\t\t\t\t\t\t\t\t\t\t{/*\t>*/}\n\t\t\t\t\t\t\t\t\t\t\t{/*\t\t{data.sfmunRegistered*/}\n\t\t\t\t\t\t\t\t\t\t\t{/*\t\t\t? \"Registered\"*/}\n\t\t\t\t\t\t\t\t\t\t\t{/*\t\t\t: \"Not Registered\"}*/}\n\t\t\t\t\t\t\t\t\t\t\t{/*\t</div>*/}\n\t\t\t\t\t\t\t\t\t\t\t{/*\t/!*<div className=\"text-sm leading-5 text-gray-500\">*!/*/}\n\t\t\t\t\t\t\t\t\t\t\t{/*\t/!*\tECOSOC (partner: John Doe)*!/*/}\n\t\t\t\t\t\t\t\t\t\t\t{/*\t/!*</div>*!/*/}\n\t\t\t\t\t\t\t\t\t\t\t{/*</td>*/}\n\t\t\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 whitespace-nowrap border-b border-gray-200\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"flex flex-row space-x-4\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium leading-4 \" +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(data.verified\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"bg-green-100 text-green-800\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"bg-yellow-100 text-yellow-800\")\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{!data.verified &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"Not \"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tVerified\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{data.admin && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium leading-4 bg-green-100 text-green-800\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tAdmin\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t{/*<td className=\"px-6 py-4 whitespace-nowrap border-b border-gray-200 text-sm leading-5 text-gray-500\">*/}\n\t\t\t\t\t\t\t\t\t\t\t{/*\tOwner*/}\n\t\t\t\t\t\t\t\t\t\t\t{/*</td>*/}\n\t\t\t\t\t\t\t\t\t\t\t{/*<td className=\"px-6 py-4 whitespace-nowrap text-right border-b border-gray-200 text-sm leading-5 font-medium\">*/}\n\t\t\t\t\t\t\t\t\t\t\t{/*\t<Link*/}\n\t\t\t\t\t\t\t\t\t\t\t{/*\t\tto=\"#\"*/}\n\t\t\t\t\t\t\t\t\t\t\t{/*\t\tclassName=\"text-indigo-600 hover:text-indigo-900\"*/}\n\t\t\t\t\t\t\t\t\t\t\t{/*\t>*/}\n\t\t\t\t\t\t\t\t\t\t\t{/*\t\tManage*/}\n\t\t\t\t\t\t\t\t\t\t\t{/*\t</Link>*/}\n\t\t\t\t\t\t\t\t\t\t\t{/*</td>*/}\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t\t<div className=\"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6\">\n\t\t\t\t\t\t\t<div className=\"flex-1 flex items-center justify-between\">\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<p className=\"text-sm leading-5 text-gray-700\">\n\t\t\t\t\t\t\t\t\t\tShowing All{\" \"}\n\t\t\t\t\t\t\t\t\t\t<span className=\"font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t{users.length}\n\t\t\t\t\t\t\t\t\t\t</span>{\" \"}\n\t\t\t\t\t\t\t\t\t\tUsers\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t{/*<nav className=\"relative z-0 inline-flex shadow-sm\">*/}\n\t\t\t\t\t\t\t\t\t{/*\t<a*/}\n\t\t\t\t\t\t\t\t\t{/*\t\thref=\"/\"*/}\n\t\t\t\t\t\t\t\t\t{/*\t\tclassName=\"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm leading-5 font-medium text-gray-500 hover:text-gray-400 focus:z-10 focus:outline-none focus:border-blue-300 focus:ring-blue-500 active:bg-gray-100 active:text-gray-500 transition ease-in-out duration-150\"*/}\n\t\t\t\t\t\t\t\t\t{/*\t\taria-label=\"Previous\"*/}\n\t\t\t\t\t\t\t\t\t{/*\t>*/}\n\t\t\t\t\t\t\t\t\t{/*\t\t<svg*/}\n\t\t\t\t\t\t\t\t\t{/*\t\t\tclassName=\"h-5 w-5\"*/}\n\t\t\t\t\t\t\t\t\t{/*\t\t\tviewBox=\"0 0 20 20\"*/}\n\t\t\t\t\t\t\t\t\t{/*\t\t\tfill=\"currentColor\"*/}\n\t\t\t\t\t\t\t\t\t{/*\t\t>*/}\n\t\t\t\t\t\t\t\t\t{/*\t\t\t<path*/}\n\t\t\t\t\t\t\t\t\t{/*\t\t\t\tfillRule=\"evenodd\"*/}\n\t\t\t\t\t\t\t\t\t{/*\t\t\t\td=\"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z\"*/}\n\t\t\t\t\t\t\t\t\t{/*\t\t\t\tclipRule=\"evenodd\"*/}\n\t\t\t\t\t\t\t\t\t{/*\t\t\t/>*/}\n\t\t\t\t\t\t\t\t\t{/*\t\t</svg>*/}\n\t\t\t\t\t\t\t\t\t{/*\t</a>*/}\n\t\t\t\t\t\t\t\t\t{/*\t<a*/}\n\t\t\t\t\t\t\t\t\t{/*\t\thref=\"/\"*/}\n\t\t\t\t\t\t\t\t\t{/*\t\tclassName=\"-ml-px relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm leading-5 font-medium text-gray-700 hover:text-gray-500 focus:z-10 focus:outline-none focus:border-blue-300 focus:ring-blue-500 active:bg-gray-100 active:text-gray-700 transition ease-in-out duration-150\"*/}\n\t\t\t\t\t\t\t\t\t{/*\t>*/}\n\t\t\t\t\t\t\t\t\t{/*\t\t1*/}\n\t\t\t\t\t\t\t\t\t{/*\t</a>*/}\n\t\t\t\t\t\t\t\t\t{/*\t<a*/}\n\t\t\t\t\t\t\t\t\t{/*\t\thref=\"/\"*/}\n\t\t\t\t\t\t\t\t\t{/*\t\tclassName=\"-ml-px relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm leading-5 font-medium text-gray-700 hover:text-gray-500 focus:z-10 focus:outline-none focus:border-blue-300 focus:ring-blue-500 active:bg-gray-100 active:text-gray-700 transition ease-in-out duration-150\"*/}\n\t\t\t\t\t\t\t\t\t{/*\t>*/}\n\t\t\t\t\t\t\t\t\t{/*\t\t2*/}\n\t\t\t\t\t\t\t\t\t{/*\t</a>*/}\n\t\t\t\t\t\t\t\t\t{/*\t<a*/}\n\t\t\t\t\t\t\t\t\t{/*\t\thref=\"/\"*/}\n\t\t\t\t\t\t\t\t\t{/*\t\tclassName=\"hidden md:inline-flex -ml-px relative items-center px-4 py-2 border border-gray-300 bg-white text-sm leading-5 font-medium text-gray-700 hover:text-gray-500 focus:z-10 focus:outline-none focus:border-blue-300 focus:ring-blue-500 active:bg-gray-100 active:text-gray-700 transition ease-in-out duration-150\"*/}\n\t\t\t\t\t\t\t\t\t{/*\t>*/}\n\t\t\t\t\t\t\t\t\t{/*\t\t3*/}\n\t\t\t\t\t\t\t\t\t{/*\t</a>*/}\n\t\t\t\t\t\t\t\t\t{/*\t<span className=\"-ml-px relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm leading-5 font-medium text-gray-700\">*/}\n\t\t\t\t\t\t\t\t\t{/*\t\t...*/}\n\t\t\t\t\t\t\t\t\t{/*\t</span>*/}\n\t\t\t\t\t\t\t\t\t{/*\t<a*/}\n\t\t\t\t\t\t\t\t\t{/*\t\thref=\"/\"*/}\n\t\t\t\t\t\t\t\t\t{/*\t\tclassName=\"hidden md:inline-flex -ml-px relative items-center px-4 py-2 border border-gray-300 bg-white text-sm leading-5 font-medium text-gray-700 hover:text-gray-500 focus:z-10 focus:outline-none focus:border-blue-300 focus:ring-blue-500 active:bg-gray-100 active:text-gray-700 transition ease-in-out duration-150\"*/}\n\t\t\t\t\t\t\t\t\t{/*\t>*/}\n\t\t\t\t\t\t\t\t\t{/*\t\t8*/}\n\t\t\t\t\t\t\t\t\t{/*\t</a>*/}\n\t\t\t\t\t\t\t\t\t{/*\t<a*/}\n\t\t\t\t\t\t\t\t\t{/*\t\thref=\"/\"*/}\n\t\t\t\t\t\t\t\t\t{/*\t\tclassName=\"-ml-px relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm leading-5 font-medium text-gray-700 hover:text-gray-500 focus:z-10 focus:outline-none focus:border-blue-300 focus:ring-blue-500 active:bg-gray-100 active:text-gray-700 transition ease-in-out duration-150\"*/}\n\t\t\t\t\t\t\t\t\t{/*\t>*/}\n\t\t\t\t\t\t\t\t\t{/*\t\t9*/}\n\t\t\t\t\t\t\t\t\t{/*\t</a>*/}\n\t\t\t\t\t\t\t\t\t{/*\t<a*/}\n\t\t\t\t\t\t\t\t\t{/*\t\thref=\"/\"*/}\n\t\t\t\t\t\t\t\t\t{/*\t\tclassName=\"-ml-px relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm leading-5 font-medium text-gray-700 hover:text-gray-500 focus:z-10 focus:outline-none focus:border-blue-300 focus:ring-blue-500 active:bg-gray-100 active:text-gray-700 transition ease-in-out duration-150\"*/}\n\t\t\t\t\t\t\t\t\t{/*\t>*/}\n\t\t\t\t\t\t\t\t\t{/*\t\t10*/}\n\t\t\t\t\t\t\t\t\t{/*\t</a>*/}\n\t\t\t\t\t\t\t\t\t{/*\t<a*/}\n\t\t\t\t\t\t\t\t\t{/*\t\thref=\"/\"*/}\n\t\t\t\t\t\t\t\t\t{/*\t\tclassName=\"-ml-px relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm leading-5 font-medium text-gray-500 hover:text-gray-400 focus:z-10 focus:outline-none focus:border-blue-300 focus:ring-blue-500 active:bg-gray-100 active:text-gray-500 transition ease-in-out duration-150\"*/}\n\t\t\t\t\t\t\t\t\t{/*\t\taria-label=\"Next\"*/}\n\t\t\t\t\t\t\t\t\t{/*\t>*/}\n\t\t\t\t\t\t\t\t\t{/*\t\t<svg*/}\n\t\t\t\t\t\t\t\t\t{/*\t\t\tclassName=\"h-5 w-5\"*/}\n\t\t\t\t\t\t\t\t\t{/*\t\t\tviewBox=\"0 0 20 20\"*/}\n\t\t\t\t\t\t\t\t\t{/*\t\t\tfill=\"currentColor\"*/}\n\t\t\t\t\t\t\t\t\t{/*\t\t>*/}\n\t\t\t\t\t\t\t\t\t{/*\t\t\t<path*/}\n\t\t\t\t\t\t\t\t\t{/*\t\t\t\tfillRule=\"evenodd\"*/}\n\t\t\t\t\t\t\t\t\t{/*\t\t\t\td=\"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z\"*/}\n\t\t\t\t\t\t\t\t\t{/*\t\t\t\tclipRule=\"evenodd\"*/}\n\t\t\t\t\t\t\t\t\t{/*\t\t\t/>*/}\n\t\t\t\t\t\t\t\t\t{/*\t\t</svg>*/}\n\t\t\t\t\t\t\t\t\t{/*\t</a>*/}\n\t\t\t\t\t\t\t\t\t{/*</nav>*/}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</AdminLayout>\n\t);\n}\n","/Users/jmeng/Documents/code/montavistamun/src/pages/admin/synchronize-claims.tsx",["732"],"import axios from \"axios\";\nimport React, { useState } from \"react\";\nimport useRequireLogin from \"../../components/accounts/useRequireLogin\";\nimport { Layout, Main } from \"../../components/layout\";\nimport AuthContext from \"../../context/AuthContext\";\nimport useFirebase from \"../../firebase/useFirebase\";\n\nexport default function AboutPage(): React.ReactElement {\n\tconst [eligible, setEligible] = useState(false);\n\tconst [loading, setLoading] = useState(true);\n\tconst [token, setToken] = useState(\"\");\n\tconst [success, setSuccess] = useState(false);\n\tconst [submitting, setSubmitting] = useState(false);\n\tuseRequireLogin();\n\tconst { user, loading: userLoading, admin } = React.useContext(AuthContext);\n\tconst firebase = useFirebase();\n\tReact.useEffect(() => {\n\t\tif (!firebase || !user) return;\n\t\tPromise.all([\n\t\t\tfirebase\n\t\t\t\t.firestore()\n\t\t\t\t.collection(\"users\")\n\t\t\t\t.doc(user.uid)\n\t\t\t\t.get()\n\t\t\t\t.then((snapshot) => snapshot.data()),\n\t\t\tuser.getIdToken().then((token) => setToken(token)),\n\t\t]).then((data) => {\n\t\t\tsetEligible(data[0]?.admin);\n\n\t\t\tsetLoading(false);\n\t\t});\n\t}, [firebase, user]);\n\n\treturn (\n\t\t<Layout title={\"Synchronize Admin Claims\"}>\n\t\t\t<Main>\n\t\t\t\t<h1\n\t\t\t\t\tclassName={\n\t\t\t\t\t\t\"text-3xl leading-9 font-extrabold tracking-tight text-gray-900 sm:text-4xl sm:leading-10\"\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\tSynchronize Admin Claims\n\t\t\t\t</h1>\n\t\t\t\t<p className={\"mt-4 mb-20\"}>\n\t\t\t\t\tClick the button below to update your firebase custom\n\t\t\t\t\tadministrator claim based on the firestore database. If you\n\t\t\t\t\tare an admin in the firestore database, this utility will\n\t\t\t\t\tupdate your custom claims to an administrator too. This is\n\t\t\t\t\tuseful for giving the first administrator the admin claim.\n\t\t\t\t</p>\n\t\t\t\t{admin ? (\n\t\t\t\t\t<p>\n\t\t\t\t\t\tYou are already an administrator according to your\n\t\t\t\t\t\tcustom claims.\n\t\t\t\t\t</p>\n\t\t\t\t) : success ? (\n\t\t\t\t\t<p>Your custom claim has been updated.</p>\n\t\t\t\t) : loading || !token || !user ? (\n\t\t\t\t\t<p>Checking eligibility...</p>\n\t\t\t\t) : !eligible ? (\n\t\t\t\t\t<p>\n\t\t\t\t\t\tYou are not eligible because you do not have\n\t\t\t\t\t\tadministrator set to true in firebase.\n\t\t\t\t\t</p>\n\t\t\t\t) : (\n\t\t\t\t\t<div className=\"mt-8 md:mt-20 lg:mt-40\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tdisabled={submitting}\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t(submitting\n\t\t\t\t\t\t\t\t\t? \"bg-indigo-200\"\n\t\t\t\t\t\t\t\t\t: \"bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:ring-indigo-500 active:bg-indigo-700\") +\n\t\t\t\t\t\t\t\t\" \" +\n\t\t\t\t\t\t\t\t\"mt-4 w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white transition duration-150 ease-in-out\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tsetSubmitting(true);\n\t\t\t\t\t\t\t\taxios\n\t\t\t\t\t\t\t\t\t.post(\n\t\t\t\t\t\t\t\t\t\t\"/.netlify/functions/set-user-permissions\",\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tnewPermissions: { admin: true },\n\t\t\t\t\t\t\t\t\t\t\ttarget: user.uid,\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\t\t\t\t\tauthorization: `Bearer ${token}`,\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t.then(() => user.getIdTokenResult(true)) // refresh the custom claims\n\t\t\t\t\t\t\t\t\t.then(() => setSuccess(true))\n\t\t\t\t\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\t\t\t\t\talert(\n\t\t\t\t\t\t\t\t\t\t\t\"An error occurred while synchronizing. Check the console for more information.\"\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\t\t\t\t\t\"An error occurred while synchronizing.\"\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tconsole.log(error);\n\t\t\t\t\t\t\t\t\t\tconsole.log({ ...error });\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{submitting ? \"Synchronizing...\" : \"Synchronize\"}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</Main>\n\t\t</Layout>\n\t);\n}\n","/Users/jmeng/Documents/code/montavistamun/src/pages/awards.tsx",[],"/Users/jmeng/Documents/code/montavistamun/src/pages/calendar.tsx",[],"/Users/jmeng/Documents/code/montavistamun/src/pages/conferences/bmun/register.tsx",[],"/Users/jmeng/Documents/code/montavistamun/src/pages/conferences/registration2.tsx",[],"/Users/jmeng/Documents/code/montavistamun/src/pages/conferences/sbmun/register.tsx",[],"/Users/jmeng/Documents/code/montavistamun/src/pages/conferences/scvmun/register.tsx",[],"/Users/jmeng/Documents/code/montavistamun/src/pages/conferences/sfmun/index.tsx",[],"/Users/jmeng/Documents/code/montavistamun/src/pages/conferences/sfmun/register.tsx",["733","734","735","736","737","738","739","740","741","742"],"import axios from \"axios\";\nimport { graphql } from \"gatsby\";\nimport * as Icons from \"heroicons-react\";\nimport React, { useContext, useState } from \"react\";\nimport useRequireLogin from \"../../../components/accounts/useRequireLogin\";\nimport FluidImage from \"../../../components/FluidImage\";\nimport Header from \"../../../components/Header\";\nimport { Layout, Main } from \"../../../components/layout\";\nimport VerticalSteps from \"../../../components/shared/VerticalSteps\";\nimport Transition from \"../../../components/Transition\";\nimport AuthContext from \"../../../context/AuthContext\";\nimport useFirebase from \"../../../firebase/useFirebase\";\n\nexport default function AboutPage({\n\tdata: { headerImage },\n}: {\n\tdata: {\n\t\theaderImage: FluidImage;\n\t};\n}): React.ReactElement {\n\tuseRequireLogin();\n\tconst firebase = useFirebase();\n\tconst { user: authUser, loading: userLoading } = useContext(AuthContext);\n\tconst [user, setUser] = useState(authUser);\n\n\t// // TODO: delete this file -- for now, keep as a template\n\t// const [registered, setRegistered] = useState(\"loading\");\n\t// React.useEffect(() => {\n\t// \tif (!firebase || !user) return;\n\t// \tfirebase\n\t// \t\t.firestore()\n\t// \t\t.collection(\"registration\")\n\t// \t\t.doc(user.uid)\n\t// \t\t.get()\n\t// \t\t.then((snapshot) => snapshot.data())\n\t// \t\t.then((data) => setRegistered(data?.confirm?.sfmunConfirmed));\n\t// }, [firebase, user]);\n\t// return (\n\t// \t<Layout title={\"SFMUN\"}>\n\t// \t\t<Header\n\t// \t\t\tbackgroundImage={headerImage}\n\t// \t\t\ttitle={\"SFMUN Registration is Now Closed\"}\n\t// \t\t>\n\t// \t\t\tYour Registration Status:{\" \"}\n\t// \t\t\t{registered === \"loading\"\n\t// \t\t\t\t? \"Loading...\"\n\t// \t\t\t\t: registered\n\t// \t\t\t\t? \"Successfully Registered\"\n\t// \t\t\t\t: \"Not Registered\"}\n\t// \t\t</Header>\n\t// \t\t<Main>\n\t// \t\t\tIf you have any questions, feel free to email us at{\" \"}\n\t// \t\t\t<a href=\"mailto:montavistamun@gmail.com\" className=\"link\">\n\t// \t\t\t\tmontavistamun@gmail.com\n\t// \t\t\t</a>\n\t// \t\t\t.\n\t// \t\t</Main>\n\t// \t</Layout>\n\t// );\n\tReact.useEffect(() => {\n\t\tif (!firebase || !authUser) return;\n\t\t// setUser(authUser);\n\t\t(async () => {\n\t\t\tconst token = await authUser?.getIdToken(true);\n\t\t\tconst resp = await axios.get(\"/.netlify/functions/get-user-info\", {\n\t\t\t\tparams: {\n\t\t\t\t\tuser: \"yJbc2cZ34ebWZdvijZi8EwHg1PF2\",\n\t\t\t\t},\n\t\t\t\theaders: {\n\t\t\t\t\tauthorization: `Bearer ${token}`,\n\t\t\t\t},\n\t\t\t});\n\t\t\tconsole.log(resp);\n\t\t\tsetUser(resp.data.data);\n\t\t})();\n\t}, [firebase, authUser]);\n\tconst [step, setStep] = useState(0);\n\tconst [stepHasChanges, setStepHasChanges] = useState(false);\n\n\tconst [maxStep, setMaxStep] = useState(0);\n\tfunction isFunction(\n\t\tfunctionToCheck: any\n\t): functionToCheck is (\n\t\toldData: Record<string, any>\n\t) => Record<string, any> {\n\t\treturn (\n\t\t\tfunctionToCheck &&\n\t\t\t{}.toString.call(functionToCheck) === \"[object Function]\"\n\t\t);\n\t}\n\tconst [data, updateData] = React.useReducer(\n\t\t(\n\t\t\tstate: Record<string, any>,\n\t\t\taction:\n\t\t\t\t| Record<string, any>\n\t\t\t\t| ((legacyData: Record<string, any>) => Record<string, any>)\n\t\t) => {\n\t\t\tlet updates;\n\t\t\tif (isFunction(action)) {\n\t\t\t\tupdates = action(state);\n\t\t\t} else {\n\t\t\t\tupdates = action;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t...updates,\n\t\t\t};\n\t\t},\n\t\t{}\n\t);\n\tconst [loadingData, setLoadingData] = useState(true);\n\tconst [showChangesNotSavedModal, setShowChangesNotSavedModal] = useState(\n\t\tfalse\n\t);\n\n\t/**\n\t * Updates the data with a section. Dot notation up to one deep is supported (so max one dot in the section).\n\t */\n\tconst handleUpdateData = React.useCallback(\n\t\tasync (section: string, validatedData: any) => {\n\t\t\tif (!firebase) return;\n\n\t\t\tawait Promise.all([\n\t\t\t\tfirebase\n\t\t\t\t\t.firestore()\n\t\t\t\t\t.collection(\"registration\")\n\t\t\t\t\t.doc(user?.uid)\n\t\t\t\t\t.set(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t[section.split(\".\")[0]]:\n\t\t\t\t\t\t\t\tsection.split(\".\").length > 1\n\t\t\t\t\t\t\t\t\t? { [section.split(\".\")[1]]: validatedData }\n\t\t\t\t\t\t\t\t\t: validatedData,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ merge: true }\n\t\t\t\t\t),\n\t\t\t\tfirebase\n\t\t\t\t\t.firestore()\n\t\t\t\t\t.collection(\"registration\")\n\t\t\t\t\t.doc(user?.uid)\n\t\t\t\t\t.collection(\"history\")\n\t\t\t\t\t.add({\n\t\t\t\t\t\ttimestamp: firebase.firestore.FieldValue.serverTimestamp(),\n\t\t\t\t\t\tsection,\n\t\t\t\t\t\tnewData: validatedData,\n\t\t\t\t\t}),\n\t\t\t]);\n\t\t\tupdateData((current) => {\n\t\t\t\tif (section.indexOf(\".\") > -1) {\n\t\t\t\t\tconst sectionFragments = section.split(\".\");\n\t\t\t\t\treturn {\n\t\t\t\t\t\t[sectionFragments[0]]: {\n\t\t\t\t\t\t\t...current[sectionFragments[0]],\n\t\t\t\t\t\t\t[sectionFragments[1]]: validatedData,\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\treturn { [section]: validatedData };\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t[firebase, data, updateData]\n\t);\n\tReact.useEffect(() => {\n\t\tconst handler = (e: BeforeUnloadEvent) => {\n\t\t\te.returnValue = \"You have unsaved changes!\";\n\t\t\treturn false;\n\t\t};\n\t\tif (stepHasChanges) {\n\t\t\twindow.addEventListener(\"beforeunload\", handler);\n\t\t}\n\t\treturn () => window.removeEventListener(\"beforeunload\", handler);\n\t}, [stepHasChanges]);\n\tReact.useEffect(() => {\n\t\tif (!firebase || !user) return;\n\t\tif (!loadingData) return;\n\t\tconsole.log(\"reqqq\", user);\n\t\tfirebase\n\t\t\t.firestore()\n\t\t\t.collection(\"registration\")\n\t\t\t.doc(user?.uid)\n\t\t\t.get()\n\t\t\t.then((snapshot) => {\n\t\t\t\tif (!loadingData) {\n\t\t\t\t\t// two requests were started for the data, and this is the second one to return\n\t\t\t\t\t// to avoid overwriting any data that the user may have started entering, don't update the data\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst data = snapshot.data() || {\n\t\t\t\t\tpersonalInformation: {},\n\t\t\t\t\temergencyInformation: {},\n\t\t\t\t};\n\t\t\t\tconsole.log(data, user);\n\t\t\t\tupdateData({\n\t\t\t\t\tpersonalInformation: {\n\t\t\t\t\t\tphone: \"\",\n\t\t\t\t\t\taddressOne: \"\",\n\t\t\t\t\t\taddressTwo: \"\",\n\t\t\t\t\t\tcity: \"\",\n\t\t\t\t\t\tzip: \"\",\n\t\t\t\t\t\tstate: \"CA\",\n\t\t\t\t\t\t...data.personalInformation,\n\t\t\t\t\t},\n\t\t\t\t\temergencyInformation: {\n\t\t\t\t\t\tcontactOneName: \"\",\n\t\t\t\t\t\tcontactOnePhone: \"\",\n\t\t\t\t\t\tcontactOneRelationship: \"\",\n\t\t\t\t\t\tcontactTwoName: \"\",\n\t\t\t\t\t\tcontactTwoPhone: \"\",\n\t\t\t\t\t\tcontactTwoRelationship: \"\",\n\n\t\t\t\t\t\thouseholdMainLanguage: \"English\",\n\n\t\t\t\t\t\thealthInsuranceCarrier: \"\",\n\t\t\t\t\t\thealthInsurancePolicyNumber: \"\",\n\t\t\t\t\t\thealthInsuranceAddressOne: \"\",\n\t\t\t\t\t\thealthInsuranceAddressTwo: \"\",\n\t\t\t\t\t\thealthInsuranceCity: \"\",\n\t\t\t\t\t\thealthInsuranceState: \"\",\n\t\t\t\t\t\thealthInsuranceZip: \"\",\n\t\t\t\t\t\t...data.emergencyInformation,\n\t\t\t\t\t},\n\t\t\t\t\tforms: {\n\t\t\t\t\t\t...data.forms,\n\t\t\t\t\t},\n\t\t\t\t\tpreferences: {\n\t\t\t\t\t\tcommittee: data.preferences?.committee || [\n\t\t\t\t\t\t\t\"DISEC\",\n\t\t\t\t\t\t\t\"IAEA\",\n\t\t\t\t\t\t\t\"UNODC\",\n\t\t\t\t\t\t\t\"SPECPOL\",\n\t\t\t\t\t\t\t\"UNHCR\",\n\t\t\t\t\t\t\t\"Catherine The Great's Coup (Crisis)\",\n\t\t\t\t\t\t\t\"UNSC (Crisis)\",\n\t\t\t\t\t\t\t\"Senate (Crisis)\",\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tconst rawData = snapshot.data();\n\t\t\t\tlet step;\n\t\t\t\tif (!rawData?.personalInformation) {\n\t\t\t\t\tstep = 0;\n\t\t\t\t} else if (!rawData.emergencyInformation) {\n\t\t\t\t\tstep = 1;\n\t\t\t\t} else if (\n\t\t\t\t\t!rawData.forms?.fuhsdForm ||\n\t\t\t\t\t!rawData.forms?.sfmunForm\n\t\t\t\t) {\n\t\t\t\t\tstep = 2;\n\t\t\t\t} else if (!rawData.preferences) {\n\t\t\t\t\tstep = 3;\n\t\t\t\t} else if (\n\t\t\t\t\t!rawData.forms?.donation &&\n\t\t\t\t\t!rawData.forms?.donationOptOut\n\t\t\t\t) {\n\t\t\t\t\tstep = 4;\n\t\t\t\t} else {\n\t\t\t\t\tstep = 5;\n\t\t\t\t}\n\t\t\t\tsetStep(step);\n\n\t\t\t\tsetMaxStep(step === 5 ? 6 : step);\n\n\t\t\t\tsetLoadingData(false);\n\t\t\t\tsetStepHasChanges(false);\n\t\t\t});\n\t}, [firebase, user]);\n\n\tconst commonProps = {\n\t\thandleUpdateData,\n\t\tsetStepHasChanges,\n\t\tsetStep,\n\t\tsetMaxStep,\n\t\tuser,\n\t};\n\treturn (\n\t\t<Layout\n\t\t\ttitle={\"SFMUN Registration\"}\n\t\t\tdescription={\n\t\t\t\t\"Register for SFMUN, MV Model UN's first conference of the year!\"\n\t\t\t}\n\t\t>\n\t\t\t<div className=\"min-h-ca\">\n\t\t\t\t<Header\n\t\t\t\t\ttitle={\"SFMUN Registration\"}\n\t\t\t\t\tbackgroundImage={headerImage}\n\t\t\t\t>\n\t\t\t\t\t{\"\"}\n\t\t\t\t</Header>\n\n\t\t\t\t<div className={\"bg-gray-100 w-full\"}>\n\t\t\t\t\t<Main wide noMobileXPadding>\n\t\t\t\t\t\t<div className=\"md:grid md:grid-cols-3 md:gap-6\">\n\t\t\t\t\t\t\t<div className=\"md:col-span-1\">\n\t\t\t\t\t\t\t\t<div className=\"px-4 sm:px-0 sticky top-24\">\n\t\t\t\t\t\t\t\t\t<h3 className=\"text-2xl font-bold leading-6 text-gray-900\">\n\t\t\t\t\t\t\t\t\t\tSFMUN Registration\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t<p className=\"mt-1 max-w-2xl text-sm leading-5 text-gray-500\">\n\t\t\t\t\t\t\t\t\t\tYour information will be saved when you\n\t\t\t\t\t\t\t\t\t\tclick the save button for each step, so\n\t\t\t\t\t\t\t\t\t\tyou don't need to complete this all at\n\t\t\t\t\t\t\t\t\t\tonce.\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t<VerticalSteps\n\t\t\t\t\t\t\t\t\t\tsteps={[\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: \"Personal Information\",\n\t\t\t\t\t\t\t\t\t\t\t\tdescription:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"This information will be saved to speed up registration for future conferences.\",\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: \"Emergency Information\",\n\t\t\t\t\t\t\t\t\t\t\t\tdescription:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"Although conferences will be online, we still require your emergency contacts and insurance information just in case.\",\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: \"Liability Forms\",\n\t\t\t\t\t\t\t\t\t\t\t\tdescription:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"These forms will be mostly autofilled with the information you provide us in earlier steps, but you'll still need to get them signed.\",\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: \"Committee Preferences\",\n\t\t\t\t\t\t\t\t\t\t\t\tdescription:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"Now comes the fun part! Look into the different committees offered at SFMUN and indicate how much you like each one.\",\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: \"Donations\",\n\t\t\t\t\t\t\t\t\t\t\t\tdescription:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"To cover conference fees charged by SFMUN, we request a $25 donation, which will go directly towards making this conference possible.\", //TODO\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: \"You're Done!\",\n\t\t\t\t\t\t\t\t\t\t\t\tdescription:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"You're now registered for SFMUN! You may still edit or cancel your registration until the deadline.\",\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\t\tcurrentStep={step}\n\t\t\t\t\t\t\t\t\t\tmaxSwitchableStep={Math.min(\n\t\t\t\t\t\t\t\t\t\t\t!data.forms?.fuhsdForm ||\n\t\t\t\t\t\t\t\t\t\t\t\t!data.forms?.sfmunForm\n\t\t\t\t\t\t\t\t\t\t\t\t? 2\n\t\t\t\t\t\t\t\t\t\t\t\t: 1000,\n\t\t\t\t\t\t\t\t\t\t\tmaxStep\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\tonStepSwitch={(i) => {\n\t\t\t\t\t\t\t\t\t\t\tif (stepHasChanges) {\n\t\t\t\t\t\t\t\t\t\t\t\tsetShowChangesNotSavedModal(\n\t\t\t\t\t\t\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\tsetStep(i);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\"mt-10 mt-5 md:mt-0 md:col-span-2 h-full\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<h1\n\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\"text-xl font-semibold leading-6 text-gray-900\"\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tSFMUN Registration is now closed. If you\n\t\t\t\t\t\t\t\t\thave any questions, please email us at{\" \"}\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\tclassName={\"link\"}\n\t\t\t\t\t\t\t\t\t\thref={\"mailto:montavistamun@gmail.com\"}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tmontavistamun@gmail.com\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t.\n\t\t\t\t\t\t\t\t</h1>\n\t\t\t\t\t\t\t\t{/*{step === 0 && (*/}\n\t\t\t\t\t\t\t\t{/*\t<PersonalInformationSection*/}\n\t\t\t\t\t\t\t\t{/*\t\tdata={data?.personalInformation}*/}\n\t\t\t\t\t\t\t\t{/*\t\t{...commonProps}*/}\n\t\t\t\t\t\t\t\t{/*\t/>*/}\n\t\t\t\t\t\t\t\t{/*)}*/}\n\t\t\t\t\t\t\t\t{/*{step === 1 && (*/}\n\t\t\t\t\t\t\t\t{/*\t<EmergencyInformationSection*/}\n\t\t\t\t\t\t\t\t{/*\t\tdata={data?.emergencyInformation}*/}\n\t\t\t\t\t\t\t\t{/*\t\t{...commonProps}*/}\n\t\t\t\t\t\t\t\t{/*\t/>*/}\n\t\t\t\t\t\t\t\t{/*)}*/}\n\t\t\t\t\t\t\t\t{/*{step === 2 && (*/}\n\t\t\t\t\t\t\t\t{/*\t<WaiverFormsSection*/}\n\t\t\t\t\t\t\t\t{/*\t\tdata={data}*/}\n\t\t\t\t\t\t\t\t{/*\t\t{...commonProps}*/}\n\t\t\t\t\t\t\t\t{/*\t/>*/}\n\t\t\t\t\t\t\t\t{/*)}*/}\n\t\t\t\t\t\t\t\t{/*{step === 3 && (*/}\n\t\t\t\t\t\t\t\t{/*\t<PreferencesSection*/}\n\t\t\t\t\t\t\t\t{/*\t\tdata={data?.preferences}*/}\n\t\t\t\t\t\t\t\t{/*\t\t{...commonProps}*/}\n\t\t\t\t\t\t\t\t{/*\t/>*/}\n\t\t\t\t\t\t\t\t{/*)}*/}\n\t\t\t\t\t\t\t\t{/*{step === 4 && (*/}\n\t\t\t\t\t\t\t\t{/*\t<DonationsSection*/}\n\t\t\t\t\t\t\t\t{/*\t\tdata={data}*/}\n\t\t\t\t\t\t\t\t{/*\t\t{...commonProps}*/}\n\t\t\t\t\t\t\t\t{/*\t/>*/}\n\t\t\t\t\t\t\t\t{/*)}*/}\n\t\t\t\t\t\t\t\t{/*{step === 5 && (*/}\n\t\t\t\t\t\t\t\t{/*\t<ConfirmationSection*/}\n\t\t\t\t\t\t\t\t{/*\t\tdata={data}*/}\n\t\t\t\t\t\t\t\t{/*\t\t{...commonProps}*/}\n\t\t\t\t\t\t\t\t{/*\t/>*/}\n\t\t\t\t\t\t\t\t{/*)}*/}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Main>\n\t\t\t\t</div>\n\n\t\t\t\t<Transition show={showChangesNotSavedModal}>\n\t\t\t\t\t<div className=\"fixed z-10 inset-0 overflow-y-auto\">\n\t\t\t\t\t\t<div className=\"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0\">\n\t\t\t\t\t\t\t<Transition\n\t\t\t\t\t\t\t\tenter=\"ease-out duration-300\"\n\t\t\t\t\t\t\t\tenterFrom=\"opacity-0\"\n\t\t\t\t\t\t\t\tenterTo=\"opacity-100\"\n\t\t\t\t\t\t\t\tleave=\"ease-in duration-200\"\n\t\t\t\t\t\t\t\tleaveFrom=\"opacity-100\"\n\t\t\t\t\t\t\t\tleaveTo=\"opacity-0\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div className=\"fixed inset-0 transition-opacity\">\n\t\t\t\t\t\t\t\t\t<div className=\"absolute inset-0 bg-gray-500 opacity-75\"></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Transition>\n\t\t\t\t\t\t\t{/* This element is to trick the browser into centering the modal contents. */}\n\t\t\t\t\t\t\t<span className=\"hidden sm:inline-block sm:align-middle sm:h-screen\"></span>\n\t\t\t\t\t\t\t&#8203;\n\t\t\t\t\t\t\t<Transition\n\t\t\t\t\t\t\t\tenter=\"ease-out duration-300\"\n\t\t\t\t\t\t\t\tenterFrom=\"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95\"\n\t\t\t\t\t\t\t\tenterTo=\"opacity-100 translate-y-0 sm:scale-100\"\n\t\t\t\t\t\t\t\tleave=\"ease-in duration-200\"\n\t\t\t\t\t\t\t\tleaveFrom=\"opacity-100 translate-y-0 sm:scale-100\"\n\t\t\t\t\t\t\t\tleaveTo=\"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName=\"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-sm sm:w-full sm:p-6\"\n\t\t\t\t\t\t\t\t\trole=\"dialog\"\n\t\t\t\t\t\t\t\t\taria-modal=\"true\"\n\t\t\t\t\t\t\t\t\taria-labelledby=\"modal-headline\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100\">\n\t\t\t\t\t\t\t\t\t\t\t<Icons.ExclamationOutline className=\"h-6 w-6 text-red-600\" />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"mt-3 text-center sm:mt-5\">\n\t\t\t\t\t\t\t\t\t\t\t<h3\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-lg leading-6 font-medium text-gray-900\"\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"modal-headline\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tYou Have Unsaved Changes\n\t\t\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"mt-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm leading-5 text-gray-500\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{step == 2 &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"Please upload or delete your un-uploaded (gray) files first.\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{step !== 2 &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"Please save or discard your changes first.\"}\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"mt-5 sm:mt-6\">\n\t\t\t\t\t\t\t\t\t\t<span className=\"flex w-full rounded-md shadow-sm\">\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetShowChangesNotSavedModal(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfalse\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"inline-flex justify-center w-full rounded-md border border-transparent px-4 py-2 bg-indigo-600 text-base leading-6 font-medium text-white shadow-sm hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:ring-indigo-500 transition ease-in-out duration-150 sm:text-sm sm:leading-5\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tBack\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Transition>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</Transition>\n\t\t\t</div>\n\t\t</Layout>\n\t);\n}\nexport const query = graphql`\n\tquery SFMUNRegisterPageQuery {\n\t\theaderImage: file(relativePath: { eq: \"conferences/sfmun.jpeg\" }) {\n\t\t\tchildImageSharp {\n\t\t\t\tfluid(maxWidth: 1200, quality: 90) {\n\t\t\t\t\t...GatsbyImageSharpFluid_withWebp\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n`;\n","/Users/jmeng/Documents/code/montavistamun/src/pages/conferences/smunc/register.tsx",["743","744","745","746","747","748","749","750"],"import { graphql } from \"gatsby\";\nimport * as Icons from \"heroicons-react\";\nimport React, { useContext, useState } from \"react\";\nimport useRequireLogin from \"../../../components/accounts/useRequireLogin\";\nimport FluidImage from \"../../../components/FluidImage\";\nimport Header from \"../../../components/Header\";\nimport { Layout, Main } from \"../../../components/layout\";\nimport EmergencyInformationSection from \"../../../components/registration/sections/EmergencyInformationSection\";\nimport PersonalInformationSection from \"../../../components/registration/sections/PersonalInformationSection\";\nimport ConfirmationSection from \"../../../components/registration/smunc/ConfirmationSection\";\nimport DonationsSection from \"../../../components/registration/smunc/DonationsSection\";\nimport WaiverFormsSection from \"../../../components/registration/smunc/WaiverFormsSection\";\nimport VerticalSteps from \"../../../components/shared/VerticalSteps\";\nimport Transition from \"../../../components/Transition\";\nimport AuthContext from \"../../../context/AuthContext\";\nimport useFirebase from \"../../../firebase/useFirebase\";\nexport const approvedUserIds = [\n\t\"yJbc2cZ34ebWZdvijZi8EwHg1PF2\",\n\t\"ujS4bKEXwoTzKqLwcDw9r1WQWFU2\",\n\t\"mDUpBv00QKPhhJIIODTDCYWwt862\",\n\t\"BvchpVBaz8eWapvO6jY2EaeLNRd2\",\n\t\"nRMi72g8faO836b4q44BMhhNWV92\",\n\t\"N2dJJunhylPKAzd5Ebp0ASabBur2\",\n\t\"H61Wol96fEgXOCmJg0ApdgcSUWY2\",\n\t\"UbE3rxCQ1XPVlpjUFhyxDn465P73\",\n\t\"Z6ORSMesUtZs7hpzUbVKd19VAPD2\",\n\t\"4BC7a7CWoQU0uzaLG2t2fbAuquv1\",\n\t\"o8atTM2CJgU9YaRDMdyHFK3mnBW2\",\n];\nexport default function AboutPage({\n\tdata: { headerImage },\n}: {\n\tdata: {\n\t\theaderImage: FluidImage;\n\t};\n}): React.ReactElement {\n\tuseRequireLogin();\n\tconst firebase = useFirebase();\n\tconst { user, loading: userLoading, admin } = useContext(AuthContext);\n\tconst [step, setStep] = useState(0);\n\tconst [stepHasChanges, setStepHasChanges] = useState(false);\n\n\tconst [maxStep, setMaxStep] = useState(0);\n\tfunction isFunction(\n\t\tfunctionToCheck: any\n\t): functionToCheck is (\n\t\toldData: Record<string, any>\n\t) => Record<string, any> {\n\t\treturn (\n\t\t\tfunctionToCheck &&\n\t\t\t{}.toString.call(functionToCheck) === \"[object Function]\"\n\t\t);\n\t}\n\tconst [data, updateData] = React.useReducer(\n\t\t(\n\t\t\tstate: Record<string, any>,\n\t\t\taction:\n\t\t\t\t| Record<string, any>\n\t\t\t\t| ((legacyData: Record<string, any>) => Record<string, any>)\n\t\t) => {\n\t\t\tlet updates;\n\t\t\tif (isFunction(action)) {\n\t\t\t\tupdates = action(state);\n\t\t\t} else {\n\t\t\t\tupdates = action;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t...updates,\n\t\t\t};\n\t\t},\n\t\t{}\n\t);\n\tconst [loadingData, setLoadingData] = useState(true);\n\tconst [showChangesNotSavedModal, setShowChangesNotSavedModal] = useState(\n\t\tfalse\n\t);\n\n\t/**\n\t * Updates the data with a section. Dot notation up to one deep is supported (so max one dot in the section).\n\t */\n\tconst handleUpdateData = React.useCallback(\n\t\tasync (section: string, validatedData: any) => {\n\t\t\tif (!firebase) return;\n\n\t\t\tawait Promise.all([\n\t\t\t\tfirebase\n\t\t\t\t\t.firestore()\n\t\t\t\t\t.collection(\"registration\")\n\t\t\t\t\t.doc(user?.uid)\n\t\t\t\t\t.set(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t[section.split(\".\")[0]]:\n\t\t\t\t\t\t\t\tsection.split(\".\").length > 1\n\t\t\t\t\t\t\t\t\t? { [section.split(\".\")[1]]: validatedData }\n\t\t\t\t\t\t\t\t\t: validatedData,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ merge: true }\n\t\t\t\t\t),\n\t\t\t\tfirebase\n\t\t\t\t\t.firestore()\n\t\t\t\t\t.collection(\"registration\")\n\t\t\t\t\t.doc(user?.uid)\n\t\t\t\t\t.collection(\"history\")\n\t\t\t\t\t.add({\n\t\t\t\t\t\ttimestamp: firebase.firestore.FieldValue.serverTimestamp(),\n\t\t\t\t\t\tsection,\n\t\t\t\t\t\tnewData: validatedData,\n\t\t\t\t\t}),\n\t\t\t]);\n\t\t\tupdateData((current) => {\n\t\t\t\tif (section.indexOf(\".\") > -1) {\n\t\t\t\t\tconst sectionFragments = section.split(\".\");\n\t\t\t\t\treturn {\n\t\t\t\t\t\t[sectionFragments[0]]: {\n\t\t\t\t\t\t\t...current[sectionFragments[0]],\n\t\t\t\t\t\t\t[sectionFragments[1]]: validatedData,\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\treturn { [section]: validatedData };\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t[firebase, data, updateData]\n\t);\n\tReact.useEffect(() => {\n\t\tconst handler = (e: BeforeUnloadEvent) => {\n\t\t\te.returnValue = \"You have unsaved changes!\";\n\t\t\treturn false;\n\t\t};\n\t\tif (stepHasChanges) {\n\t\t\twindow.addEventListener(\"beforeunload\", handler);\n\t\t}\n\t\treturn () => window.removeEventListener(\"beforeunload\", handler);\n\t}, [stepHasChanges]);\n\tReact.useEffect(() => {\n\t\tif (!firebase || !user) return;\n\t\tif (!loadingData) return;\n\t\tfirebase\n\t\t\t.firestore()\n\t\t\t.collection(\"registration\")\n\t\t\t.doc(user?.uid)\n\t\t\t.get()\n\t\t\t.then((snapshot) => {\n\t\t\t\tif (!loadingData) {\n\t\t\t\t\t// two requests were started for the data, and this is the second one to return\n\t\t\t\t\t// to avoid overwriting any data that the user may have started entering, don't update the data\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst data = snapshot.data() || {\n\t\t\t\t\tpersonalInformation: {},\n\t\t\t\t\temergencyInformation: {},\n\t\t\t\t};\n\t\t\t\tupdateData({\n\t\t\t\t\tpersonalInformation: {\n\t\t\t\t\t\tphone: \"\",\n\t\t\t\t\t\taddressOne: \"\",\n\t\t\t\t\t\taddressTwo: \"\",\n\t\t\t\t\t\tcity: \"\",\n\t\t\t\t\t\tzip: \"\",\n\t\t\t\t\t\tstate: \"CA\",\n\t\t\t\t\t\t...data.personalInformation,\n\t\t\t\t\t},\n\t\t\t\t\temergencyInformation: {\n\t\t\t\t\t\tcontactOneName: \"\",\n\t\t\t\t\t\tcontactOnePhone: \"\",\n\t\t\t\t\t\tcontactOneRelationship: \"\",\n\t\t\t\t\t\tcontactTwoName: \"\",\n\t\t\t\t\t\tcontactTwoPhone: \"\",\n\t\t\t\t\t\tcontactTwoRelationship: \"\",\n\n\t\t\t\t\t\thouseholdMainLanguage: \"English\",\n\n\t\t\t\t\t\thealthInsuranceCarrier: \"\",\n\t\t\t\t\t\thealthInsurancePolicyNumber: \"\",\n\t\t\t\t\t\thealthInsuranceAddressOne: \"\",\n\t\t\t\t\t\thealthInsuranceAddressTwo: \"\",\n\t\t\t\t\t\thealthInsuranceCity: \"\",\n\t\t\t\t\t\thealthInsuranceState: \"\",\n\t\t\t\t\t\thealthInsuranceZip: \"\",\n\t\t\t\t\t\t...data.emergencyInformation,\n\t\t\t\t\t},\n\t\t\t\t\tforms: {\n\t\t\t\t\t\t...data.forms,\n\t\t\t\t\t},\n\t\t\t\t\tpreferences: {\n\t\t\t\t\t\tcommittee: data.preferences?.committee || [\n\t\t\t\t\t\t\t\"DISEC\",\n\t\t\t\t\t\t\t\"IAEA\",\n\t\t\t\t\t\t\t\"UNODC\",\n\t\t\t\t\t\t\t\"SPECPOL\",\n\t\t\t\t\t\t\t\"UNHCR\",\n\t\t\t\t\t\t\t\"Catherine The Great's Coup (Crisis)\",\n\t\t\t\t\t\t\t\"UNSC (Crisis)\",\n\t\t\t\t\t\t\t\"Senate (Crisis)\",\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tconst rawData = snapshot.data();\n\t\t\t\tlet step;\n\t\t\t\tif (!rawData?.personalInformation) {\n\t\t\t\t\tstep = 0;\n\t\t\t\t} else if (!rawData.emergencyInformation) {\n\t\t\t\t\tstep = 1;\n\t\t\t\t} else if (!rawData.forms?.smuncFuhsdForm) {\n\t\t\t\t\tstep = 2;\n\t\t\t\t} else if (\n\t\t\t\t\t!rawData.forms?.donation &&\n\t\t\t\t\t!rawData.forms?.donationOptOut\n\t\t\t\t) {\n\t\t\t\t\tstep = 3;\n\t\t\t\t} else {\n\t\t\t\t\tstep = 4;\n\t\t\t\t}\n\t\t\t\tsetStep(step);\n\n\t\t\t\tsetMaxStep(step === 4 ? 5 : step);\n\n\t\t\t\tsetLoadingData(false);\n\t\t\t\tsetStepHasChanges(false);\n\t\t\t});\n\t}, [firebase, user]);\n\tconst [adminBypass, setAdminBypass] = useState(false);\n\tconst commonProps = {\n\t\thandleUpdateData,\n\t\tsetStepHasChanges,\n\t\tsetStep,\n\t\tsetMaxStep,\n\t\tuser,\n\t};\n\tif (userLoading) {\n\t\treturn (\n\t\t\t<Layout\n\t\t\t\ttitle={\"SMUNC Registration\"}\n\t\t\t\tdescription={\"Register for SMUNC!\"}\n\t\t\t>\n\t\t\t\t<div className=\"min-h-ca\">\n\t\t\t\t\t<Header title={\"Loading...\"} backgroundImage={headerImage}>\n\t\t\t\t\t\t{\"Just a second\"}\n\t\t\t\t\t</Header>\n\t\t\t\t</div>\n\t\t\t</Layout>\n\t\t);\n\t}\n\n\tif (user?.uid && approvedUserIds.indexOf(user.uid) === -1 && !adminBypass) {\n\t\treturn (\n\t\t\t<Layout\n\t\t\t\ttitle={\"SMUNC Registration\"}\n\t\t\t\tdescription={\"Register for SMUNC!\"}\n\t\t\t>\n\t\t\t\t<div className=\"min-h-ca\">\n\t\t\t\t\t<Header\n\t\t\t\t\t\ttitle={\"Permission Denied\"}\n\t\t\t\t\t\tbackgroundImage={headerImage}\n\t\t\t\t\t>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"Only members who have been accepted into our SMUNC delegation can register. If that's you, please send us an email.\"\n\t\t\t\t\t\t}\n\t\t\t\t\t</Header>\n\t\t\t\t\t{admin && (\n\t\t\t\t\t\t<p className={\"text-xl text-bold text-center mt-10\"}>\n\t\t\t\t\t\t\tYou're an admin, so you can bypass this message by{\" \"}\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tonClick={() => setAdminBypass(true)}\n\t\t\t\t\t\t\t\tclassName=\"link active:outline-none\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tclicking here\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</Layout>\n\t\t);\n\t}\n\treturn (\n\t\t<Layout\n\t\t\ttitle={\"SMUNC Registration\"}\n\t\t\tdescription={\n\t\t\t\t\"Register for SMUNC, MV Model UN's first conference of the year!\"\n\t\t\t}\n\t\t>\n\t\t\t<div className=\"min-h-ca\">\n\t\t\t\t<Header\n\t\t\t\t\ttitle={\"SMUNC Registration\"}\n\t\t\t\t\tbackgroundImage={headerImage}\n\t\t\t\t>\n\t\t\t\t\t{\"\"}\n\t\t\t\t</Header>\n\n\t\t\t\t<div className={\"bg-gray-100 w-full\"}>\n\t\t\t\t\t<Main wide noMobileXPadding>\n\t\t\t\t\t\t<div className=\"md:grid md:grid-cols-3 md:gap-6\">\n\t\t\t\t\t\t\t<div className=\"md:col-span-1\">\n\t\t\t\t\t\t\t\t<div className=\"px-4 sm:px-0 sticky top-24\">\n\t\t\t\t\t\t\t\t\t<h3 className=\"text-2xl font-bold leading-6 text-gray-900\">\n\t\t\t\t\t\t\t\t\t\tSMUNC Registration\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t<p className=\"mt-1 max-w-2xl text-sm leading-5 text-gray-500\">\n\t\t\t\t\t\t\t\t\t\tYour information will be saved when you\n\t\t\t\t\t\t\t\t\t\tclick the save button for each step, so\n\t\t\t\t\t\t\t\t\t\tyou don't need to complete this all at\n\t\t\t\t\t\t\t\t\t\tonce.\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t<VerticalSteps\n\t\t\t\t\t\t\t\t\t\tsteps={[\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: \"Personal Information\",\n\t\t\t\t\t\t\t\t\t\t\t\tdescription:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"This information will be saved to speed up registration for future conferences.\",\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: \"Emergency Information\",\n\t\t\t\t\t\t\t\t\t\t\t\tdescription:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"Although conferences will be online, we still require your emergency contacts and insurance information just in case.\",\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: \"Liability Forms\",\n\t\t\t\t\t\t\t\t\t\t\t\tdescription:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"These forms will be mostly autofilled with the information you provide us in earlier steps, but you'll still need to get them signed.\",\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: \"Donations\",\n\t\t\t\t\t\t\t\t\t\t\t\tdescription:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"To cover conference fees charged by SMUNC, we request a $35 donation, which will go directly towards making this conference possible.\",\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: \"You're Done!\",\n\t\t\t\t\t\t\t\t\t\t\t\tdescription:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"Your SMUNC forms have been submitted!\",\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\t\tcurrentStep={step}\n\t\t\t\t\t\t\t\t\t\tmaxSwitchableStep={maxStep}\n\t\t\t\t\t\t\t\t\t\tonStepSwitch={(i) => {\n\t\t\t\t\t\t\t\t\t\t\tif (stepHasChanges) {\n\t\t\t\t\t\t\t\t\t\t\t\tsetShowChangesNotSavedModal(\n\t\t\t\t\t\t\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\tsetStep(i);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\"mt-10 mt-5 md:mt-0 md:col-span-2 h-full\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{step === 0 && (\n\t\t\t\t\t\t\t\t\t<PersonalInformationSection\n\t\t\t\t\t\t\t\t\t\tdata={data?.personalInformation}\n\t\t\t\t\t\t\t\t\t\t{...commonProps}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{step === 1 && (\n\t\t\t\t\t\t\t\t\t<EmergencyInformationSection\n\t\t\t\t\t\t\t\t\t\tdata={data?.emergencyInformation}\n\t\t\t\t\t\t\t\t\t\t{...commonProps}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{step === 2 && (\n\t\t\t\t\t\t\t\t\t<WaiverFormsSection\n\t\t\t\t\t\t\t\t\t\tdata={data}\n\t\t\t\t\t\t\t\t\t\t{...commonProps}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{step === 3 && (\n\t\t\t\t\t\t\t\t\t<DonationsSection\n\t\t\t\t\t\t\t\t\t\tdata={data}\n\t\t\t\t\t\t\t\t\t\t{...commonProps}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{step === 4 && (\n\t\t\t\t\t\t\t\t\t<ConfirmationSection\n\t\t\t\t\t\t\t\t\t\tdata={data}\n\t\t\t\t\t\t\t\t\t\t{...commonProps}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Main>\n\t\t\t\t</div>\n\n\t\t\t\t<Transition show={showChangesNotSavedModal}>\n\t\t\t\t\t<div className=\"fixed z-10 inset-0 overflow-y-auto\">\n\t\t\t\t\t\t<div className=\"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0\">\n\t\t\t\t\t\t\t<Transition\n\t\t\t\t\t\t\t\tenter=\"ease-out duration-300\"\n\t\t\t\t\t\t\t\tenterFrom=\"opacity-0\"\n\t\t\t\t\t\t\t\tenterTo=\"opacity-100\"\n\t\t\t\t\t\t\t\tleave=\"ease-in duration-200\"\n\t\t\t\t\t\t\t\tleaveFrom=\"opacity-100\"\n\t\t\t\t\t\t\t\tleaveTo=\"opacity-0\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div className=\"fixed inset-0 transition-opacity\">\n\t\t\t\t\t\t\t\t\t<div className=\"absolute inset-0 bg-gray-500 opacity-75\"></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Transition>\n\t\t\t\t\t\t\t{/* This element is to trick the browser into centering the modal contents. */}\n\t\t\t\t\t\t\t<span className=\"hidden sm:inline-block sm:align-middle sm:h-screen\"></span>\n\t\t\t\t\t\t\t&#8203;\n\t\t\t\t\t\t\t<Transition\n\t\t\t\t\t\t\t\tenter=\"ease-out duration-300\"\n\t\t\t\t\t\t\t\tenterFrom=\"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95\"\n\t\t\t\t\t\t\t\tenterTo=\"opacity-100 translate-y-0 sm:scale-100\"\n\t\t\t\t\t\t\t\tleave=\"ease-in duration-200\"\n\t\t\t\t\t\t\t\tleaveFrom=\"opacity-100 translate-y-0 sm:scale-100\"\n\t\t\t\t\t\t\t\tleaveTo=\"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName=\"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-sm sm:w-full sm:p-6\"\n\t\t\t\t\t\t\t\t\trole=\"dialog\"\n\t\t\t\t\t\t\t\t\taria-modal=\"true\"\n\t\t\t\t\t\t\t\t\taria-labelledby=\"modal-headline\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100\">\n\t\t\t\t\t\t\t\t\t\t\t<Icons.ExclamationOutline className=\"h-6 w-6 text-red-600\" />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"mt-3 text-center sm:mt-5\">\n\t\t\t\t\t\t\t\t\t\t\t<h3\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-lg leading-6 font-medium text-gray-900\"\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"modal-headline\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tYou Have Unsaved Changes\n\t\t\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"mt-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm leading-5 text-gray-500\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{step == 2 &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"Please upload or delete your un-uploaded (gray) files first.\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{step !== 2 &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"Please save or discard your changes first.\"}\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"mt-5 sm:mt-6\">\n\t\t\t\t\t\t\t\t\t\t<span className=\"flex w-full rounded-md shadow-sm\">\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetShowChangesNotSavedModal(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfalse\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"inline-flex justify-center w-full rounded-md border border-transparent px-4 py-2 bg-indigo-600 text-base leading-6 font-medium text-white shadow-sm hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:ring-indigo-500 transition ease-in-out duration-150 sm:text-sm sm:leading-5\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tBack\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Transition>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</Transition>\n\t\t\t</div>\n\t\t</Layout>\n\t);\n}\nexport const query = graphql`\n\tquery SMUNCRegisterPageQuery {\n\t\theaderImage: file(relativePath: { eq: \"conferences/smunc.jpeg\" }) {\n\t\t\tchildImageSharp {\n\t\t\t\tfluid(maxWidth: 1200, quality: 90) {\n\t\t\t\t\t...GatsbyImageSharpFluid_withWebp\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n`;\n","/Users/jmeng/Documents/code/montavistamun/src/pages/conferences.tsx",[],"/Users/jmeng/Documents/code/montavistamun/src/pages/dashboard.tsx",[],"/Users/jmeng/Documents/code/montavistamun/src/pages/home-old.tsx",[],"/Users/jmeng/Documents/code/montavistamun/src/pages/index.tsx",[],"/Users/jmeng/Documents/code/montavistamun/src/pages/kennedy.tsx",[],"/Users/jmeng/Documents/code/montavistamun/src/pages/resources.tsx",[],"/Users/jmeng/Documents/code/montavistamun/src/pages/secretariat.tsx",[],"/Users/jmeng/Documents/code/montavistamun/src/typings/heap.d.ts",["751"],"declare const heap: {\n\tidentify: (identifier: string) => void;\n\taddUserProperties: (properties: { [P: string]: any }) => void;\n}; // imported via gatsby\n// (non exhaustive)\n","/Users/jmeng/Documents/code/montavistamun/src/typings/sysend.d.ts",["752","753","754"],"declare module \"sysend\" {\n\tfunction broadcast(name: string, object: any): void;\n\n\tfunction on(\n\t\tname: string,\n\t\tcallback: (object: any, name: string) => void\n\t): void;\n\n\tfunction off(\n\t\tname: string,\n\t\tcallback?: (object: any, name: string) => void\n\t): void;\n\n\tfunction proxy(url: string): void;\n}\n","/Users/jmeng/Documents/code/montavistamun/src/utils/schoolYearUtils.test.tsx",[],"/Users/jmeng/Documents/code/montavistamun/src/utils/schoolYearUtils.tsx",[],"/Users/jmeng/Documents/code/montavistamun/tests/firestore-rules/admin-log.test.ts",[],"/Users/jmeng/Documents/code/montavistamun/tests/firestore-rules/awards.test.ts",[],"/Users/jmeng/Documents/code/montavistamun/tests/firestore-rules/helpers.ts",["755","756","757","758","759","760","761"],"// based on these two resources:\n// https://medium.com/flutter-community/firestore-security-rules-and-tests-for-firebase-e195bdbea198\n// https://github.com/firebase/quickstart-testing/blob/master/unit-test-security-rules/test/firestore.spec.js\n\nimport * as firebase from \"@firebase/rules-unit-testing\";\nimport fs from \"fs\";\ninterface FirebaseAuthTokenOptions {\n\tuid: string;\n\temail?: string;\n\temail_verified?: boolean;\n\tname?: string;\n\t[claim: string]: any;\n}\n\n/**\n * Get a firestore instance with specified auth and initial data options.\n * @param authentication - false for no authentication,\n * \"unverified\" or true for a basic user with uid \"test\",\n * \"verified\" for a verified user with uid \"test\",\n * \"admin\" for a verified admin user with uid \"test\",\n * or a custom firebase auth options object with a property uid and optional other properties.\n * @param data - data to pre-populate the database with\n */\nexport async function getFirestoreInstance(\n\tauthentication:\n\t\t| boolean\n\t\t| \"unverified\"\n\t\t| \"verified\"\n\t\t| \"admin\"\n\t\t| FirebaseAuthTokenOptions = false,\n\tdata?: Record<string, any>\n) {\n\tlet authObject: undefined | FirebaseAuthTokenOptions;\n\tif (authentication === false) {\n\t\tauthObject = undefined;\n\t} else if (typeof authentication === \"string\" || authentication === true) {\n\t\tauthObject = {\n\t\t\tuid: \"test\",\n\t\t};\n\t\tswitch (authentication) {\n\t\t\tcase \"verified\":\n\t\t\t\tauthObject.verified = true;\n\t\t\t\tbreak;\n\t\t\tcase \"admin\":\n\t\t\t\tauthObject.verified = true;\n\t\t\t\tauthObject.admin = true;\n\t\t}\n\t} else {\n\t\tauthObject = authentication;\n\t}\n\n\tconst projectId = `rules-test-${Date.now()}`;\n\t// Create the test app using the unique ID and the given user auth object\n\tconst app = firebase.initializeTestApp({\n\t\tprojectId,\n\t\tauth: authObject,\n\t});\n\n\t// Get the db linked to the new firebase app that we created\n\tconst db = app.firestore();\n\n\t// Apply the test rules so we can write documents\n\tawait firebase.loadFirestoreRules({\n\t\tprojectId,\n\t\trules: fs.readFileSync(\n\t\t\t\"tests/firestore-rules/firestore-allow-all.rules\",\n\t\t\t\"utf8\"\n\t\t),\n\t});\n\n\t// Write mock documents with test rules\n\tif (data) {\n\t\tfor (const key in data) {\n\t\t\tawait db.doc(key).set(data[key]);\n\t\t}\n\t}\n\n\t// Apply the rules to be tested\n\tawait firebase.loadFirestoreRules({\n\t\tprojectId,\n\t\trules: fs.readFileSync(\"firestore.rules\", \"utf8\"),\n\t});\n\n\t// return the initialized DB for testing\n\treturn db;\n}\n\nexport async function teardown(): Promise<void> {\n\tawait Promise.all(firebase.apps().map((app) => app.delete()));\n}\n\nexport interface RulesMatchers<R> {\n\ttoAllow(): R;\n\ttoDeny(): R;\n}\nexport const rulesMatchers = {\n\ttoAllow: async (testPromise: Promise<any>) => {\n\t\tlet pass = false;\n\t\ttry {\n\t\t\tawait firebase.assertSucceeds(testPromise);\n\t\t\tpass = true;\n\t\t} catch (err) {\n\t\t\tconsole.log(err);\n\t\t}\n\t\treturn {\n\t\t\tpass,\n\t\t\tmessage: () =>\n\t\t\t\t\"Expected Firebase operation to be allowed, but it was denied\",\n\t\t};\n\t},\n\ttoDeny: async (testPromise: Promise<any>) => {\n\t\tlet pass = false;\n\t\ttry {\n\t\t\tawait firebase.assertFails(testPromise);\n\t\t\tpass = true;\n\t\t} catch (err) {\n\t\t\tconsole.log(err);\n\t\t}\n\t\treturn {\n\t\t\tpass,\n\t\t\tmessage: () =>\n\t\t\t\t\"Expected Firebase operation to be denied, but it was allowed\",\n\t\t};\n\t},\n};\n","/Users/jmeng/Documents/code/montavistamun/tests/firestore-rules/keys.test.ts",[],"/Users/jmeng/Documents/code/montavistamun/tests/firestore-rules/registration.test.ts",[],"/Users/jmeng/Documents/code/montavistamun/tests/firestore-rules/users.test.ts",[],{"ruleId":"762","severity":1,"message":"763","line":12,"column":32,"nodeType":"764","messageId":"765","endLine":12,"endColumn":48},{"ruleId":"762","severity":1,"message":"766","line":12,"column":33,"nodeType":"767","messageId":"768","endLine":12,"endColumn":44},{"ruleId":"769","severity":1,"message":"770","line":3,"column":17,"nodeType":"771","messageId":"772","endLine":3,"endColumn":25},{"ruleId":"762","severity":1,"message":"763","line":11,"column":32,"nodeType":"764","messageId":"765","endLine":11,"endColumn":48},{"ruleId":"762","severity":1,"message":"766","line":11,"column":33,"nodeType":"767","messageId":"768","endLine":11,"endColumn":44},{"ruleId":"769","severity":1,"message":"773","line":7,"column":7,"nodeType":"771","messageId":"772","endLine":7,"endColumn":20},{"ruleId":"769","severity":1,"message":"774","line":4,"column":9,"nodeType":"771","messageId":"772","endLine":4,"endColumn":14},{"ruleId":"769","severity":1,"message":"775","line":4,"column":16,"nodeType":"771","messageId":"772","endLine":4,"endColumn":24},{"ruleId":"769","severity":1,"message":"776","line":5,"column":9,"nodeType":"771","messageId":"772","endLine":5,"endColumn":19},{"ruleId":"769","severity":1,"message":"777","line":5,"column":21,"nodeType":"771","messageId":"772","endLine":5,"endColumn":34},{"ruleId":"769","severity":1,"message":"778","line":6,"column":9,"nodeType":"771","messageId":"772","endLine":6,"endColumn":16},{"ruleId":"769","severity":1,"message":"779","line":6,"column":18,"nodeType":"771","messageId":"772","endLine":6,"endColumn":28},{"ruleId":"769","severity":1,"message":"780","line":7,"column":9,"nodeType":"771","messageId":"772","endLine":7,"endColumn":18},{"ruleId":"769","severity":1,"message":"781","line":7,"column":20,"nodeType":"771","messageId":"772","endLine":7,"endColumn":32},{"ruleId":"769","severity":1,"message":"782","line":8,"column":9,"nodeType":"771","messageId":"772","endLine":8,"endColumn":17},{"ruleId":"769","severity":1,"message":"783","line":8,"column":19,"nodeType":"771","messageId":"772","endLine":8,"endColumn":30},{"ruleId":"769","severity":1,"message":"784","line":9,"column":9,"nodeType":"771","messageId":"772","endLine":9,"endColumn":14},{"ruleId":"769","severity":1,"message":"785","line":9,"column":16,"nodeType":"771","messageId":"772","endLine":9,"endColumn":24},{"ruleId":"769","severity":1,"message":"786","line":10,"column":9,"nodeType":"771","messageId":"772","endLine":10,"endColumn":14},{"ruleId":"769","severity":1,"message":"787","line":10,"column":16,"nodeType":"771","messageId":"772","endLine":10,"endColumn":24},{"ruleId":"762","severity":1,"message":"763","line":5,"column":16,"nodeType":"788","messageId":"765","endLine":23,"endColumn":3},{"ruleId":"762","severity":1,"message":"763","line":2,"column":16,"nodeType":"788","messageId":"765","endLine":2,"endColumn":71},{"ruleId":"789","severity":1,"message":"790","line":76,"column":39,"nodeType":"791","messageId":"792","endLine":76,"endColumn":42,"suggestions":"793"},{"ruleId":"762","severity":1,"message":"763","line":6,"column":16,"nodeType":"788","messageId":"765","endLine":26,"endColumn":3},{"ruleId":"769","severity":1,"message":"794","line":11,"column":2,"nodeType":"771","messageId":"772","endLine":11,"endColumn":10},{"ruleId":"762","severity":1,"message":"763","line":8,"column":16,"nodeType":"788","messageId":"765","endLine":24,"endColumn":3},{"ruleId":"789","severity":1,"message":"790","line":19,"column":25,"nodeType":"791","messageId":"792","endLine":19,"endColumn":28,"suggestions":"795"},{"ruleId":"789","severity":1,"message":"790","line":19,"column":33,"nodeType":"791","messageId":"792","endLine":19,"endColumn":36,"suggestions":"796"},{"ruleId":"762","severity":1,"message":"763","line":7,"column":16,"nodeType":"788","messageId":"765","endLine":24,"endColumn":3},{"ruleId":"789","severity":1,"message":"790","line":219,"column":33,"nodeType":"791","messageId":"792","endLine":219,"endColumn":36,"suggestions":"797"},{"ruleId":"789","severity":1,"message":"790","line":220,"column":18,"nodeType":"791","messageId":"792","endLine":220,"endColumn":21,"suggestions":"798"},{"ruleId":"762","severity":1,"message":"763","line":38,"column":8,"nodeType":"788","messageId":"765","endLine":46,"endColumn":2},{"ruleId":"762","severity":1,"message":"763","line":98,"column":16,"nodeType":"788","messageId":"765","endLine":113,"endColumn":3},{"ruleId":"769","severity":1,"message":"770","line":2,"column":17,"nodeType":"771","messageId":"772","endLine":2,"endColumn":25},{"ruleId":"769","severity":1,"message":"799","line":10,"column":5,"nodeType":"771","messageId":"772","endLine":10,"endColumn":10},{"ruleId":"762","severity":1,"message":"763","line":25,"column":16,"nodeType":"788","messageId":"765","endLine":31,"endColumn":3},{"ruleId":"762","severity":1,"message":"763","line":29,"column":16,"nodeType":"788","messageId":"765","endLine":46,"endColumn":3},{"ruleId":"789","severity":1,"message":"790","line":88,"column":28,"nodeType":"791","messageId":"792","endLine":88,"endColumn":31,"suggestions":"800"},{"ruleId":"789","severity":1,"message":"790","line":89,"column":46,"nodeType":"791","messageId":"792","endLine":89,"endColumn":49,"suggestions":"801"},{"ruleId":"769","severity":1,"message":"802","line":106,"column":2,"nodeType":"771","messageId":"772","endLine":106,"endColumn":6},{"ruleId":"762","severity":1,"message":"763","line":3,"column":16,"nodeType":"788","messageId":"765","endLine":3,"endColumn":43},{"ruleId":"762","severity":1,"message":"763","line":5,"column":16,"nodeType":"788","messageId":"765","endLine":5,"endColumn":32},{"ruleId":"762","severity":1,"message":"763","line":44,"column":16,"nodeType":"788","messageId":"765","endLine":50,"endColumn":3},{"ruleId":"769","severity":1,"message":"803","line":8,"column":16,"nodeType":"771","messageId":"772","endLine":8,"endColumn":23},{"ruleId":"769","severity":1,"message":"803","line":257,"column":16,"nodeType":"771","messageId":"772","endLine":257,"endColumn":23},{"ruleId":"789","severity":1,"message":"790","line":16,"column":19,"nodeType":"791","messageId":"792","endLine":16,"endColumn":22,"suggestions":"804"},{"ruleId":"789","severity":1,"message":"790","line":17,"column":48,"nodeType":"791","messageId":"792","endLine":17,"endColumn":51,"suggestions":"805"},{"ruleId":"789","severity":1,"message":"790","line":17,"column":72,"nodeType":"791","messageId":"792","endLine":17,"endColumn":75,"suggestions":"806"},{"ruleId":"762","severity":1,"message":"763","line":23,"column":16,"nodeType":"788","messageId":"765","endLine":23,"endColumn":50},{"ruleId":"769","severity":1,"message":"807","line":24,"column":8,"nodeType":"771","messageId":"772","endLine":24,"endColumn":12},{"ruleId":"769","severity":1,"message":"808","line":25,"column":8,"nodeType":"771","messageId":"772","endLine":25,"endColumn":11},{"ruleId":"769","severity":1,"message":"809","line":28,"column":25,"nodeType":"771","messageId":"772","endLine":28,"endColumn":36},{"ruleId":"789","severity":1,"message":"790","line":55,"column":26,"nodeType":"791","messageId":"792","endLine":55,"endColumn":29,"suggestions":"810"},{"ruleId":"789","severity":1,"message":"790","line":57,"column":22,"nodeType":"791","messageId":"792","endLine":57,"endColumn":25,"suggestions":"811"},{"ruleId":"789","severity":1,"message":"790","line":58,"column":36,"nodeType":"791","messageId":"792","endLine":58,"endColumn":39,"suggestions":"812"},{"ruleId":"789","severity":1,"message":"790","line":58,"column":60,"nodeType":"791","messageId":"792","endLine":58,"endColumn":63,"suggestions":"813"},{"ruleId":"789","severity":1,"message":"790","line":83,"column":42,"nodeType":"791","messageId":"792","endLine":83,"endColumn":45,"suggestions":"814"},{"ruleId":"769","severity":1,"message":"815","line":35,"column":2,"nodeType":"771","messageId":"772","endLine":35,"endColumn":14},{"ruleId":"789","severity":1,"message":"790","line":35,"column":11,"nodeType":"791","messageId":"792","endLine":35,"endColumn":14,"suggestions":"816"},{"ruleId":"762","severity":1,"message":"763","line":65,"column":16,"nodeType":"788","messageId":"765","endLine":95,"endColumn":3},{"ruleId":"769","severity":1,"message":"817","line":65,"column":36,"nodeType":"771","messageId":"772","endLine":65,"endColumn":40},{"ruleId":"769","severity":1,"message":"818","line":69,"column":2,"nodeType":"771","messageId":"772","endLine":69,"endColumn":11},{"ruleId":"789","severity":1,"message":"790","line":93,"column":23,"nodeType":"791","messageId":"792","endLine":93,"endColumn":26,"suggestions":"819"},{"ruleId":"789","severity":1,"message":"790","line":94,"column":41,"nodeType":"791","messageId":"792","endLine":94,"endColumn":44,"suggestions":"820"},{"ruleId":"789","severity":1,"message":"790","line":90,"column":28,"nodeType":"791","messageId":"792","endLine":90,"endColumn":31,"suggestions":"821"},{"ruleId":"789","severity":1,"message":"790","line":91,"column":46,"nodeType":"791","messageId":"792","endLine":91,"endColumn":49,"suggestions":"822"},{"ruleId":"769","severity":1,"message":"802","line":108,"column":2,"nodeType":"771","messageId":"772","endLine":108,"endColumn":6},{"ruleId":"789","severity":1,"message":"790","line":11,"column":19,"nodeType":"791","messageId":"792","endLine":11,"endColumn":22,"suggestions":"823"},{"ruleId":"789","severity":1,"message":"790","line":12,"column":48,"nodeType":"791","messageId":"792","endLine":12,"endColumn":51,"suggestions":"824"},{"ruleId":"789","severity":1,"message":"790","line":12,"column":72,"nodeType":"791","messageId":"792","endLine":12,"endColumn":75,"suggestions":"825"},{"ruleId":"762","severity":1,"message":"763","line":18,"column":16,"nodeType":"788","messageId":"765","endLine":18,"endColumn":46},{"ruleId":"769","severity":1,"message":"807","line":19,"column":8,"nodeType":"771","messageId":"772","endLine":19,"endColumn":12},{"ruleId":"769","severity":1,"message":"808","line":20,"column":8,"nodeType":"771","messageId":"772","endLine":20,"endColumn":11},{"ruleId":"769","severity":1,"message":"809","line":23,"column":25,"nodeType":"771","messageId":"772","endLine":23,"endColumn":36},{"ruleId":"789","severity":1,"message":"790","line":50,"column":26,"nodeType":"791","messageId":"792","endLine":50,"endColumn":29,"suggestions":"826"},{"ruleId":"789","severity":1,"message":"790","line":52,"column":22,"nodeType":"791","messageId":"792","endLine":52,"endColumn":25,"suggestions":"827"},{"ruleId":"789","severity":1,"message":"790","line":53,"column":36,"nodeType":"791","messageId":"792","endLine":53,"endColumn":39,"suggestions":"828"},{"ruleId":"789","severity":1,"message":"790","line":53,"column":60,"nodeType":"791","messageId":"792","endLine":53,"endColumn":63,"suggestions":"829"},{"ruleId":"789","severity":1,"message":"790","line":78,"column":42,"nodeType":"791","messageId":"792","endLine":78,"endColumn":45,"suggestions":"830"},{"ruleId":"769","severity":1,"message":"831","line":231,"column":8,"nodeType":"771","messageId":"772","endLine":231,"endColumn":19},{"ruleId":"789","severity":1,"message":"790","line":16,"column":19,"nodeType":"791","messageId":"792","endLine":16,"endColumn":22,"suggestions":"832"},{"ruleId":"789","severity":1,"message":"790","line":17,"column":48,"nodeType":"791","messageId":"792","endLine":17,"endColumn":51,"suggestions":"833"},{"ruleId":"789","severity":1,"message":"790","line":17,"column":72,"nodeType":"791","messageId":"792","endLine":17,"endColumn":75,"suggestions":"834"},{"ruleId":"762","severity":1,"message":"763","line":23,"column":16,"nodeType":"788","messageId":"765","endLine":23,"endColumn":51},{"ruleId":"769","severity":1,"message":"807","line":24,"column":8,"nodeType":"771","messageId":"772","endLine":24,"endColumn":12},{"ruleId":"769","severity":1,"message":"808","line":25,"column":8,"nodeType":"771","messageId":"772","endLine":25,"endColumn":11},{"ruleId":"769","severity":1,"message":"809","line":28,"column":25,"nodeType":"771","messageId":"772","endLine":28,"endColumn":36},{"ruleId":"789","severity":1,"message":"790","line":55,"column":26,"nodeType":"791","messageId":"792","endLine":55,"endColumn":29,"suggestions":"835"},{"ruleId":"789","severity":1,"message":"790","line":57,"column":22,"nodeType":"791","messageId":"792","endLine":57,"endColumn":25,"suggestions":"836"},{"ruleId":"789","severity":1,"message":"790","line":58,"column":36,"nodeType":"791","messageId":"792","endLine":58,"endColumn":39,"suggestions":"837"},{"ruleId":"789","severity":1,"message":"790","line":58,"column":60,"nodeType":"791","messageId":"792","endLine":58,"endColumn":63,"suggestions":"838"},{"ruleId":"789","severity":1,"message":"790","line":83,"column":42,"nodeType":"791","messageId":"792","endLine":83,"endColumn":45,"suggestions":"839"},{"ruleId":"762","severity":1,"message":"763","line":8,"column":16,"nodeType":"788","messageId":"765","endLine":26,"endColumn":3},{"ruleId":"769","severity":1,"message":"840","line":9,"column":2,"nodeType":"771","messageId":"772","endLine":9,"endColumn":6},{"ruleId":"769","severity":1,"message":"841","line":10,"column":2,"nodeType":"771","messageId":"772","endLine":10,"endColumn":19},{"ruleId":"769","severity":1,"message":"842","line":11,"column":2,"nodeType":"771","messageId":"772","endLine":11,"endColumn":18},{"ruleId":"769","severity":1,"message":"843","line":13,"column":2,"nodeType":"771","messageId":"772","endLine":13,"endColumn":12},{"ruleId":"789","severity":1,"message":"790","line":18,"column":23,"nodeType":"791","messageId":"792","endLine":18,"endColumn":26,"suggestions":"844"},{"ruleId":"789","severity":1,"message":"790","line":21,"column":24,"nodeType":"791","messageId":"792","endLine":21,"endColumn":27,"suggestions":"845"},{"ruleId":"769","severity":1,"message":"846","line":27,"column":8,"nodeType":"771","messageId":"772","endLine":27,"endColumn":16},{"ruleId":"769","severity":1,"message":"776","line":29,"column":9,"nodeType":"771","messageId":"772","endLine":29,"endColumn":19},{"ruleId":"769","severity":1,"message":"777","line":29,"column":21,"nodeType":"771","messageId":"772","endLine":29,"endColumn":34},{"ruleId":"769","severity":1,"message":"847","line":19,"column":7,"nodeType":"771","messageId":"772","endLine":19,"endColumn":19},{"ruleId":"762","severity":1,"message":"763","line":27,"column":16,"nodeType":"788","messageId":"765","endLine":44,"endColumn":3},{"ruleId":"789","severity":1,"message":"790","line":36,"column":23,"nodeType":"791","messageId":"792","endLine":36,"endColumn":26,"suggestions":"848"},{"ruleId":"769","severity":1,"message":"849","line":94,"column":18,"nodeType":"771","messageId":"772","endLine":94,"endColumn":19},{"ruleId":"769","severity":1,"message":"850","line":257,"column":21,"nodeType":"771","messageId":"772","endLine":257,"endColumn":22},{"ruleId":"762","severity":1,"message":"763","line":61,"column":16,"nodeType":"788","messageId":"765","endLine":78,"endColumn":3},{"ruleId":"789","severity":1,"message":"790","line":70,"column":23,"nodeType":"791","messageId":"792","endLine":70,"endColumn":26,"suggestions":"851"},{"ruleId":"769","severity":1,"message":"846","line":79,"column":8,"nodeType":"771","messageId":"772","endLine":79,"endColumn":16},{"ruleId":"762","severity":1,"message":"763","line":8,"column":16,"nodeType":"788","messageId":"765","endLine":26,"endColumn":3},{"ruleId":"769","severity":1,"message":"840","line":9,"column":2,"nodeType":"771","messageId":"772","endLine":9,"endColumn":6},{"ruleId":"769","severity":1,"message":"841","line":10,"column":2,"nodeType":"771","messageId":"772","endLine":10,"endColumn":19},{"ruleId":"769","severity":1,"message":"842","line":11,"column":2,"nodeType":"771","messageId":"772","endLine":11,"endColumn":18},{"ruleId":"769","severity":1,"message":"843","line":13,"column":2,"nodeType":"771","messageId":"772","endLine":13,"endColumn":12},{"ruleId":"789","severity":1,"message":"790","line":18,"column":23,"nodeType":"791","messageId":"792","endLine":18,"endColumn":26,"suggestions":"852"},{"ruleId":"789","severity":1,"message":"790","line":21,"column":24,"nodeType":"791","messageId":"792","endLine":21,"endColumn":27,"suggestions":"853"},{"ruleId":"769","severity":1,"message":"846","line":27,"column":8,"nodeType":"771","messageId":"772","endLine":27,"endColumn":16},{"ruleId":"769","severity":1,"message":"776","line":29,"column":9,"nodeType":"771","messageId":"772","endLine":29,"endColumn":19},{"ruleId":"769","severity":1,"message":"777","line":29,"column":21,"nodeType":"771","messageId":"772","endLine":29,"endColumn":34},{"ruleId":"769","severity":1,"message":"847","line":19,"column":7,"nodeType":"771","messageId":"772","endLine":19,"endColumn":19},{"ruleId":"762","severity":1,"message":"763","line":27,"column":16,"nodeType":"788","messageId":"765","endLine":44,"endColumn":3},{"ruleId":"789","severity":1,"message":"790","line":36,"column":23,"nodeType":"791","messageId":"792","endLine":36,"endColumn":26,"suggestions":"854"},{"ruleId":"769","severity":1,"message":"849","line":94,"column":18,"nodeType":"771","messageId":"772","endLine":94,"endColumn":19},{"ruleId":"769","severity":1,"message":"850","line":257,"column":21,"nodeType":"771","messageId":"772","endLine":257,"endColumn":22},{"ruleId":"762","severity":1,"message":"763","line":61,"column":16,"nodeType":"788","messageId":"765","endLine":78,"endColumn":3},{"ruleId":"789","severity":1,"message":"790","line":70,"column":23,"nodeType":"791","messageId":"792","endLine":70,"endColumn":26,"suggestions":"855"},{"ruleId":"769","severity":1,"message":"846","line":79,"column":8,"nodeType":"771","messageId":"772","endLine":79,"endColumn":16},{"ruleId":"762","severity":1,"message":"763","line":8,"column":16,"nodeType":"788","messageId":"765","endLine":26,"endColumn":3},{"ruleId":"769","severity":1,"message":"840","line":9,"column":2,"nodeType":"771","messageId":"772","endLine":9,"endColumn":6},{"ruleId":"769","severity":1,"message":"841","line":10,"column":2,"nodeType":"771","messageId":"772","endLine":10,"endColumn":19},{"ruleId":"769","severity":1,"message":"842","line":11,"column":2,"nodeType":"771","messageId":"772","endLine":11,"endColumn":18},{"ruleId":"769","severity":1,"message":"843","line":13,"column":2,"nodeType":"771","messageId":"772","endLine":13,"endColumn":12},{"ruleId":"789","severity":1,"message":"790","line":18,"column":23,"nodeType":"791","messageId":"792","endLine":18,"endColumn":26,"suggestions":"856"},{"ruleId":"789","severity":1,"message":"790","line":21,"column":24,"nodeType":"791","messageId":"792","endLine":21,"endColumn":27,"suggestions":"857"},{"ruleId":"769","severity":1,"message":"846","line":27,"column":8,"nodeType":"771","messageId":"772","endLine":27,"endColumn":16},{"ruleId":"769","severity":1,"message":"776","line":29,"column":9,"nodeType":"771","messageId":"772","endLine":29,"endColumn":19},{"ruleId":"769","severity":1,"message":"777","line":29,"column":21,"nodeType":"771","messageId":"772","endLine":29,"endColumn":34},{"ruleId":"769","severity":1,"message":"847","line":19,"column":7,"nodeType":"771","messageId":"772","endLine":19,"endColumn":19},{"ruleId":"762","severity":1,"message":"763","line":27,"column":16,"nodeType":"788","messageId":"765","endLine":44,"endColumn":3},{"ruleId":"789","severity":1,"message":"790","line":36,"column":23,"nodeType":"791","messageId":"792","endLine":36,"endColumn":26,"suggestions":"858"},{"ruleId":"769","severity":1,"message":"849","line":94,"column":18,"nodeType":"771","messageId":"772","endLine":94,"endColumn":19},{"ruleId":"769","severity":1,"message":"850","line":257,"column":21,"nodeType":"771","messageId":"772","endLine":257,"endColumn":22},{"ruleId":"762","severity":1,"message":"763","line":39,"column":16,"nodeType":"788","messageId":"765","endLine":56,"endColumn":3},{"ruleId":"762","severity":1,"message":"763","line":29,"column":16,"nodeType":"788","messageId":"765","endLine":46,"endColumn":3},{"ruleId":"762","severity":1,"message":"763","line":14,"column":16,"nodeType":"788","messageId":"765","endLine":31,"endColumn":3},{"ruleId":"769","severity":1,"message":"859","line":81,"column":32,"nodeType":"771","messageId":"772","endLine":81,"endColumn":50},{"ruleId":"762","severity":1,"message":"763","line":61,"column":16,"nodeType":"788","messageId":"765","endLine":78,"endColumn":3},{"ruleId":"789","severity":1,"message":"790","line":70,"column":23,"nodeType":"791","messageId":"792","endLine":70,"endColumn":26,"suggestions":"860"},{"ruleId":"769","severity":1,"message":"846","line":79,"column":8,"nodeType":"771","messageId":"772","endLine":79,"endColumn":16},{"ruleId":"762","severity":1,"message":"763","line":8,"column":16,"nodeType":"788","messageId":"765","endLine":25,"endColumn":3},{"ruleId":"769","severity":1,"message":"840","line":9,"column":2,"nodeType":"771","messageId":"772","endLine":9,"endColumn":6},{"ruleId":"769","severity":1,"message":"841","line":10,"column":2,"nodeType":"771","messageId":"772","endLine":10,"endColumn":19},{"ruleId":"769","severity":1,"message":"842","line":11,"column":2,"nodeType":"771","messageId":"772","endLine":11,"endColumn":18},{"ruleId":"769","severity":1,"message":"843","line":13,"column":2,"nodeType":"771","messageId":"772","endLine":13,"endColumn":12},{"ruleId":"789","severity":1,"message":"790","line":17,"column":23,"nodeType":"791","messageId":"792","endLine":17,"endColumn":26,"suggestions":"861"},{"ruleId":"789","severity":1,"message":"790","line":20,"column":24,"nodeType":"791","messageId":"792","endLine":20,"endColumn":27,"suggestions":"862"},{"ruleId":"769","severity":1,"message":"846","line":26,"column":8,"nodeType":"771","messageId":"772","endLine":26,"endColumn":16},{"ruleId":"769","severity":1,"message":"776","line":28,"column":9,"nodeType":"771","messageId":"772","endLine":28,"endColumn":19},{"ruleId":"769","severity":1,"message":"777","line":28,"column":21,"nodeType":"771","messageId":"772","endLine":28,"endColumn":34},{"ruleId":"769","severity":1,"message":"847","line":18,"column":7,"nodeType":"771","messageId":"772","endLine":18,"endColumn":19},{"ruleId":"762","severity":1,"message":"763","line":26,"column":16,"nodeType":"788","messageId":"765","endLine":43,"endColumn":3},{"ruleId":"789","severity":1,"message":"790","line":35,"column":23,"nodeType":"791","messageId":"792","endLine":35,"endColumn":26,"suggestions":"863"},{"ruleId":"769","severity":1,"message":"849","line":92,"column":18,"nodeType":"771","messageId":"772","endLine":92,"endColumn":19},{"ruleId":"769","severity":1,"message":"850","line":243,"column":21,"nodeType":"771","messageId":"772","endLine":243,"endColumn":22},{"ruleId":"762","severity":1,"message":"763","line":59,"column":16,"nodeType":"788","messageId":"765","endLine":76,"endColumn":3},{"ruleId":"789","severity":1,"message":"790","line":68,"column":23,"nodeType":"791","messageId":"792","endLine":68,"endColumn":26,"suggestions":"864"},{"ruleId":"769","severity":1,"message":"846","line":77,"column":8,"nodeType":"771","messageId":"772","endLine":77,"endColumn":16},{"ruleId":"762","severity":1,"message":"763","line":4,"column":16,"nodeType":"788","messageId":"765","endLine":32,"endColumn":3},{"ruleId":"769","severity":1,"message":"775","line":23,"column":16,"nodeType":"771","messageId":"772","endLine":23,"endColumn":24},{"ruleId":"789","severity":1,"message":"790","line":30,"column":23,"nodeType":"791","messageId":"792","endLine":30,"endColumn":26,"suggestions":"865"},{"ruleId":"789","severity":1,"message":"790","line":18,"column":23,"nodeType":"791","messageId":"792","endLine":18,"endColumn":26,"suggestions":"866"},{"ruleId":"769","severity":1,"message":"803","line":19,"column":16,"nodeType":"771","messageId":"772","endLine":19,"endColumn":23},{"ruleId":"789","severity":1,"message":"790","line":53,"column":18,"nodeType":"791","messageId":"792","endLine":53,"endColumn":21,"suggestions":"867"},{"ruleId":"762","severity":1,"message":"763","line":5,"column":16,"nodeType":"788","messageId":"765","endLine":5,"endColumn":71},{"ruleId":"769","severity":1,"message":"803","line":24,"column":16,"nodeType":"771","messageId":"772","endLine":24,"endColumn":23},{"ruleId":"769","severity":1,"message":"846","line":28,"column":8,"nodeType":"771","messageId":"772","endLine":28,"endColumn":16},{"ruleId":"769","severity":1,"message":"803","line":16,"column":16,"nodeType":"771","messageId":"772","endLine":16,"endColumn":23},{"ruleId":"769","severity":1,"message":"846","line":17,"column":8,"nodeType":"771","messageId":"772","endLine":17,"endColumn":16},{"ruleId":"769","severity":1,"message":"803","line":309,"column":16,"nodeType":"771","messageId":"772","endLine":309,"endColumn":23},{"ruleId":"769","severity":1,"message":"868","line":15,"column":9,"nodeType":"771","messageId":"772","endLine":15,"endColumn":15},{"ruleId":"769","severity":1,"message":"869","line":15,"column":17,"nodeType":"771","messageId":"772","endLine":15,"endColumn":26},{"ruleId":"769","severity":1,"message":"870","line":16,"column":9,"nodeType":"771","messageId":"772","endLine":16,"endColumn":14},{"ruleId":"769","severity":1,"message":"871","line":16,"column":16,"nodeType":"771","messageId":"772","endLine":16,"endColumn":24},{"ruleId":"769","severity":1,"message":"872","line":17,"column":9,"nodeType":"771","messageId":"772","endLine":17,"endColumn":17},{"ruleId":"769","severity":1,"message":"873","line":17,"column":19,"nodeType":"771","messageId":"772","endLine":17,"endColumn":30},{"ruleId":"769","severity":1,"message":"874","line":20,"column":3,"nodeType":"771","messageId":"772","endLine":20,"endColumn":7},{"ruleId":"769","severity":1,"message":"803","line":21,"column":3,"nodeType":"771","messageId":"772","endLine":21,"endColumn":10},{"ruleId":"769","severity":1,"message":"875","line":22,"column":13,"nodeType":"771","messageId":"772","endLine":22,"endColumn":25},{"ruleId":"769","severity":1,"message":"876","line":23,"column":10,"nodeType":"771","messageId":"772","endLine":23,"endColumn":19},{"ruleId":"789","severity":1,"message":"790","line":56,"column":10,"nodeType":"791","messageId":"792","endLine":56,"endColumn":13,"suggestions":"877"},{"ruleId":"769","severity":1,"message":"878","line":63,"column":9,"nodeType":"771","messageId":"772","endLine":63,"endColumn":18},{"ruleId":"789","severity":1,"message":"790","line":92,"column":15,"nodeType":"791","messageId":"792","endLine":92,"endColumn":18,"suggestions":"879"},{"ruleId":"769","severity":1,"message":"849","line":726,"column":20,"nodeType":"771","messageId":"772","endLine":726,"endColumn":21},{"ruleId":"789","severity":1,"message":"790","line":12,"column":56,"nodeType":"791","messageId":"792","endLine":12,"endColumn":59,"suggestions":"880"},{"ruleId":"769","severity":1,"message":"881","line":5,"column":8,"nodeType":"771","messageId":"772","endLine":5,"endColumn":19},{"ruleId":"769","severity":1,"message":"803","line":24,"column":3,"nodeType":"771","messageId":"772","endLine":24,"endColumn":10},{"ruleId":"769","severity":1,"message":"875","line":25,"column":13,"nodeType":"771","messageId":"772","endLine":25,"endColumn":25},{"ruleId":"769","severity":1,"message":"882","line":268,"column":23,"nodeType":"771","messageId":"772","endLine":268,"endColumn":38},{"ruleId":"769","severity":1,"message":"809","line":15,"column":25,"nodeType":"771","messageId":"772","endLine":15,"endColumn":36},{"ruleId":"769","severity":1,"message":"809","line":23,"column":35,"nodeType":"771","messageId":"772","endLine":23,"endColumn":46},{"ruleId":"789","severity":1,"message":"790","line":82,"column":20,"nodeType":"791","messageId":"792","endLine":82,"endColumn":23,"suggestions":"883"},{"ruleId":"789","severity":1,"message":"790","line":84,"column":27,"nodeType":"791","messageId":"792","endLine":84,"endColumn":30,"suggestions":"884"},{"ruleId":"789","severity":1,"message":"790","line":85,"column":22,"nodeType":"791","messageId":"792","endLine":85,"endColumn":25,"suggestions":"885"},{"ruleId":"789","severity":1,"message":"790","line":93,"column":26,"nodeType":"791","messageId":"792","endLine":93,"endColumn":29,"suggestions":"886"},{"ruleId":"789","severity":1,"message":"790","line":95,"column":22,"nodeType":"791","messageId":"792","endLine":95,"endColumn":25,"suggestions":"887"},{"ruleId":"789","severity":1,"message":"790","line":96,"column":36,"nodeType":"791","messageId":"792","endLine":96,"endColumn":39,"suggestions":"888"},{"ruleId":"789","severity":1,"message":"790","line":96,"column":60,"nodeType":"791","messageId":"792","endLine":96,"endColumn":63,"suggestions":"889"},{"ruleId":"789","severity":1,"message":"790","line":121,"column":42,"nodeType":"791","messageId":"792","endLine":121,"endColumn":45,"suggestions":"890"},{"ruleId":"769","severity":1,"message":"831","line":270,"column":8,"nodeType":"771","messageId":"772","endLine":270,"endColumn":19},{"ruleId":"789","severity":1,"message":"790","line":45,"column":20,"nodeType":"791","messageId":"792","endLine":45,"endColumn":23,"suggestions":"891"},{"ruleId":"789","severity":1,"message":"790","line":47,"column":27,"nodeType":"791","messageId":"792","endLine":47,"endColumn":30,"suggestions":"892"},{"ruleId":"789","severity":1,"message":"790","line":48,"column":22,"nodeType":"791","messageId":"792","endLine":48,"endColumn":25,"suggestions":"893"},{"ruleId":"789","severity":1,"message":"790","line":56,"column":26,"nodeType":"791","messageId":"792","endLine":56,"endColumn":29,"suggestions":"894"},{"ruleId":"789","severity":1,"message":"790","line":58,"column":22,"nodeType":"791","messageId":"792","endLine":58,"endColumn":25,"suggestions":"895"},{"ruleId":"789","severity":1,"message":"790","line":59,"column":36,"nodeType":"791","messageId":"792","endLine":59,"endColumn":39,"suggestions":"896"},{"ruleId":"789","severity":1,"message":"790","line":59,"column":60,"nodeType":"791","messageId":"792","endLine":59,"endColumn":63,"suggestions":"897"},{"ruleId":"789","severity":1,"message":"790","line":84,"column":42,"nodeType":"791","messageId":"792","endLine":84,"endColumn":45,"suggestions":"898"},{"ruleId":"789","severity":1,"message":"790","line":3,"column":49,"nodeType":"791","messageId":"792","endLine":3,"endColumn":52,"suggestions":"899"},{"ruleId":"789","severity":1,"message":"790","line":2,"column":43,"nodeType":"791","messageId":"792","endLine":2,"endColumn":46,"suggestions":"900"},{"ruleId":"789","severity":1,"message":"790","line":6,"column":22,"nodeType":"791","messageId":"792","endLine":6,"endColumn":25,"suggestions":"901"},{"ruleId":"789","severity":1,"message":"790","line":11,"column":23,"nodeType":"791","messageId":"792","endLine":11,"endColumn":26,"suggestions":"902"},{"ruleId":"789","severity":1,"message":"790","line":12,"column":19,"nodeType":"791","messageId":"792","endLine":12,"endColumn":22,"suggestions":"903"},{"ruleId":"762","severity":1,"message":"763","line":24,"column":8,"nodeType":"788","messageId":"765","endLine":32,"endColumn":2},{"ruleId":"789","severity":1,"message":"790","line":31,"column":24,"nodeType":"791","messageId":"792","endLine":31,"endColumn":27,"suggestions":"904"},{"ruleId":"762","severity":1,"message":"763","line":97,"column":11,"nodeType":"764","messageId":"765","endLine":97,"endColumn":47},{"ruleId":"789","severity":1,"message":"790","line":97,"column":39,"nodeType":"791","messageId":"792","endLine":97,"endColumn":42,"suggestions":"905"},{"ruleId":"762","severity":1,"message":"763","line":111,"column":10,"nodeType":"764","messageId":"765","endLine":111,"endColumn":46},{"ruleId":"789","severity":1,"message":"790","line":111,"column":38,"nodeType":"791","messageId":"792","endLine":111,"endColumn":41,"suggestions":"906"},"@typescript-eslint/explicit-module-boundary-types","Missing return type on function.","ArrowFunctionExpression","missingReturnType","Object pattern argument should be typed.","ObjectPattern","missingArgTypeUnnamed","@typescript-eslint/no-unused-vars","'useState' is defined but never used.","Identifier","unusedVar","'stripComments' is assigned a value but never used.","'error' is assigned a value but never used.","'setError' is assigned a value but never used.","'submitting' is assigned a value but never used.","'setSubmitting' is assigned a value but never used.","'success' is assigned a value but never used.","'setSuccess' is assigned a value but never used.","'firstName' is assigned a value but never used.","'setFirstName' is assigned a value but never used.","'lastName' is assigned a value but never used.","'setLastName' is assigned a value but never used.","'email' is assigned a value but never used.","'setEmail' is assigned a value but never used.","'grade' is assigned a value but never used.","'setGrade' is assigned a value but never used.","FunctionDeclaration","@typescript-eslint/no-explicit-any","Unexpected any. Specify a different type.","TSAnyKeyword","unexpectedAny",["907","908"],"'setUsers' is defined but never used.",["909","910"],["911","912"],["913","914"],["915","916"],"'index' is defined but never used.",["917","918"],["919","920"],"'user' is defined but never used.","'loading' is assigned a value but never used.",["921","922"],["923","924"],["925","926"],"'name' is assigned a value but never used.","'key' is assigned a value but never used.","'userLoading' is assigned a value but never used.",["927","928"],["929","930"],["931","932"],["933","934"],["935","936"],"'request' is defined but never used.",["937","938"],"'Data' is defined but never used.","'uploading' is defined but never used.",["939","940"],["941","942"],["943","944"],["945","946"],["947","948"],["949","950"],["951","952"],["953","954"],["955","956"],["957","958"],["959","960"],["961","962"],"'commonProps' is assigned a value but never used.",["963","964"],["965","966"],["967","968"],["969","970"],["971","972"],["973","974"],["975","976"],["977","978"],"'data' is defined but never used.","'setStepHasChanges' is defined but never used.","'handleUpdateData' is defined but never used.","'setMaxStep' is defined but never used.",["979","980"],["981","982"],"'firebase' is assigned a value but never used.","'blobToBuffer' is assigned a value but never used.",["983","984"],"'e' is defined but never used.","'o' is defined but never used.",["985","986"],["987","988"],["989","990"],["991","992"],["993","994"],["995","996"],["997","998"],["999","1000"],"'scvmunPartnerPrefs' is defined but never used.",["1001","1002"],["1003","1004"],["1005","1006"],["1007","1008"],["1009","1010"],["1011","1012"],["1013","1014"],["1015","1016"],"'target' is assigned a value but never used.","'setTarget' is assigned a value but never used.","'admin' is assigned a value but never used.","'setAdmin' is assigned a value but never used.","'verified' is assigned a value but never used.","'setVerified' is assigned a value but never used.","'user' is assigned a value but never used.","'userVerified' is assigned a value but never used.","'userAdmin' is assigned a value but never used.",["1017","1018"],"'usersData' is assigned a value but never used.",["1019","1020"],["1021","1022"],"'AuthContext' is defined but never used.","'setShowDisabled' is assigned a value but never used.",["1023","1024"],["1025","1026"],["1027","1028"],["1029","1030"],["1031","1032"],["1033","1034"],["1035","1036"],["1037","1038"],["1039","1040"],["1041","1042"],["1043","1044"],["1045","1046"],["1047","1048"],["1049","1050"],["1051","1052"],["1053","1054"],["1055","1056"],["1057","1058"],["1059","1060"],["1061","1062"],["1063","1064"],["1065","1066"],["1067","1068"],["1069","1070"],{"messageId":"1071","fix":"1072","desc":"1073"},{"messageId":"1074","fix":"1075","desc":"1076"},{"messageId":"1071","fix":"1077","desc":"1073"},{"messageId":"1074","fix":"1078","desc":"1076"},{"messageId":"1071","fix":"1079","desc":"1073"},{"messageId":"1074","fix":"1080","desc":"1076"},{"messageId":"1071","fix":"1081","desc":"1073"},{"messageId":"1074","fix":"1082","desc":"1076"},{"messageId":"1071","fix":"1083","desc":"1073"},{"messageId":"1074","fix":"1084","desc":"1076"},{"messageId":"1071","fix":"1085","desc":"1073"},{"messageId":"1074","fix":"1086","desc":"1076"},{"messageId":"1071","fix":"1087","desc":"1073"},{"messageId":"1074","fix":"1088","desc":"1076"},{"messageId":"1071","fix":"1089","desc":"1073"},{"messageId":"1074","fix":"1090","desc":"1076"},{"messageId":"1071","fix":"1091","desc":"1073"},{"messageId":"1074","fix":"1092","desc":"1076"},{"messageId":"1071","fix":"1093","desc":"1073"},{"messageId":"1074","fix":"1094","desc":"1076"},{"messageId":"1071","fix":"1095","desc":"1073"},{"messageId":"1074","fix":"1096","desc":"1076"},{"messageId":"1071","fix":"1097","desc":"1073"},{"messageId":"1074","fix":"1098","desc":"1076"},{"messageId":"1071","fix":"1099","desc":"1073"},{"messageId":"1074","fix":"1100","desc":"1076"},{"messageId":"1071","fix":"1101","desc":"1073"},{"messageId":"1074","fix":"1102","desc":"1076"},{"messageId":"1071","fix":"1103","desc":"1073"},{"messageId":"1074","fix":"1104","desc":"1076"},{"messageId":"1071","fix":"1105","desc":"1073"},{"messageId":"1074","fix":"1106","desc":"1076"},{"messageId":"1071","fix":"1107","desc":"1073"},{"messageId":"1074","fix":"1108","desc":"1076"},{"messageId":"1071","fix":"1109","desc":"1073"},{"messageId":"1074","fix":"1110","desc":"1076"},{"messageId":"1071","fix":"1111","desc":"1073"},{"messageId":"1074","fix":"1112","desc":"1076"},{"messageId":"1071","fix":"1113","desc":"1073"},{"messageId":"1074","fix":"1114","desc":"1076"},{"messageId":"1071","fix":"1115","desc":"1073"},{"messageId":"1074","fix":"1116","desc":"1076"},{"messageId":"1071","fix":"1117","desc":"1073"},{"messageId":"1074","fix":"1118","desc":"1076"},{"messageId":"1071","fix":"1119","desc":"1073"},{"messageId":"1074","fix":"1120","desc":"1076"},{"messageId":"1071","fix":"1121","desc":"1073"},{"messageId":"1074","fix":"1122","desc":"1076"},{"messageId":"1071","fix":"1123","desc":"1073"},{"messageId":"1074","fix":"1124","desc":"1076"},{"messageId":"1071","fix":"1125","desc":"1073"},{"messageId":"1074","fix":"1126","desc":"1076"},{"messageId":"1071","fix":"1127","desc":"1073"},{"messageId":"1074","fix":"1128","desc":"1076"},{"messageId":"1071","fix":"1129","desc":"1073"},{"messageId":"1074","fix":"1130","desc":"1076"},{"messageId":"1071","fix":"1131","desc":"1073"},{"messageId":"1074","fix":"1132","desc":"1076"},{"messageId":"1071","fix":"1133","desc":"1073"},{"messageId":"1074","fix":"1134","desc":"1076"},{"messageId":"1071","fix":"1135","desc":"1073"},{"messageId":"1074","fix":"1136","desc":"1076"},{"messageId":"1071","fix":"1137","desc":"1073"},{"messageId":"1074","fix":"1138","desc":"1076"},{"messageId":"1071","fix":"1139","desc":"1073"},{"messageId":"1074","fix":"1140","desc":"1076"},{"messageId":"1071","fix":"1141","desc":"1073"},{"messageId":"1074","fix":"1142","desc":"1076"},{"messageId":"1071","fix":"1143","desc":"1073"},{"messageId":"1074","fix":"1144","desc":"1076"},{"messageId":"1071","fix":"1145","desc":"1073"},{"messageId":"1074","fix":"1146","desc":"1076"},{"messageId":"1071","fix":"1147","desc":"1073"},{"messageId":"1074","fix":"1148","desc":"1076"},{"messageId":"1071","fix":"1149","desc":"1073"},{"messageId":"1074","fix":"1150","desc":"1076"},{"messageId":"1071","fix":"1151","desc":"1073"},{"messageId":"1074","fix":"1152","desc":"1076"},{"messageId":"1071","fix":"1153","desc":"1073"},{"messageId":"1074","fix":"1154","desc":"1076"},{"messageId":"1071","fix":"1155","desc":"1073"},{"messageId":"1074","fix":"1156","desc":"1076"},{"messageId":"1071","fix":"1157","desc":"1073"},{"messageId":"1074","fix":"1158","desc":"1076"},{"messageId":"1071","fix":"1159","desc":"1073"},{"messageId":"1074","fix":"1160","desc":"1076"},{"messageId":"1071","fix":"1161","desc":"1073"},{"messageId":"1074","fix":"1162","desc":"1076"},{"messageId":"1071","fix":"1163","desc":"1073"},{"messageId":"1074","fix":"1164","desc":"1076"},{"messageId":"1071","fix":"1165","desc":"1073"},{"messageId":"1074","fix":"1166","desc":"1076"},{"messageId":"1071","fix":"1167","desc":"1073"},{"messageId":"1074","fix":"1168","desc":"1076"},{"messageId":"1071","fix":"1169","desc":"1073"},{"messageId":"1074","fix":"1170","desc":"1076"},{"messageId":"1071","fix":"1171","desc":"1073"},{"messageId":"1074","fix":"1172","desc":"1076"},{"messageId":"1071","fix":"1173","desc":"1073"},{"messageId":"1074","fix":"1174","desc":"1076"},{"messageId":"1071","fix":"1175","desc":"1073"},{"messageId":"1074","fix":"1176","desc":"1076"},{"messageId":"1071","fix":"1177","desc":"1073"},{"messageId":"1074","fix":"1178","desc":"1076"},{"messageId":"1071","fix":"1179","desc":"1073"},{"messageId":"1074","fix":"1180","desc":"1076"},{"messageId":"1071","fix":"1181","desc":"1073"},{"messageId":"1074","fix":"1182","desc":"1076"},{"messageId":"1071","fix":"1183","desc":"1073"},{"messageId":"1074","fix":"1184","desc":"1076"},{"messageId":"1071","fix":"1185","desc":"1073"},{"messageId":"1074","fix":"1186","desc":"1076"},{"messageId":"1071","fix":"1187","desc":"1073"},{"messageId":"1074","fix":"1188","desc":"1076"},{"messageId":"1071","fix":"1189","desc":"1073"},{"messageId":"1074","fix":"1190","desc":"1076"},{"messageId":"1071","fix":"1191","desc":"1073"},{"messageId":"1074","fix":"1192","desc":"1076"},{"messageId":"1071","fix":"1193","desc":"1073"},{"messageId":"1074","fix":"1194","desc":"1076"},{"messageId":"1071","fix":"1195","desc":"1073"},{"messageId":"1074","fix":"1196","desc":"1076"},{"messageId":"1071","fix":"1197","desc":"1073"},{"messageId":"1074","fix":"1198","desc":"1076"},{"messageId":"1071","fix":"1199","desc":"1073"},{"messageId":"1074","fix":"1200","desc":"1076"},{"messageId":"1071","fix":"1201","desc":"1073"},{"messageId":"1074","fix":"1202","desc":"1076"},{"messageId":"1071","fix":"1203","desc":"1073"},{"messageId":"1074","fix":"1204","desc":"1076"},{"messageId":"1071","fix":"1205","desc":"1073"},{"messageId":"1074","fix":"1206","desc":"1076"},{"messageId":"1071","fix":"1207","desc":"1073"},{"messageId":"1074","fix":"1208","desc":"1076"},{"messageId":"1071","fix":"1209","desc":"1073"},{"messageId":"1074","fix":"1210","desc":"1076"},{"messageId":"1071","fix":"1211","desc":"1073"},{"messageId":"1074","fix":"1212","desc":"1076"},{"messageId":"1071","fix":"1213","desc":"1073"},{"messageId":"1074","fix":"1214","desc":"1076"},{"messageId":"1071","fix":"1215","desc":"1073"},{"messageId":"1074","fix":"1216","desc":"1076"},{"messageId":"1071","fix":"1217","desc":"1073"},{"messageId":"1074","fix":"1218","desc":"1076"},{"messageId":"1071","fix":"1219","desc":"1073"},{"messageId":"1074","fix":"1220","desc":"1076"},{"messageId":"1071","fix":"1221","desc":"1073"},{"messageId":"1074","fix":"1222","desc":"1076"},{"messageId":"1071","fix":"1223","desc":"1073"},{"messageId":"1074","fix":"1224","desc":"1076"},{"messageId":"1071","fix":"1225","desc":"1073"},{"messageId":"1074","fix":"1226","desc":"1076"},{"messageId":"1071","fix":"1227","desc":"1073"},{"messageId":"1074","fix":"1228","desc":"1076"},{"messageId":"1071","fix":"1229","desc":"1073"},{"messageId":"1074","fix":"1230","desc":"1076"},{"messageId":"1071","fix":"1231","desc":"1073"},{"messageId":"1074","fix":"1232","desc":"1076"},{"messageId":"1071","fix":"1233","desc":"1073"},{"messageId":"1074","fix":"1234","desc":"1076"},{"messageId":"1071","fix":"1235","desc":"1073"},{"messageId":"1074","fix":"1236","desc":"1076"},{"messageId":"1071","fix":"1237","desc":"1073"},{"messageId":"1074","fix":"1238","desc":"1076"},"suggestUnknown",{"range":"1239","text":"1240"},"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct.","suggestNever",{"range":"1239","text":"1241"},"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of.",{"range":"1242","text":"1240"},{"range":"1242","text":"1241"},{"range":"1243","text":"1240"},{"range":"1243","text":"1241"},{"range":"1244","text":"1240"},{"range":"1244","text":"1241"},{"range":"1245","text":"1240"},{"range":"1245","text":"1241"},{"range":"1246","text":"1240"},{"range":"1246","text":"1241"},{"range":"1247","text":"1240"},{"range":"1247","text":"1241"},{"range":"1248","text":"1240"},{"range":"1248","text":"1241"},{"range":"1249","text":"1240"},{"range":"1249","text":"1241"},{"range":"1250","text":"1240"},{"range":"1250","text":"1241"},{"range":"1251","text":"1240"},{"range":"1251","text":"1241"},{"range":"1252","text":"1240"},{"range":"1252","text":"1241"},{"range":"1253","text":"1240"},{"range":"1253","text":"1241"},{"range":"1254","text":"1240"},{"range":"1254","text":"1241"},{"range":"1255","text":"1240"},{"range":"1255","text":"1241"},{"range":"1256","text":"1240"},{"range":"1256","text":"1241"},{"range":"1257","text":"1240"},{"range":"1257","text":"1241"},{"range":"1258","text":"1240"},{"range":"1258","text":"1241"},{"range":"1259","text":"1240"},{"range":"1259","text":"1241"},{"range":"1260","text":"1240"},{"range":"1260","text":"1241"},{"range":"1261","text":"1240"},{"range":"1261","text":"1241"},{"range":"1262","text":"1240"},{"range":"1262","text":"1241"},{"range":"1263","text":"1240"},{"range":"1263","text":"1241"},{"range":"1264","text":"1240"},{"range":"1264","text":"1241"},{"range":"1265","text":"1240"},{"range":"1265","text":"1241"},{"range":"1266","text":"1240"},{"range":"1266","text":"1241"},{"range":"1267","text":"1240"},{"range":"1267","text":"1241"},{"range":"1268","text":"1240"},{"range":"1268","text":"1241"},{"range":"1269","text":"1240"},{"range":"1269","text":"1241"},{"range":"1270","text":"1240"},{"range":"1270","text":"1241"},{"range":"1271","text":"1240"},{"range":"1271","text":"1241"},{"range":"1272","text":"1240"},{"range":"1272","text":"1241"},{"range":"1273","text":"1240"},{"range":"1273","text":"1241"},{"range":"1274","text":"1240"},{"range":"1274","text":"1241"},{"range":"1275","text":"1240"},{"range":"1275","text":"1241"},{"range":"1276","text":"1240"},{"range":"1276","text":"1241"},{"range":"1277","text":"1240"},{"range":"1277","text":"1241"},{"range":"1278","text":"1240"},{"range":"1278","text":"1241"},{"range":"1279","text":"1240"},{"range":"1279","text":"1241"},{"range":"1280","text":"1240"},{"range":"1280","text":"1241"},{"range":"1281","text":"1240"},{"range":"1281","text":"1241"},{"range":"1282","text":"1240"},{"range":"1282","text":"1241"},{"range":"1283","text":"1240"},{"range":"1283","text":"1241"},{"range":"1284","text":"1240"},{"range":"1284","text":"1241"},{"range":"1285","text":"1240"},{"range":"1285","text":"1241"},{"range":"1286","text":"1240"},{"range":"1286","text":"1241"},{"range":"1287","text":"1240"},{"range":"1287","text":"1241"},{"range":"1288","text":"1240"},{"range":"1288","text":"1241"},{"range":"1289","text":"1240"},{"range":"1289","text":"1241"},{"range":"1290","text":"1240"},{"range":"1290","text":"1241"},{"range":"1291","text":"1240"},{"range":"1291","text":"1241"},{"range":"1292","text":"1240"},{"range":"1292","text":"1241"},{"range":"1293","text":"1240"},{"range":"1293","text":"1241"},{"range":"1294","text":"1240"},{"range":"1294","text":"1241"},{"range":"1295","text":"1240"},{"range":"1295","text":"1241"},{"range":"1296","text":"1240"},{"range":"1296","text":"1241"},{"range":"1297","text":"1240"},{"range":"1297","text":"1241"},{"range":"1298","text":"1240"},{"range":"1298","text":"1241"},{"range":"1299","text":"1240"},{"range":"1299","text":"1241"},{"range":"1300","text":"1240"},{"range":"1300","text":"1241"},{"range":"1301","text":"1240"},{"range":"1301","text":"1241"},{"range":"1302","text":"1240"},{"range":"1302","text":"1241"},{"range":"1303","text":"1240"},{"range":"1303","text":"1241"},{"range":"1304","text":"1240"},{"range":"1304","text":"1241"},{"range":"1305","text":"1240"},{"range":"1305","text":"1241"},{"range":"1306","text":"1240"},{"range":"1306","text":"1241"},{"range":"1307","text":"1240"},{"range":"1307","text":"1241"},{"range":"1308","text":"1240"},{"range":"1308","text":"1241"},{"range":"1309","text":"1240"},{"range":"1309","text":"1241"},{"range":"1310","text":"1240"},{"range":"1310","text":"1241"},{"range":"1311","text":"1240"},{"range":"1311","text":"1241"},{"range":"1312","text":"1240"},{"range":"1312","text":"1241"},{"range":"1313","text":"1240"},{"range":"1313","text":"1241"},{"range":"1314","text":"1240"},{"range":"1314","text":"1241"},{"range":"1315","text":"1240"},{"range":"1315","text":"1241"},{"range":"1316","text":"1240"},{"range":"1316","text":"1241"},{"range":"1317","text":"1240"},{"range":"1317","text":"1241"},{"range":"1318","text":"1240"},{"range":"1318","text":"1241"},{"range":"1319","text":"1240"},{"range":"1319","text":"1241"},{"range":"1320","text":"1240"},{"range":"1320","text":"1241"},{"range":"1321","text":"1240"},{"range":"1321","text":"1241"},{"range":"1322","text":"1240"},{"range":"1322","text":"1241"},[1824,1827],"unknown","never",[553,556],[561,564],[5543,5546],[5586,5589],[2262,2265],[2321,2324],[792,795],[843,846],[867,870],[1948,1951],[1986,1989],[2026,2029],[2050,2053],[2591,2594],[1480,1483],[2764,2767],[2810,2813],[2340,2343],[2399,2402],[428,431],[479,482],[503,506],[1582,1585],[1620,1623],[1660,1663],[1684,1687],[2225,2228],[795,798],[846,849],[870,873],[1954,1957],[1992,1995],[2032,2035],[2056,2059],[2597,2600],[388,391],[454,457],[832,835],[1713,1716],[388,391],[454,457],[835,838],[1710,1713],[388,391],[454,457],[838,841],[1715,1718],[387,390],[453,456],[798,801],[1676,1679],[1014,1017],[747,750],[1958,1961],[1676,1679],[2534,2537],[576,579],[2576,2579],[2631,2634],[2657,2660],[2841,2844],[2879,2882],[2919,2922],[2943,2946],[3484,3487],[1948,1951],[2003,2006],[2029,2032],[2213,2216],[2251,2254],[2291,2294],[2315,2318],[2856,2859],[111,114],[68,71],[132,135],[223,226],[453,456],[1091,1094],[2623,2626],[2920,2923]]